<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by brian_d_foy: Introducing Perlanet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Introducing Perlanet</h1>
<h2><a href="/user/brian_d_foy/">brian_d_foy</a> on 2008-03-11T21:13:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>A couple of years ago I started building feed aggregation sites (aka "planets"[1]) using <a href="http://plagger.org/">Plagger</a>. Once you've installed Plagger, it's pretty simple to configure new planets.</p>

<p>Notice I say "once you've installed Plagger". Plagger is one of those CPAN modules which installs about half of CPAN. The <a href="http://cpandeps.cantrell.org.uk/?module=Plagger;perl=latest">CPAN dependencies page</a> currently gives you a 26% chance of successfully installing Plagger.</p></p>
<p><p>The reason for that is clear. Plagger is an incredibly powerful tool. It is an all-purpose tool for slicing and dicing web feeds. It also includes special-case plugins for creating web feeds for many sources that don't currently publish them.</p>

<p>So the net result is that Plagger is large and often hard to install. And most people (or, at least, I) don't use a fraction of its power. I wish I didn't have to install all of Plagger's dependencies in order to just grab a few feeds and combine them into a planet site. Perhaps the Plagger team needs to look at breaking up the distribution into smaller parts that do less.</p>

<p>[<b>Update:</b> <a href="__SLASHLINK__" cid="61588" sect="mainpage" sid="38907" sn="comments" tid="34">Miyagawa  points out</a> that the vast majority of Plagger's dependencies are optional, so I'm overstating the case here. Sorry about that.]</p>

<p>Recently I moved a lot of my sites to a new server. And I really didn't want to go through the pain of installing Plagger. Therefore all of my planets have been dead for a couple of months. And that has been bothering me. But a couple of days ago (prompted by <a href="http://husk.org/blog/arch/feeding_the_daemons.html">something that Paul Mison wrote</a>) I decided to do something about it.</p>

<p>I a few hours of spare time I wrote <a href="http://svn.mag-sol.com/perlanet/">Perlanet</a>[2]. It doesn't do anything at all complex. It reads data from a YAML file, uses <a href="http://search.cpan.org/dist/XML-Feed/">XML::Feed</a> to parse the feeds and then the <a href="http://search.cpan.org/dist/Template-Toolkit/">Template Toolkit</a> to generate the web page (oh, and XML::Feed again to generate the combined feed).</p>

<p>It's very simple. And it's new, so there may well be bugs. But it's there if you find it useful. It's already powering a revived <a href="http://davorg.theplanetarium.org/">planet davorg</a>. My other planets should come back to life over the next few days.</p>

<p>I'm sure I'll be adding more features over the coming weeks, but the main point is to keep it simple.</p>

<p>[1] After <a href="http://www.planetplanet.org/">Planet</a> the Python software that (as far as I know) first popularised this method of aggregating data.</p>
<p>[2] Yes, I know it's a terrible name. But it seemed obvious to me and now I can't shake it.</p></p>


<hr/>



<h2>Thanks, links question</h2>
<h3><a href="/user/markjugg/">markjugg</a> on 2008-03-11T14:51:58</h3>
Thanks, I like this and may use it for my own website.<br><br>I have a question about the del.icio.us integration.  In one case several links were aggregated into one post. In other cases, which link got it's own post.<br><br>What's the difference? Or, why do it both ways?<br>



<blockquote>

<h2>Re:Thanks, links question</h2>
<h3><a href="/user/davorg/">davorg</a> on 2008-03-11T15:16:21</h3>
This is the data duplication issue that Paul mentions in the article I link to. You're seeing the same data from two different sources.<br><br>I've been using the delicious "daily blog posting" tool to wrap up a day's links and add them as a single entry to my blog. But the planet includes both the blog feed and the raw delicious feed. So delicious links appear twice on the planet.<br><br>I'll going to turn off the delicious daily posting tool.





</blockquote>


<h2>Thank you</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2008-03-11T15:23:59</h3>
<p>I hope to be able to use this someday.  I've been needing such a tool but on a lower scale than plagger.  Unfortunately I'm so busy with $NEW_JOB I'm not sure when I'll get to try it out.<nobr> <wbr></nobr>:)</p>



<h2>Validation</h2>
<h3><a href="/user/blech/">blech</a> on 2008-03-11T17:11:12</h3>
Unfortunately, XML::Feed and XML::Atom don't produce <a href="http://feedvalidator.org/check.cgi?url=feed%3A%2F%2Fdavorg.theplanetarium.org%2Fatom.xml" title="feedvalidator.org">valid Atom feeds</a feedvalidator.org>.<br><br>There are, however, two RT tickets (<a href="http://rt.cpan.org/Ticket/Display.html?id=33881" title="cpan.org">#33881</a cpan.org>, adding accessors for some required feed types, and <a href="http://rt.cpan.org/Ticket/Display.html?id=29684" title="cpan.org">#29684</a cpan.org>, which stops 'convert' generating empty summaries) which will help you get towards a valid feed.<br><br>I really should write up the other changes I had to make to genenerate a <a href="http://feedvalidator.org/check.cgi?url=feed%3A%2F%2Fhusk.org%2F%3Fview%3Datom" title="feedvalidator.org">valid Atom feed</a feedvalidator.org>. I think convert needs help with applying an updated date to RSS feeds, for example. There are also issues with RSS and Atom taking different values for the same element (Atom author fields are a real name; RSS author fields are email addresses, with dc:creator used for the name), so my (unpublicised) RSS feed doesn't validate at the moment.



<blockquote>

<h2>Re:Validation</h2>
<h3><a href="/user/davorg/">davorg</a> on 2008-03-12T08:58:09</h3>
Ah. I'm been concentrating so hard on getting the HTML page valid[1] that I'd forgotten to look at the feed.<br><br>I'll apply the patches from RT locally and wait for the next release of XML::Feed to fix the problems.<br><br>[1] Often a pointless task on a planet as so much of the markup is out of your control.



<blockquote>

<h2>Re:Validation</h2>
<h3><a href="/user/blech/">blech</a> on 2008-03-12T09:58:43</h3>
husk.org's (X)HTML isn't <a href="http://validator.w3.org/check?uri=http%3A%2F%2Fhusk.org" title="w3.org">valid</a w3.org> mainly because Vox use lots of attributes, and their visual HTML editor can get quite confused about wrapping spans. At some point, I'll either start running the HTML through Tidy before presenting it, or I'll edit the raw HTML before saving it to Vox.<br><br>Similar attributes cause issues with the Atom feed, but they don't prevent validation, merely cause warnings, because Atom does at least recognise the concept of extensibility.





</blockquote>

</blockquote>


<h2>Plagger dependencies</h2>
<h3><a href="/user/miyagawa/">miyagawa</a> on 2008-03-11T19:41:36</h3>
While I understand the general pain to install Plagger, I should argue a little bit about that "Plagger dev team need to look to slim down the distro" statement.<br><br><a href="http://search.cpan.org/src/MIYAGAWA/Plagger-0.7.17/META.yml" title="cpan.org">http://search.cpan.org/src/MIYAGAWA/Plagger-0.7.17/META.yml</a cpan.org><br><br>Plagger's "requirement" modules are all generic, from Cache, DateTime and LWP to HTML, XML and URI fetch modules. They are all necessary to all kinds of data sources and output as well. Other "plugins" are all pure perl and you can just skip installing the dependencies, which are disabled by default anyway for most plugins.<br><br>Believe me or not, I just replaced my work laptop with new MacBook a few weeks ago, and I installed Plagger and its dependencies with "notest" option of CPAN shell and by typing "n" (don't install) to most "recommended" dependencies, and it was so quick and easy, like done in 10 minutes with no failure at all.<br><br>Besides that, good work on Perlanet. You can steal options and filters from Plagger<nobr> <wbr></nobr>:)



<blockquote>

<h2>Re:Plagger dependencies</h2>
<h3><a href="/user/davorg/">davorg</a> on 2008-03-12T08:49:12</h3>
<p><blockquote> <div><i>Plagger's "requirement" modules are all generic, from Cache, DateTime and LWP to HTML, XML and URI fetch modules. They are all necessary to all kinds of data sources and output as well.</i></div> </blockquote>

<p>You're absolutely right (of course!) The vast majority of the pre-requisites are optional. I had forgotten that.</p>

<p>I still think, however, that you're bundling too much stuff together. If I was bundling Plagger I'd create a core distribution that just read feeds, combined them and published new ones. I'd then relegate all of the extra CustomFeed, Filter, Notify, etc. plugins to other (optional) distributions.</p>

<p>Probably this is just a philosophical disagreement on how software is bundled<nobr> <wbr></nobr>:)</p>



<blockquote>

<h2>Re:Plagger dependencies</h2>
<h3><a href="/user/miyagawa/">miyagawa</a> on 2008-03-12T09:17:19</h3>
Right. Splitting the distro into separate piece of modules, or at least to bundles was the original idea.<br><br>The only reason why we haven't done this was probably because we had never got to the point "yes we're done", and I just didn't want to see people uploading their random Plagger plugins to CPAN that will eventually be unmaintained, abandoned, out of sync with core, and in a poor quality code etc, etc.<br><br>It doesn't take you a minute to name a few Catalyst modules that are "out-of-date" or "was a total mistake, don't use that" state.<br><br>But yes, at this point when Plagger main trunk dev is so quiet, we can strip most plugins from the core, and probably rethink more "recommended" modules to smaller set.





</blockquote>

</blockquote>


<h2>failed to install</h2>
<h3><a href="/user/markjugg/">markjugg</a> on 2008-03-12T03:56:06</h3>
I tried to install this today on a personal hosting account today on a shared system where I have SSH access, but did not want to install the dependencies as root.<br><br>First, I tried several alternatives for using PAR, building a packed file on my Linux laptop and uploading to the FreeBSD server. That failed in part because PAR failed to detect all the dependencies, including some of the XML::Feed namespace modules and some of the DateTime modules. It was also overly conservative about which modules it through needed to be platform-specific, so it claimed not to find some modules on the FreeBSD server, even though they were pure-Perl and already included in the PAR file, but in a Linux specific directory. I believe all the XS modules I needed were already installed on the FreeBSD server, so in theory this PAR approach could have worked.<br><br>So using PAR failed, even with a fair bit of fussing.<br><br>They I tried the <a href="http://www.perlmonks.org/?node_id=361886" title="perlmonks.org">private CPAN directory</a perlmonks.org> option, which eventually failed fatally because my version of "libxml" was older than it wanted for XML::LibXML.<br><br>Of course, using root access it would be easy, but I'll suggest from this experience that the dependency chain of XML::Feed is similar in complexity to that of Plagger from this perspective.<br><br>To make this truly easy to use, I think it would need to be distributed with something like a multi-platform PAR file that has been pre-built on Linux, FreeBSD, etc.<br><br>This isn't really a plagger-vs-perlanet issue, it's a <a href="http://www.perlmonks.org/?node_id=519032" title="perlmonks.org">problem with deploying Perl applications</a perlmonks.org> in general.



<blockquote>

<h2>Re:failed to install</h2>
<h3><a href="/user/davorg/">davorg</a> on 2008-03-12T09:12:24</h3>
<p><blockquote> <div><i>I'll suggest from this experience that the dependency chain of XML::Feed is similar in complexity to that of Plagger from this perspective</i></div> </blockquote>

<p>The dependencies checker indicates that <a href="http://cpandeps.cantrell.org.uk/?module=XML::Feed;perl=latest" title="cantrell.org.uk">XML::Feed has a 44% chance</a cantrell.org.uk> of installing correctly whereas <a href="http://cpandeps.cantrell.org.uk/?module=Plagger;perl=latest" title="cantrell.org.uk">Plagger has a 26% chance</a cantrell.org.uk>. Of course, Plagger uses XML::Feed so Plagger never going to be easier to install than XML::Feed.</p>

<p>I had exactly the same problem with XML::LibXML that you did. My server is a Fedora Core 6 system and I install all of my modules using rpm (building my own when necessary). The version of XML::LibXML available for FC6 is 1.62 and XML::Atom (which is required by XML::Feed) needs at least 1.64. I solved the problem by downloading the source rpm from the Fedora 9 development repository and rebuilding it on my server. Of course, having root access makes that a bit easier<nobr> <wbr></nobr>:-)</p>

<p>It's great that people are interested in Perlanet, but I need to emphasise that it is a two-hour hack that I threw together to solve a particular problem that I had. If other people find it useful then I'll certainly clean it up and make it as easy as possible to install, but currently I don't have the time to space.</p>





</blockquote>


<h2>Optional extras</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2008-03-12T11:56:02</h3>
<p>The likelihood of success calculated by cpandeps only takes into account the mandatory dependencies (those in 'requires' and 'build_requires') and ignores those that are merely recommended - taking recommended modules into account would in fact *reduce* the chance of success.  It's also worth noting that the link you give is for the dependency tree and test results when using latest version of perl (5.10.0) and for any operating system.  It's always a good idea to change the filters to match your perl version and OS.

</p><p>Additionally, it uses test results for the very latest stable version of all the non-core dependencies.  This means that if something needs, for example, Foo::Bar version 2 or higher and you've got version 2 and it works, but version 3 exists on the CPAN and fails horribly, you'll get misleading results.

</p><p>I would like to provide some kind of interface on the web site to let users fiddle with module version numbers at some point - patches would be <em>most</em> welcome and may attract payment in tasty beverages<nobr> <wbr></nobr>:-)</p>



<blockquote>

<h2>Re:Optional extras</h2>
<h3><a href="/user/rurban/">rurban</a> on 2008-03-12T16:52:40</h3>
I just enhanced the probability of Plaggers cygwin deps from 0% to 30% by doing a cpan5.10.0 Feed::Find with installed CPAN::Reporter.
This had 2 FAILs, though it works fine for me.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

