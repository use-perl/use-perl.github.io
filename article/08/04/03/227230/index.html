<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by grinder: This Week on perl5-porters - 23-29 March 2008</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>This Week on perl5-porters - 23-29 March 2008</h1>
<h2><a href="/user/grinder/">grinder</a> on 2008-04-03T22:06:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><h1> <a name="this_week_on_perl5_porters___23_29_march_2008">This Week on perl5-porters - 23-29 March 2008</a> </h1>
<p> <em>&quot;Anyway, a lot of these design changes work together to produce a
smoother result. I confess I haven't thought much about whether they
could be borrowed piecemeal; I have a hard enough time keeping one
fantasy language in my head at a time.&quot;</em> -- Larry Wall, on the
differences in exception handling between Perl 5 and Perl 6.</p></p>
<p><h1> <a name="topics_of_interest">Topics of Interest</a> </h1>

<p>
<h2> <a name="perl_and_cpan_distributors">Perl and CPAN distributors</a> </h2>
<p>The thread wound up this week with Gabor Szabo asking for someone
to summarise the main points made in the discussion, for inclusion
on the Perl5 wiki. The idea is to make life easier for people who
package perl in operating system distributions, by explaining what
they may, should and must do.</p>
<p>Nicholas Clark noted that starting from 5.11, the infrastructure
is nearly all there for the perl5-porters to remove modules from
the core while allowing distributors and local sites to continue
to keep them, in a graceful manner.</p>
<pre>
  modular ecology
  <a href="http://xrl.us/biu9g">http://xrl.us/biu9g</a> </pre>
<p>
<h2> <a name="perl___33536">Perl @ 33536</a> </h2>

<p>The 5.8.9 snapshot is having problems on Vista. Jan Dubois saw
<em>t/op/alarm.t</em> failing but wasn't able to track down why. In
the meantime, he released <code>Win32</code> 0.35 on CPAN. This will be
folded into 5.8.9 to upgrade the <code>Win32</code> therein from its
current development status.</p>
<pre>
  <a href="http://xrl.us/biu9i">http://xrl.us/biu9i</a> </pre>
<p>

<h2> <a name="local____has_an_unwanted_side_effect">local <code>$@</code> has an unwanted side effect</a> </h2>
<p>Larry Wall gave the porters a run down on the current thinking
regarding exception handling in Perl 6. Most of the pieces are in
place, except for a hierarchy of exception object types, as @Larry
are waiting to see the various implementations make of it all.</p>
<pre>
  there is no try
  <a href="http://xrl.us/biu9k">http://xrl.us/biu9k</a>
  <a href="http://xrl.us/biu9n">http://xrl.us/biu9n</a> </pre>
<p>

<h2> <a name="pod_wiki">pod wiki?</a> </h2>
<p>Reini Urban wanted to write in POD for the Perl 5 wiki (that uses
SocialText as a back-end). Michael G. Schwern explained that the
existing plug-in/markup-escape infrastructure was up to the job,
and sketched out how one might go about doing it. Reini was
sufficiently motivated to take a stab at setting it up.</p>
<p>Tels thought that it was silly to write Yet Another Pod-HTML
convertor, and Michael thought that <code>Pod::Simple::HTML</code> should be
close. Aristotle Pagaltzis thought that <code>Pod::POM::View::HTML</code>
wasn't too bad either.</p>
<pre>
  <a href="http://xrl.us/biu9p">http://xrl.us/biu9p</a> </pre>
<p>
<h2> <a name="left_shift_problem"> <code>left_shift</code> problem</a> </h2>
<p>Reini has started to write a document about the guts of the op-tree.
He started with the most trivial of op-codes, the one that performs
a left bitshift (<code>&lt;&lt;</code>). Unfortunately he became side-tracked
over the way signed and unsigned integers are used depending on
whether the <code>use integer</code> pragma is in force. Yitzchak
Scott-Thoennes explained the reason why things were why they are.</p>
<pre>
  hard left turn right
  <a href="http://xrl.us/biu9r">http://xrl.us/biu9r</a> </pre>
<p>
<h2> <a name="append_64_suffix_to_some_of_the_installed_files">Append &quot;64&quot; suffix to some of the installed files</a> </h2>
<p>S&#233;rgio Durigan J&#250;nior continued his quest to get 32- and 64-bit
perls coexisting peacefully on his machine. Abigail showed how many
different perls could live in the same directory tree, sharing
common pure-Perl modules and keeping binary-incompatible files
separate.</p>
<p>Dominic Dunlop remarked that Apple had managed to do just that already,
but unfortunately no-one outside Apple had managed to replicate what
they had done. Nicholas Clark mentioned that Edward Moy had some raw
patch files to do just that, but didn't have the time to tidy them
up (nor did Nicholas). Sounds like a nice self-contained task...</p>
<p>Other discussion in the thread talked about how perl is installed
on HP-UX.</p>
<pre>
  more bits
  <a href="http://xrl.us/biu9t">http://xrl.us/biu9t</a> </pre>

<p>
<h2> <a name="too_late_for__co">Too late for -Co</a> </h2>
<p>Alberto Sim&#245;es wanted to know how he could make some old scripts
work with 5.10, since they have <code>-Co0</code> on the shebang line. Aristotle
Pagaltzis recommended <code>use open OUT =&gt; ':utf8', ':std'</code> as a
suitable replacement. Rafael Garcia-Suarez explained that <code>-C</code> had
received this treatment as a consequence of a bug report, and that
there was a TODO item recorded that explained what needed to be
done to have the old behaviour reinstated (this time, without bugs).</p>

<pre>
  get it right
  <a href="http://rt.perl.org/rt3/Public/Bug/Display.html?id=34087">http://rt.perl.org/rt3/Public/Bug/Display.html?id=34087</a>
  <a href="http://xrl.us/biu9v">http://xrl.us/biu9v</a> </pre>
<p>
<h2> <a name="making_pl2bat_pl_more_robust">Making <em>pl2bat.pl</em> more robust</a> </h2>
<p>Jan Dubois had been exploring approaches to make <code>pl2bat.pl</code>, since
depending on whether an executable <em>foo</em> anything, as opposed to a
specific <em>foo.bat</em>, exists in the current directory or not, you can
wind up running something else that the program you thought you were
going to run. Spaces in path names add to the fun.</p>

<p>With a series of four fall-through tests, Jan thought he had all the
bases covered, and defied anyone to come up with a scenario that
could get past the last case and hit the &quot;Can't find full path&quot;
error message.</p>
<p>Jan also hoped that there were no longer any serious Perl users
stuck on Win9X.</p>
<pre>
  going batty
  <a href="http://xrl.us/biu9x">http://xrl.us/biu9x</a> </pre>
<p>
<hr>
<h1> <a name="patches_of_interest">Patches of Interest</a> </h1>

<p>
<h2> <a name="too_much_sv_c_consting">Too much <em>sv.c</em> consting</a> </h2>
<p>Nicholas Clark undid the final batch of consting from last week
that Steven Schubiger had applied to <em>sv.c</em>. What is more, it
was the second time he had had to roll back the same change.</p>
<p>Unfazed, Stephen delivered the fourteenth patch in the series.
Andy Lester explained that he had considered doing what
Steven is currently doing, when he was on his consting quest,
but had considered that the added value wasn't worth the price.</p>
<pre>
  <a href="http://xrl.us/biu9z">http://xrl.us/biu9z</a> </pre>

<p>
<h2> <a name="borg_parent_pm">Borg <em>parent.pm</em> </a> </h2>
<p>Rafael Garcia-Suarez edited <em>base.pm</em> to recommend <em>parent.pm</em>
in its place, and ask Max &quot;Corion&quot; Maischein to release a new version
of <code>parent</code> to synchronise CPAN with blead. Some minor problems
cropped up that Jerry D. Hedden tidied up.</p>

<pre>
  debased
  <a href="http://xrl.us/biu93">http://xrl.us/biu93</a> </pre>
<p>
<h2> <a name="configure_com_and_vms_c_fixes"> <em>configure.com</em> and <em>vms.c</em> fixes</a> </h2>
<p>John E. Malmberg delivered some urgent patches to get VMS to build
out of the box. H.Merijn Brand handled part of the patch through
the brand new metaconfig infrastructure. Unfortunately this caused
other platforms to complain unnecessarily. H.Merijn wasn't sure if
he was doing something wrong, or whether the approach cannot work.</p>
<pre>

  <a href="http://xrl.us/biu95">http://xrl.us/biu95</a> </pre>
<p>
<h2> <a name="documentation_fix_for_perlfunc_shutdown">Documentation fix for perlfunc/shutdown</a> </h2>
<p>Paul Fenwick documented the return values of <code>shutdown</code> (whose
existence I had so far managed to ignore). Nicholas Clark tried to
improve Paul's prose and Paul came back with yet a better version.
Unapplied.</p>
<pre>
  and turn the lights out
  <a href="http://xrl.us/biu97">http://xrl.us/biu97</a> </pre>

<p>
<h2> <a name="solaris_build_warnings">Solaris build warnings</a> </h2>
<p>Jerry D. Hedden found some warnings when building blead on Solaris.
Andy Dougherty traced this to arrival of the <code>PERL_BITFIELD16</code>
typedef and proposed a minimal patch that cast things together
correctly. Or at least silently. Unapplied.</p>
<pre>
  <a href="http://xrl.us/biu99">http://xrl.us/biu99</a> </pre>
<p>
<h2> <a name="revising_perlhack_pod">Revising <em>perlhack.pod</em> </a> </h2>

<p>Leon Brocard updated the documentation to <code>perlhack</code> to take into
account the changes to <em>perlmain.c</em>, and some notes on using <code>valgrind</code>.
Applied after a resend.</p>
<pre>
  <a href="http://xrl.us/bivab">http://xrl.us/bivab</a> </pre>
<p>
<h2> <a name="do_not_use_svtypemask_to_prevent_cleaning_of_pl_fdpid_and_pl_strtab">Do not use <code>SVTYPEMASK</code> to prevent cleaning of <code>PL_fdpid</code> and <code>PL_strtab</code> </a> </h2>

<p>As part of his ongoing Kurila experiment (a fork of the perl5
codebase), Gerard Goossen traced down some problems that exist in
the Perl array implementation.</p>
<p>Nicholas Clark used the information to provoke an assertion failure
when running a <code>make minitest</code>. He applied Gerard's change, and
suggested that there are still some things that need to be sorted
out.</p>
<pre>
  <a href="http://xrl.us/bivad">http://xrl.us/bivad</a> </pre>
<p>
<hr>
<h1> <a name="new_and_old_bugs_from_rt">New and old bugs from RT</a> </h1>
<p>

<h2> <a name="posix__sigset_double_free_with_threads___36653_"> <code>POSIX::SigSet</code> double free with threads (#36653)</a> </h2>
<p>Steve Peters took another look at this problem from 2005, and
discovered that while 5.8.8 ran without error, blead panicked with
a free from wrong pool.</p>
<pre>
  ungood
  <a href="http://xrl.us/bivaf">http://xrl.us/bivaf</a> </pre>
<p>
<h2> <a name="segfault_on__isa_push_after_symbol_table_delete___52074_">Segfault on <code>@ISA</code> push after symbol table delete (#52074)</a> </h2>

<p>Peter Scott posted a one-liner to make blead dump core. Nicholas Clark
noted that since 5.8.8 is immune, it must be a problem in the new MRO
code.</p>
<pre>
  nice self-contained task
  <a href="http://xrl.us/bivah">http://xrl.us/bivah</a> </pre>
<p>
<h2> <a name="text__wrap__wrap___generates_a_segfault_with_cyrillic_characters_when_the_utf8_flag_is_turned_on___52104_"> <code>Text::Wrap::wrap()</code> generates a segfault with Cyrillic characters when the utf8 flag is turned on (#52104)</a> </h2>
<p>Fr&#233;d&#233;ric Buclin filed a ticket that was turned arose in the
development of Bugzilla (heh). Nicholas reduced it to a simple
matter of a regexp using <code>pos()</code> inside a substitution, and tracing
back, realised that the bug had been lying in wait, ever since it
checked in, back in 2000.</p>

<p>It was then a simple matter to fix it in change #33580. As a bonus,
this should make it into 5.8.9-to-be. Fr&#233;d&#233;ric wondered what
he could do in the meantime. Nicholas suggested one approach and
Robin Barker another. Aristotle Pagaltzis, who wrote the current
implementation of <code>Text::Wrap::wrap</code> (and built it for speed),
suggested downgrading to a previous version.</p>
<pre>
  that wraps it up
  <a href="http://xrl.us/bivaj">http://xrl.us/bivaj</a> </pre>
<p>
<h2> <a name="posix__strftime_hangs_on__z_under_cygwin___52126_"> <code>POSIX::strftime</code> hangs on <code>%Z</code> under cygwin (#52126)</a> </h2>

<p>Eric Roode reported a bug in 5.8.8 that had previously been reported,
and fixed, with change #29350. Nicholas Clark announced that said
change was included in 5.8.9. Steve Peters showed how changing the
final argument to <code>strftime</code> prevented the process from hanging
in the meantime.</p>
<pre>
  tis a matter of time
  <a href="http://xrl.us/bivam">http://xrl.us/bivam</a> </pre>
<p>
<h2> <a name="build_error_on_aix___52188_">Build error on AIX (#52188)</a> </h2>
<p>Shanthi Muthu Srinivasan was unable to build 5.8.8 on AIX, the
process blowing up when trying to link <code>miniperl</code>. Dominic Dunlop
suggested that it could be due to running out of disk space, and
that Activestate have an Activeperl distribution for AIX that may
be worth a try. H.Merijn Brand suggested a special incantation for
64-bit AIX.</p>

<p>No further information was forthcoming.</p>
<pre>
  <a href="http://xrl.us/bivao">http://xrl.us/bivao</a> </pre>
<p>
<h2> <a name="xs_error_in_win32__console___writeconsoleinput___52216_">XS error in <code>Win32::Console::_WriteConsoleInput</code> (#52216)</a> </h2>
<p>Ed Sanman traced down a problem of console misbehaviour to what is
probably a case of bad cut'n'paste. Not confirmed.</p>
<pre>
  watch your stack
  <a href="http://xrl.us/bivaq">http://xrl.us/bivaq</a> </pre>

<p>
<h2> <a name="perl5_bug_summary">Perl5 Bug Summary</a> </h2>
<pre>
  294 new + 1509 open = 1803 (+8)
  <a href="http://xrl.us/bivas">http://xrl.us/bivas</a>
  <a href="http://rt.perl.org/rt3/NoAuth/perl5/Overview.html">http://rt.perl.org/rt3/NoAuth/perl5/Overview.html</a> </pre>
<p>
<hr>
<h1> <a name="new_core_modules">New Core Modules</a> </h1>

<dl>
<dt> <strong> <a name="db_file_1_817">DB_File 1.817</a> </strong></dt>

<dd>
<p>Paul Marquess synchronised blead and CPAN.</p>
</dd>
<dd>
<pre>
  <a href="http://xrl.us/bivau">http://xrl.us/bivau</a> </pre>
</dd>

</dl>
<p>
<hr>
<h1> <a name="this_is_the_bbc">This is the BBC</a> </h1>
<dl>
<dt> <strong> <a name="regexp_optimizer_0_15">Regexp-Optimizer 0.15</a> </strong></dt>

<dd>
<p>Andreas K&#246;nig discovered, somewhat belatedly, that change #28868 broke
Dan Kogai's <code>Regexp::Optimizer</code> package.</p>
</dd>
<dd>
<pre>

  <a href="http://xrl.us/bivaw">http://xrl.us/bivaw</a> </pre>
</dd>

</dl>
<p>
<hr>
<h1> <a name="in_brief">In Brief</a> </h1>
<p>Nicholas Clark applied Dominic Dunlop's patches to tidy up <strong>failing
tests on PPC64</strong>.</p>
<pre>
  <a href="http://xrl.us/bivay">http://xrl.us/bivay</a> </pre>

<p>Vincent Pit spotted an <strong>apidoc mismatch for <code>Perl_magic_clearhint</code> </strong>
and offered a patch, so Rafael applied it.</p>
<pre>
  wild cut'n'paste
  <a href="http://xrl.us/biva2">http://xrl.us/biva2</a> </pre>
<p>Niko Tyni spotted a nasty <strong>typo in <code>IO::Socket::INET</code> </strong> where a
hash key was named &quot;upd&quot; instead of &quot;udp&quot;, and also offered a patch.
H.Merijn applied the patch. I wonder if we could have tested for
that.</p>

<pre>
  nice catch
  <a href="http://xrl.us/biva4">http://xrl.us/biva4</a> </pre>
<p>chromatic tweaked the usage <strong>documentation for <em>utils/dprofpp.PL</em> </strong>. Applied.</p>
<pre>
  being consistent
  <a href="http://xrl.us/biva6">http://xrl.us/biva6</a> </pre>
<p>Gerard Goossen also rejigged the <strong>MAD dump XML escape regexp</strong>, thus
fixing a pile of tests that used to fail when run madly.</p>

<pre>
  <a href="http://xrl.us/bivbc">http://xrl.us/bivbc</a> </pre>
<p>Yitzchak Scott-Thoennes thinks that <strong> <code>Devel::Cover</code> in the core</strong> would
be a marvellous idea.</p>
<pre>
  <a href="http://xrl.us/bivbe">http://xrl.us/bivbe</a> </pre>
<p>Nicholas Clark wrote some code to <strong>detect <code>Configure</code> test goofs</strong> and
H.Merijn Brand folded it into the configuration infrastructure.</p>

<pre>
  <a href="http://xrl.us/bivbg">http://xrl.us/bivbg</a> </pre>
<p>David Cantrell hopes that Dave Mitchell's <strong>perl 5.10.1 plan</strong> includes
Jarkko Hietaniemi's patch for <code>Encode::Alias</code>.</p>
<pre>
  20 houses down from the beast
  <a href="http://xrl.us/bivbi">http://xrl.us/bivbi</a> </pre>
<p>The <strong>bug tracking system</strong> thread attracted more discussion this week.</p>

<pre>
  <a href="http://xrl.us/bivbk">http://xrl.us/bivbk</a> </pre>
<p>S&#233;rgio Durigan J&#250;nior pinged the list about his <strong>problems when setting
the libraries' installation path</strong>.</p>
<pre>
  <a href="http://xrl.us/bivbn">http://xrl.us/bivbn</a> </pre>
<p>Jim Cromie had <strong>a small interesting task</strong> to do, something about
separate debug info.</p>

<pre>
  didn't set the world on fire
  <a href="http://xrl.us/bivbp">http://xrl.us/bivbp</a> </pre>
<p>Lincoln Stein absorbed a <strong> <code>CGI::Carp</code> typo difference between
blead and CPAN</strong>.</p>
<pre>
  <a href="http://xrl.us/bivbr">http://xrl.us/bivbr</a> </pre>
<p>Peter Scott took a bash at <strong>glob in scalar context</strong>, offering a patch
to reset the iterator in certain circumstances. Yitzchak showed how
such a change would lead to even harder to debug problems.</p>

<pre>
  an oldie but a goodie
  <a href="http://xrl.us/bivbt">http://xrl.us/bivbt</a> </pre>
<p>It would appear that change #26980, regarding an improvement
to <code>PERL_DONT_CREATE_GVSV</code>, would be the reason for <strong>test
failures in Math-Pari</strong>.</p>
<pre>
  <a href="http://xrl.us/bivbv">http://xrl.us/bivbv</a> </pre>
<p>

<hr>
<h1> <a name="todo_of_the_week">TODO of the week</a> </h1>
<p>A task that need a little C knowledge</p>
<p>
<h2> <a name="weed_out_needless_perl_unused_arg">Weed out needless PERL_UNUSED_ARG</a> </h2>
<p>The C code uses the macro <code>PERL_UNUSED_ARG</code> to stop compilers warning about
unused arguments. Often the arguments can't be removed, as there is an
external constraint that determines the prototype of the function, so this
approach is valid. However, there are some cases where <code>PERL_UNUSED_ARG</code>
could be removed. Specifically</p>

<ul>
<li>
<p>The prototypes of (nearly all) static functions can be changed</p>
</li>
<li>
<p>Unused arguments generated by short cut macros are wasteful - the short cut
macro used can be changed.</p>
</li>
</ul>
<p>
<h2> <a name="last_week_s_summary">Last week's summary</a> </h2>
<p>Actually, two weeks ago. Sam Vilain explained how one could go
about cherry-picking patches with git and promised to create a
new version of the repository in UTF-8, so that people with
non-Latin-1 names may be represented faithfully. (Hi Slaven!)</p>
<p>In mail to the list, I had complained about &quot;foo&quot; being
rendered as ``foo'' in the summaries. It turns out that this is
because at some point I switched my POD-to-HTML conversion
from blead's <code>pod2html</code> to that of maint.</p>

<p>It turns out that lots of bugfixes went into the 5.10 release
of <code>Pod::Html</code>, but as the module is not dual-lifed, it is
difficult to upgrade older perls. So I volunteered to take
care of dual-lifing it. Look for 1.09_01 on a CPAN mirror
near you soon.</p>
<pre>
  This Week on perl5-porters - 9-15 March 2008
  <a href="http://xrl.us/bik5f">http://xrl.us/bik5f</a> </pre>
<pre>
  This Week on perl5-porters - 16-22 March 2008
  <a href="http://xrl.us/bivbx">http://xrl.us/bivbx</a> </pre>
<p>
<h2> <a name="about_this_summary">About this summary</a> </h2>

<p>This summary was written by David Landgren.</p>
<p>Weekly summaries are published on <em> <a href="http://use.perl.org/">http://use.perl.org/</a> </em> and posted
on a mailing list, (subscription: <em> <a href="mailto:perl5-summary-subscribe@perl.org">perl5-summary-subscribe@perl.org</a> </em>).
The archive is at <em> <a href="http://dev.perl.org/perl5/list-summaries/">http://dev.perl.org/perl5/list-summaries/</a> </em>.
Corrections and comments are welcome.</p>
<p>If you found this summary useful, please consider contributing to
the Perl Foundation to help support the development of Perl.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

