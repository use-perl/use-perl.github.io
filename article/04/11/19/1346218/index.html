<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by rafael: This Week on perl5-porters (Nov 01-09 2004)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>This Week on perl5-porters (Nov 01-09 2004)</h1>
<h2><a href="/user/rafael/">rafael</a> on 2004-11-19T13:38:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>In this beginning of November, the porters have discussed about regression tests, using new functions from the C library when they're found, the roadmap for perl 5.10, optimisations, signals, and other miscellaneous topics.</p>
<p><h3>Tests failing when core extensions not built</h3>
<p>It's possible to configure perl without some built-in extensions,
and this causes some tests to fail, so Nicholas was wondering
about determining which extensions aren't enabled and skipping
the corresponding tests.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-10/msg00637.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-10/msg00637.html</a> </pre>
<p>
<h3>Detecting <code>strlcat()</code> and <code>strlcpy()</code> in Configure</h3>
<p>H. Merijn Brand continued working on detecting these functions,
which are safer versions of <code>strncat</code> and <code>strncpy</code>.
Craig Berry made it work on VMS. Adding the detection to
Configure makes it easier for module writers to know if
the functions are available.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-10/msg00613.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-10/msg00613.html</a> </pre>
<p>
<h3>Cwd test failing</h3>
<p>Yitzchak Scott-Thoennes reported (bug #32272) this test failure, which
was later found to be ignorable. Yitzchak also mentioned that
<code>Cwd</code> and <code>File::Spec</code> have been repackaged as <code>PathTools</code>.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00065.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00065.html</a> </pre>
<p>
<h3>getXXXent functions break after recursing to grow buffer</h3>
<p>Bug #32154, apparently caused by RedHat's patched glibc, as it didn't
show up in other distributions.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-10/msg00573.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-10/msg00573.html</a> </pre>
<p>Nicholas incidentally pointed out that source code is available directly</p>
<pre>
  <a href="ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-5.8.x/">ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-5.8.x/</a>
  <a href="ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-current/">ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-current/</a> </pre>
<p>and a repository browser is at</p>
<pre>
  <a href="http://public.activestate.com/cgi-bin/perlbrowse">http://public.activestate.com/cgi-bin/perlbrowse</a> </pre>
<p>
<h3>Roadmap for 5.10</h3>
<p>Rafael listed points in the roadmap for 5.10. Michael Schwern added
that <code>Module::Build</code> and <code>CPANPLUS</code> should be put into the core,
and Randy Sims pointed out some work that needs done on <code>M::B</code> first.
Also mentioned was incorporating a minimal subset of <code>Inline</code>.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00115.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00115.html</a> </pre>
<p>
<h3>Peephole optimization</h3>
<p>Tassilo von Parseval is working on optionalizing the peephole
optimizer. Rafael pointed out that the intent of this is to make
sure that the optree produced by the compiler is correct, and Hugo
added that it could also be used for avoiding certain optimizations
and allowing other aggressive optimizations.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00150.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00150.html</a> </pre>
<p>Tassilo investigated further which peephole optimizations are
currently mandatory for tests to pass. Jim Cromie suggested that he
mess with <code>B::Generate</code> and <code>optimizer</code>, which are in need of work.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00185.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00185.html</a> </pre>
<p>
<h3>Undefining signals</h3>
<p>Ben Morrow submitted, among other proposals, that</p>
<pre>
  $SIG{FOO} = undef;</pre>
<p>try to block the signal <code>FOO</code>, then, failing that, <code>IGNORE</code> it.
Nick Ing-Simmons brought up the problem of unmentioned signals
being <code>undef</code>, and the badness of blocking them (in particular,
<code>$SIG{INT}</code>).</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00234.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00234.html</a> </pre>
<p>
<h3>Sharing hash values</h3>
<p>Tels was dismayed by the inefficiency of the common "seen hash" idiom</p>
<pre>
  $seen{foo} = 1;
  if (exists $seen{foo}) {<nobr> <wbr></nobr>... }</pre>
<p>Even using <code>undef</code> doesn't save much, so he wondered how he could
share the undef for all the hash values. It turns out Gisle Aas has
already done this with <code>Array::RefElem</code>. Randy Sims suggested that
we really want a set instead, for which Tels found <code>Set::Object</code>.</p>
<p>If you're like I was before doing the summaries, scanning for neat
ideas, this thread is one you don't want to miss.</p>
<pre>
  <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00288.html">http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2004-11/msg00288.html</a> </pre>
<p>
<h3>In brief</h3>
<p>Allen Smith successfully trolled with an "-ize" vs. "-ise" comment
(actually I found the discussion interesting).</p>
<p>Yitzchak Scott-Thoennes fixed <code>do &quot;c:/foo.pl&quot;</code> on Cygwin.</p>
<p>David Nicol discussed writing a distributed (network) lock manager.</p>
<p>Gisle Aas fixed a stack corruption in <code>Tk</code>, which fixing filled
H.Merijn Brand with joy.</p>
<p>Jim Cromie continued work on optree tests, a problem with
interleaving stdout and stderr on VMS and Cygwin.</p>
<p>Steve Peters resuscitated at least 16 old bugs on RT, only to crush
most of them beneath his shoe.</p>
<p>
<h3>References</h3>
<p>The thread for bug number $BUGNUM can be found at
http://rt.perl.org/rt3/Ticket/Display.html?id=$BUGNUM.</p>
<p>
<h3>About this summary</h3>
<p>This summary was written by Scott Lanning. Summaries are published
weekly at <a href="http://use.perl.org/">http://use.perl.org/</a> and posted to a mailing list whose
subscription address is <a href="mailto:perl5-summary-subscribe@perl.org.">perl5-summary-subscribe@perl.org.</a> The archive
is at <a href="http://dev.perl.org/perl5/list-summaries/.">http://dev.perl.org/perl5/list-summaries/.</a> Comments and
corrections are welcome.</p></p>


<hr/>



<h2>Sharing hash values - another solution</h2>
<h3><a href="/user/btilly/">btilly</a> on 2004-11-19T17:39:11</h3>
The trick that I've seen is to entirely avoid creating the values:<blockquote><div> <tt> my %seen;<br> undef @seen{@special};<br> for (@things) {<br>&nbsp; &nbsp;if (exists $seen{$_}) {<br>&nbsp; &nbsp; &nbsp;...<br>&nbsp; &nbsp;}<br> }</tt> </div></blockquote>Cheers,<br>
Ben



<blockquote>

<h2>Re:Sharing hash values - another solution</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-11-19T21:00:38</h3>
Wouldn't that simply store undefs implicitly?



<blockquote>

<h2>Re:Sharing hash values - another solution</h2>
<h3><a href="/user/btilly/">btilly</a> on 2004-11-19T21:34:40</h3>
Yes, that is the effect, but the goal is to achieve the effect using as little time as possible, and that solution does it faster.



<blockquote>

<h2>Re:Sharing hash values - another solution</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-11-19T22:02:29</h3>
Oh; that is correct, but it wasn't clear that that was your point. The thread in point talks about memory wasted by duplicate undef scalars.



<blockquote>

<h2>Re:Sharing hash values - another solution</h2>
<h3><a href="/user/btilly/">btilly</a> on 2004-11-19T22:53:32</h3>
My understanding at one point was that that solution avoided creating duplicate undef scalars.  But that doesn't seem to be the case now (at least according to Devel::Size).





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

