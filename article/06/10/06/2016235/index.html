<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by grinder: This Week on perl5-porters - 25 September-1 October 2006</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>This Week on perl5-porters - 25 September-1 October 2006</h1>
<h2><a href="/user/grinder/">grinder</a> on 2006-10-06T20:14:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p> <i>&quot;Well not since that time you thought that embedding perl was a
good idea in the first place&quot;</i> -- Johnathon Stowe, commenting on
Marc Lehmann saying that yes, he loved embedding perl in other
applications and that no, he didn't do drugs.</p></p>
<p><h1> <a name="topics_of_interest">Topics of Interest</a> </h1>
<p>
<h2> <a name="wrapping_up_eval_handling_in_blead_s_regexp_engine">Wrapping up EVAL handling in blead's regexp engine</a> </h2>
<p>Dave Mitchell checked in a couple of patches to fix the breakage
that had crept in during the recent overhaul to the regexp engine.
Yves Orton liked what he saw, and suggested a few ways to improve
the maintainability.</p>
<p>Dave told him to go for it. And so he did.</p>
<pre>
  Mad scientists at work
  <a href="http://xrl.us/r4us">http://xrl.us/r4us</a> </pre>
<p>
<h2> <a name="pod_errors_in_perlref_pod">pod errors in <code>perlref.pod</code> </a> </h2>
<p>David Landgren noticed some formatting errors when looking at
<code>perlref</code> in blead. Rafael Garcia-Suarez wondered what podlator
was being used, since the pod checked out as valid. The
podlator in question was the bundled <code>Pod::Perldoc</code>, which led
David to wonder why something like Russ Alberry's podlators
code. Russ explained what was holding this up.</p>
<pre>
  <a href="http://xrl.us/r4ut">http://xrl.us/r4ut</a> </pre>
<p>

<h2> <a name="nick_ingsimmons">Nick Ing-Simmons</a> </h2>
<p>It was with great sadness that the porters learnt that Nick Ing-Simmons
had died of a heart attack. Nick was one of the longest serving
contributors to Perl's development, and we are all poorer for his
loss.  I can recall many a time when people puzzled over things
were done in a particular way in the code, until Nick would chip
in with a a cogent explanation of why. It will be harder without
him.</p>
<pre>
  <a href="http://xrl.us/r4uu">http://xrl.us/r4uu</a>
  <a href="http://xrl.us/r4uv">http://xrl.us/r4uv</a> </pre>
<p>The Perl Foundation ran the following obituary</p>
<pre>
  Thanks Nick
  <a href="http://news.perl-foundation.org/2006/09/thanks_nick.html">http://news.perl-foundation.org/2006/09/thanks_nick.html</a> </pre>

<p>
<h2> <a name="unhandled_exceptions_in_shared_libraries">Unhandled exceptions in shared libraries</a> </h2>
<p>Kalpana Shetty explained a problem with shared libraries throwing
an exception, and the perl program dumping core on a <code>SIGABRT</code>
signal. No takers, possibly since the exact nature of the shared
library wasn't specified.</p>
<pre>
  <a href="http://xrl.us/r4uw">http://xrl.us/r4uw</a> </pre>
<p>
<h2> <a name="reentr_reshuffle"> <code>reentr</code> reshuffle</a> </h2>

<p>Jarkko Hietaniemi looked at bug #40256 and a few other bits and
pieces, and rejigged <em>reentr.pl</em> to make everyone happy. In fact,
Marc Lehmann was positively ecstatic.</p>
<pre>
  Get down
  <a href="http://xrl.us/r4ux">http://xrl.us/r4ux</a> </pre>
<p>
<h2> <a name="seek_beyond_length">seek beyond length</a> </h2>
<p>Juerd Waalboer wanted to know whether it was reasonable to seek,
upon a scalar opened for IO, beyond its length. And especially
what happens as a result. Dave Mitchell confirmed that Bad Things
were indeed happening, that probably should be fixed.</p>
<pre>

  oops
  <a href="http://xrl.us/r4uy">http://xrl.us/r4uy</a> </pre>
<p>I think that this may be what inspired Jarkko to file cook up the
following patch:</p>
<pre>
  Don't talk to strangers
  <a href="http://xrl.us/r4uz">http://xrl.us/r4uz</a> </pre>
<p>
<h2> <a name="finding_the__correct__line_number">Finding the *correct* line number</a> </h2>
<p>Curtis &quot;Ovid&quot; Poe wanted to disambiguate two calls to a function
on the same line with <code>caller</code>. Dave Mitchell mentioned that he
had proposed to spend two bytes per op, which, at the expense of
a certain increase in memory consumption, would clear these sorts
of problems up, once and for all.</p>

<pre>
  <a href="http://xrl.us/r4u2">http://xrl.us/r4u2</a> </pre>
<p>
<h2> <a name="fixing_up_lndir_to_improve_source_tree_symlinking">Fixing up <code>lndir</code> to improve source tree symlinking</a> </h2>
<p>Jim Cromie made a small change to <code>lndir</code> to make it behave more
nicely in the presence of modified files (which could other clobber
the pristine base tree). This kicked off a discussion with John
Peacock, Rafael Garcia-Suarez and Andy Dougherty about other tricks
that can be used to deal with similar sorts of home experiments.</p>
<pre>

  <a href="http://xrl.us/r4u3">http://xrl.us/r4u3</a> </pre>
<p>
<h2> <a name="error_message_changes_in_blead">Error message changes in <code>blead</code> </a> </h2>
<p>Yves Orton mourned the passing of pseudo-hashes, and their attendant
<code>Can't coerce array into hash</code> error message. Nicholas Clark
reasoned that it should be possible to change the current <code>Not a
HASH reference</code> to something like <code>can't coerce ARRAY reference
to HASH reference</code>, but wondered if it would break anything.</p>

<p>Yves pointed out that since the message had already changed, the
issue was moot. Nicholas agreed that an error message should explain
<em>why</em> something was wrong, rather than just saying that it <em>was</em>
wrong.</p>
<pre>
  <a href="http://xrl.us/r4u4">http://xrl.us/r4u4</a> </pre>
<p>One may assume that afterwards, Yves went away to see what could
be done to improve the situation, and came back with a new conclusion:
perl's error message suck. They are scattered throughout the source,
which makes maintenance difficult, and localisation impossible. He
proposed changing things like</p>
<pre>
        DIE(aTHX_ &quot;Not a GLOB reference&quot;);</pre>

<p>to</p>
<pre>
        THROW_ERROR(PERL_ENOTAGLOB);</pre>
<p>This way, a message can be changed in one single place, and would
allow commercial vendors to make perl's error message fit in with
their own frameworks (witness the recent z/OS efforts), and finally
allow messages to be translated in to other languages.</p>
<p>Jonathan Stowe wasn't exactly opposed to the idea, but mentioned the
frequent idiom:</p>
<pre>
  eval { somethingnasty() };
  $@ and $@ =~ /Some nasty error/ and recover();</pre>
<p>Rafael pointed out that there are messages with %s specifiers
as well, but that it would surely benefit the maintenance of
<code>perldiag</code>.</p>

<pre>
  Globales Symbol &quot;x&quot; erfordert ausdr&#252;cklichen Paketnamen
  <a href="http://xrl.us/r4u5">http://xrl.us/r4u5</a> </pre>
<p>
<hr>
<h1> <a name="patches_of_interest">Patches of Interest</a> </h1>
<p>
<h2> <a name="what_yves_orton_did_this_week">What Yves Orton did this week</a> </h2>

<p>Nicholas applied Yves's patch from last week, which prompted Yves
to deliver another patch, this time sawing off six thread-shared
variables. The result is that <code>use re 'debug'</code> is now lexically
scoped. This latter patch was redone after Rafael had a bit of
trouble with it. Yves also took the opportunity to throw in some
tests for lexically scoped regexp debugging.</p>
<pre>
  Awesome
  <a href="http://xrl.us/r4u6">http://xrl.us/r4u6</a> </pre>
<p>On to the main course, Yves then delivered a patch that introduced
a new assertion that allows the writing of elegant expressions to
match arbitrarily deeply nested pairs of tokens. For instance,
one could parse XML documents code with:</p>
<pre>
  /^(&lt;(?:[^&lt;&gt;]+|(?1))*&gt;)$/</pre>

<p>(along with the appropriate amount of hand waving). Yves was critical
of the implementation, in that it requires capturing <code>(...)</code> to
be used, rather than grouping <code>(?:...)</code>, but on the other hand it
conforms with what Python and PCRE already do.</p>
<p>Dave Mitchell was most impressed, and quizzed Yves about the
behavioural semantics regarding backtracking. Rafael wanted to know
if it was possible to extend the patch to allow case sensitivity
changes by way of something like <code>(?i(?1))</code>. (Alas, no).</p>
<p>Robin Houston also expressed his delight at the patch and admitted
to being the party who added this functionality to PCRE since he
lacked the courage to attack Perl's regular expression internals.
He too raised a couple of questions about behaviour in borderline
areas.</p>
<p>Yves followed up with another version of the patch that added
user documentation and more tests. He has also been reading
Jeffrey Friedl's <em>Mastering Regular Expressions</em>, and has taken
up the challenge to resolve as much as possible the areas in
which Jeffrey finds Perl's regular expressions wanting. He
laid out his roadmap in <code>perltodo</code>.</p>

<p>All applied.</p>
<pre>
  And the crowd goes wild
  <a href="http://xrl.us/r4u7">http://xrl.us/r4u7</a> </pre>
<p>And as Yves was sweeping the floor of the lab clean from his previous
efforts, he bundled up one last patch to tidy the regexp debugging
output somewhat.</p>
<pre>
  <a href="http://xrl.us/r4u8">http://xrl.us/r4u8</a> </pre>
<p>
<h2> <a name="improving_exporter_documentation">Improving <code>Exporter</code> documentation</a> </h2>

<p>Smylers caught up on the Exporter thread (thanks to the summary, heh)
and argued in favour of ensuring that code was <code>strict</code>-compatible, even
if <code>use strict</code> wasn't explicitly mentioned in the snippet. This means
either using package variables or using <code>our</code>.</p>
<pre>
  <a href="http://xrl.us/r4u9">http://xrl.us/r4u9</a> </pre>
<p>
<h2> <a name="continuing_to_deal_with_some_gcc_warnings">Continuing to deal with some gcc warnings</a> </h2>

<p>Sadahiro Tomoyuki figured out why a recent patch of Jarkko's was causing
things to go <strong>boom!</strong> on a perl compiled with <code>-Duse64bitint</code>. Patched.</p>
<pre>
  <a href="http://xrl.us/r4va">http://xrl.us/r4va</a> </pre>
<p>
<h2> <a name="file__temp_doesn_t_handle_cmp_overloading"> <code>File::Temp</code> doesn't handle <code>cmp</code> overloading</a> </h2>

<p>Rafael Garcia-Suarez posted a short snippet demonstrating a problem
with <code>File::Temp</code> overloading. When stringified (interpolated in
a string), a <code>File::Temp</code> object returns the underlying file name.</p>
<p>This works fine until you try to compare the stringified object to
a scalar, at which point perl starts looking for an <code>eq</code> operator
and dies. So the fix was to overload <code>cmp</code>, and all was well, but
Rafael wondered whether <code>overload</code> should synthesise a <code>cmp</code> from
a stringification override.</p>

<p>Rick Delaney pointed out that it will already do this if you add
the <code>fallback =&gt; 1</code> attribute. John Peacock didn't like the idea
of generating <code>cmp</code> automatically.</p>
<pre>
  <a href="http://xrl.us/r4vb">http://xrl.us/r4vb</a> </pre>
<p>
<h2> <a name="cflags_sh__the_revenge_of_gcc_std_c89"> <em>cflags.SH</em>: The Revenge of <code>gcc -std=c89</code> </a> </h2>

<p>Jarkko, ever the optimist, kicked through the rubble of his previous
C89 configuration patch and worked up a scan to get better results
back to see how <code>-ansi</code>, <code>-pedantic</code> and <code>-std=c89</code> behave in the
face of weird system headers and other platform oddities, and asked
for people on proprietary hardware to take it for a spin and see
what comes of it.</p>
<pre>
  Don't take no for an answer
  <a href="http://xrl.us/r4vc">http://xrl.us/r4vc</a> </pre>
<p>

<hr>
<h1> <a name="new_and_old_bugs_from_rt">New and old bugs from RT</a> </h1>
<p>
<h2> <a name="threads_creation_memory_leak___40416_">threads creation memory leak (#40416)</a> </h2>
<p>Santeri Paavolainen posted a short program that demonstrated a fairly
definite leak when creating threads. Dave Mitchell noted that it was
fixed in blead.</p>
<pre>
  Another reason
  <a href="http://xrl.us/r4vd">http://xrl.us/r4vd</a> </pre>
<p>
<h2> <a name="file__find_has_issues_with_symlinks___40417_"> <code>File::Find</code> has issues with symlinks (#40417)</a> </h2>

<p>Ammon posted a very long and detailed report about the problems that
<code>File::Find</code> has in relation to symbolic links. Code included.</p>
<pre>
  Warnocked
  <a href="http://xrl.us/r4ve">http://xrl.us/r4ve</a> </pre>
<p>
<h2> <a name="unicode_command_line_arguments___40418_">Unicode Command Line Arguments (#40418)</a> </h2>
<p>Dale Gerdermann wanted to read Unicode arguments from the command line
and it seemed to work in all cases until he hit a regular expression,
and there he had to force a <code>utf8::upgrade($arg)</code> for it to work.</p>

<p>Dave Mitchell pointed the <code>-C</code> command line switch that takes care
of this issue.</p>
<pre>
  <a href="http://xrl.us/r4vf">http://xrl.us/r4vf</a> </pre>
<p>Dale found similar Unicode problems in conjunction with  LWP and Unicode (#40432)</p>
<pre>
  <a href="http://xrl.us/r4vg">http://xrl.us/r4vg</a> </pre>
<p>

<h2> <a name="xmltwig_tests_cause_bleadperl_to_segfault___40420_"> <code>XML-Twig</code> tests cause <code>bleadperl</code> to segfault (#40420)</a> </h2>
<p>Shlomi Fish reported that the test suite of <code>XML-Twig</code> version 3.26
causes segfaults on <code>bleadperl</code>, but forgot to say which tests were
at fault.</p>
<pre>
  <a href="http://xrl.us/r4vh">http://xrl.us/r4vh</a> </pre>

<p>
<h2> <a name="segfault_in_pack___40427_">Segfault in pack (#40427)</a> </h2>
<p>dgay showed how to provoke a core dump with a simple call to <code>pack</code>
and provided a simple patch to fix up the problem. Unapplied.</p>
<pre>
  Should have a test, too
  <a href="http://xrl.us/r4vi">http://xrl.us/r4vi</a> </pre>
<p>
<h2> <a name="perl5_bug_summary">Perl5 Bug Summary</a> </h2>

<pre>
  A net increase of ten bugs this week
  <a href="http://xrl.us/r4vj">http://xrl.us/r4vj</a> </pre>
<pre>
  Kill a bug today
  <a href="http://rt.perl.org/rt3/NoAuth/perl5/Overview.html">http://rt.perl.org/rt3/NoAuth/perl5/Overview.html</a> </pre>
<p>
<hr>
<h1> <a name="new_core_modules">New Core Modules</a> </h1>
<ul>
<li>

<p>Andreas K&#246;nig released CPAN 1.88_51 to CPAN.</p>
<pre>
  <a href="http://xrl.us/r4vk">http://xrl.us/r4vk</a> </pre>
</li>
</ul>
<p>
<hr>
<h1> <a name="in_brief">In Brief</a> </h1>
<p>Dave Mitchell applied an expedient hack to <strong>allow <code>\x{NNN}</code> in

<em>t/op/re_tests</em> </strong>.</p>
<pre>
  So there's no excuse now
  <a href="http://xrl.us/r4vm">http://xrl.us/r4vm</a> </pre>
<p>Mark Stosberg wanted to <strong>clarify the documentation for <em>lib.pm</em> </strong>
with a short snippet. H.Merijn Brand golfed it.</p>
<pre>
  And still readable
  <a href="http://xrl.us/r4vn">http://xrl.us/r4vn</a> </pre>

<p>David Landgren made a small clarification in <code>perlref</code> concerning
<strong>the interpolation of scalar references</strong>.</p>
<pre>
  <a href="http://xrl.us/r4vo">http://xrl.us/r4vo</a> </pre>
<p>Christian Jaeger made a couple of suggestions to improve <strong>the
navigation between <code>bugs.perl.org</code>, Request Tracker and CPAN</strong>.</p>

<pre>
  <a href="http://xrl.us/r4vp">http://xrl.us/r4vp</a> </pre>
<p>Jim Cromie wanted to <strong>start cooking with <code>perl.gcov</code> </strong>, so Steve
Peters and S&#233;bastien Aperghis-Tramoni gave him a couple of
recipes.</p>
<pre>
  Got you covered
  <a href="http://xrl.us/r4vq">http://xrl.us/r4vq</a> </pre>
<p>John E. Malmberg. responsible in large part for brings Perl's VMS
implementation kicking and screaming into the third millennium, had
to say <strong>goodbye for now</strong>. He's out looking for a new job, and so
had to bow out from the list for the time being.</p>

<pre>
  Thanks, and good luck
  <a href="http://xrl.us/r4vr">http://xrl.us/r4vr</a> </pre>
<p>Yves Orton noticed that the <strong>ptree constants TODO tests are passing</strong>
and wondered if that meant that they could be untodo'ed.</p>
<pre>
  <a href="http://xrl.us/r4vs">http://xrl.us/r4vs</a> </pre>
<p>Jim Cromie proposed a <strong> <code>-U</code> patch, that stands for Unofficial Userhacking</strong>.</p>

<pre>
  <a href="http://xrl.us/r4vt">http://xrl.us/r4vt</a> </pre>
<p>Jarkko thought that gcc's <strong> <code>-pedantic</code> should be renamed <code>-useless</code> </strong>.</p>
<pre>
  <a href="http://xrl.us/r4vu">http://xrl.us/r4vu</a> </pre>
<p>

<h2> <a name="about_this_summary">About this summary</a> </h2>
<p>This summary was written by David Landgren.</p>
<p>Weekly summaries are published on <em> <a href="http://use.perl.org/">http://use.perl.org/</a> </em> and posted
on a mailing list, (subscription: <em> <a href="mailto:perl5-summary-subscribe@perl.org">perl5-summary-subscribe@perl.org</a> </em>).
The archive is at <em> <a href="http://dev.perl.org/perl5/list-summaries/">http://dev.perl.org/perl5/list-summaries/</a> </em>.
Corrections and comments are welcome.</p>
<p>If you found this summary useful, please consider contributing to
the Perl Foundation to help support the development of Perl.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

