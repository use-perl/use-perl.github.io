<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by brian_d_foy: Leopard's tar is broken</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Leopard's tar is broken</h1>
<h2><a href="/user/brian_d_foy/">brian_d_foy</a> on 2007-11-02T06:16:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I've just upgraded my MBP to Leopard. Apple's version of <code>tar</code> has
the annoying habit of generating extra files to represent Mac specific
attributes. That's particularly annoying for CPAN authors because they tend to
break your test suite and you can't easily see them without unpacking
the archive on a non-Mac system. Grrr.

<p>It used to be possible to disable this behaviour by setting the env var
<code>COPY_EXTENDED_ATTRIBUTES_DISABLE</code> to some true value - but this seems
to have stopped working in Leopard. As a result I've just released
a broken version of
<a href="http://search.cpan.org/user/andya/Captcha-reCAPTCHA">Captcha::reCAPTCHA</a>. Double Grrr.</p>

<p> <code>strings /usr/bin/tar</code> fails to reveal anything promising, <code>/usr/bin/gnutar</code> is just a hard link to <code>/usr/bin/tar</code> and I can't get the MacPorts <code>gnutar</code> to build so for now
I've restored a copy of Tiger's <code>tar</code> from a backup and dumped it in <code>~/bin</code> (which I have
on my path). Phew.</p>

<p>Watch out Mac-based module authors - it's hard to detect that you
have a broken archive without testing it on a non-Mac machine.</p></p>
<p></p>


<hr/>



<h2>Ugh.</h2>
<h3><a href="/user/educated_foo/">educated_foo</a> on 2007-11-02T03:52:09</h3>
This has bitten me as well.  The non-environment-variable solutions I've found are: (1) never visit perl projects in the Finder; (2) copy tarballs to a handy Unix machine to de-hose them.  Neither is particularly satisfying.



<h2>Re: Leopard's tar is broken</h2>
<h3><a href="/user/Corion/">Corion</a> on 2007-11-02T08:21:44</h3>
<p>Can't you inspect the<nobr> <wbr></nobr><tt>.tar</tt> file using <tt>Archive::Tar</tt>? I guess that calls for a test file that checks that no resource forks have been included in a<nobr> <wbr></nobr><tt>.tar</tt> file<nobr> <wbr></nobr><tt>:)</tt> </p>



<blockquote>

<h2>Re: Leopard's tar is broken</h2>
<h3><a href="/user/AndyArmstrong/">AndyArmstrong</a> on 2007-11-02T11:08:38</h3>
Yeah, I'm sure that would work. I was in a hurry to get a fix out<nobr> <wbr></nobr>:)





</blockquote>


<h2>COPY_EXTENDED_ATTRIBUTES_DISABLE is obsoleted.</h2>
<h3><a href="/user/KKI/">KKI</a> on 2007-11-06T09:10:29</h3>
Use the COPYFILE_DISABLE, Luke.<br><br>----<br>KKI



<blockquote>

<h2>Re:COPY_EXTENDED_ATTRIBUTES_DISABLE is obsoleted.</h2>
<h3><a href="/user/AndyArmstrong/">AndyArmstrong</a> on 2007-11-06T12:21:49</h3>
Aha. Thanks for that<nobr> <wbr></nobr>:)





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

