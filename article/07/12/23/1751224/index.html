<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by brian_d_foy: Strawberry Perl 5.10.0 Released!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Strawberry Perl 5.10.0 Released!</h1>
<h2><a href="/user/brian_d_foy/">brian_d_foy</a> on 2007-12-23T18:09:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
After over a year since the last release, it is with equal parts of pride and relief that I present <a href="http://strawberryperl.com/">Strawberry Perl 5.10</a>, the next major release of the <a href="http://vanillaperl.com/">Vanilla Perl Project</a>'s flagship Perl distribution. This release represents the beginning of the third generation of release code. The first generation was a simple build script, and was used to create the original Vanilla Perl distribution. The second generation moved from a simple script to a config-driven model with <a href="http://search.cpan.org/perldoc?Perl::Dist::Builder">Perl::Dist::Builder</a>, and gave us create the original Strawberry Perl. The new <a href="http://search.cpan.org/perldoc?Perl::Dist::Inno">Perl::Dist::Inno</a> takes this beyond simple configuration and provides a complete object heirachy for modeling and compiling Win32 Perl distributions.
</p></p>
<p><p>
So now not only can you replicate Strawberry Perl yourself, you can literally sub-class Strawberry Perl and build your own custom distributions in as little as 10 lines of code. This release also sees more attention paid to Strawberry Perl's CPAN capabilities, and in particular to its out-of-the-box functionality.
</p>
<p>
The new CPAN client setup is completely zero-configuration, with <a href="http://search.cpan.org/perldoc?CPAN::SQLite">CPAN::SQLite</a> pre-installed for reduced memory consumption and a <a href="http://cpan.strawberryperl.com/">http://cpan.strawberryperl.com/</a> redirector, so that we can keep zero-conf users pointing at a good default repository and collect statistics on the CPAN modules that Win32 users care about the most. We've also added some little touches like a pointing the "Strawberry Perl Website" link that goes to a release-specific page, so we can update with errata and so on.
</p>
<p>
On the module side things remain much the same. We retain the previous model of bundling a large number of toolchain and CPAN-related modules, but don't bundle modules that add general functionality. For people that would like more modules pre-installed, stay tuned for information on the long-awaited "Chocolate Perl" distribution.
</p>
<p>
While the new releases is stable and very usable, it lacks in a few areas we will be addressing in the next release cycle.
</p> <ul>
<li>Relocation: The new "relocatable" magic for Perl 5.10 is implemented as an optional Configure parameter. Win32 Perl releases do NOT, unfortunately, use Configure. As such, relocation will not be available in this release cycle of Strawberry Perl. I hope to investigate workarounds for this problem at a later date.</li>
<li>Windows Vista: The MinGW compiler system has known problems on Vista with the current directory setup, and as such Strawberry Perl does not support Vista at this time. I have some ideas on how to fix this, but don't want to potentially burdon non-Vista users with the complications it might create. So we may well see a specific Vista version released separately.</li>
</ul>

<p>
HOWEVER, minus those few issues, I'm very happy with the quality of the new release, and look forward to increased sleep and some time off. Enjoy.
</p></p>


<hr/>



<h2>Great!!</h2>
<h3><a href="/user/aero/">aero</a> on 2007-12-23T11:35:52</h3>
Great work!!<br>I've installed.<br>But cpan gives following error message.<br><br>-------------------------------------------------<br>C:\strawberry&gt;cpan<br>CPAN: File::HomeDir loaded ok (v0.67)<br><br>cpan shell -- CPAN exploration and modules installation (v1.9205)<br>ReadLine support enabled<br><br>cpan&gt; r<br>DBD::SQLite::db prepare failed: no such table: dists(1) at dbdimp.c line 271 at<br>C:\strawberry\perl\site\lib/CPAN/SQLite/DBI/Search.pm line 86,  line 3.<br>Catching error: 'DBD::SQLite::db prepare failed: no such table: dists(1) at dbdi<br>mp.c line 271 at C:\\strawberry\\perl\\site\\lib/CPAN/SQLite/DBI/Search.pm line<br>86,  line 3.<br>' at C:/strawberry/perl/lib/CPAN.pm line 281<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CPAN::shell() called at C:\strawberry\perl\bin/cpan.bat line 211<br><br>cpan&gt; install Tk<br>DBD::SQLite::db prepare failed: no such table: dists(1) at dbdimp.c line 271 at<br>C:\strawberry\perl\site\lib/CPAN/SQLite/DBI/Search.pm line 86,  line 4.<br>Catching error: 'DBD::SQLite::db prepare failed: no such table: dists(1) at dbdi<br>mp.c line 271 at C:\\strawberry\\perl\\site\\lib/CPAN/SQLite/DBI/Search.pm line<br>86,  line 4.<br>' at C:/strawberry/perl/lib/CPAN.pm line 281<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CPAN::shell() called at C:\strawberry\perl\bin/cpan.bat line 211<br>-------------------------------------------------<br><br>What's wrong here?<br>



<blockquote>

<h2>Re: I solved the problem.</h2>
<h3><a href="/user/aero/">aero</a> on 2007-12-23T11:51:46</h3>
After initializing by "cpandb --setup" command.
then the problem disappeared.<br/><br/>I wonder should I do this manually.



<blockquote>

<h2>Re: I solved the problem.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-23T12:47:03</h3>
I'm surprised you had to do it at all!<nobr> <wbr></nobr>:(<br><br>What setup do you have?



<blockquote>

<h2>Re: I solved the problem.</h2>
<h3><a href="/user/aero/">aero</a> on 2007-12-23T15:09:24</h3>
I didn't do anything after install.<br/><br/>cpan 
cpan&gt; reload index
cpan&gt; r<br/><br/>also have no problem.



<blockquote>

<h2>Re: I solved the problem.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-23T15:54:28</h3>
No, I mean what operating system, user permissions, etc...



<blockquote>

<h2>Re: I solved the problem.</h2>
<h3><a href="/user/aero/">aero</a> on 2007-12-23T16:07:48</h3>
I am using Korean Windows XP.<br><br>Details of my envirionment from CPAN::Reporter says<br><br>Perl special variables (and OS-specific diagnostics, for MSWin32):<br><br>
&nbsp; &nbsp; &nbsp; &nbsp; $^X = C:\strawberry\perl\bin\perl.exe<br>
&nbsp; &nbsp; &nbsp; &nbsp; $UID/$EUID = 0 / 0<br>
&nbsp; &nbsp; &nbsp; &nbsp; $GID = 0<br>
&nbsp; &nbsp; &nbsp; &nbsp; $EGID = 0<br>
&nbsp; &nbsp; &nbsp; &nbsp; Win32::GetOSName = WinXP/.Net<br>
&nbsp; &nbsp; &nbsp; &nbsp; Win32::GetOSVersion = Service Pack 2, 5, 1, 2600, 2, 2, 0, 256, 1<br>
&nbsp; &nbsp; &nbsp; &nbsp; Win32::IsAdminUser = 1<br><br>Platform:<br>
&nbsp; &nbsp; &nbsp; &nbsp; osname=MSWin32, osvers=5.1, archname=MSWin32-x86-multi-thread<br><br>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>installer has one flaw</h2>
<h3><a href="/user/sir_lichtkind/">sir_lichtkind</a> on 2007-12-23T16:52:30</h3>
many win user will complain that it install in root dir. i don't like that either. is it for purpose or accidental?



<blockquote>

<h2>Re:installer has one flaw</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2007-12-23T19:17:46</h3>
If you *have* to put it in the root directory (C:\whatever) I won't be using it. Is it really hardcoded to do that?



<blockquote>

<h2>Re:installer has one flaw</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-23T22:07:33</h3>
Unfortunately, due to some remaining issues with Perl on Win32, you have to at least have a path with no spaces in it.<br><br>Since you can get the build code yourself, you can at least now generate your own installer that installs to the location that YOU want.





</blockquote>


<h2>Re:installer has one flaw</h2>
<h3><a href="/user/sir_lichtkind/">sir_lichtkind</a> on 2007-12-23T20:27:06</h3>
it also don't seems to remove its PATH entry after deinstal. this is a major point of suckiness that some installer have in common.



<blockquote>

<h2>Re:installer has one flaw</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-24T05:50:30</h3>
I found a hook in Inno Setup that MIGHT let me achieve the removal of the PATH entries... I'll have a shot at making it work in Update 1<br>





</blockquote>


<h2>Re:installer has one flaw</h2>
<h3><a href="/user/sir_lichtkind/">sir_lichtkind</a> on 2007-12-23T20:42:23</h3>
like for instance the active state, if your installer is better on that, it's a real reason for me to switch



<blockquote>

<h2>Re:installer has one flaw</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-23T22:04:31</h3>
Unfortunately, there's nowhere in Inno Setup that you can hook that specific clean up functionality (or so it appears).<br><br>I continue to look for a way to fix that.<br>





</blockquote>

</blockquote>


<h2>Installed here</h2>
<h3><a href="/user/AndyArmstrong/">AndyArmstrong</a> on 2007-12-23T19:06:06</h3>
I've just installed it on my Strawberry XP VM. I turned off use_sqlite because cpan was (I think) getting confused by something that a previous Strawberry left. It appears to work fine with use_sqlite disabled. I'm just doing a cpan upgrade now.



<blockquote>

<h2>Re:Installed here</h2>
<h3><a href="/user/AndyArmstrong/">AndyArmstrong</a> on 2007-12-23T19:06:44</h3>
...and I should add - thanks for all the hard work. ActiveState is fine but it's lovely to have a choice.





</blockquote>


<h2>Can work on Vista</h2>
<h3><a href="/user/the way/">the way</a> on 2007-12-24T21:19:09</h3>
For some reason, it works fine on Vista for me. I had to set "$self-&gt;{XS_DEFINE_VERSION} = '';" to avoid a problem with XS_VERSION_BOOTCHECK, and I had to remove the backslashes in: $self-&gt;{DEFINE_VERSION} = '-D$(VERSION_MACRO)="$(VERSION)"'; . I just modified ExtUtils\MM_Any.pm directly to fix these two things, but I'm sure there's a better way using the OS-specific files in ExtUtils.<br><br>Note that I have UAC disabled - I expect that disabling UAC whilst installing on Vista is a Good Thing.



<blockquote>

<h2>Re:Can work on Vista</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-26T22:38:25</h3>
I've previously done some testing on Vista Beta 1 and found things worked ok, but that was also with UAC turned off permanently.





</blockquote>


<h2>got complier to run but..</h2>
<h3><a href="/user/persicom/">persicom</a> on 2007-12-25T06:31:03</h3>
Trolling google for MinGW/Vista I saw a post suggesting adding the bin path of cc1.exe to PATH. that got me futher along. but now Tk dies with a compile error and lots of warnings. Who do I report this to and how?<br/><br/>Thanks



<h2>Perl::Dist::Strawberry</h2>
<h3><a href="/user/snaury/">snaury</a> on 2007-12-25T14:57:40</h3>
What really striked me is that you globally set TERM=dumb. This is imho a very bad thing, because it was interfering with my cygwin until I finally noticed where it was going from. I think setting global environment is a bad thing, it would be much better to provide a batch file that sets all necessary variables and then leaves command prompt. Users who need it globally will set it themselves and it won't unnecessarily clobber environment for others.<br/><br/>Also, when will you publish Perl::Dist::Strawberry on cpan (or whatever else I need to build strawberry myself)?



<blockquote>

<h2>Re:Perl::Dist::Strawberry</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-26T22:37:04</h3>
&gt; Users who need it globally will set it themselves and it won't unnecessarily clobber environment for others.<br><br>The entire concept of Strawberry is that there are no additional steps required to get it into a working state.<br><br>The problem is that most people will NOT set TERM=dumb themselves, because most Windows uses aren't familiar with hacking things like the environment themselves.<br><br>It falls back on universal education as a crutch.<br><br>For cygwin users, you are already a step above the normal standard, and as a group are far more capable of fixing your environment than others.<br><br>There may be better ways of resolving this problem, but expecting every single user to discover a problem, learn how to fix it and do it themselves it not an appropriate solution.



<h2>Re:Perl::Dist::Strawberry</h2>
<h3><a href="/user/tshinnic/">tshinnic</a> on 2008-01-08T00:03:58</h3>
Thank you for the problem report.  I found it using Google and it helped me confirm what the problem was.  I'd been thinking strangenesses like Strawberry tromping on DLLs or something like that, not just sneaky ENVVAR settings.
<p>
Strawberry setting TERM=dumb is bad. Grrr.</p>





</blockquote>


<h2>LIB pointing to perl/bin</h2>
<h3><a href="/user/snaury/">snaury</a> on 2007-12-25T15:43:46</h3>
Also, I find it strange that your installer sets LIB to point to perl/bin instead of perl/lib/CORE (that's where libperl510.a is after all). Linker probably tries to link directly against<nobr> <wbr></nobr>.dll and succeeds, but I'm not sure if that's a really good thing.



<h2>Example environment script</h2>
<h3><a href="/user/snaury/">snaury</a> on 2007-12-25T15:57:21</h3>
Here's a script I'm using myself. I think it would be good if instead of changing global environment there would be a shortcut to such a batch file:<br><br>@echo off<br>set TERM=dumb<br>set FTP_PASSIVE=1<br>set PATH=C:\strawberry\c\bin;C:\strawberry\perl\bin;%PATH%<br>set INCLUDE=C:\strawberry\c\include;C:\strawberry\perl\lib\CORE;%INCLUDE%<br>set LIB=C:\strawberry\c\lib;C:\strawberry\perl\lib\CORE;%LIB%<br>title Strawberry Perl Environment<br>cmd<nobr> <wbr></nobr>/k<br>



<blockquote>

<h2>Re:Example environment script</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-26T22:40:22</h3>
This sort of setup would break the normal "cmd" environment though right?<br><br>It would mean that you could ONLY use Perl via that special shortcut?





</blockquote>


<h2>MinGW patch for Vista</h2>
<h3><a href="/user/bart/">bart</a> on 2007-12-27T09:24:07</h3>
<p><div class="quote">Windows Vista: The MinGW compiler system has known problems on Vista with the current directory setup, and as such Strawberry Perl does not support Vista at this time. I have some ideas on how to fix this, but don't want to potentially burdon non-Vista users with the complications it might create. So we may well see a specific Vista version released separately.</div> As you can read in <a href="http://perlmonks.org/?node_id=659024" title="perlmonks.org">this thread on Perlmonks</a perlmonks.org>, there is a patch available for MinGW's gcc on Vista. It is apparently enough to  fix build issues on XS modules using MinGW on Vista, so I'm hopeful that it might be enough to fix Strawberry Perl too.
<p>If I read it correctly, the problem was in incorrect parameter passing to some functions, and Vista catches it. I'm quite sure these function calls are actually just as incorrect on previous versions of Windows... so I see no reason why a patched gcc wouldn't work equally well on XP.</p>



<blockquote>

<h2>Re:MinGW patch for Vista</h2>
<h3><a href="/user/bart/">bart</a> on 2007-12-27T09:48:18</h3>
Addendum: <a href="http://aarongiles.com/?p=199" title="aarongiles.com">This is the post</a aarongiles.com> that gave me the latter idea:<p><blockquote><div>This is an actual mingw bug that has been tracked down to a change in the way the Microsoft standard C libraries handle invalid parameters. Older versions of the DLL would not check invalid parameters and go down potentially untested code paths with them. The versions in Vista do stricter parameter checking. Some calls made by the mingw tools pass invalid parameters to one of the functions and fail, causing the internal paths to quit working.</div>
</blockquote>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

