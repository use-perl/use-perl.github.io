<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org story by brian_d_foy: Testing needed for all-new Strawberry July Release Candidate</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Testing needed for all-new Strawberry July Release Candidate</h1>
<h2><a href="/user/brian_d_foy/">brian_d_foy</a> on 2009-07-17T19:28:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>After 9 months of hard work put in by the amazing Curtis Jewell, I'm happy to confirm that the Strawberry Perl is finally going ahead with the long-awaited switch-over from an .exe to a .msi installer.</p><p>Strawberry Perl July 2009 will be first release from the completely rewritten 4th generation distribution generator, built on the Microsoft Open Source WiX installer toolchain.</p></p>
<p></p>


<hr/>



<h2>dumb question?</h2>
<h3><a href="/user/mw487/">mw487</a> on 2009-07-17T11:28:56</h3>
<p>Does SP install Padre?</p>



<blockquote>

<h2>Re:dumb question?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2009-07-17T12:54:22</h3>
<p>No. Strawberry Perl remains true to it's original product design.</p><p>A distribution aimed at the 40% of Perl programmers that work primarily on Unix but at least once a year on Windows.</p><p>"A 100% Open Source CPAN-capable Perl for your Windows&#174; computer that works exactly the same as Perl everywhere else."</p><p>After the core distribution release, however, you should expect to see a "Padre Standalone for Windows" type distribution that contains the strawberry core and adds Padre.</p>



<blockquote>

<h2>Re:dumb question?</h2>
<h3><a href="/user/mw487/">mw487</a> on 2009-07-17T13:11:58</h3>
<p><div class="quote"><p>After the core distribution release, however, you should expect to see a "Padre Standalone for Windows" type distribution that contains the strawberry core and adds Padre.</p></div><p>That would be lovely, thanks.  I seem to be an edge case, and can not get Padre working on any of my machines.  YMMV.</p>





</blockquote>

</blockquote>


<h2>Works for me</h2>
<h3><a href="/user/Ed Avis/">Ed Avis</a> on 2009-07-17T12:23:55</h3>
I used the MSI to upgrade from the previous stable Strawberry Perl release (installed in the default directory) and it all worked fine.



<h2>perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-07-18T18:10:38</h3>
<p>Hi,</p><p>the following one-liner brings perl 5.10.0/Win32 to crash:</p><p>perl -e "use namespace::clean; fork;"</p><p>*) it is not an issue with perl 5.8.9/Win32</p><p>*) it is not specific to strawberry 5.10.0.6 July/09 (the same bug exists in all previous 5.10.0.*)</p><p>*) perls 5.10.0 for Linux/Cygwin do not suffer from this bug</p><p>*) I have investigated this bug a little bit and sent a couple of RTs:</p><p>RT - Perl::Dist::Strawberry<br><a href="https://rt.cpan.org/Ticket/Display.html?id=45726" title="cpan.org">https://rt.cpan.org/Ticket/Display.html?id=45726</a cpan.org></p><p>RT - Variable::Magic<br><a href="https://rt.cpan.org/Ticket/Display.html?id=46546" title="cpan.org">https://rt.cpan.org/Ticket/Display.html?id=46546</a cpan.org></p><p>RT - perl 5 core<br><a href="http://rt.perl.org/rt3/Public/Bug/Display.html?id=66158" title="perl.org">http://rt.perl.org/rt3/Public/Bug/Display.html?id=66158</a perl.org></p><p>It seems to be a bug in fork implementation for Win32 (see the last post in the above mentioned RT - perl 5 core).</p><p>I know that it is not a new issue specific for strawberry Jul/09 release but I guess that you are much closer to perl 5/win32 core development team therefore you can be more successful in moving things forwards.</p><p>--<br>kmx</p>



<blockquote>

<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-07-19T06:16:28</h3>
<p>Tell you what - they're working on 5.10.1, and I've got a Strawberry-like build process that works for it.</p><p>I'll check if the bug still exists in the 5.10.1 snapshots with the command line you gave and let them know, but it may take a few days.</p>



<blockquote>

<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-07-27T22:35:55</h3>
<p>Any results from testing fork issue on 5.10.1?</p><p>--<br>kmx</p>



<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-08-03T12:28:32</h3>
<p>Hi,</p><p>I have compiled the latest dev release from perl5.git.perl.org and IT SUFFERS FROM THIS BUG.</p><p>--<br>kmx</p>



<blockquote>

<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-08-04T21:46:10</h3>
<p>I was just going to test this today (I've finally got the computer time on my family's computer to build a 5.10.1 prerelease, among other things) - sounds like p5p needs bugged, and they received your last message on the bug yesterday, I think. (I'm on the list and reading it, and I don't know enough about the perl core to add strength to your proposed patch, although I will request that it be put in, at the latest, post-5.10.1-RC1.)</p><p>BTW: Did you test off blead, or off maint-5.10?</p>



<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-08-04T23:21:34</h3>
What I compiled was the -RC0, and it gives me the opportunity to debug using Visual Studio. *grin*<br/><br/>Yup, the problem is there.



<blockquote>

<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-08-05T08:02:57</h3>
<p>Thanks for involving in this issue.</p><p>--<br>kmx</p>





</blockquote>


<h2>Re:perl-5.10.0.6 has broken fork</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-08-06T16:16:58</h3>
<p>I did a compilation using last night's release, and the simple case doesn't crash.</p><p>C:\NewFolder&gt;\perl\bin\perl.exe -e "use namespace::clean; fork; print qq{1\n}";"<br>
1<br>
1</p><p>(test.pl being the script used in perl rt# 66158)</p><p>C:\NewFolder&gt;\perl\bin\perl test.pl<br>
After fork 1: 5524<br>
After fork 2: -6120</p><p>While Strawberry 5.10.0.6? Crashes both times.</p><p>

(I should release a 5.10.1.0 beta 1 soon after it comes out.)</p>





</blockquote>

</blockquote>

</blockquote>


<h2>MySQL and Postgress support</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-07-27T23:59:38</h3>
<p>Hi,</p><p>DBD::MySQL and DBD::Pg pre-installed by default are nice however it is missing the crucial libraries LIBMYSQL.DLL and LIBPQ.DLL.</p><p>It becomes a problem if some other module detects e.g. DBD::MySQL as present and tries to use it - than an error dialogue (GUI) with a message about missing DLL pops up.</p><p>What was the original intention? Should all DLL be included in strawberry distribution or should the users get LIBMYSQL.DLL and LIBPQ.DLL get from somewhere else?</p><p>--<br>kmx</p>



<blockquote>

<h2>Re:MySQL and Postgress support</h2>
<h3><a href="/user/Alias/">Alias</a> on 2009-07-28T15:31:11</h3>
<p>We had meant to include everything.</p>



<h2>Re:MySQL and Postgres support</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-07-30T19:27:51</h3>
<p>As Alias said, we meant to include everything.</p><p>Because of that, we had to make a quick decision to rebuild, and during that rebuild, pull the PostgreSQL support for the final.</p><p>The reason for that is explained at <a href="http://csjewell.dreamwidth.org/1710.html" title="dreamwidth.org">http://csjewell.dreamwidth.org/1710.html</a dreamwidth.org>.</p><p>The MySQL client DLL is in the rebuild as of now, and it is uploaded to the URL's above.</p>



<blockquote>

<h2>Re:MySQL and Postgres support</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-07-31T06:47:54</h3>
<p>Hi,</p><p>Firstly, thanks for the fix.</p><p>As I am not allowed to put comments on dreamwidth.org I put my feedback to libpq.dll issues here:</p><p>1) I agree that MSVCRT80.DLL (part of MS Visual C redistributables) is a problem and we cannot just simply copy this dll into strawberry distribution. On the other hand I do not understand why are the official Pg binaries built in this way - the only reason could be building Pg via MS Visual C/C++ Express edition that does not contain some static libraries and forces the developers to be dependant on VC redistributables. I am nearly 100% sure that it is possible (at least with MS Visual C/C++ standard edition or higher [unfortunately not free]) to build libpq.dll without MSVCRT80.DLL dependency. The other way that I have successfully used some time ago is to build libpq.dll (and corresponding *.a) with mingw (you will need MSYS environment) and to install DBD::Pg from cpan.</p><p>To sum up - getting rid of MSVCRT80.DLL means not to use official binary but to build a new one. We have 2 options:<br>- MS Visual C/C++ (see comment above)<br>- mingw (in MSYS environment)</p><p>It would be pleasure for me to help you with this.</p><p>2) Including LIBEAY32.DLL/SSLEAY32.DLL (part of OpenSSL) will be probably feasible (I did not check the licence agreement) but as a fall-back we can build libpq.dll without ssl support (I would not prefer this but still better than no Pg support at all).</p><p>3) In case of including LIBEAY32.DLL/SSLEAY32.DLL I would appreciate to also include Net::SSLeay into standard strawberry distribution or to include also openssl's *.h/*.a to be able to install Net::SSLeay from cpan. I have quite positive experience with getting Net::SSLeay work on Win32.</p><p>--<br>kmx</p>



<blockquote>

<h2>Re:MySQL and Postgres support</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-08-04T22:02:45</h3>
<p>Can I have you hold up for just a bit before you go and build a MingW PostgreSQL for me? (We're now talking October release, so we have some time to decide.) I'll need to check on whether we want to include ssl or not.</p><p>When you do build it, and if we say yes on building OpenSSL into it, if you could build it against the Shining Light Productions compilation of OpenSSL (it includes MingW libraries), it'd be much appreciated.</p><p>If we decide to go the OpenSSL-including route, I'd like to be able to build everything against the same OpenSSL, and once SL's OpenSSL is installed, I've had NO problems with building Net::SSLeay on Strawberry myself.<nobr> <wbr></nobr>:)</p>



<h2>Re:MySQL and Postgres support</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-08-04T22:14:17</h3>
<p>Cancel that. DON'T use Shining Light - I forgot they have a dependency on MSVCR90.DLL - even worse! (We're trying to keep dependencies to MSVCRT.DLL only - not the versioned variants, so the gnuwin32 version probably won't work, either. That and it's out of date.)</p><p>We'll probably have to build OpenSSL from scratch, too.</p>



<blockquote>

<h2>Re:MySQL and Postgres support</h2>
<h3><a href="/user/kmx/">kmx</a> on 2009-08-05T07:59:52</h3>
<p>Hi,</p><p>of course I will be happy to help you with building Pg support. In fact I have already done it for myself.</p><p>My approach is based on the following:</p><p>1) OpenSSL - I am currently using Shining Light but you are right that they are dependant on MSVCR90.DLL. I do not expect any problems rebuilding these DLLs - I have done it in one of our projects some time ago (both mingw and ms sdk compiler).</p><p>2) For bulding postgress I am using msys enviroment<br>- get <a href="http://downloads.sourceforge.net/mingw/msysCORE-1.0.11-bin.tar.gz" title="sourceforge.net">http://downloads.sourceforge.net/mingw/msysCORE-1.0.11-bin.tar.gz</a sourceforge.net><br>- unzip into c:\msys<br>- run c:\msys\postinstall\pi.bat and answer that your mingw is c:\strawberry\c</p><p>3) Bulding Pg is quite easy:<br>- unpack Pg source files<br>- run: c:\msys\msys.bat and cd into Pg source dir<br>- run:<nobr> <wbr></nobr>./configure --with-openssl --with-ldap<br>- then: make install</p><p>4) Copy dev libs/headers from c:\msys\local\pgsql into your strawberry<br>- c:\msys\local\pgsql\bin\pg_config.exe -&gt; c:\strawberry\c\bin<br>- c:\msys\local\pgsql\lib\libpq.dll -&gt; c:\strawberry\c\bin<br>- c:\msys\local\pgsql\lib\libpq.a -&gt; c:\strawberry\c\lib<br>- c:\msys\local\pgsql\include\* -&gt; c:\strawberry\c\include</p><p>LIBPQ.DLL has following dependecies:<br>c:\windows\system32\advapi32.dll<br>c:\windows\system32\kernel32.dll<br>c:\windows\system32\msvcrt.dll<br>c:\windows\system32\secur32.dll<br>c:\windows\system32\shfolder.dll<br>c:\windows\system32\wldap32.dll<br>c:\windows\system32\wsock32.dll<br>c:\strawberry\c\bin\ssleay32.dll<br>c:\strawberry\c\bin\libeay32.dll</p><p>Unfortunately I was not able to include GSSAPI + Kerberos5 support into LIBPQ.DLL (in fact I do not use it and therefore have not tried so much).</p><p>5) Now simply: cpan DBD::Pg</p><p>So open questions:<br>- openssl rebuild - mingw or ms compiler?<br>- what about gssapi and krb5 support in libpq.dll - can we live without it?</p><p>--<br>kmx</p>



<blockquote>

<h2>Re:MySQL and Postgres support</h2>
<h3><a href="/user/DiamondInTheRough/">DiamondInTheRough</a> on 2009-08-05T10:52:58</h3>
<p>Your first question: Preferably mingw, so we get the<nobr> <wbr></nobr>.a files for free. If not, then msvc with<nobr> <wbr></nobr>/MT instead of<nobr> <wbr></nobr>/MD (use the static MSVCRT instead of having a dep on MSVCR90.DLL and friends - this will require a non-Express version) and we can use pexports and company to generate a<nobr> <wbr></nobr>.a for us, if a<nobr> <wbr></nobr>.lib isn't there at the end to be renamed.</p><p>As for your second question, I think we can live without it, but I want a second opinion.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

