<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of djberg96: Perl nightmares</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl nightmares</h1>
<h2><a href="/user/djberg96/">djberg96</a> on 2004-10-15T19:39:39</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Today I was asked to help out another team with some legacy Perl code.  It's some seriously awful crap.  The problem is not so much the coding style (although that could use work, too) as the way they've setup their library paths.  And by "they", I'm referring to programmers that have long since left the company.
<P>
You see, they've got the shebang lines hard coded in a bunch of files (which are, ultimately, fired off from, and returned to, a Java process).  The problem is that the original system it was designed for assumed Perl 5.004_01 in /usr/bin and Perl 5.005_03 in /usr/local/bin.  Different, but related, scripts require specific versions, due to the location of in-house libraries.  Then, the 5.004_01 scripts actually unshift the Perl 5.005_03 site_lib into the @INC array.  So, now we've got a mix of two different versions of Perl using libraries from each other's site_lib.
<P>
Lovely.  And breaks horribly if Perl is installed differently on a different system (as it was today).
<P>
"Well, Dan, why don't just move all the in house code into Perl 5.005_03 and forever rid yourself of Perl 5.004_01 altogether?  Or, better yet, upgrade to Perl 5.8.x?  You know, one Perl to rule them all and all that?"
<P>
I'm glad you asked.  The answer is simple - compatability.  I don't know for sure, but I get the distinct feeling (based on some past experiences here) that the code that relies on 5.004_01 breaks in newer versions of Perl.  The tests we ran today more or less confirmed that by tinkering with shebang lines and forcing certain versions of the interpreter on the command line.
<P>
What those issues might be, I can't say for certain.  I can't see any other reason for this situation to exist, or to have ever existed in the first place.
<P>
"So, how about a rewrite?"
<P>
Not enough time.</p>


<hr/>



<h2>Yes but...</h2>
<h3><a href="/user/zatoichi/">zatoichi</a> on 2004-10-16T01:47:04</h3>
Fundamentally it needs to change. Make it work now, but then start doing a re-write to get it up to date. The work in the short term is going to much appreciated in avoiding the nightmare in the long term.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

