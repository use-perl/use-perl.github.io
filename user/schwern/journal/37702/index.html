<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of schwern: use Time::y2038::Everywhere</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>use Time::y2038::Everywhere</h1>
<h2><a href="/user/schwern/">schwern</a> on 2008-10-20T07:41:26</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>After I dropped the y2038 code into <a href="http://search.cpan.org/perldoc?Time::Local::Extended">Time::Local::Extended</a>, a few other authors were asking me to do the same for their modules.  Rather than have them all ship copies of the C code and redo the XS work, I've just uploaded <a href="http://search.cpan.org/perldoc?Time::y2038">Time::y2038</a>, a thin wrapper around the y2038 project.<br/><br/>This means you can use Time::y2038 and get 2038 safe versions of localtime(), gmtime(), timelocal() and timegm().  Also included is <a href="http://search.cpan.org/perldoc?Time::y2038::Everywhere">Time::y2038::Everywhere</a> which replaces the localtime() and gmtime() functions for everyone.  Use it once and your 2038 problems are solved in all the modules you use.<br/><br/>Note that the versions of timelocal() and timegm() are <b>not</b> compatible with Time::Local.  Time::Local does some "helpful" things to the year (9, 109 and 2009 are all interpreted as 2009) making it impossible to specify certain years (like year 9).  I'll leave it to Time::Local to wrap that bit of stupid around them.
</p>


<hr/>



<h2>LOOK OUT!</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2008-10-20T17:49:17</h3>
<p>Cue the "I don't care if you're <em>fixing</em> bugs so that code actually works, making global changes to Perl is bad and wrong!" complaints in 3... 2... 1....</p>



<blockquote>

<h2>Re:LOOK OUT!</h2>
<h3><a href="/user/schwern/">schwern</a> on 2008-10-20T19:50:36</h3>
<p>This is why I put it in its own module, so nobody can complain they can't use X without also getting the global effect.  It also tries to emulate the core functions exactly, I resisted mightily the urge to fix the interfaces.</p><p>Hopefully if someone does have a problem it will be concrete rather than vague architectural wibbling.</p>



<blockquote>

<h2>Re:LOOK OUT!</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2008-10-20T21:03:45</h3>
<blockquote><div><p> <em>This is why I put it in its own module, so nobody can complain they can't use X without also getting the global effect.</em></p></div> </blockquote><p>Wait until the first CPAN distribution marks it as a dependency.</p><blockquote><div><p> <em>Hopefully if someone does have a problem it will be concrete rather than vague architectural wibbling.</em></p></div> </blockquote><p>Been hit on the head recently?  "Dear chromatic, I used your test module and not only did it <em>find</em> bugs, but it told me exactly where they were and how to fix them.  Please die in a fire."</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

