<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of schwern: That damned Test::More threading test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>That damned Test::More threading test</h1>
<h2><a href="/user/schwern/">schwern</a> on 2008-02-24T03:12:21</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I did it.  I finally killed that damned threading test in Test::More.  is_deeply_fail.t will no longer run unless AUTHOR_TESTING is set.<br/><br/>For those who don't know, that test would tickle intermittent threading bugs in certain vendor supplied versions of perl.  The 5.8.6 OS X ships with and most Redhat derivatives are vulnerable, but it would only fail about one in a hundred times.  I don't know what the problem is, I suspect it's from vendors pulling in bleadperl patches but I haven't confirmed.  Nobody's put the time into it to find out.<br/><br/>Since there's nothing I can do about it, and it was just holding up CPAN installations, I turned the test off.  Done.</p>


<hr/>



<h2>Why AUTHOR_TESTING?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2008-02-25T01:43:27</h3>
Surely you want it in the CPAN Testers tests?<br><br>AUTOMATED_TESTING instead?



<blockquote>

<h2>Re:Why AUTHOR_TESTING?</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-02-25T08:46:07</h3>
<p>That's very much a mixed bag.  On one hand, yes, you clearly would want it in those tests.  On the other, it's not confidence inspiring to see a lot of test failures when you're evaluating a module.  Of course, people say "yes, but you should check to see what causes those failures", but this is problematic.  Many, many times I've received a failure report with absolutely no information about why something has failed.  Or I get a failure report with spurious information, which is just as annoying.</p>

<p>If Schwern allows automated testing, not only does he have a good chance of getting bogus failure reports, he might find himself in the annoying position of getting into wasteful dialogues with some testers who aren't familiar with this issue and really, why should they be?</p>

<p>OK, that was all just spewing as I sorted out my thoughts.  I guess what would be good is to have a special type of "no report" test.  In other words, a test which can fail, sort of like a TODO, but which automated tests shouldn't report.  I'm unsure of the mechanism here.  Didn't someone on Perl QA mention something like this, or am I smoking crack?</p>



<h2>Re:Why AUTHOR_TESTING?</h2>
<h3><a href="/user/schwern/">schwern</a> on 2008-03-02T10:28:38</h3>
<p><div class="quote">Surely you want it in the CPAN Testers tests?</div> They're not telling me anything I don't already know, there's nothing I can do about it and it's highly intermittent.  Takes dozens or hundreds of runs before it shows up.<br><br>There's only so many times I can say "don't use Redhat's (or any distribution derived from Redhat) perl".<br>



<blockquote>

<h2>Re:Why AUTHOR_TESTING?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-02T14:30:17</h3>
<p>No, the point is, if there is an <em>actual</em> regression that these tests would catch, on a platform you don&#8217;t have, you won&#8217;t know about it if the CPAN Testers don&#8217;t run those tests.</p>

<p>How much of a concern that is depends on the tests in question.</p>

<p>Intermittent failures from CPAN Testers should be easy to ignore, in any case.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

