<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of schwern: The Secret Life Of Whitespace REVEALED!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>The Secret Life Of Whitespace REVEALED!</h1>
<h2><a href="/user/schwern/">schwern</a> on 2009-02-23T00:27:01</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>When I see code like this:<br/><br/><pre>
        # Locale-ize the parser
    my $ampm_list = join('|', @{$self->{_locale}->am_pms});
        $ampm_list .= '|' . lc $ampm_list;
</pre><br/><br/>its a dead give-away that the author is using 4-character tabs.  Particularly hateful.  Not only do I have to sleuth that tabs are being used, but I also have to change my tab stops.  (Delicious irony: use.perl translated the tabs to spaces... four spaces... so I had to detabify the example for it to show up correctly).<br/><br/>I count about 20 tabs vs space indention mistakes in this module which just illustrates why tabs are so hateful... THEY'RE INVISIBLE!  Little hidden surprises sprinkled all over the code.  Even the author can't see the mistake.  Tab users like to tout that it allows you to use whatever indentation level you like when in reality you just wind up with mixed up tabs and spaces.<br/><br/>Since I can't KILL ALL TAB USERS I guess I'll just have to get better tools.  Fortunately there's already a large discussion of <a href="http://www.emacswiki.org/emacs-en/ShowWhiteSpace">how to show whitespace</a> on the EmacsWiki.  I went with <a href="http://www.emacswiki.org/emacs/download/show-wspace.el">show-wspace.el</a>.  Now if only emacs could guess at the author's indentation style and adjust itself to match.<br/><br/>Comment from vi user in 3..2..1..</p>


<hr/>



<h2>vi? What about vim?</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2009-02-23T00:50:03</h3>
<p>Vim:</p><blockquote><div><p> <tt>set expandtab</tt></p></div> </blockquote><p>And your troubles are over<nobr> <wbr></nobr>:)</p><p>... until you have to edit a friggin' <tt>Makefile</tt><nobr> <wbr></nobr>:(</p><p>(expandtab converts tabs to their equivalent spaces.  There are many similar commands to get fine-grained control over this)</p><p>Of course, if you just want to show unwanted whitespace, we have <a href="http://vim.wikia.com/wiki/Highlight_unwanted_spaces" title="wikia.com">plenty of builtin ways of doing that</a wikia.com>.</p>



<blockquote>

<h2>Major modes are major useful.</h2>
<h3><a href="/user/schwern/">schwern</a> on 2009-02-23T03:24:24</h3>
<p>You mean vim isn't smart enough to know you need leading tabs in Makefiles?  Hmm, too bad.</p>



<blockquote>

<h2>Re:Major modes are major useful.</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T03:49:53</h3>
<p>No, Ovid just isn&#8217;t smart enough yet to tell it.<nobr> <wbr></nobr><tt>:-)</tt> </p><p>From my<nobr> <wbr></nobr><code>.vimrc</code>:</p><blockquote><div><p> <tt>autocmd FileType python setlocal expandtab</tt></p></div> </blockquote>



<h2>Re:Major modes are major useful.</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T03:57:41</h3>
<p>Oh, and the <code>make</code> filetype plugin could easily set this automatically. I don&#8217;t know why it doesn&#8217;t, but it doesn&#8217;t bother me that it does not, either.</p>



<h2>Re:Major modes are major useful.</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2009-02-23T08:10:52</h3>
<p>It's configurable on a "per filetype" basis. I just don't edit makesfiles often enough to care and I set it manually then.</p>





</blockquote>


<h2>Re:vi? What about vim?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T03:56:14</h3>
<p>The real equivalent to what Michael is doing is called<nobr> <wbr></nobr><code>:set list</code>, which will render tabs as <tt>^I</tt>. In vim but not vi you can also use the <code>listchars</code> variable to control how tabs are rendered, as well as various other invisible things like end of line, trailing whitespace, line cut-off at screen edges, etc.</p>





</blockquote>


<h2>What is this reality you speak of?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T03:47:09</h3>
<blockquote><div><p>Tab users like to tout that it allows you to use whatever indentation level you like when in reality you just wind up with mixed up tabs and spaces.</p></div> </blockquote><p>I&#8217;ve been programming with tabs for indentation and spaces for alignment for the better part of a decade.</p><p>I&#8217;ve never had a single problem keeping things straight in my own code.</p>



<blockquote>

<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/schwern/">schwern</a> on 2009-02-23T04:24:06</h3>
<blockquote><div><p>I've never had a single problem keeping things straight in my own code.</p></div></blockquote><p>Its your code and your style, of course it makes sense to you!  You could write in rot13'd Swahili and it would still make sense, but only to you.</p><p>Here is the best advice I can give about writing maintainable code:  It's not about you.  It's about everyone else.  Each personal style quirk that others have to puzzle out or adjust to or in any way hampers and frustrates their ability to quickly skim and patch your code loses you patches.  This means more work for you.</p><p>Same reason I don't like quirky bracing styles.  All the arguments about their superiority in the world won't change that they make everyone else's brain strip a gear trying to read them.</p>



<blockquote>

<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/hdp/">hdp</a> on 2009-02-23T04:29:24</h3>
<p>Schwern<br>, I think you underestimate the productivity gains<br>; your quirky style is my well-tuned machine!</p>



<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T04:52:37</h3>
<blockquote><div><p>You could write in rot13&#8217;d Swahili and it would still make sense</p></div> </blockquote><p>Oh please. Your argument might hold water if you weren&#8217;t talking to someone who is about 17&#215; more obsessed with clarity than the average programmer &#8211; and has gotten the compliments to prove that it makes sense to others. (I hate boasting, but for the sake of this argument I need to point out the evidence that it&#8217;s not just in my head.)</p><blockquote><div><p>It&#8217;s not about you. It&#8217;s about everyone else.</p></div> </blockquote><p>When in Rome, I do as the Romans do. When I&#8217;m just a contributor I don&#8217;t go on crusades to enforce any particular style on someone else&#8217;s code, I follow the one I find, even if I shake my head at it.</p><p>When the code is mine, I equally expect others to adhere to the style I use.</p>



<blockquote>

<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/schwern/">schwern</a> on 2009-02-23T05:42:19</h3>
<blockquote><div><p>Oh please. Your argument might hold water if you weren&#226;&#8364;&#8482;t talking to someone who is about 17&#195;&#8212; more obsessed with clarity than the average programmer &#226;&#8364;&#8220; and has gotten the compliments to prove that it makes sense to others. (I hate boasting, but for the sake of this argument I need to point out the evidence that it&#226;&#8364;&#8482;s not just in my head.)</p></div></blockquote><p>Don't get so excited, I do silly things too.</p><p>Unfortunately, this is an ad hominem argument essentially saying that because one does A, B and C good things that D must be good as well.  While it may improve the probability that D will be a good thing, it does not itself constitute a valid argument.  It would be just as wrong of me to try and defend a bad test by pointing at my years of testing experience.</p><blockquote><div><p>When the code is mine, I equally expect others to adhere to the style I use.</p></div></blockquote><p>Herein lies the problem.  While it is good as a contributor to follow the project style and avoid clashing with the rest of the contributors, it is not good as a project to use an odd style.  Why?  Consider the worst case where each contributor works on N projects.  If N projects each have their own style each contributor must learn N styles.  They have to rejigger their editor and their brain when switching projects.  This, simply put, is drag on the contributors.</p><p>Worse, if your style is in the minority then few contributors will be comfortable with it adding yet more drag.  Each new contributor has a higher probability of never having encountered this style before, and it doesn't take much annoyances for a new contributor to decide it's not worth it.</p><p>This doesn't even get into which style is "better".  It trumps it, doesn't even let it get started.  The coordination concerns are so much more important than any possible benefit either the tab or the whitespace indentation camps could put forward.  That's something good project managers learn quickly.</p><p>Consider this.  Let's say I finally got around to being comfortable with the <a href="http://colemak.com/" title="colemak.com">Colemak</a colemak.com> keyboard layout.  Now let's say I want to pair program with others using my machine.  Do I leave the keyboard in Colemak?  Will this help getting work done with my pair?  Will people be more likely to pair with me if I do?  No.  Even if Colemak is clearly better than QWERTY, it's still awkward and annoying for everyone but me.</p>



<blockquote>

<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T06:00:43</h3>
<blockquote><div><p>If N projects each have their own style each contributor must learn N styles.</p></div> </blockquote><p>Ah, the Python school of thought. I like Perl better.</p>



<blockquote>

<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/schwern/">schwern</a> on 2009-02-23T07:25:54</h3>
<p>[Hmm, is invoking Python the Perl variation on Godwin's Law?]</p><blockquote><div><p>Although the Perl Slogan is There's More Than One Way to Do It, I hesitate<br>to make 10 ways to do something.<nobr> <wbr></nobr>:-)<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --Larry Wall in</p></div></blockquote><p>There is merit in the Python view on style.  Like anything else, the key is knowing when to apply a rule and when not to.  You don't want to over do it and pave the community flat.  You don't want to under do it and wind up with style Balkanization.  I think it's perfectly fine to have lots of different styles, IF they have enough advantages to offset having to retrain.</p><p>Neither tabs nor whitespace as indentation have a clear advantage over one another.  The programming community argues endlessly over which is "better" to no conclusion.  Like the mule who stands equidistant between two equally delicious bales of hay, we kill ourselves because we can't just PICK ONE AND STICK WITH IT!</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/grantm/">grantm</a> on 2009-02-23T07:21:19</h3>
<p>I'm 100% with Schwern on this one.  Tabs for indentation are just evil.  Sure it works OK for you because you have your tools set up a certain way.  But when you collaborate with others their tools will be set up differently and what they see will be different to what you see.  For example I picked one of your CPAN modules at random and scrolled down looking for messed up indents.  Sure enough in <a href="http://search.cpan.org/src/ARISTOTLE/XML-Atom-SimpleFeed-0.82/lib/XML/Atom/SimpleFeed.pm" title="cpan.org">XML/Atom/SimpleFeed.pm</a cpan.org> starting line 334 you have a group of lines that are indented with space rather than tabs.  You can't see that because as Schwern says, tabs are invisible.</p><p>The reason I could zero in on the example so quickly is I have this handy little setting in my vimrc:</p><blockquote><div><p> <tt>match Error<nobr> <wbr></nobr>/\t\|\s\+$/</tt></p></div> </blockquote><p>That causes trailing whitespace of any type and tab characters in any position to be displayed with a red background.  Of course I also have a handy key mapping to turn that off when I'm working in a tab-infected project.</p>



<blockquote>

<h2>Re:What is this reality you speak of?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-02-23T08:05:55</h3>
<p>Figures. From looking at what part of the file it happened in, I know exactly what went wrong, too. Vim and me, we let each other down, there&#8230;<nobr> <wbr></nobr><tt>:-(</tt> </p><p>I&#8217;ve added <code>set list</code> to my<nobr> <wbr></nobr><code>.vimrc</code> to ensure it won&#8217;t happen again.</p><p>(The apparently-empty lines that this exercise revealed further down the file (in the POD section, l.427 ff.) bug me even more.)</p>





</blockquote>

</blockquote>


<h2>How about this?</h2>
<h3><a href="/user/tsee/">tsee</a> on 2009-02-23T07:45:07</h3>
<p>So you expected the vim users to flog you with comments. I'm a vim user, but here's for something different:</p><p>With *Padre*, you can configure your favourite indentation setting, then check the little box that says "automatic indentation finding" or somesuch and it'll use your own style for new files, but it will automatically adapt to the indentation style of existing files as you open them! It also honours the vim and emacs style magic comments that are used here or there for setting the indentation style.</p><p>It's not perfect (yet), but works so well that I wonder why vim doesn't do it out of the box. I don't know about emacs, but I don't think it does that either.</p>



<blockquote>

<h2>Re:How about this?</h2>
<h3><a href="/user/schwern/">schwern</a> on 2009-02-23T10:23:23</h3>
<p>Ok, that's damn hot.  Now I will give Padre another look.</p>



<blockquote>

<h2>Re:How about this?</h2>
<h3><a href="/user/tsee/">tsee</a> on 2009-02-23T13:15:21</h3>
<p>The really strange thing is that it's such a basic convenience feature that could and should be implemented anywhere.</p><p>The current implementation of the indentation finding in Padre is actually pretty horrible. It's in the Text::FindIndent module on CPAN. (I hacked it up so I can bash it, too.) The one thing that breaks it occasionally is POD. If you have a lot of POD with verbatim blocks in it (where most people use spaces regardless of how they indent their code), they aren't ignored. That would be a rather modest change, but nobody has felt the itch yet.</p><p>While I'm at it: There's another reeeaaally nice feature: The online syntax checking. It requires that you make sure all modules in your project can be compiled in arbitrary order, but in my experience developing Padre itself, that's *usually* not too hard. This has saved me a lot of silly mistakes in the past.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

