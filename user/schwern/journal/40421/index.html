<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of schwern: Where The Hell Is Test::Builder2?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Where The Hell Is Test::Builder2?</h1>
<h2><a href="/user/schwern/">schwern</a> on 2010-06-27T19:16:09</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>My progress and communication about the Test::Builder2 grant has been nothing short of appalling.  There is a sort of herky-jerky progress where I figure out a design problem, push the code forward, then remember a use-case that throws a wrench in the whole design and the whole thing comes to a screeching halt again.<br/><br/>At the QA hackathon we elegantly solved the problem of things like <a href="<a href="http://groups.google.com/group/test-more-users/browse_thread/thread/89d9b65016c6dba1">die-on-fail and Test::NoWarnings</a> but then ran afoul of things like Test::Warn and Test::Exception which runs tests inside of tests but those aren't actually part of the test stack.<br/><br/>Confused?  I'll post more about it another time.  Point is, TB2 continues to move forward, its just that there's long periods of rumination between sprints of development.  And I get distracted by other projects.  At this rate I'll be collecting Social Security before I collect the second half of the grant.  I really want TB2 to happen, but something decisive has to be done.  I work best with hard deadlines, so the plan is to clear a month for working mostly on TB2.  A lot of the wibbling is trying to come up with the most elegant solution, but I usually have a less than elegant way to solve it and move forward.  If its between an elegant TB2 that doesn't exist and a less elegant TB2 that does, well, go with the one that exists.  With the way my schedule is looking, that will probably be mid-August to mid-September.  If that doesn't produce an alpha, then I'll kill the grant.<br/><br/>That doesn't mean TPF gets nothing for your money.  Chunks of TB2 can be harvested to improve TB1.  Specifically, the TB2 formatting and history objects.  The TB2 formatter makes the guts of TB1 cleaner, and it also allows it to produce something other than TAP.  Used together, history and formatter allows non-Test::Builder based test frameworks to work together with Test::Builder providing even more flexibility.  This is <a href="http://github.com/schwern/test-more/blob/Test-Builder2/lib/Test/Builder.pm">already done in the TB2 branch</a>.<br/><br/>Looking at the grant deliverables, most of it is done:<br/><br/><pre>
* Split up global shared Test resources into individual objects
    * The test counter
    * The output filehandles
    * The plan<br/><br/>* Allow hooks for global beginning and end of test functions.
    * Ensure multiple hooks "stack"
    * die on fail
    * debug on fail<br/><br/>* Hooks for global beginning and end of test actions
    * Example: A safer Test::NoWarnings
    * Example: Don't cleanup temp files on failure so they can be debugged<br/><br/>* Allow for test output other than TAP<br/><br/>* Allow another Test::Builder-like module to work in the same process
  as Test::Builder (for example, sharing the counter).<br/><br/>* Rewrite Test::Builder in terms of Test::Builder2.
</pre><br/><br/>Here's what's not complete:<br/><br/><pre>
* Split up localizable behaviors into objects<br/><br/>* Allow individual test modules to locally override Test::Builder2 behaviors<br/><br/>* Allow test modules to globally override Test::Builder2 behaviors
    * How the plan works
</pre><br/><br/>Since I'm not writing to the letter of the law, <a href="http://github.com/schwern/test-more/issues/labels/Test-Builder2">there's more than that to be done before release</a>, but the project does move.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

