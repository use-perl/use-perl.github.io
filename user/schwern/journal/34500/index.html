<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of schwern: Alien::SVN - Installing SVK now 521% easier!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Alien::SVN - Installing SVK now 521% easier!</h1>
<h2><a href="/user/schwern/">schwern</a> on 2007-09-21T02:23:11</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>As some of you know, installing <a href="http://search.cpan.org/dist/SVK">SVK</a> can be a pain in the ass.  Aside from a huge pile of normal dependencies, it depends on SVN::Core, the Perl bindings to the SVN libraries.  SVN::Core lies deep inside the Subversion source tree.  It does not get installed by default, you have to rebuild Subversion and run some additional stuff.  Maybe you're lucky and your vendor supplies a package for it, but it's something that makes SVK installation non-automatable.<br/><br/>So I got to thinking, why not just ship a wrapper around Subversion that does all that work for you?  So I did.  <a href="http://search.cpan.org/dist/Alien-SVN">Alien::SVN</a> comes with a full Subversion source tree.  It builds Subversion and installs just the libraries.  Now authors can depend on SVN::Core and let the normal dependency resolution figure it out. <br/><br/>There's still warts.  I've only tried it on OS X and Ubuntu.  You still need all sorts of dependencies for Subversion like APR (Apache Runtime) and I think Python and Neon.  It's highly unlikely to work on Windows.  What I'm likely to do is add an option to download and install the binaries if things go sour.<br/><br/>Using Module::Build made the code to do this amazingly straight forward.  You can look at how it works without wanting to claw your eyes out.  I can't even fathom how I'd get MakeMaker to do it.  Ironically, it needs make and has to interact with a Makefile.PL to build SVN::Core.
</p>


<hr/>



<h2>Win32 support...</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-09-21T03:54:58</h3>
Binaries would probably be by far the best way to add Win32 support.



<h2>Nifty</h2>
<h3><a href="/user/grinder/">grinder</a> on 2007-09-21T12:20:48</h3>
<p>Oh you slack bastard Schwern! I wish you had done this last week.</p>

<p>I butchered my FreeBSD ports system on my laptop to install bleadperl as an official port, to see what breaks. After a certain amount of grief, I made it work.</p>

<p>Of course, all XS modules with stuff in 5.8.8/mach and the like evidently stopped working. So for svk, I had to reinstall SVN::Core. Here I ran into Configure hell where sometime<nobr> <wbr></nobr>/usr/bin/perl (5.8.8) was used, and elsewhere<nobr> <wbr></nobr>/usr/local/bin/perl (5.10). And so it could never find the libraries. Took me about 8 hours on and off playing with PERL5LIB, PATH and<nobr> <wbr></nobr>/etc/make.conf trying to get everyone to dance to the same tune.</p>

<p>This module would have saved me a lot of time. Schwern++ for actually having written this.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

