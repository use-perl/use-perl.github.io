<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of scrottie: Things I didn't know about nvi, but you probably did</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Things I didn't know about nvi, but you probably did</h1>
<h2><a href="/user/scrottie/">scrottie</a> on 2007-01-17T19:30:59</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Like learning a language from a book (or extending your vacabulary from the 'net, where you see but don't hear words), you miss subtleties.  Such has been my vi-fu.  Going back into a real job for the first time in six years, and the first time in perhaps nine years where I've worked with other programmers who used vi seriously, I'm finding that my self-taught vi skills are, uh, incomplete.  Finding these holes sent me on a mission to find other holes, going back and finding and reading good ex and old vi documentation, and here are the fruits of my labor.    This list is just stuff that's in nvi -- I might switch to vim, but, for now, I wanted a list of things that were right under my nose for years and years.<br/><br/>   ^A   -- search forward for the word under the cursor<br/><br/>   R    -- like i, except overtypes instead of inserts<br/><br/>   A     -- jump to last non-blank character in line and enter append mode (like insert mode)<br/><br/>   I     -- jump to first non-blank character on the line and enter insert mode<br/><br/>   ^Y    -- staying on same line, center screen on line, then subsequently, still staying on same line, scroll screen down one line, exposing stuff above the current line<br/><br/>  :preserve  -- can't write to disc for some reason?  This simulates a crash, without exiting, and saves the file for recovery with -r<br/><br/>  :rewind    -- :next moves you to the next file when you do something like vi *, :rewind moves you back to the first file.  This exists entirely independantly and in parallel to :fg :bg stuff.<br/><br/>  :set tags=<file>  -- load a ctags-formatted tags file and use it<br/><br/>  :ta <tag>  -- I knew vi had ctags support, but I didn't ever really think about the prospects of supporting Perl, or aware that it was already done -- just never occured to me -- but it is supported!<br/><br/>  ^]         -- find the definition or next occurance of the tag under the cursor<br/><br/>  ^T         -- return to where we were before the last jump-to-tag with ^].  nvi has a whole tag stack, but I won't get into that here.<br/><br/>  :tagn      -- jump to next occurance of a tag -- nvi supports the concept of multiple definitions of the same tag with a previous/next for them<br/><br/>  :tagp      -- jump to previous occurance of a tag<br/><br/>  %          -- as an address (eg, instead of 10p or 1,$!), means the entire file (same as 1,$)<br/><br/>  %!sort     -- sorts all of the lines in the file<br/><br/>  >          -- indents the current line by whatever tabstop is set to<br/><br/>  .,/^}/>    -- example -- indent form here to the next } starting a line<br/><br/>  :g     -- performs a global match-and-execute-command operation, eg:<br/><br/>  :g /h3/ d   -- delete all lines that match /h3/<br/><br/>  :g!    -- same but inverse match -- performs on lines that don't match<br/><br/>  :map    -- assigns a (hopefully unused) character to some other character sequence as a command mode alias<br/><br/>  :map g blurgh  -- haven't played with this much so I don't know if it lets you do things like %!sort on the right hand side<br/><br/>  :set filec=<char>   -- enables file completion for file arguments in : mode -- sets a key (hopefully a control key or similar) that when used in : mode attempts to complete partially typed filenames -- yay!<br/><br/>  :set cedit=<char>    -- sets a character for command mode to open up a buffer on the : command history and let you edit past commands and execute them again with <enter><br/><br/>  :E <file>         -- splits the current screen/buffer and loads a new file in a new buffer/screen half
  :Edit <file>      -- long version of same<br/><br/>  :Bg                  -- background the current window -- uncertain about diff from :bg<br/><br/>  :Fg <file>           -- add a screen half for the currently loaded buffer for <file><br/><br/>  :display screens     -- show which screens/buffers are loaded<br/><br/>  :fg                  -- foreground an already loaded buffer over the whole screen<br/><br/>  :bg                  -- background the whole screen<br/><br/>  ^W                   -- change which split window you're in of the those on the screen<br/><br/>I'm an nvi user -- I started with the *real* AT&T ex, pre-Bill Joy, so keep in mind that vim is a radical departure for me.  Some of the defaults annoy the hell out of me -- syntax highlighting, automatic indenting... yes, I can turn them off, but I couldn't seem to make an rc file to do so -- the normal vi conventions for doing so are broken, and even vim users had lots of trouble doing so because of this brokeness.  I'm not sure how or where, but it seems like there are lots of other pieces of brokenness.  Or maybe not.  But now I have incentive to find out.  That'll be another article, though.<br/><br/>-scott</p>


<hr/>



<h2>More vi</h2>
<h3><a href="/user/runrig/">runrig</a> on 2007-01-17T22:38:50</h3>
<blockquote> <div><em>%!sort -- sorts all of the lines in the file</em></div> </blockquote>
<p>I've rarely found that useful...more often it's:</p> <p><blockquote> <div><tt>ma -- mark line as line "a" now go down to another line<br>mb -- mark line as line "b"<br>:'a,'b!sort -- sort lines "a" through "b"</tt></div> </blockquote>



<blockquote>

<h2>Re:More vi</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-02-07T07:41:24</h3>
<p>In vim, I use a visual selection for the job. Shift-v in normal mode takes you to visual line mode; select the line range you want to manipulate, then type<nobr> <wbr></nobr><tt>:!sort</tt>. Note that vim will automatically type <tt>'&lt;,'&gt; </tt> for you when you go from visual mode to command mode, so the command actually executed is <code>'&lt;,'&gt;!sort</code>, which filters the selected lines through <tt>sort</tt>.</p>

<p>Very handy. Also nice for selectively <tt>perltidy</tt>ing code and such.</p>





</blockquote>


<h2>Config file</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2007-01-18T13:31:18</h3>
Put a<nobr> <wbr></nobr>.vimrc file in your home directory and in the file put "syntax off" and you should be good to go.



<h2>another vi indent trick</h2>
<h3><a href="/user/awwaiid/">awwaiid</a> on 2007-02-03T06:34:14</h3>
All the things you mentioned apply to vim also, I believe. Here's one that I know works in vim, and might work in nvi.<br><br>
&nbsp; &nbsp; &gt;i{   -- indent the enclosing {<nobr> <wbr></nobr>... } block<br><br>--Brock





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

