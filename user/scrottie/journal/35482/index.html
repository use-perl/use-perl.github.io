<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of scrottie: *My* Perl Wishlist (Hint: Not Your Wishlist)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>*My* Perl Wishlist (Hint: Not Your Wishlist)</h1>
<h2><a href="/user/scrottie/">scrottie</a> on 2008-01-25T10:04:48</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Perl 6 (as specified) exists as the sum of other people's wishes.  Some of them are quite awesome.  But here's what *I* want in Perl.<br/><br/>* I want to see the Perl grammar written in Perl.  The optimizer has already been rewritten in Perl along with a means of plugging in additional optimizations (for fixing up the code to change it's semantics, inspect it for correctness, etc).  Having the grammar in Perl will allow it too to be extensible.<br/><br/>* I want to see the various ops in the pp_*.c source files implemented in Perl.  Educated readers will see where I'm going with this.<br/><br/>* I want to see a B::CC counterpart that works very, very well.  Ops that store state in their own op structures will have to be modified to stop frickin' doing that in the spirit of ROMable code.  That's .. and ..., at least.<br/><br/>At this point, Perl 5 is self hosting.  Perl is written in Perl, and Perl compiles Perl down to machine code.  This is important for a bunch of reasons.  It's easier to modify and extend the language.  Working in C is a PITA.  Computers can do a better job optimizing large programs than humans have time or energy to.  The interpreter would be retained, so programs can be run immediately or compiled and then run as a binary.<br/><br/>* Good static analysis done on the parse tree (which is the same as the bytecode tree) so that optimizations can be proved safe for the compiler.  For example, a scalar could be proven to never hold anything but numbers, eliminating a lot of calls to pOK.  Variables could be proven, in many cases, never to be tied, or having various other magic on them, eliminating large numbers of checks that are done on the variable before and during their uses in the present interpreter.  Rather than inlining the contents of the pp_*.c definitions, a *subset* of the contents of the pp_*.c op definition could be inlined.  There's no real win on compiling or JIT-ing until this kind of static analysis is done and it can be proven that large amounts of code can be omitted from the op definitions in specific cases.<br/><br/>* More and more Perl 6 is implemented on the magical, mythical self-hosting Perl 5.  Perl 5 should slowly morph into a reasonable subset of Perl 6.  XS back compat should be broken for cases where the macros can't be adapted to work, which is about any time magic or anything severe is used.  Modules that depend heavily on the core do important things and would be moved to core -- autobox, Coro, Padwalker, etc.<br/><br/>-scott<br/><br/></p>


<hr/>



<h2>It is my wishlist too!</h2>
<h3><a href="/user/Stevan/">Stevan</a> on 2008-01-25T15:46:24</h3>
<p>
Hmm, funny these things are all on my wishlist too, although I just didn't know it until you detailed them<nobr> <wbr></nobr>:)
</p>
<p>
I would love to see static anlysis &amp; type inference in Perl not just for optimization's sake, but for type-check style "safety" (your typesafety.pm module is a definite starting point). And of course the ability to extend Perl with Perl on a level beyond what can already be done would be awesome.
</p>
<p>
Very nice post.
</p>
<p>
- Stevan
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

