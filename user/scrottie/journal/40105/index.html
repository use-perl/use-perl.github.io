<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of scrottie: Less non-constructive thoughts on DBIx::Class</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Less non-constructive thoughts on DBIx::Class</h1>
<h2><a href="/user/scrottie/">scrottie</a> on 2010-01-15T15:01:41</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Working with the Web, there's going to be some kind of a dispatch or system for getting requests to handlers and there is going to be the handlers.  Then with a database there is logic to fetch from and store to the database.  You've probably just stepped into a trap.  In a useful object design, objects are named after the nouns the system was written to operate on, and after the verbs it performs on those objects.  The program is a reflection of the problem it's meant to solve and enough of the problem's world.  If you're writing an accounting system, you would, ideally, have objects for lineitems, accounts, etc, and if you're doing a visitor type thing, then for actions that can be done on other objects.  But, chances are, that's not what you're doing.  Your problem has shifted from accounting to that of dealing with the computer you're programming.  Your objects are named after this problem space instead:  request handlers; the database; and so on.<br/><br/>MVC won't save you from defaulting to dumping business logic into big classes because OO-ifying the business logic isn't as pressing as setting up the web side and database glue.<br/><br/>You could subclass your DBIx::Class resultset objects and trust your schema to model the actual problem.  That could work nicely if your database is full of useful views and uses views to abstract away the changing, growing actual schema.  Or you could make a dedicated effort at putting objects in front of record set objects for important things ("account", "customer", etc) and letting those serialize/deserialize themselves using DBIx::Class with a has-a sort of relationship to the recordset objects they correspond to.  There are other things you could use instead of DBIx::Class if you only want persistence -- KiokuDB comes to mind.<br/><br/>I don't have any brilliant thoughts right now other than to say, don't do that.<br/><br/>-scott
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

