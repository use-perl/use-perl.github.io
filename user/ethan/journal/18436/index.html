<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ethan: Reverse engineering from scratch</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Reverse engineering from scratch</h1>
<h2><a href="/user/ethan/">ethan</a> on 2004-04-22T19:14:30</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>For some reason I am a huge fan of a very old DOS game, namely EASPORT's NHL93. As WindowsME is the last Windows version
which can run the game without emulators, I'll keep it around for another few years.<br/><br/>There are a number of things however that aren't quite right with this game. For instance, players hardly get any penalties. And when they do, the difference between aggressive and not so aggressive players is too small (Tie Domi simply must sit on the bench far more often than, say, Pierre Turgeon).<br/><br/>Each player has 15 attributes attached to himself (shoothand and 14 numeric values describing his strong and weak points in the range of 0 and 100). I know that these values can be higher than 100 because there is one player (it must be a bug in the program), that has an endurance of 370 and indeed, the line he's playing on hardly fatigues at all. Now my idea was to figure out where and how the player ratings are saved among the many data files that belong to a season.<br/><br/>My first attempt was running the game on Linux under dosbox and do a <code>strace</code> on it. That showed me which files are read but the signal-to-noise ratio rendered this approach pretty useless.<br/><br/>Instead I am now opening the files in a hex-editor, change a few bytes and see what changes in the game. As I have never done such a thing before, it is a bit of a tedious work. But with that and Perl (which I use to read and unpack a file when I think I have identified something) I was able to decipher the way the game stores the teams's schedules. It's an easy 6-byte record per game (first two bytes are month/day, third byte home team, forth byte away team and two bytes (<code>0xFF 0xFF</code>) used as record separators). Figuring out that took me around half an hour.<br/><br/>Too bad that this was not the information I was looking for so my search continues now.
</p>


<hr/>



<h2>Come to the 2000s</h2>
<h3><a href="/user/pudge/">pudge</a> on 2004-04-28T05:24:10</h3>
Get EA's NHL 2004 or something.<nobr> <wbr></nobr>:)



<blockquote>

<h2>Re:Come to the 2000s</h2>
<h3><a href="/user/ethan/">ethan</a> on 2004-04-28T05:48:12</h3>
I also have NHL 2003 which was alright (besides 1997, 1998, 1999 and 2000). 2004...well, maybe I'll get hold on that unexpectedly.<nobr> <wbr></nobr>;-)<br> <br>The recent EASPORT games certainly look awesome and are fun to play. But oddly enough, for me they are still no match for NHL93. I am playing this game in a rather odd way, I have to say. I am controlling all teams in my league, playing one third of each two teams in a game myself and have the last third be played by the computer.<br> <br>This (and some other of my beloved rules) is something that cannot be done with the more recent games. The downside is that an NHL93 league is only always one year. This is much better in the recent games. But now that I have deciphered the various binary files (I am almost done with that),  I can overcome this shortcoming by writing Perl scripts that parse the old league data and create a new league where the strength of the players is modified accordingly with their stats, where I can calculate players that will become free agents etc. I will also be able to have players retire and replace them with the rookies that really entered the NHL in 1994.<br> <br>With that I admit that I am guilty of hyper-hubris. But happily so.<nobr> <wbr></nobr>;-)<br> <br>As a side issue, I wonder whether EA would possibly release the source code of this old game. After all, it's 13 years old by now and there is hardly any corporate secret in the source any longer. It would be so cool if one could modify and adopt the source to one's personal needs (and my needs are not covered by any existing game, unfortunately).





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

