<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of brian_d_foy: I need Solaris testers for Crypt::Rijndael</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>I need Solaris testers for Crypt::Rijndael</h1>
<h2><a href="/user/brian_d_foy/">brian_d_foy</a> on 2007-10-11T15:06:01</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I'm still trying to get Crypt::Rijndael to compile correctly everywhere *and* pass all the tests. I've had some reports of it compiling just fine on Solaris (using gcc and suncc), but then not doing the right thing. As such, I've added a test to encrypt a string then decrypt it to see if it comes out the same way. I need some people with access to Solaris (any version) to run Crypt::Rijndael-1.04_02 through CPAN.pm with CPAN::Reporter (and some other thing that reports to CPAN Testers).<br/><br/>The latest development release doesn't show any failures yet, but there is only one test for Solaris (2.9 using gcc). <br/><br/>Previously I was testing this with the Sourceforge compiler farm, but that's no longer available (and how much more sucky can Sourceforge get?). I've been looking for a nice VMWare image of Solaristoo :)</p>


<hr/>



<h2>Here's what I see....</h2>
<h3><a href="/user/speters/">speters</a> on 2007-10-11T16:35:33</h3>
<p><blockquote> <div><tt>Checking if your kit is complete...<br>Looks good<br>Writing Makefile for Crypt::Rijndael<br>cp Rijndael.pm blib/lib/Crypt/Rijndael.pm<br>/opt/SUNWspro/bin/cc -c&nbsp; &nbsp;-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -DPERL_USE_SAFE_PUTENV -O&nbsp; &nbsp;-DVERSION=\"1.04\" -DXS_VERSION=\"1.04\" -KPIC "-I/tmp/bleadperl/lib/5.10.0/i86pc-solaris/CORE"&nbsp; &nbsp;_rijndael.c<br>"_rijndael.c", line 425: warning: integer overflow detected: op "&lt;&lt;"<br>"_rijndael.c", line 464: warning: integer overflow detected: op "&lt;&lt;"<br>/tmp/bleadperl/bin/perl5.10.0<nobr> <wbr></nobr>/tmp/bleadperl/lib/5.10.0/ExtUtils/xsubpp&nbsp; -typemap<nobr> <wbr></nobr>/tmp/bleadperl/lib/5.10.0/ExtUtils/typemap -typemap typemap&nbsp; Rijndael.xs &gt; Rijndael.xsc &amp;&amp; mv Rijndael.xsc Rijndael.c<br>/opt/SUNWspro/bin/cc -c&nbsp; &nbsp;-I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DPERL_USE_SAFE_PUTENV -DPERL_USE_SAFE_PUTENV -O&nbsp; &nbsp;-DVERSION=\"1.04\" -DXS_VERSION=\"1.04\" -KPIC "-I/tmp/bleadperl/lib/5.10.0/i86pc-solaris/CORE"&nbsp; &nbsp;Rijndael.c<br>"Rijndael.xs", line 120: warning: argument #3 is incompatible with prototype:<br>&nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to const unsigned char : "rijndael.h", line 112<br>&nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to char<br>"Rijndael.xs", line 162: warning: argument #4 is incompatible with prototype:<br>&nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to unsigned char : "unknown", line 0<br>&nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to char<br>Running Mkbootstrap for Crypt::Rijndael ()<br>chmod 644 Rijndael.bs<br>rm -f blib/arch/auto/Crypt/Rijndael/Rijndael.so<br>/opt/SUNWspro/bin/cc&nbsp; -G -L/usr/lib -L/usr/ccs/lib -L/opt/SUNWspro/prod/lib -L/lib -L/usr/local/lib _rijndael.o Rijndael.o&nbsp; -o blib/arch/auto/Crypt/Rijndael/Rijndael.so&nbsp; &nbsp; &nbsp; &nbsp; \<br>&nbsp; &nbsp; &nbsp; &nbsp; \<br> <br>chmod 755 blib/arch/auto/Crypt/Rijndael/Rijndael.so<br>cp Rijndael.bs blib/arch/auto/Crypt/Rijndael/Rijndael.bs<br>chmod 644 blib/arch/auto/Crypt/Rijndael/Rijndael.bs<br>Manifying blib/man3/Crypt::Rijndael.3<br>&nbsp; BDFOY/Crypt-Rijndael-1.04.tar.gz<br>&nbsp;<nobr> <wbr></nobr>/usr/bin/make -- OK<br>Running make test<br>/tmp/bleadperl/bin/perl5.10.0 "-MTest::Manifest" "-e" "run_t_manifest(0, 'blib/lib', 'blib/arch',&nbsp; )"<br>Level is<br>Test::Manifest::test_harness found [t/00_load.t t/pod.t t/pod_coverage.t]<br>t/00_load.........FAILED tests 36, 38, 40<br>&nbsp; &nbsp; &nbsp; &nbsp; Failed 3/41 tests, 92.68% okay<br>t/pod.............ok<br>t/pod_coverage....ok<br>Failed Test Stat Wstat Total Fail&nbsp; List of Failed<br>-----------------------------------------------------------------------<nobr>-<wbr></nobr>  -------<br>t/00_load.t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;41&nbsp; &nbsp; 3&nbsp; 36 38 40<br>Failed 1/3 test scripts. 3/43 subtests failed.<br>Files=3, Tests=43,&nbsp; 1 wallclock secs ( 0.38 cusr +&nbsp; 0.12 csys =&nbsp; 0.50 CPU)<br>Failed 1/3 test programs. 3/43 subtests failed.<br>make: *** [test_dynamic] Error 255</tt></div> </blockquote> ...and with prove....<p><blockquote> <div><tt>[steve@sulu Crypt-Rijndael-1.04-HYXoPF]$<nobr> <wbr></nobr>/tmp/bleadperl/bin/prove5.10.0 -bv t/00_load.t<br>t/00_load....1..41<br>ok 1<br>ok 2<br>ok 3<br>ok 4<br>ok 5<br>ok 6<br>ok 7<br>ok 8<br>ok 9<br>ok 10<br>ok 11<br>ok 12<br>ok 13<br>ok 14<br>ok 15<br>ok 16<br>ok 17<br>ok 18<br>ok 19<br>ok 20<br>ok 21<br>ok 22<br>ok 23<br>ok 24<br>ok 25<br>ok 26<br>ok 27<br>ok 28<br>ok 29<br>ok 30<br>ok 31<br>ok 32<br>ok 33<br>ok 34<br>ok 35<br>not ok 36<br>ok 37<br>not ok 38<br>ok 39<br>not ok 40<br>ok 41<br>FAILED tests 36, 38, 40<br>&nbsp; &nbsp; &nbsp; &nbsp; Failed 3/41 tests, 92.68% okay<br>Failed Test Stat Wstat Total Fail&nbsp; List of Failed<br>-----------------------------------------------------------------------<nobr>-<wbr></nobr>  -------<br>t/00_load.t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;41&nbsp; &nbsp; 3&nbsp; 36 38 40<br>Failed 1/1 test scripts. 3/41 subtests failed.<br>Files=1, Tests=41,&nbsp; 0 wallclock secs ( 0.03 cusr +&nbsp; 0.01 csys =&nbsp; 0.04 CPU)<br>Failed 1/1 test programs. 3/41 subtests failed.</tt></div> </blockquote> ...using...<p><blockquote> <div><tt>[steve@sulu Crypt-Rijndael-1.04-HYXoPF]$ uname -a<br>SunOS sulu 5.11 snv_40 i86pc i386 i86pc<br>[steve@sulu Crypt-Rijndael-1.04-HYXoPF]$ cc -V<br>cc: Sun C 5.8 2005/10/13</tt></div> </blockquote>



<blockquote>

<h2>Re:Here's what I see....</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2007-10-11T16:58:25</h3>
I forgot to mention that I need this for the latest developer version (Crypt-Rijndael-1.04_02). That's where the extra tests are<nobr> <wbr></nobr>:)<br><br>





</blockquote>


<h2>UltraSparc T1 (Niagara)</h2>
<h3><a href="/user/link/">link</a> on 2007-10-11T17:59:50</h3>
No solaris but I tried on linux sparc.<br>All the tests passed but I got a few warnings.<br><br>Rijndael.xs: In function 'XS_Crypt__Rijndael_new':<br>Rijndael.xs:120: warning: pointer targets in passing argument 3 of 'rijndael_set                                                                             up' differ in signedness<br>Rijndael.xs: In function 'XS_Crypt__Rijndael_encrypt':<br>Rijndael.xs:162: warning: pointer targets in passing argument 4 of '(ix) != 0l ?                                                                              &amp;block_decrypt : &amp;block_encrypt' differ in signedness<br>



<blockquote>

<h2>Re:UltraSparc T1 (Niagara)</h2>
<h3><a href="/user/link/">link</a> on 2007-10-11T18:09:25</h3>
As above with 1.04_02 but with line number shifted 8





</blockquote>


<h2>Solaris 8</h2>
<h3><a href="/user/brainsick/">brainsick</a> on 2007-10-11T22:18:46</h3>
Hey brian,<br><br>I worked with you on getting Crypt::Rijndael to build on Solaris using the Sun Studio 10 C Compiler a while back so I figured I might part of your target audience.  I'm not familiar with CPAN Testers (and don't have the time to familiarize myself with it right now), but I'm hoping this is still useful to you:<br><br>[user@unixbox1:/home/user/temp/Crypt-Rijndael-1.04_02]&gt; uname -a<br>SunOS unixbox1 5.8 Generic_117350-49 sun4u sparc SUNW,Ultra-250<br>[user@unixbox1:/home/user/temp]&gt; gunzip -cd Crypt-Rijndael-1.04_02.tar.gz | tar xvf -<br>x Crypt-Rijndael-1.04_02, 0 bytes, 0 tape blocks<br>x Crypt-Rijndael-1.04_02/_rijndael.c, 22777 bytes, 45 tape blocks<br>x Crypt-Rijndael-1.04_02/Changes, 2773 bytes, 6 tape blocks<br>x Crypt-Rijndael-1.04_02/COPYING, 23244 bytes, 46 tape blocks<br>x Crypt-Rijndael-1.04_02/examples, 0 bytes, 0 tape blocks<br>x Crypt-Rijndael-1.04_02/examples/README, 69 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/LICENSE, 31 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/Makefile.PL, 791 bytes, 2 tape blocks<br>x Crypt-Rijndael-1.04_02/MANIFEST, 350 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/META.yml, 435 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/NEWS, 369 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/README, 2867 bytes, 6 tape blocks<br>x Crypt-Rijndael-1.04_02/rijndael.h, 5348 bytes, 11 tape blocks<br>x Crypt-Rijndael-1.04_02/Rijndael.pm, 2955 bytes, 6 tape blocks<br>x Crypt-Rijndael-1.04_02/Rijndael.xs, 3821 bytes, 8 tape blocks<br>x Crypt-Rijndael-1.04_02/t, 0 bytes, 0 tape blocks<br>x Crypt-Rijndael-1.04_02/t/00_load.t, 11396 bytes, 23 tape blocks<br>x Crypt-Rijndael-1.04_02/t/blocksize.t, 155 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/cbc.t, 449 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/cfb.t, 450 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/ctr.t, 449 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/ecb.t, 449 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/lib, 0 bytes, 0 tape blocks<br>x Crypt-Rijndael-1.04_02/t/lib/mode.pl, 488 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/ofb.t, 449 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/pcbc.t, 545 bytes, 2 tape blocks<br>x Crypt-Rijndael-1.04_02/t/pod.t, 128 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/pod_coverage.t, 160 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/t/rt, 0 bytes, 0 tape blocks<br>x Crypt-Rijndael-1.04_02/t/rt/27632.t, 1040 bytes, 3 tape blocks<br>x Crypt-Rijndael-1.04_02/t/test_manifest, 171 bytes, 1 tape blocks<br>x Crypt-Rijndael-1.04_02/typemap, 28 bytes, 1 tape blocks<br>[user@unixbox1:/home/user/temp]&gt; cd Crypt-Rijndael-1.04_02<br>[user@unixbox1:/home/user/temp/Crypt-Rijndael-1.04_02]&gt; perl -v<br><br>This is perl, v5.8.8 built for sun4-solaris<br><br>Copyright 1987-2006, Larry Wall<br><br>Perl may be copied only under the terms of either the Artistic License or the<br>GNU General Public License, which may be found in the Perl 5 source kit.<br><br>Complete documentation for Perl, including FAQ lists, should be found on<br>this system using "man perl" or "perldoc perl".  If you have access to the<br>Internet, point your browser at <a href="http://www.perl.org/" title="perl.org">http://www.perl.org/</a perl.org>, the Perl Home Page.<br>[user@unixbox1:/home/user/temp/Crypt-Rijndael-1.04_02]&gt; perl Makefile.PL<br>WARNING: LICENSE is not a known parameter.<br>Checking if your kit is complete...<br>Looks good<br>'LICENSE' is not a known MakeMaker parameter name.<br>Writing Makefile for Crypt::Rijndael<br>[user@unixbox1:/home/user/temp/Crypt-Rijndael-1.04_02]&gt; make<br>cp Rijndael.pm blib/lib/Crypt/Rijndael.pm<nobr> <wbr></nobr>/opt/SUNWspro/bin/cc -c   -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O   -DVERSION=\"1.04_02\" -DXS_VERSION=\"1.04_02\" -KPIC "-I/usr/local/lib/perl5/5.8.8/sun4-solaris/CORE"   _rijndael.c<br>"_rijndael.c", line 425: warning: integer overflow detected: op " Rijndael.xsc &amp;&amp; mv Rijndael.xsc Rijndael.c<nobr> <wbr></nobr>/opt/SUNWspro/bin/cc -c   -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -O   -DVERSION=\"1.04_02\" -DXS_VERSION=\"1.04_02\" -KPIC "-I/usr/local/lib/perl5/5.8.8/sun4-solaris/CORE"   Rijndael.c<br>"Rijndael.xs", line 128: warning: argument #3 is incompatible with prototype:<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to const unsigned char : "rijndael.h", line 112<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to char<br>"Rijndael.xs", line 170: warning: argument #4 is incompatible with prototype:<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; prototype: pointer to unsigned char : "unknown", line 0<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; argument : pointer to char<br>Running Mkbootstrap for Crypt::Rijndael ()<br>chmod 644 Rijndael.bs<br>rm -f blib/arch/auto/Crypt/Rijndael/Rijndael.so<nobr> <wbr></nobr>/opt/SUNWspro/bin/cc  -G -L/usr/lib -L/usr/ccs/lib -L/opt/SUNWspro/prod/lib/v8plus -L/opt/SUNWspro/prod/lib -L/lib -L/usr/local/lib _rijndael.o Rijndael.o  -o blib/arch/auto/Crypt/Rijndael/Rijndael.so        \<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br><br>chmod 755 blib/arch/auto/Crypt/Rijndael/Rijndael.so<br>cp Rijndael.bs blib/arch/auto/Crypt/Rijndael/Rijndael.bs<br>chmod 644 blib/arch/auto/Crypt/Rijndael/Rijndael.bs<br>Manifying blib/man3/Crypt::Rijndael.3<br>[user@unixbox1:/home/user/temp/Crypt-Rijndael-1.04_02]&gt; make test<br>PERL_DL_NONLAZY=1<nobr> <wbr></nobr>/usr/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t<br>t/00_load.........ok<br>t/blocksize.......ok<br>t/cbc.............ok<br>t/cfb.............ok<br>t/ctr.............ok<br>t/ecb.............ok<br>t/ofb.............ok<br>t/pcbc............ok<br>t/pod.............skipped<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all skipped: Test::Pod 1.00 required for testing POD<br>t/pod_coverage....skipped<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all skipped: Test::Pod::Coverage 1.00 required for testing POD coverage<br>All tests successful, 2 tests skipped.<br>Files=10, Tests=117,  4 wallclock secs ( 2.51 cusr +  0.74 csys =  3.25 CPU)<br><br>



<h2>Pure Perl</h2>
<h3><a href="/user/djberg96/">djberg96</a> on 2007-10-12T19:51:07</h3>
Unless you really need the speed, I go with pure Perl and avoid the issue completely. Have you benchmarked the difference?



<blockquote>

<h2>Re:Pure Perl</h2>
<h3><a href="/user/djberg96/">djberg96</a> on 2007-10-12T20:09:21</h3>
BTW, all tests pass on Solaris 10 using Sun Studio compiler 12 and a 32-bit Perl. Here's minor patch #1:
<p><p><blockquote> <div><tt>&gt;diff -u _rijndael.orig _rijndael.c<br>--- rijndael.orig&nbsp; &nbsp; &nbsp; &nbsp;Fri Oct 12 14:00:48 2007<br>+++ _rijndael.c Fri Oct 12 14:03:50 2007<br>@@ -422,7 +422,7 @@<br>&nbsp; &nbsp; &nbsp;e = wtxt[j] &amp; 0xff;<br>&nbsp; &nbsp; &nbsp;e |= (wtxt[idx[1][j]]) &amp; (0xff &lt;&lt; 8);<br>&nbsp; &nbsp; &nbsp;e |= (wtxt[idx[2][j]]) &amp; (0xff &lt;&lt; 16);<br>-&nbsp; &nbsp; e |= (wtxt[idx[3][j]]) &amp; (0xff &lt;&lt; 24);<br>+&nbsp; &nbsp; e |= (wtxt[idx[3][j]]) &amp; (0xffU &lt;&lt; 24);<br>&nbsp; &nbsp; &nbsp;t[j] = e;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;for (j=0; j&lt;4; j++)<br>@@ -461,7 +461,7 @@<br>&nbsp; &nbsp; &nbsp;e = wtxt[j] &amp; 0xff;<br>&nbsp; &nbsp; &nbsp;e |= (wtxt[iidx[1][j]]) &amp; (0xff &lt;&lt; 8);<br>&nbsp; &nbsp; &nbsp;e |= (wtxt[iidx[2][j]]) &amp; (0xff &lt;&lt; 16);<br>-&nbsp; &nbsp; e |= (wtxt[iidx[3][j]]) &amp; (0xff &lt;&lt; 24);<br>+&nbsp; &nbsp; e |= (wtxt[iidx[3][j]]) &amp; (0xffU &lt;&lt; 24);<br>&nbsp; &nbsp; &nbsp;t[j] = e;<br>&nbsp; &nbsp;}<br>&nbsp; &nbsp;for (j=0; j&lt;4; j++)</tt></div> </blockquote>



<blockquote>

<h2>Re:Pure Perl</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2007-10-14T20:37:09</h3>
Good patch, applied to 1.04_03.  Thanks.<nobr> <wbr></nobr>:)<br><br>This also led me to figure out the other signedness warnings I've seen on some platforms. It compiles cleanly now (so far), but we'll see what the testers see now.<br><br>Thanks,





</blockquote>

</blockquote>


<h2>Solaris vmware and qemu images</h2>
<h3><a href="/user/elwarren/">elwarren</a> on 2007-10-12T21:43:52</h3>
You can download qemu images of Solaris10x86 or OpenSolaris from the Free OS Zoo at this link.  Try your luck at converting qemu images to vmware format.<br/><br/><a href="http://www.oszoo.org/wiki/index.php/Special:Search?search=solaris&amp;go=Go" title="oszoo.org">http://www.oszoo.org/wiki/index.php/Special:Search?search=solaris&amp;go=Go</a oszoo.org><br/><br/>Cheers,
Warren



<h2>It works</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-10-14T12:09:22</h3>
PASS on Solaris 2.9 with gcc.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

