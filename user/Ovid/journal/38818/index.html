<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: Fun Numbers - Ruby and Perl</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Fun Numbers - Ruby and Perl</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2009-04-17T13:53:45</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>From Tim Bunce's <a href="http://www.slideshare.net/Tim.Bunce/perl-myths-200802-with-notes?src=related_normal&rel=298087">Perl 5 Myths</a> talk: Perl 5.10.0 has 78,883 core tests.</p>

<p>Ruby has about 1,400.</p>

<p>1,400.</p>

<p>So Perl 5 core test suite has about 50 times as many tests as Ruby.  So who has the testing culture again?  It's not entirely a fair comparison because it's not asserting how many features each language has, but I doubt that Ruby is so feature poor to justify Perl having more than 50 tests for every 1 of Ruby's.</p>

<p>Hello, core Ruby developers!  You've got an awesome language there.  Could you start testing, please?  Your community seems to do OK.  Why not you?</p></p>


<hr/>



<h2>CPAN?</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2009-04-17T15:07:42</h3>
<p>What happens if you add CPAN tests to that count?  And whatever is the Ruby equivalent.</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2009-04-17T15:25:34</h3>
<p>Tough to say.  According to Tim's slides, if we include bundled libraries, we drop significantly to a 7 to 1 advantage for tests.  However, there's no clear way I can see to design a reasonable metric for non-core tests.  LOC/test is silly, particularly since core Ruby seems to generate terser code than core Perl for similar functionality.  Tests per function point would be difficult to analyze without static analysis of function points and agreement on said analysis.</p><p>To be fair, even the core tests might be problematic if they bundle multiple assertions into a single "test".  However, they'd still have to have an average of over 50 assertions per "test" and that would suggest that their tests weren't granular enough.</p><p>Also, assessing the quality of the tests is impossible.  Even 100% coverage is a pretty silly metric with only unit tests and full path coverage testing is impossible.</p><p>More importantly, the CPAN tests would be almost useless even if we did have agreement.  <tt>Class::Trait</tt> has tests to assert that we didn't fall afoul of the SUPER:: bug, so if core Perl had no test for that, this merely means that we test that certain unwanted behaviors don't impact our code, not that Perl doesn't have these behaviors.</p><p>Core tests are far, far, far more important than non-core tests.  You need to know that the foundation you're building on is rock-solid and without core tests, it's tough to be certain of that, particularly since a well-designed, stable test suite can almost be viewed as a contract, something Ruby currently lacks.</p><p>I know there are Ruby developers who are very frustrated with this (Daniel Berger is one, if I recall correctly) and have complained in their blogs that the core Ruby developers aren't really taking this as seriously as they should.</p><p>50 to 1 test coverage kind of makes that point without further argument, but it would be nice to know if such an important technology is coming up to speed in this area.</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2009-04-17T15:38:24</h3>
<p>Was thinking also about things like CPAN Testers.  3,592,446 public test reports (as of last night) vs ???.</p><p>At least as evidence of a "testing culture".<nobr> <wbr></nobr>:-)</p><p>-- dagolden</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2009-04-17T15:45:46</h3>
<p>Heh<nobr> <wbr></nobr>:)</p><p>I'm unaware of any other language community having anything remotely comparable.</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2009-04-17T17:08:04</h3>
<p>... yet.</p><p>Many of the repositories are within a few years of us, so it's important to not get too proud about what we have, and keep pushing ahead.</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2009-04-17T19:25:51</h3>
<p>First, those language communities have to get serious about including systematic automated testing throughout their repositories.  I hope they do, but I haven't seen it.</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-04-17T20:13:49</h3>
<p>That doesn&#8217;t really affect Adam&#8217;s point. Most of the infrastructure we have was built by individual efforts, so other communities with enough sufficiently determined members could clearly duplicate it in a reasonable time frame. (My gut estimate is about 3 years all told.)</p><p>Even if other communities show no signs of such an effort and seem to be parsecs behind, that doesn&#8217;t mean we shouldn&#8217;t still keep pushing forward <em>as if</em> the would-be competition were breathing down our necks.</p><p>Even if that image falsely assumes that this is a competition in the first place. The point is, resting on laurels is a good way to dry them up; we can&#8217;t go wrong by continuing to push the envelope as hard as possible.</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2009-04-17T21:05:42</h3>
<blockquote><div><p> <em>Even if that image falsely assumes that this is a competition in the first place.</em></p></div> </blockquote><p>I don't believe it is.  I want to see a comprehensive and freely distributable and reusable test suite for every widely used language.  That's the only way we can port them to Parrot, for example.  (There's also the code quality issue.  Can I assume everyone understands that by now?)</p>



<blockquote>

<h2>Re:CPAN?</h2>
<h3><a href="/user/jpedrosa/">jpedrosa</a> on 2009-04-17T21:55:26</h3>
Thanks for the Perl 6 numbers.<br/><br/>Speaking of more languages to Parrot, how is JavaScript coming along? Or ECMAScript?<br/><br/>Because Google's v8 engine is a pretty good indication that JavaScript is a potential competitor for the server side needs as well. I have been creating some benchmarks and it fairs quite well against Ruby 1.9, Python and PHP, and while I don't like reinventing the wheel or the code bloat of JavaScript when compared to Ruby, it's certainly a platform to more than watch.<br/><br/>See k7:
<a href="http://github.com/sebastien/k7/tree/master" title="github.com">http://github.com/sebastien/k7/tree/master</a github.com>



<h2>Re:CPAN?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-04-17T22:34:45</h3>
<p>Oh, I&#8217;m not talking about the size of the language core test suite. I&#8217;m talking about the things Adam appeared to be referring to, by virtue of the comment which he replied to &#8211; namely the CPAN Testers and all the attendant infrastructure.</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>How about Perl 6's numbers?</h2>
<h3><a href="/user/jpedrosa/">jpedrosa</a> on 2009-04-17T20:39:38</h3>
Inquiring minds want to know.



<blockquote>

<h2>Re:How about Perl 6's numbers?</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2009-04-17T20:59:50</h3>
<p>Rakudo knows about almost 16,000 spec tests and passes just over 10,000.  The total number should cross 25,000 eventually.  (When Rakudo <em>passes</em> 16,000 spec tests, it'll be very usable.)</p>





</blockquote>


<h2>Rubyspec</h2>
<h3><a href="/user/djwhitt/">djwhitt</a> on 2009-04-18T00:56:11</h3>
<p>You should really check out Rubyspec: <a href="http://rubyspec.org/" title="rubyspec.org">http://rubyspec.org/</a rubyspec.org> </p><p>These are the numbers from a CI run I did just a second ago: 2541 files, 10296 examples, 33053 expectations, 0 failures, 2 errors</p>



<h2>Cheap shots</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2009-04-19T17:03:25</h3>
<p>Comparing test numbers is a load of crap, and you know that. It's the sort of stupid advocacy that people complain about when applied to Perl and shouldn't be used to compare Perl favorably to anything else. It's really embarrassing when big Perl names spread this sort of shit around. It hurts the credibility of people who try to advocate Perl in a fair manner. Ruby doesn't have to lose for Perl to be useful.</p><p>If you want to make a valid point, talk about test coverage. You know this, though. You went for a cheap shot though, and that helps no one.</p><p>Let's not forget, that despite all its tests, Perl 5.10 didn't have enough to ensure smart matching worked.</p>



<blockquote>

<h2>Re:Cheap shots</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2009-04-20T07:21:33</h3>
<p>You know, you could easily have phrased that without saying "shit" and "load of crap".  It's really embarrassing when big Perl names act like this.</p>



<blockquote>

<h2>Re:Cheap shots</h2>
<h3><a href="/user/petdance/">petdance</a> on 2009-04-23T19:31:37</h3>
And "stupid."





</blockquote>


<h2>Re:Cheap shots</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2009-04-20T19:04:43</h3>
<blockquote><div><p> <em>Ruby doesn't have to lose for Perl to be useful.</em></p></div> </blockquote><p>Who says Ruby has to lose?  Who says anyone wants Ruby to lose?  (Who even knows what that means?)  I'd like to see Ruby much better tested.  It's a nice language, but I've found its lack of a systemic testing culture very frustrating.</p>





</blockquote>


<h2>Apples and oranges</h2>
<h3><a href="/user/dstar/">dstar</a> on 2009-04-19T19:44:07</h3>
<p>It's entirely possible that 'test' means different things for Ruby and Perl. I recently looked into what it would take to port a particular module to Ruby (because, as far as I can tell, there's no solution for parsing RTF for Ruby), and if I'd done so I would probably have had less than a tenth as many tests. The test suite for the module tested a huge number of things for no reason that I could see, such as the contents of various internal buffers during the parsing process rather than testing the output (and I'd think that that would make refactoring almost impossible....).</p><p>I'm not saying that's the case here, or that Ruby has as much test coverage as Perl, but it's entirely possible. Does it matter whether Ruby has 1 test, 1,000 tests, or 100,000 tests if they all result in the same code coverage?</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

