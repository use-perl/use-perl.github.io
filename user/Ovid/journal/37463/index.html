<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: No PerlUnit You Fools!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>No PerlUnit You Fools!</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2008-09-16T08:43:07</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Over at StackOverflow, I am horrified by people <a href="http://stackoverflow.com/questions/49652/any-good-automated-test-suite-for-perl">recommending</a> <a href="http://stackoverflow.com/questions/66330/perl-aids-for-regression-testing">PerlUnit</a> (and its Test::Unit front end).  Isn't this abandonware?  It's not been seriously touched in years.  Aren't companies and people which choose this technology are generally showing that they're not paying attention to latest developments in Perl?  Is there something I've seriously missed here?</p>

<p>PerlUnit is dead.  It doesn't integrate with standard Perl testing tools.  I would <em>love</em> to see someone pick it up again so that we could make it useful, but until then, why one earth would anyone use this?</p></p>


<hr/>



<h2>That is exactly the reason</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-09-16T11:08:24</h3>
<p>&#8230; why I wanted StackOverflow to have a strong core Perl community preserence.<nobr> <wbr></nobr><tt>:-)</tt> </p>



<h2>What's in a name?</h2>
<h3><a href="/user/siracusa/">siracusa</a> on 2008-09-16T12:09:25</h3>
But...but...it has "Unit" in the name!  It's like JUnit, but for Perl!  Says so right there!  "Unit!"



<blockquote>

<h2>Re:What's in a name?</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-16T12:17:13</h3>
<p>Heh<nobr> <wbr></nobr>:)</p><p>I do suspect that drives some of its use.  I know one company here in London which interviewed me and when I asked about their testing infrastructure, they told me they used PerlUnit.  That's a <em>huge</em> turn-off for me.  If a company is that clueless, I don't wanna work for 'em.</p>





</blockquote>


<h2>Test::Unit is dead. Long live the Test::Unit::Lite</h2>
<h3><a href="/user/d3xter/">d3xter</a> on 2008-09-16T14:54:34</h3>
Please. some people just want to use real OO test suite, not just poor Test::Simple.



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/jrockway/">jrockway</a> on 2008-09-16T15:17:24</h3>
Then you would want Test::Class.



<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-16T15:53:18</h3>
<p> <tt>Test::Class</tt> is the way to go here.  It also integrates with all of the standard Perl testing libraries.  It doesn't look like <tt>Test::Unit::Lite</tt> does that.</p>



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/d3xter/">d3xter</a> on 2008-09-16T17:17:43</h3>
Standard Perl testing libraries have poor and ugly non-OO API. Theirs tests also don't die after failure which differs from JUnit, PerlUnit, etc.



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Adrian/">Adrian</a> on 2008-09-16T17:44:45</h3>
<p>"Standard Perl testing libraries have poor and ugly non-OO API"</p><p>"Standard" perl testing libraries are organisationally agnostic. Which is one of their great advantages. So you can write OO (if you want) with things like Test::Class, or procedurally (if you want) with plain Test::More style, or in a functional style, or... whatever...</p><p>Please go look at Test::Class - which has a very OO API<nobr> <wbr></nobr>:-)</p><p>"Theirs tests also don't die after failure which differs from JUnit, PerlUnit, etc"</p><p>It does differ from jUnit - not entirely sure if it's always a clear cut win however. there are sometimes advantages to seeing all of the assertion failures in a test. Depends how you write your test methods.</p><p>It's also trivial to make them error on initial failure if you want them to.</p>



<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2008-09-16T18:57:43</h3>
<blockquote><div><p> <em>Standard Perl testing libraries have poor and ugly non-OO API.</em></p></div> </blockquote><p>How does modeling <code>assertEquals</code> as a static method show evidence of good design?</p>



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-16T20:23:42</h3>
<p>Oh, it doesn't<nobr> <wbr></nobr>:)  It's also worth noting that Test::Unit::Lite provides virtually no diagnostic information and forces the programmer to type a heck of a lot more boilerplate with absolutely no benefit whatsoever.  And we won't even talk about how incredibly primitive (read: near useless) the assertions are.</p><p>At least with the static methods in jUnit, you don't have to type a bunch of useless <tt>$self-&gt;</tt> statements or their equivalent (but it also means that there's no real way to track state).</p>





</blockquote>


<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-16T20:11:30</h3>
<p>If you want your tests to die after failure, use Test::Most.</p>



<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-16T20:16:28</h3>
<p>I should also add that if you <em>really</em> want to march to a different drummer and use a piece of software that virtually no one else will touch, that's fine, but at least see if you can submit patches to it so that it can at least output TAP and integrate with standard testing tools.</p>



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/d3xter/">d3xter</a> on 2008-09-17T10:42:03</h3>
Well, yes. It means that the standard testing tool are really TAP protocol and Test::Harness module, not Test::Simple or Test::More.

<p>BTW, I'd like to see support for nested tests for TAP protocol, something like:

<code> <br>
 1..3<br>
   unit 1..2<br>
     ok PASS unit 1/1<br>
     ok PASS unit 1/2<br>
   unit 1..1<br>
     ok PASS unit 2/1<br>
   unit 1..3<br>
     ok PASS unit 3/1<br>
     not ok Something goes wrong with 3/2<br>
     ok PASS unit 3/3<br>
</code>

</p><p>It is sad that the JUnit model really can't be implemented with Perl's TAP because TAP protocol lacks of nested tests.</p>



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-17T11:16:21</h3>
<p>Agreed.  This is a serious limitation of TAP.  If you'd like to push for this, <a href="http://news.oreilly.com/2008/08/the-test-anything-protocol-iet.html" title="oreilly.com">sign up for the TAP IETF mailing list and we can work on getting it done.</a oreilly.com></p><p>On the other hand, the xUnit model which says "die on failure and you have no choice in the matter" doesn't fit well with TAP, either.  Tough to assert a leading plan of eight tests when it dies after three and you get a <em>second</em> failure because you didn't complete the plan (unless you artificially fill in a bunch of useless failing tests to pad things out).  The "die on failure" attitude is extremely helpful, but making it mandatory is extremely unhelpful.</p><p>Of course, it's issues like this which reinforce the need for the IETF process<nobr> <wbr></nobr>:)</p>



<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-17T11:21:54</h3>
<p>Why do I always remember new points <em>after</em> I hit submit?</p><p>Actually, if you strictly adopt jUnit, it fits TAP quite nicely.  Remember that a given test method containing several asserts is actually a single test.  It's different from how Perl looks at things.  So let's consider the following test method (<a href="http://clarkware.com/articles/JUnitPrimer.html#testcase" title="clarkware.com">I snagged it from a tutorial</a clarkware.com>):</p><blockquote><div><p> <tt>public void testAddItem() {<br> <br>&nbsp; &nbsp; Product book2 = new Product("Pragmatic Project Automation", 29.95);<br>&nbsp; &nbsp; cart.addItem(book2);<br> <br>&nbsp; &nbsp; double expectedBalance = book1.getPrice() + book2.getPrice();<br> <br>&nbsp; &nbsp; assertEquals(expectedBalance, cart.getBalance(), 0.0);<br> <br>&nbsp; &nbsp; assertEquals(2, cart.getItemCount());<br>}</tt></p></div> </blockquote><p>You have two asserts, but actually that could come out as a single TAP line:</p><blockquote><div><p> <tt>ok 13 - testAddItem</tt></p></div> </blockquote><p>You could have the asserts as optional diagnostics if you like, but this could still fit nicely with TAP without strongly violating the jUnit philosophy.</p>



<blockquote>

<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/d3xter/">d3xter</a> on 2008-09-17T12:33:07</h3>
Test::Unit and Test::Unit::Lite currently work like you wrote: single TAP line for single test function. It is somewhat limited.

<p>I think it would be much useful if TAP had support for nested tests:

</p><p>i.e.:

</p><p> <code>
1..2<br>
unit 1..0 testAddItem<br>
unit OK assertEquals(0.0, 0.0)<br>
unit OK assertEquals(2, 2)<br>
OK testAddItem<br>
unit 1..0 testAnotherItem<br>
unit not OK assertEquals(1, 2)<br>
# no more assertions in this function<br>
not OK testAnotherItem<br>
</code>

</p><p>etc.

</p><p>I think I'll join the IETF effort because in my opinion the TAP protocol is too Perl-centric and doesn't fit to other testing models, especially to xUnit philosophy. I hope it is not to late...</p>





</blockquote>


<h2>Re:Test::Unit is dead. Long live the Test::Unit::L</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2008-09-17T15:36:27</h3>
<p>Assertion numbers are like version numbers: they're meaningless except insofar as they're different from each other.</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Test::More's SEE ALSO</h2>
<h3><a href="/user/srezic/">srezic</a> on 2008-09-16T17:49:14</h3>
So schwern should remove the link from <a href="http://search.cpan.org/user/mschwern/Test-Simple-0.80/lib/Test/More.pm#SEE_ALSO" title="cpan.org">Test::More documentation</a cpan.org>?



<blockquote>

<h2>Re:Test::More's SEE ALSO</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-09-16T20:12:38</h3>
<p>I would think so since it's abandoned and doesn't play well with others, but it's his call.</p>



<blockquote>

<h2>Re:Test::More's SEE ALSO</h2>
<h3><a href="/user/schwern/">schwern</a> on 2008-09-17T02:01:47</h3>
<p>IF ONLY YOU HAD A COMMIT BIT FOR TEST::MORE!</p>





</blockquote>

</blockquote>


<h2>If it really is abandoned</h2>
<h3><a href="/user/Alias/">Alias</a> on 2008-09-17T01:31:28</h3>
<p>... get a maint bit for it, and do an incremental release which SAYS it's deprecated and recommend alternatives so that anybody using it has a migration target.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

