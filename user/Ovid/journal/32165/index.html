<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: Using WWW::Mechanize without a Web server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Using WWW::Mechanize without a Web server</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2007-01-16T17:22:14</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>This is the second time I've written this and the first time was years ago, so I don't recall what I was doing.  I am writing our Web tests so we can pass a <tt>--noserver</tt> switch and run the code directly.  That means overriding <tt>WWW::Mechanize::_make_request</tt> and pretending to be a Web server, knowing how to call your code, setting up the proper %ENV variables, following redirects, etc.  So far I have this debugging information along with the tests:</p>

<pre>> > > GETing login.pl
> > > POSTing login.pl
< < < Redirect requested to /login.pl?login=2
> > > GETing /login.pl?login=2
< < < Redirect requested to /
> > > GETing /</pre>

<p>That tells me I've successfully logged in, handling cookie information and all that.  Then the code blows up, but it's getting closer!  When it's done, we'll be able to debug our Web tests much more easily.</p>
</p>


<hr/>



<h2>Test::WWW::Mechanize::Catalyst</h2>
<h3><a href="/user/ChrisDolan/">ChrisDolan</a> on 2007-01-16T18:49:14</h3>
Not sure if it will help in your environment, but <a href="http://search.cpan.org/dist/Test-WWW-Mechanize-Catalyst/" title="cpan.org">Catalyst</a cpan.org> has a nice solution for this.



<blockquote>

<h2>Re:Test::WWW::Mechanize::Catalyst</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2007-01-16T19:08:15</h3>
<p>Ah, looks vaguely similar to what I've written.  It would be nice if a generic solution could be provided for this.  Since I'm writing this for work, I can't release the code.</p>





</blockquote>


<h2>Test::WWW::Mechanize::Object</h2>
<h3><a href="/user/rjbs/">rjbs</a> on 2007-01-17T02:17:27</h3>
We use this to accomplish something similar: <a href="http://search.cpan.org/user/hdp/Test-WWW-Mechanize-Object-0.020/lib/Test/WWW/Mechanize/Object.pm" title="cpan.org">http://search.cpan.org/user/hdp/Test-WWW-Mechanize-Object-0.020/lib/Test/WWW/Mechan<nobr>i<wbr></nobr> ze/Object.pm</a cpan.org>



<blockquote>

<h2>Re:Test::WWW::Mechanize::Object</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2007-01-17T07:13:14</h3>
<p>Argh!  I checked on the CPAN and glanced that that module, but I didn't really look at it as closely as I should have.  I was thinking "run mech without a Web server" and that code is "run mech with requests on an object".  D'oh!  Ah well<nobr> <wbr></nobr>:)</p>





</blockquote>


<h2>WWW::Mechanize::CGI</h2>
<h3><a href="/user/Hansen/">Hansen</a> on 2007-01-17T16:16:59</h3>
<a href="http://search.cpan.org/dist/WWW-Mechanize-CGI/" title="cpan.org">WWW::Mechanize::CGI</a cpan.org> and <a href="http://search.cpan.org/dist/Test-WWW-Mechanize-CGI/" title="cpan.org">Test::WWW::Mechanize::CGI</a cpan.org> might fit your needs better. If you want to roll your own, <a href="http://search.cpan.org/dist/HTTP-Request-AsCGI-0.5/" title="cpan.org">HTTP::Request::AsCGI</a cpan.org> (used by WWW::Mechanize::CGI and Catalyst::Test) makes CGI simple =)





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

