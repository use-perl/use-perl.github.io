<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: Is this code too strange?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Is this code too strange?</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2004-08-05T19:13:04</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I thought about writing up something for Perlmonks demonstrating how test driven development (TDD) works with <tt>Test::More</tt>.  The intent would be to write a short, but useful OO module that gives them a good sense of TDD.  Then I realized I have an unusual enough coding style that I could possibly confuse more of the monks than help them.  In glancing at this snippet, does it make sense (using private methods and <a href="http://www.perlmonks.org/index.pl?node_id=304883">named anonymous subs</a>) or would it be too distracting from what I was trying to do?</p>

<pre>my $_croak = sub {
    local *__ANON__ = '__ANON__croak';
    my ($proto, $message) = @_;
    require Carp;
    Carp::croak($message);
};
                                                                                                                                                            
my $_validate_code_slot = sub {
    local *__ANON__ = '__ANON__validate_code_slot';
    my ($self, $code_slot) = @_;
    no strict 'refs';
    unless (defined *{$code_slot}{CODE}) {
        $self->$_croak("Cannot replace non-existent sub ($code_slot)");
    }
    return $self;
};</pre></p>


<hr/>



<h2>Too distracting</h2>
<h3><a href="/user/dws/">dws</a> on 2004-08-05T19:37:32</h3>
If you lead off with those fragements, I suspect you'd lose a lot of folks who you could otherwise help. I had a hard time answering the "how, exactlyl, does this help me?" question.



<h2>Too strange!</h2>
<h3><a href="/user/mir/">mir</a> on 2004-08-05T20:11:17</h3>
<p>The code is definitely too strange.</p>
<p>Once you've read the perlmonks post it makes sense, but overall I think that the <tt>__ANON__</tt> trick will obscure your main point. It might be better to keep the tutorial focused on showing how you write just enough code to pass the tests (which you are not quite doing when you use tricks like this BTW).</p>



<h2>Another vote for too distracting</h2>
<h3><a href="/user/Adrian/">Adrian</a> on 2004-08-05T21:16:21</h3>
<p>I'd just use the normal _leading_underscore convention that more people will be familiar with for a tutorial on TDD. You'll just have to spend time explaining the method, which will distract from your main point.</p>

<p>(we must be on the same ley-line since I'm writing a little tutorial myself on TDD - not aimed at perlmonks tho<nobr> <wbr></nobr>:-)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

