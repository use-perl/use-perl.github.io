<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: MySQL Grant Pain</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>MySQL Grant Pain</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2008-04-17T14:26:18</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><pre>mysql> grant all on no_such_database.* to 'no_such_user'@'%' identified by 'some_password';
Query OK, 0 rows affected (0.00 sec)</pre>

<p>No warning.  No problem.  This is <em>real fun</em> to debug.</p>

<p>Also, when you drop a database, grants aren't dropped.  We found this out when it turned out we had over 1.5 million grants left in the database.  This had an impact on performance.</p></p>


<hr/>



<h2>The MySQL guys keep saying...</h2>
<h3><a href="/user/Alias/">Alias</a> on 2008-04-17T14:47:05</h3>
... that apparently MySQL is a bit like Perl, the first thing you need to do is "use strict"...<br><br>Have you enabled strict mode?<br><br>Note: I have no freaking idea how to turn it on myself, but I think it's being positioned as a "gotcha" ala use strict.



<blockquote>

<h2>Re:The MySQL guys keep saying...</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2008-04-17T15:01:14</h3>
<p><blockquote> <div><tt>mysql&gt; set @@session.sql_mode='traditional';<br>Query OK, 0 rows affected (0.01 sec)<br> <br>mysql&gt; SELECT @@session.sql_mode;<br>+---------------------------------------------------------<nobr>-<wbr></nobr>  ---------------------------------------------------------------------+<br>| @@session.sql_mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br>+---------------------------------------------------------------------------<nobr>-<wbr></nobr>  ---------------------------------------------------+<br>| STRICT_TRANS_TABLES,STRICT_ALL_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DI<nobr>V<wbr></nobr>  ISION_BY_ZERO,TRADITIONAL,NO_AUTO_CREATE_USER |<br>+---------------------------------------------------------------------------<nobr>-<wbr></nobr>  ---------------------------------------------------+<br>1 row in set (0.00 sec)<br> <br>mysql&gt; grant all on no_such_database.* to 'no_such_user'@'%' identified by 'some_password';<br>Query OK, 0 rows affected (0.00 sec)</tt></div> </blockquote>  <p>But it's quite possible I'm misunderstanding this (and it's annoying as hell that "strict mode" appears to be "per connection" (though you can apparently set it up for the server, too).</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

