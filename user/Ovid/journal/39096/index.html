<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: Test::Aggregate::Nested</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Test::Aggregate::Nested</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2009-06-08T12:09:57</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I've decided to take an entirely different approach for <tt>Test::Aggregate</tt>.  I'll leave it's behavior as is and include a <tt>Test::Aggregate::Nested</tt> in the distribution.  I think that I'll see if I can take advantage of the upcoming nested TAP by doing something conceptually similar to this:</p>

<pre>use Test::More tests => scalar @test_programs;

foreach my $test_program (@test_programs) {
    subtest $test_program => run_test $test_program;
}</pre>

<p>I say "conceptually" similar because there's still work which must be done between every test, such as restoring certain environment variables, possibly forcing them into separate packages and maybe trapping if tests are run in BEGIN/CHECK/INIT/END blocks, but all things considered, I think this will be a much cleaner way of making aggregated tests work.</p>

<p>As an added bonus, I'll be able to discard almost all of my work to verify that plans per test program are correct.  That's because subtests handle that for me.  I'm also anxious to see if I can eliminate all of my <tt>Test::Builder</tt> monkey patching.  That's been my biggest pain so far, but it's been impossible to avoid with the current <tt>Test::Builder</tt>.</p>

<p>Oh, and <a href="http://seclists.org/fulldisclosure/2009/Jun/0062.html">T-Mobile data is allegedly being sold by crackers</a>.  T-Mobile is alledgedly not admitting they've been hacked <a href="http://seclists.org/fulldisclosure/2009/Jun/0062.html">and there's a lot of sensitive information they store about you</a>.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

