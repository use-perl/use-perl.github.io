<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: A new TAPx::Parser</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>A new TAPx::Parser</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2007-01-07T20:53:52</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>In case you don't read the Perl QA list, there's a development version of <a href="http://search.cpan.org/dist/TAPx-Parser/">TAPx::Parser</a> available on the CPAN.  It has a huge number of new features (mostly the test harness and the new <tt>runtests</tt> utility, including:</p>

<ul>
  <li>Optional colored test output<li>
  <li>Telling you which TODO tests passes</li>
  <li>Capturing more information than Test::Harness</li>
  <li>Simultaneously run tests in multiple languages via the <tt>--execrc</tt> feature</li>
  <li>Tell the harness <em>how</em> Perl will run the tests (via <tt>--exec</tt>)</li>
  <li>Uses <tt>IPC::Open3</tt> to guarantee STDERR and STDOUT are synchronized (no longer overriding Test::Builder internals)</li>
  <li>More <tt>examples/</li>
  <li>Very easy to customize and override the test output</li>
</ul>

<p>See the <tt>example/README</tt> and the <tt>Changes</tt> file for a decent idea of what you can do with this new release.  I think it's finally at the point where I can switch to this rather than rely on <tt>prove</tt> and <tt>Test::Harness</tt>.</p>

<p>If it passes tests on your system, would you please post your OS and version of Perl for me?</p></p>


<hr/>



<h2>Built fine on OS X / 5.8.8</h2>
<h3><a href="/user/Adrian/">Adrian</a> on 2007-01-08T09:49:42</h3>
% uname -a<br>Darwin dhcp-157.office.community.net.uk 8.8.1 Darwin Kernel Version 8.8.1: Mon Sep 25 19:42:00 PDT 2006; root:xnu-792.13.8.obj~1/RELEASE_I386 i386 i386<br><br>% perl -V<br>Summary of my perl5 (revision 5 version 8 subversion 8) configuration:<br>
&nbsp; &nbsp; Platform:<br>
&nbsp; &nbsp; &nbsp; &nbsp; osname=darwin, osvers=8.7.1, archname=darwin-2level<br>
&nbsp; &nbsp; &nbsp; &nbsp; uname='darwin dhcp-162.office.community.net.uk 8.7.1 darwin kernel version 8.7.1: wed jun 7 16:19:56 pdt 2006; root:xnu-792.9.72.obj~2release_i386 i386 i386 '<br>
&nbsp; &nbsp; &nbsp; &nbsp; config_args='-de'<br>
&nbsp; &nbsp; &nbsp; &nbsp; hint=recommended, useposix=true, d_sigaction=define<br>
&nbsp; &nbsp; &nbsp; &nbsp; usethreads=undef use5005threads=undef useithreads=undef usemultiplicity=undef<br>
&nbsp; &nbsp; &nbsp; &nbsp; useperlio=define d_sfio=undef uselargefiles=define usesocks=undef<br>
&nbsp; &nbsp; &nbsp; &nbsp; use64bitint=undef use64bitall=undef uselongdouble=undef<br>
&nbsp; &nbsp; &nbsp; &nbsp; usemymalloc=n, bincompat5005=undef<br>
&nbsp; &nbsp; Compiler:<br>
&nbsp; &nbsp; &nbsp; &nbsp; cc='cc', ccflags ='-fno-common -DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -pipe -Wdeclaration-after-statement',<br>
&nbsp; &nbsp; &nbsp; &nbsp; optimize='-O3',<br>
&nbsp; &nbsp; &nbsp; &nbsp; cppflags='-no-cpp-precomp -fno-common -DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -pipe -Wdeclaration-after-statement'<br>
&nbsp; &nbsp; &nbsp; &nbsp; ccversion='', gccversion='4.0.1 (Apple Computer, Inc. build 5250)', gccosandvers=''<br>
&nbsp; &nbsp; &nbsp; &nbsp; intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234<br>
&nbsp; &nbsp; &nbsp; &nbsp; d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16<br>
&nbsp; &nbsp; &nbsp; &nbsp; ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8<br>
&nbsp; &nbsp; &nbsp; &nbsp; alignbytes=8, prototype=define<br>
&nbsp; &nbsp; Linker and Libraries:<br>
&nbsp; &nbsp; &nbsp; &nbsp; ld='env MACOSX_DEPLOYMENT_TARGET=10.3 cc', ldflags =''<br>
&nbsp; &nbsp; &nbsp; &nbsp; libpth=/usr/lib<br>
&nbsp; &nbsp; &nbsp; &nbsp; libs=-ldbm -ldl -lm -lc<br>
&nbsp; &nbsp; &nbsp; &nbsp; perllibs=-ldl -lm -lc<br>
&nbsp; &nbsp; &nbsp; &nbsp; libc=/usr/lib/libc.dylib, so=dylib, useshrplib=false, libperl=libperl.a<br>
&nbsp; &nbsp; &nbsp; &nbsp; gnulibc_version=''<br>
&nbsp; &nbsp; Dynamic Linking:<br>
&nbsp; &nbsp; &nbsp; &nbsp; dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=' '<br>
&nbsp; &nbsp; &nbsp; &nbsp; cccdlflags=' ', lddlflags=' -bundle -undefined dynamic_lookup'<br><br>Characteristics of this binary (from libperl):<br>
&nbsp; &nbsp; Compile-time options: PERL_MALLOC_WRAP USE_LARGE_FILES USE_PERLIO<br>
&nbsp; &nbsp; Built under darwin<br>
&nbsp; &nbsp; Compiled at Jul 26 2006 16:31:11<br>
&nbsp; &nbsp; @INC:<nobr> <wbr></nobr>/usr/local/lib/perl5/5.8.8/darwin-2level<nobr> <wbr></nobr>/usr/local/lib/perl5/5.8.8<nobr> <wbr></nobr>/usr/local/lib/perl5/site_perl/5.8.8/darwin-2level<nobr> <wbr></nobr>/usr/local/lib/perl5/site_perl/5.8.8<nobr> <wbr></nobr>/usr/local/lib/perl5/site_perl<br>
&nbsp; &nbsp; &nbsp; &nbsp; .



<h2>Ok in Mac OS X</h2>
<h3><a href="/user/melo/">melo</a> on 2007-01-08T12:11:16</h3>
melo@63:~ $ uname -a<br>Darwin 63.63.103.87.rev.vodafone.pt 8.8.1 Darwin Kernel Version 8.8.1: Mon Sep 25 19:42:00 PDT 2006; root:xnu-792.13.8.obj~1/RELEASE_I386 i386 i386<br>melo@63:~ $ perl -V<br>Summary of my perl5 (revision 5 version 8 subversion 6) configuration:<br>
&nbsp; &nbsp; Platform:<br>
&nbsp; &nbsp; &nbsp; &nbsp; osname=darwin, osvers=8.0, archname=darwin-thread-multi-2level<br>
&nbsp; &nbsp; &nbsp; &nbsp; uname='darwin b01.apple.com 8.0 darwin kernel version 8.3.0: mon oct 3 20:04:04 pdt 2005; root:xnu-792.6.22.obj~2release_ppc power macintosh powerpc '<br>
&nbsp; &nbsp; &nbsp; &nbsp; config_args='-ds -e -Dprefix=/usr -Dccflags=-g  -pipe  -Dldflags=-Dman3ext=3pm -Duseithreads -Duseshrplib'<br>
&nbsp; &nbsp; &nbsp; &nbsp; hint=recommended, useposix=true, d_sigaction=define<br>
&nbsp; &nbsp; &nbsp; &nbsp; usethreads=define use5005threads=undef useithreads=define usemultiplicity=define<br>
&nbsp; &nbsp; &nbsp; &nbsp; useperlio=define d_sfio=undef uselargefiles=define usesocks=undef<br>
&nbsp; &nbsp; &nbsp; &nbsp; use64bitint=undef use64bitall=undef uselongdouble=undef<br>
&nbsp; &nbsp; &nbsp; &nbsp; usemymalloc=n, bincompat5005=undef<br>
&nbsp; &nbsp; Compiler:<br>
&nbsp; &nbsp; &nbsp; &nbsp; cc='cc', ccflags ='-g -pipe -fno-common -DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -I/usr/local/include',<br>
&nbsp; &nbsp; &nbsp; &nbsp; optimize='-O3',<br>
&nbsp; &nbsp; &nbsp; &nbsp; cppflags='-no-cpp-precomp -g -pipe -fno-common -DPERL_DARWIN -no-cpp-precomp -fno-strict-aliasing -I/usr/local/include'<br>
&nbsp; &nbsp; &nbsp; &nbsp; ccversion='', gccversion='4.0.1 (Apple Computer, Inc. build 5363)', gccosandvers=''<br>
&nbsp; &nbsp; &nbsp; &nbsp; intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234<br>
&nbsp; &nbsp; &nbsp; &nbsp; d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16<br>
&nbsp; &nbsp; &nbsp; &nbsp; ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8<br>
&nbsp; &nbsp; &nbsp; &nbsp; alignbytes=8, prototype=define<br>
&nbsp; &nbsp; Linker and Libraries:<br>
&nbsp; &nbsp; &nbsp; &nbsp; ld='env MACOSX_DEPLOYMENT_TARGET=10.3 cc', ldflags ='-L/usr/local/lib'<br>
&nbsp; &nbsp; &nbsp; &nbsp; libpth=/usr/local/lib<nobr> <wbr></nobr>/usr/lib<br>
&nbsp; &nbsp; &nbsp; &nbsp; libs=-ldbm -ldl -lm -lc<br>
&nbsp; &nbsp; &nbsp; &nbsp; perllibs=-ldl -lm -lc<br>
&nbsp; &nbsp; &nbsp; &nbsp; libc=/usr/lib/libc.dylib, so=dylib, useshrplib=true, libperl=libperl.dylib<br>
&nbsp; &nbsp; &nbsp; &nbsp; gnulibc_version=''<br>
&nbsp; &nbsp; Dynamic Linking:<br>
&nbsp; &nbsp; &nbsp; &nbsp; dlsrc=dl_dlopen.xs, dlext=bundle, d_dlsymun=undef, ccdlflags=' '<br>
&nbsp; &nbsp; &nbsp; &nbsp; cccdlflags=' ', lddlflags='-bundle -undefined dynamic_lookup -L/usr/local/lib'<br><br>Characteristics of this binary (from libperl):<br>
&nbsp; &nbsp; Compile-time options: MULTIPLICITY USE_ITHREADS USE_LARGE_FILES PERL_IMPLICIT_CONTEXT<br>
&nbsp; &nbsp; Locally applied patches:<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 23953 - fix for File::Path::rmtree CAN-2004-0452 security issue<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 33990 - fix for setuid perl security issues<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SPRINTF0 - fixes for sprintf formatting issues - CVE-2005-3962<br>
&nbsp; &nbsp; Built under darwin<br>
&nbsp; &nbsp; Compiled at Oct 16 2006 22:54:34<br>
&nbsp; &nbsp; @INC:<nobr> <wbr></nobr>/System/Library/Perl/5.8.6/darwin-thread-multi-2level<nobr> <wbr></nobr>/System/Library/Perl/5.8.6<nobr> <wbr></nobr>/Library/Perl/5.8.6/darwin-thread-multi-2level<nobr> <wbr></nobr>/Library/Perl/5.8.6<nobr> <wbr></nobr>/Library/Perl<nobr> <wbr></nobr>/Network/Library/Perl/5.8.6/darwin-thread-multi-2level<nobr> <wbr></nobr>/Network/Library/Perl/5.8.6<nobr> <wbr></nobr>/Network/Library/Perl<nobr> <wbr></nobr>/System/Library/Perl/Extras/5.8.6/darwin-thread-multi-2level<nobr> <wbr></nobr>/System/Library/Perl/Extras/5.8.6<nobr> <wbr></nobr>/Library/Perl/5.8.1<br>
&nbsp; &nbsp; &nbsp; &nbsp; .<br><br>



<h2>Thanks for new TODO feature / runtests feedback</h2>
<h3><a href="/user/markjugg/">markjugg</a> on 2007-01-08T18:30:22</h3>
I'm really looking forward to the better TODO report! That's a reason to switch from using 'prove'.<br/><br/>However, here was my first impression of 'runtests'. The first thing I did was try "-h" and then "--help" to compare the options it supports with prove. In both cases I got this cryptic result:<br/><br/>Unknown option: h
Cannot determine source for t at<nobr> <wbr></nobr>/usr/local/lib/perl5/site_perl/5.8.0/TAPx/Harness.pm line 608
t....<br/><br/>( There was also no newline at the end of this message ).<br/><br/>Support for "--help" would be really nice, and "-h" would also be good, since it is fairly universal for "--help". I realize that would break backwards compatibility with "--harness, but I bet    the "help" usage will be used more frequently.<br/><br/>  Mark



<blockquote>

<h2>wish: line numbers for passing TODOs</h2>
<h3><a href="/user/markjugg/">markjugg</a> on 2007-01-08T18:53:15</h3>
Sorry about the formatting of the previous post. The "Preview" had looked OK, but it got submitted as HTML when I meant plain text.<br><br>One more point of feedback: To complete the passing TODO enhancement, it would be really nice to have the line numbers for these tests, like we do with failing tests. With just the test number alone, tests can still be a little challenging to track down, since test scripts don't often contain test numbers.<br><br>



<blockquote>

<h2>Re:wish: line numbers for passing TODOs</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2007-01-08T19:08:48</h3>
<p>Thanks for your feedback.  I'll be working on this.  You'll have to talk to Schwern, the maintainer of <a href="http://search.cpan.org/dist/Test-Simple/" title="cpan.org">Test::Simple</a cpan.org>, for the 'TODO line number' feature.  I have no control over that since the TODO information is TAP and I merely parse the TAP.</p>

<p>I should have another release out soon.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

