<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: Javascript feels like Perl</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Javascript feels like Perl</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2005-10-18T18:09:17</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I really have to admire how Perlish Javascript seems to be at times.  Of course, that could be how I'm using it:</p>

<pre>_getComparison: function (elem, type) {
    var name  = elem.name;
    var regex = new RegExp("^_([^_]*)_" + type);
    name      = name.replace(regex, "$1");

    if (! name) return;
    var value = "";
    if (elem.options) {
        value = elem.options[elem.selectedIndex].value;
        value = value ? value : "";
    }
    return {
        "name"  : name,
        "value" : value
    };
},</pre>

<p>Oh, but that's a bit complicated.  <a href="http://openjsan.org/doc/t/th/theory/Test/Simple/0.21/index.html">I had better have tests</a>.</p>

<pre>canOK('FormHandler.Search', '_getComparison');
var elem = document.search._age_comp;
var results = search._getComparison(elem, 'comp');
is(results["name"], "age", 
  '... and it should return the name of the property it refers to');
is(results["value"], "GT", 
  '... and the value of the comparison property');

elem = document.search._age_logical;
results = search._getComparison(elem, 'logical');
is(results["name"], "age", 
  '... and a logical comparison should return the property name');
is(results["value"], "",
  '... but it should return an empty string if there is no value');</pre>

<p>And the results:</p>

<pre>ok 18 - FormHandler.Search.can('_getComparison')
ok 19 - ... and it should return the name of the property it refers to
ok 20 - ... and the value of the comparison property
ok 21 - ... and a logical comparison should return the property name
ok 22 - ... but it should return an empty string if there is no value</pre></p>


<hr/>



<h2>From jsregexp.c in SpiderMonkey</h2>
<h3><a href="/user/claes/">claes</a> on 2005-10-18T18:49:46</h3>
<tt>/*<br> * JS regular expressions, after Perl.<br> */<br><br></tt>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

