<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: The Perl Book We Need</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>The Perl Book We Need</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2007-09-13T13:51:51</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>How often do you see this in code?</p>

<pre>sub new {
    my $class = shift;
    return bless [] => $class;
}</pre>

<p>Not very often.  However, I'll bet you often see errors like this:</p>

<pre>my $cust = Customer->new($id);

# violates encapsulation
print $cust->{name};

# violates encapsulation again! (unless internal):
if ( $cust->_preferred ) { ... }

# bad interface if the following fails:
$cust->set_name($cust->name);

# Hello Demeter!  (Yeah, this is contrived)
my $office = $cust->salesman->manager->office;</pre>

<p>What I would like to see is a book which focuses on OO programming for Perl, but with two primary considerations.  The first is to focus <em>primarily</em> on what people are likely to encounter in the wild:  blessed hashrefs.  The second consideration is teaching them <a href="http://www.oreillynet.com/onlamp/blog/2007/03/the_authenticationfairy.html">how to think about OO programming</a>.</p>

<p><a href="http://www.oreilly.com/catalog/intermediateperl/">Intermediate Perl</a> and <a href="http://www.manning.com/conway/">Object Oriented Perl</a> both have great things to say on these topics, but neither is quite what I would like to see out there.  Unfortunately, many Perl programmers learn the <em>syntax</em> of OO in Perl but they don't learn OO.  Blessing a hashref isn't enough.  Instead, I'd love to see more Perl programmers who can reasonably discuss:</p>

<ul>
  <li>Responsibility-driven design.</li>
  <li>The difference between class and instance data/methods.</li>
  <li>How inheritance breaks encapsulation.</li>
  <li>When to throw exceptions.</li>
  <li>Composition via delegation.</li>
  <li>Class consumers versus class cooperators.</li>
  <li>Why the Liskov Substitution Principle is important.</li>
  <li>Polymorphism and allomorphism.</li>
  <li>
</ul>

<p>This wouldn't be a design pattern book.  This would <em>not</em> be a syntax book.  It would be something which would open up the eyes of Perl programmers regarding OO, but it would be straight-forward.  Want class data?  Use <tt>Class::Data::Inheritable</tt> and explain the concept.  Need delegation?  Use <tt>Class::Delegator</tt> and explain the concept.  It's not to claim the the tools the book uses are best practices.  It's to claim that the <em>ideas</em> the book uses are best practices.  That's why it would mention blessed array references, but all examples would be blessed hash references.  That's what you're likely to see and it's more important to focus on the concepts than the implementations.</p>

<p>So, um, somebody go out and write the damned thing.</p></p>


<hr/>



<h2>Read more than just Perl books!</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2007-09-13T18:22:59</h3>
It's already been written. It just doesn't use Perl. Good design transcends language.<br><br>But, this book wouldn't sell. It would be a great book, but no one would buy it (where no one means fewer people than it takes to keep the economic incentive above working at Starbucks instead).<br><br>I don't see the word "Perl" in the title magically making this a sellable or interesting book. People interested in good design are the same people that read about design despite the language.<br><br>I here rumor that the Perl book topics will divide differently for Perl 6 though.<nobr> <wbr></nobr>:)<br>



<h2>You don't want a book...</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-09-14T02:23:40</h3>
... you want to educate the masses.<br><br>And unfortunately, for the most part (rare exceptions like Perl Best Practices excluded) books don't educate the masses.<br><br>Things like perlcritic rules are far more likely to have the impact that you want.<br><br>I think there's a number of interesting perlcritic rules that could be implemented based on your examples (most of which I agree with)<br>



<h2>Damian covers these concepts...</h2>
<h3><a href="/user/cbrandtbuffalo/">cbrandtbuffalo</a> on 2007-09-14T16:22:58</h3>
I recently had the good fortune to attend Damian's Intermediate OO class and he does an excellent job of covering the concepts and context for many of the issues you raise. We just need to send every perl coder to Damian's course!<nobr> <wbr></nobr>:)



<h2>Liskov can bite me</h2>
<h3><a href="/user/djberg96/">djberg96</a> on 2007-09-20T02:39:57</h3>
"Why the Liskov Substitution Principle is important."
<p>
It's important for academics who are more concerned with being correct than useful.
</p><p>
Override nothing! Delegate everything!
</p><p>
Ok, maybe I'm a wee bit bitter after losing a debate about Pathnames, Strings and subclassing.</p>



<blockquote>

<h2>Re:Liskov can bite me</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2007-09-20T05:51:32</h3>
<p>I think you must be thinking about something else.  Liskov doesn't say anything about not being able to override anything.  It merely states that a subclass must be substitutable for the parent class without affecting the correctness of a program.  You can override all you want, just make sure that the interface doesn't change.</p>





</blockquote>


<h2>I don't get it</h2>
<h3><a href="/user/hex/">hex</a> on 2007-09-27T10:27:16</h3>
<p><blockquote> <div><tt># Hello Demeter!&nbsp; (Yeah, this is contrived)<br>my $office = $cust-&gt;salesman-&gt;manager-&gt;office;</tt></div> </blockquote> What's wrong with this?



<blockquote>

<h2>Re:I don't get it</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2007-09-27T10:37:09</h3>
<p><blockquote> <div><tt>my $office = $cust-&gt;salesman-&gt;manager-&gt;office;</tt></div> </blockquote>  <p>It's a question of encapsulation. Imagine that the <tt>Salesman</tt> class no longer has need of a <tt>manager</tt> accessor, but you still need to know which office the salesman is with.  You might get a <tt>office</tt> method pushed into the <tt>Salesman</tt> class.  Then, every place where you have the above code needs to be changed to:</p> <p><blockquote> <div><tt>my $office = $cust-&gt;salesman-&gt;office;</tt></div> </blockquote>  <p>If that's called a lot, it can be a maintenance nightmare.</p>

<p>However, what if you have this?</p> <p><blockquote> <div><tt>sub Customer::office { shift-&gt;salesman-&gt;manager-&gt;office }</tt></div> </blockquote>  <p>Then, your calling code (again, remember this example is contrived), becomes this:</p> <p><blockquote> <div><tt>my $office = $cust-&gt;office;</tt></div> </blockquote>  <p>At this point, if you need to change the hierarchy, you only have to alter <tt>&amp;Customer::office</tt> instead of all of the calling code.  You've properly encapsulated the hierarchical structure and greatly improved maintainability.</p>



<blockquote>

<h2>Re:I don't get it</h2>
<h3><a href="/user/hex/">hex</a> on 2007-09-27T14:52:48</h3>
<i>You've properly encapsulated the hierarchical structure and greatly improved maintainability.</i><br/><br/>Oh, I see what you mean now. Right, thanks.



<blockquote>

<h2>Re:I don't get it</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2007-09-27T14:59:34</h3>
<p>You're welcome.  It's not exactly intuitive.  Took me a couple of tries to get it<nobr> <wbr></nobr>:)</p>





</blockquote>


<h2>Re:I don't get it</h2>
<h3><a href="/user/perigrin/">perigrin</a> on 2007-10-01T05:22:13</h3>
<p>Thank you. I hadn&#8217;t realized Moose&#8217;s powerful delegation mechanisms we&#8217;re more than handy shortcuts. This provides an excellent use case for them.</p>

<p>For those who don&#8217;t know Moose every attribute object can have a handles er &#8230; attribute &#8230; so the example here can be defined like:</p> <p><blockquote> <div><tt>package Salesman;<br>use Moose;<br> <br>has manager&nbsp; =&gt; (<br>&nbsp; &nbsp;<nobr> <wbr></nobr>...<br>&nbsp; &nbsp; handles =&gt; [qw( office )],<br>);<br> <br>package Cusotomer;<br>use Moose;<br> <br>has salesman =&gt; (<br>&nbsp; &nbsp; isa =&gt; 'Salesman',<br>&nbsp; &nbsp;<nobr> <wbr></nobr>...<br>&nbsp; &nbsp; handles =&gt; [qw( office )],<br>)</tt></div> </blockquote>  <p>Moose will setup <code>Salesman::office</code> which delegates to <code>$self-&gt;manager-&gt;office</code> and <code>Customer::office</code> which will delegate to <code>$self-&gt;salesman-&gt;office</code> providing exactly the kind of encapsulation wanted here.</p>



<blockquote>

<h2>Re:I don't get it</h2>
<h3><a href="/user/avik/">avik</a> on 2008-03-05T22:24:14</h3>
Thanks for very thoughtful approach to teaching OO. Unfortunately, in my college days we learned
OO in a worsed possible way (questionable faculty, clueless students, books never used).





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

