<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Ovid: Source filters are not evil.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Source filters are not evil.</h1>
<h2><a href="/user/Ovid/">Ovid</a> on 2004-12-05T17:25:58</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p><a href="/user/Aristotle">Aristotle</a> raised an obvious point about my <tt>Sub::Signatures</tt> module.</p>

<p><em>Please just tell me it isn't based on source filtersÃ¢â¬Â¦ :-)</em></p>

<p>OK, it's not based on source filters.</p>

<p>Now that I have the lying out of the way, I can understand the hesitation about them.  I worked for <a href="http://www.rentrak.com/">Rentrak</a> for a year and they did something very similar (but on a much smaller scope) to what I'm trying to do, but they did it with <a href="http://search.cpan.org/user/pmqs/Filter-1.30/Call/Call.pm">Filter::Util::Call</a>.   Naturally, when I first started working with this I complained heartily to my programming friends about using a source filter in production code.  And not just any old production code, either.  We're talking about code that is rightfully called "enterprise class."  And you know what?  In the entire time I used it, I only stumbled across one bug (and admittedly it was a bugger to track down.)  I know what the bug is and it's not going to be in my version :)</p>

<p>So after working with a source filter for over a year, what did I discover?  Source filters, when done properly, can make programming much, much easier.  I didn't realize how much I missed signatures until I had them again.  I also didn't realize how much I missed having an entire class of bugs pretty much disappear because I had signatures.  For the one bug that was caused by this source filter, programming was much more productive and bug free.</p>

<p>I was wrong about source filters.  I used to think they were terribly evil and should not be used, but now I realize (as with all dogmatism) that this is not universally the case.  Admittedly, source filters generally need to be some of the most heavily tested code, but the payoff can be huge.</p>

<p>But serious programmers don't use source filters, right?  Don't tell that to Damian and Ingy, two well-known and respected programmers who are quite happy to reach for source filters when that's the solution to a thorny problem.  Those, naturally, are two that come to mind but there are plenty of others.  Source filters are to be used sparingly, but it's not the case that they should never be used.  They are not evil, just dangerous.</p></p>


<hr/>



<h2>Re:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-12-06T04:26:54</h3>
<p>Question: what's wrong with the following picture?</p>

<blockquote><div> <p>Source filters, when done properly, can make programming much, much easier. I didn't realize how much I missed signatures until I had them again.</p> </div></blockquote>

<p>Answer: these sentences have <a href="http://www.datanation.com/fallacies/distract/cq.htm" title="datanation.com">nothing to do with each other</a datanation.com>. Your argument is fallacious.</p>

<p>I did not condemn the idea of subroutine signatures at any point. I am deprecating source filters. I asked whether Sub::Signatures achieved the thing I want using the thing I don't, because I like <a href="http://search.cpan.org/dist/Inline-Files/" title="cpan.org">Inline::Files</a cpan.org> and <a href="http://search.cpan.org/dist/Switch/" title="cpan.org">Switch</a cpan.org> too, but both of them known to be ill-suited for production use.</p>

<p>Incidentally, both of them are Damian modules. As far as Ingy's code is concerned, most of it gives me the shivers.</p>



<blockquote>

<h2>Re:</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2004-12-06T04:39:14</h3>
<p>The sentences appear to have nothing to do with each other because there's a chain of logic between the two that's not explicitly spelled out.  1.  Subroutine signatures eliminate common problems in Perl.  2.  Source filters can be used to implement subroutine signatures.  3.  Therefore, source filters can be used to make programming easier (yes, there are still a few gaps, but without being too pedantic, you can see where I'm coming from.)  As for whether or not this addresses your particular concern, that's something you'd have to decide for yourself.</p>

<p>As a more concrete example, you can <a href="http://www.perlmonks.org/?node_id=412569" title="perlmonks.org">read through one of my personal experiences with source filters</a perlmonks.org>.  The gains far outweighed the losses.  Seeing source filters actually work to my advantage is what changed my mind.  Production on our code would have been slower without it.</p>



<blockquote>

<h2>Re:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-12-06T06:37:49</h3>
Again: is there no other way by which subroutine signatures could be implemented than source filters?



<blockquote>

<h2>Re:</h2>
<h3><a href="/user/Ovid/">Ovid</a> on 2004-12-06T06:44:15</h3>
<p>The only way I can think of is to rewrite the guts of Perl.  Of course, that project is already started and it's called Perl 6<nobr> <wbr></nobr>:)  I think you might be able to do something with attributes, but that wouldn't give you the dispatching that is the primary benefit of this module.</p>



<blockquote>

<h2>Re:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-12-06T14:37:27</h3>
Depends on the syntax &mdash; I cannot think of a way to implement yours without a filter either, but my thinking is more along the lines of not inventing new syntax at all, rather simply passing the function as a closure to some other function. Perl is introspective enough to do the backend stuff without source filtering.





</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-12-13T17:42:33</h3>
<p>Here's a suggestion that would reconcile both our views:</p>

<p>Make the main module filter-free, using some interface concoction like <code>multisub( foo =&gt; '($bar, $baz)', sub { } );</code> (for demonstration purposes; I know this sucks), then put the filter in an add-on module that lets people write <code>sub foo($bar, $baz) { }</code> if that's what they want.</p>

<p>Why have it your way or my way when both are possible?</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

