<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of samtregar: On Becoming a Javascript Expert</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>On Becoming a Javascript Expert</h1>
<h2><a href="/user/samtregar/">samtregar</a> on 2004-12-27T20:27:11</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>It's been a long time coming but I think I'm actually starting to get comfortable coding in Javscript.  I'm working on a very complicated edit screen with lots of automated fields and behaviors so I'm getting a lot of practice.  O'Reilly's <a href="http://www.oreilly.com/catalog/dhtmlref">Dynamic HTML</a> book has been a great help.  I generally find it more useful than their <a href="http://www.oreilly.com/catalog/jscript3">Javascript book</a>.  The coverage of cross-browser differences is better and the coverage is wider, covering all of CSS and HTML.
<p>
I've definitely made the transition from grudging Javascript hacker to coder: I'm building reusable tools.  To whit, here's a very helpful logging utility that shows messages in a separate window refreshed on each hit:
<p>
<pre>
var log_span;
function log(msg) {
    if (!log_span) {
        var log_window = window.open("", "log", "status,width=700,height=300");
        log_window.document.write('<h2>JS Log</h2><span id=log></span>');
        log_window.document.close();
        log_span = log_window.document.getElementById("log");
        log_span.innerHTML = "";
    }
    var d = new Date();
    log_span.innerHTML += "[" + d.toLocaleString() + "] " +
                          msg + "<br>";
}
</pre>
<p>
Before I came up with that one I was using alert() for confessional debugging which is a complete pain.
<p>
I've also learned how to create my own classes in Javascript which allows for much cleaner code than my previous practice.  Of course, Javascript doesn't really have classes, it uses prototype-based inheritence instead.  It's weird by servicable once I got the syntax right.
<p>
Another big factor in my increasing Javascript confidence is <a href="http://www.emacswiki.org/cgi-bin/wiki/ECMAScriptMode">the Emacs ecmascript-mode I found on the EmacsWiki</a>.  It looks and feels so much like <a href="http://www.emacswiki.org/cgi-bin/wiki/CPerlMode">cperl-mode</a> that I can't help but feel at home.
<p>
-sam

</p>


<hr/>



<h2>Looks familiar</h2>
<h3><a href="/user/malte/">malte</a> on 2004-12-28T09:39:39</h3>
<p>Hey, looks familiar:</p>

<p><blockquote><div> <tt>function logAdd(msg, which) {<br> <br>&nbsp; &nbsp; var name = which != null ? which : "Log"<br> <br>&nbsp; &nbsp; var l = document.getElementById(name);<br> <br>&nbsp; &nbsp; var date = new Date();<br> <br>&nbsp; &nbsp; var string = date + ": " + msg + "&lt;br&gt;" + l.innerHTML<br> <br>&nbsp; &nbsp; l.innerHTML = string.substr(0, 4000)<br> <br>}</tt> </div></blockquote> 

<p>
It's also really useful for debugging long running flash movies (In our case from a couple of weeks, to a couple of years). The substr helps keep the ram usage down<nobr> <wbr></nobr>:)
</p>



<blockquote>

<h2>Re:Looks familiar</h2>
<h3><a href="/user/jplindstrom/">jplindstrom</a> on 2004-12-28T15:25:06</h3>
You have flash movies with an uptime &gt; a year?<br>



<blockquote>

<h2>Re:Looks familiar</h2>
<h3><a href="/user/malte/">malte</a> on 2004-12-28T15:43:07</h3>
<p>Yes, we will use it for distributed "live" display of a lottery, that has draws every 3 minutes on terminals distributed throughout northern Germany. Sometimes the terminals might be turned off at night, but other terminals might run basically forever. We have zero leakage, so there is really to reason to ever restart the thing.</p>





</blockquote>

</blockquote>


<h2>Recommended change</h2>
<h3><a href="/user/Mr. Muskrat/">Mr. Muskrat</a> on 2004-12-28T19:07:24</h3>
<blockquote><div> <tt>var log_window = window.open("", "log", "scrollbars=1,statusbar=0,resizable=1,width=700,height=300");</tt> </div></blockquote> <p>That way you can scroll and/or resize the log window as needed.</p>



<blockquote>

<h2>Re:Recommended change</h2>
<h3><a href="/user/samtregar/">samtregar</a> on 2004-12-28T19:38:47</h3>
For some reason Firefox lets me resize it anyway...  But I'm sure you're right.
<p>
-sam</p>





</blockquote>


<h2>You have...</h2>
<h3><a href="/user/perrin/">perrin</a> on 2004-12-28T22:24:12</h3>
my deepest sympathy.



<h2>After a distance further along the curve:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2004-12-30T00:25:45</h3>
<blockquote><div> <tt>var _js_log = {<br>&nbsp; &nbsp; logwin: null,<br>&nbsp; &nbsp; append: function( elt, tagname ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; var doc = this.logwin.document;<br>&nbsp; &nbsp; &nbsp; &nbsp; return elt.appendChild( doc.createElement( tagname ) );<br>&nbsp; &nbsp; },<br>&nbsp; &nbsp; appendtext: function( elt, tagname, text ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; var doc = this.logwin.document;<br>&nbsp; &nbsp; &nbsp; &nbsp; return this.append( elt, tagname ).appendChild( doc.createTextNode( text ) );<br>&nbsp; &nbsp; },<br>&nbsp; &nbsp; msg: function( msg ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; var first = ! this.logwin;<br>&nbsp; &nbsp; &nbsp; &nbsp; if( first ) this.logwin = window.open( '', 'log', 'status,width=700,height=300' );<br>&nbsp; &nbsp; &nbsp; &nbsp; var doc = this.logwin.document;<br>&nbsp; &nbsp; &nbsp; &nbsp; var body = doc.getElementsByTagName( 'body' )[0];<br>&nbsp; &nbsp; &nbsp; &nbsp; var autoscroll = body.scrollTop == ( body.scrollHeight - body.clientHeight );<br>&nbsp; &nbsp; &nbsp; &nbsp; if( first ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.appendtext( body, 'h2', 'Javascript log' );<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; this.append( body, 'dl' ).id = 'log';<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; var log = doc.getElementById( 'log' );<br>&nbsp; &nbsp; &nbsp; &nbsp; this.appendtext( log, 'dt', ( new Date() ).toLocaleString() + ':' );<br>&nbsp; &nbsp; &nbsp; &nbsp; this.appendtext( log, 'dd', msg );<br>&nbsp; &nbsp; &nbsp; &nbsp; if( autoscroll ) body.scrollTop = body.scrollHeight;<br>&nbsp; &nbsp; },<br>};</tt> </div></blockquote> <p>Then you say <code>_js_log.msg( 'Hello world' );</code>.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

