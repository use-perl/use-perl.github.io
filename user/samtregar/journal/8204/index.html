<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of samtregar: DBI profiling</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>DBI profiling</h1>
<h2><a href="/user/samtregar/">samtregar</a> on 2002-10-06T20:14:18</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>A week or so ago I got the idea to build a generalized DBI profiler, similar in functionality to Devel::DProf (and my cheap knockoff, Devel::Profiler).  A few months back I wrote a DBI profiler for <a href=http://bricolage.cc>Bricolage</a> but it works through Bricolage's procedural wrapper around DBI so it can't be used by other apps.  However, it was so insanely useful in solving some  nasty performance problems that I don't want to have to do without it again.
<p>
So, I headed off to CPAN to make sure I wasn't reinventing the wheel.  I'd already looked at <a href=http://search.cpan.org/author/JLATHAN/DBIx-Profile-1.0/Profile.pm>DBIx::Profile</a> and I knew it didn't fit my needs.  It's definitely not up to the task of profiling an application making thousands of database queries in multiple processes (i.e. a large scale mod_perl app).
<p>
However, CPAN had a surprise in store for me: <a href=http://search.cpan.org/author/TIMB/DBI-1.30/lib/DBI/Profile.pm>DBI::Profile</a>.  DBI::Profile is a module included in recent versions of DBI that provides basic profiling hooks and profile reporting.  Although it isn't up to the job of profiling large applications, it was built to be extended by more featureful profilers.  Wooo hooo.
<p>
So I wrote <a http://archive.develooper.com/dbi-users@perl.org/msg13783.html>a message to dbi-users</a> describing my project and soliciting advice.  This resulted in Tim Bunce offering to make the module part of DBI if we could agree on the interface. 
<p>
So, I got straight to work on fleshing out my design.  The results are two POD docs posted to dbi-dev: <a href=http://archive.develooper.com/dbi-dev@perl.org/msg01525.html>DBI::ProfileDumper </a> and <a href=http://archive.develooper.com/dbi-dev@perl.org/msg01526.html>dbi_prof</a>.    Any potential users out in the audience are encouraged to read them and tell me what I missed!
<p>
-sam</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

