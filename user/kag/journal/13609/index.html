<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of kag: CLU on Parrot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>CLU on Parrot</h1>
<h2><a href="/user/kag/">kag</a> on 2003-07-22T08:10:37</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>For reasons that can best be described as "obsessive compulsive", I've decided to port CLU to Parrot.<p>

What is CLU?
<ul><li>An early sorta-OO language.  It appeared in the late 70s, and was used as a teaching langauge in the early and mid 80s.  It has "clusters", which are a set of operations that can be performed on an opaque data abstraction.  (Like a class, but no inheritance, and slightly awkward syntax.)
<li>A language with some interesting features.  Parameterized types; parameterized procedures; iterators; parameterized iterators; exceptions.
<li>It's a language I learned to program in once, so therefore it can never be allowed to die.
</ul>

Why port to Parrot?
<ul><li>Clusters and exceptions will test bits of Parrot not heavily stressed yet.
<li>While CLU iterators don't <i>have</i> to be implemented with coroutines, they can be.  So that gets tested too.
<li>It's strongly-typed, and Parrot should have at least one B&D language.
<li>I wanna.
<li>I never bothered taking the compiler course, so this is my chance to use the Dragon book in anger.
<li>I get to play with Parse::RecDescent and Parrot.
</ul>

Things I have:
<ul><li>A Perl6 grammar that looks like it might parse CLU.  Useless until Perl6::Rules gets released.
<li>A Parse::RecDescent grammar that parses the bits of CLU I've fed into it so far.
<li>The outline of the parsetree cleanup code.
<li>Vague ideas of how I'm going to do code emission.  (I'm going to target IMCC.)
</ul>

Things I need:
<ul><li>A set of parsing tests.
<li>Finish the AST cleanup code.
<li>Write the code generation.
<ul><li>Do I understand the current state of the calling conventions?
<li>How is linking supposed to happen?
<li>How out-of-date is <i>Perl 6 Essentials</i> already?
</ul>
<li>Implement the builtin types and the standard library (or at least enough of streams to print).
<li>Tests, tests, tests
</ul>
</p>


<hr/>



<h2>If you ask nicely</h2>
<h3><a href="/user/broquaint/">broquaint</a> on 2003-07-22T15:50:08</h3>
<blockquote><div> <i>
A Perl6 grammar that looks like it might parse CLU. Useless until Perl6::Rules gets released.
</i> </div></blockquote><br/><br/><a href="http://search.cpan.org/user/XMATH/" title="cpan.org">Matthijs van Duin</a cpan.org> has written an alpha version of a perl6 grammar -&gt; perl5 regexp translator and if you ask nicely I'm sure he'll be happy to share. Good luck with CLU!



<blockquote>

<h2>Re:If you ask nicely</h2>
<h3><a href="/user/kag/">kag</a> on 2003-07-22T18:43:50</h3>
Running my alpha rules on an alpha translator.  Heh.<br> <br>I'll stick with Parse::RecDescent for the parser for now.  It mostly works, ignoring the bugs I haven't found yet.  There's one spot where I mangled the grammar to remove left recursion, but I don't think it changed the semantics.<br> <br>





</blockquote>


<h2>Another option</h2>
<h3><a href="/user/educated_foo/">educated_foo</a> on 2003-07-22T18:07:13</h3>
If you're feeling more ambitious, there's a start at a P6Regex to Parrot compiler in the languages/perl6 subdirectory of the Parrot distribution.  It's definitely incomplete, but see the README for what is implemented, and the t/ and example/ directories for some of what can be done.  There is also a (perhaps clearer) regex-to-parrot compiler in languages/regex, which could be extended to handle perl6 regexes.
<p>
HTH,<br>/s</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

