<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of rats: Rewriting an old webapp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Rewriting an old webapp</h1>
<h2><a href="/user/rats/">rats</a> on 2005-02-21T06:40:44</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Client wants me to rewrite/cleanup/extend a webapp written in Perl a couple of years ago by another developer. Almost no use of CPAN modules and HTML is embedded in code i.e. almost impossible to change. And it appears original developer didn't know or want to use OO-Perl which makes extensibility very difficult (for me anyway). Client also wants to use app for another website so stylesheets would be useful.
<p>
Obviously I'm replacing everything I can with CPAN modules. Spent some time trying to decide which framework to use. Looked at Maypole and Catalyst but didn't feel confident enough to use in production. Looked at Mason which I've used before for production app but found embedded HTML too messy. Even looked at AxKit which I've used for my own apps before. But client doesn't run mod_perl and website is very low traffic so unlikely in the future. So this pretty well made CGI::Application the way to go. Plus I like the clean separation of code and HTML templates. I looked at Template::Toolkit for a very long time but eventually decided TT is overkill for simple web pages client wants.
<p>
I discovered large chunks of obscure (to me) code which I eventually realised was all about session handling. Replaced it all with the single line 'CGI::Application::Plugin::Session'.
<p>
Interesting how much my Perl style has changed in the last few years. Found myself replacing C-style for-loops with more compact Perl list operators (e.g. map, grep) just so I could understand what the original code was trying to do. This allowed me to reduce a couple of 100-line subroutines to 10-line ones and then to realise two of them were duplicates so threw one away.
<p>
At this stage I have a working version of original app. Now to add the new stuff...

   </p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

