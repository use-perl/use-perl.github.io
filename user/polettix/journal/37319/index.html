<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of polettix: Accessing Amazon S3 from the command line</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Accessing Amazon S3 from the command line</h1>
<h2><a href="/user/polettix/">polettix</a> on 2008-08-31T17:49:21</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I started playing with <a href="http://www.amazon.com/gp/browse.html?node=16427261">Amazon Simple Storage Service</a> and <a href="http://use.perl.org/user/acme/">acme</a>'s <a href="http://search.cpan.org/dist/Net-Amazon-S3/">Net::Amazon::S3</a>, finding both quite useful and easy to use.<br/><br/>The obvious next step has been re-inventing the wheel. Well, sort-of, because the type of wheel I had in mind wasn't anywhere I was able to look for. In particular, I was looking for some "operating-system command" a-la git that was able to support subcommands for common operations.<br/><br/>So, I concentrated on two sets of commands: the "pure" ones, that focus on Amazon's way of seeing data, and the "filesystem" ones, that support thinking S3 stuff as files with a Unix-like path.<br/><br/>Among the first group you can find the basic S3 functions like add, remove etc. The second group has more "convenient" commands like ls, cp, rm and mv, that try to do the right thing in the spirit of the corresponding Unix commands (e.g. cp can both send or get data, depending on the order of the parameters). I find this useful because the metaphor is somewhat "hardcoded" in me after years of using those commands.<br/><br/>If you're interested or just want to find something to start a flamewar, you can find it at <a href="http://repo.or.cz/w/s3.git">http://repo.or.cz/w/s3.git</a>. Enjoy!<br/><br/>Update: thanks to grink's tip below, I found <a href="http://search.cpan.org/dist/Term-ShellUI/">Term::ShellUI</a> that allowed me to add an interactive shell to call all of the commands, with on-line help! I love CPAN.</p>


<hr/>



<h2>commands with subcommands</h2>
<h3><a href="/user/rjbs/">rjbs</a> on 2008-08-31T21:56:14</h3>
<p>I hate to be the guy* who just posts "use my code to write your code," but for writing this kind of "cmd subcmd --opt" program, have a look at App::Cmd.  It takes away a lot of drudgery.</p><p><small>* this is not actually true</small></p>



<blockquote>

<h2>Re:commands with subcommands</h2>
<h3><a href="/user/polettix/">polettix</a> on 2008-08-31T23:18:54</h3>
<p>No reason at all! I'll surely take a look. Anyway, I didn't anything particular in this case... so I'm probably in time to use it anyway, thanks. Just in case, I'm wondering about adding a "--interactive" to start some shell... do you have/know anything to do this as well?<nobr> <wbr></nobr>:D</p>



<blockquote>

<h2>Re:commands with subcommands</h2>
<h3><a href="/user/grink/">grink</a> on 2008-08-31T23:57:09</h3>
<p>I haven't had a chance to use it, but Term::ShellUI looks promising.</p>



<blockquote>

<h2>Re:commands with subcommands</h2>
<h3><a href="/user/polettix/">polettix</a> on 2008-09-01T01:27:34</h3>
<p>Well, it doesn't simply look promising, it's actually awesome. I added the interactive mode and it seems to work... just right out of the box and with a minor refactoring of code.</p><p>Thanks!</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

