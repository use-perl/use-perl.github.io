<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of merlyn: &quot;make disttest&quot; is your friend.  use &quot;make disttest&quot;</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>&quot;make disttest&quot; is your friend.  use &quot;make disttest&quot;</h1>
<h2><a href="/user/merlyn/">merlyn</a> on 2002-10-18T13:52:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>A very prolific senior contributor to the CPAN recently updated a module that incorporates XS and C files from another distribution.  Said contributor completely tested the new distribution, and published it.  It broke for me.
<p>
Said contributor forgot to check <tt>MANIFEST</tt>, which needed a new file added.
<p>
<tt>make disttest</tt> is your friend.  Use <tt>make disttest</tt>.
<p>
{grin}</p>


<hr/>



<h2>ME!</h2>
<h3><a href="/user/Matts/">Matts</a> on 2002-10-18T14:46:47</h3>
I own up - it was me.<br> <br>This is probably the second most common thing I forget when uploading new CPAN modules (the first being to update the Changes file). I'm actually considering changing my "make dist" for a "make cpan" which does the whole "disttest" thing and also "cvs ci" and checks the Changes file for a line representative of this version.<br> <br>Of course that's all more work I need to do<nobr> <wbr></nobr>;-)<br> <br>The other problem is that "disttest" is a bit broken (at least on 5.6.1 and all versions below it), because it leaves the distro directory lying around, which for some reason when you do "make dist" right after that, will incorporate the entire contents of that directory in your archive. I should probably check if 5.8 still has this bug and submit a patch accordingly, unless this is something intentional.



<blockquote>

<h2>Re:ME!</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2002-10-21T18:50:46</h3>
I have not encountered the `make dist` bug that includes old `make disttest` distributions in 5.6.1 or 5.8.0.  <br> <br>I have fixed most of my stupidity problems with <a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/brian-d-foy/release/" title="sourceforge.net">my release script</a sourceforge.net>.  It tests everything and will not let me release something if anything fails or if CVS is not up-to-date.  I have been very happy with it the past month even though I need to add a couple of things.<nobr> <wbr></nobr>:)



<blockquote>

<h2>Re:ME!</h2>
<h3><a href="/user/Matts/">Matts</a> on 2002-10-22T06:48:17</h3>
Nice script. Possibly the reason you haven't seen this bug is either because it's fixed in 5.6, or because you make dist before you make disttest.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

