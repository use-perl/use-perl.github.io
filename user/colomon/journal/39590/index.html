<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of colomon: Struggles with Trig</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Struggles with Trig</h1>
<h2><a href="/user/colomon/">colomon</a> on 2009-09-06T15:17:16</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I'm checking in what I've got of my trig tests / code update, which so far only tackles sin and cos. I thought it would be a good idea to get other people's eyes on it now, before I replicated the changes for all of the other trig functions. I'm up at my in-laws' cabin, had to drive into town to reach the Internet, so this seemed like the best way to pose my questions to the Perl 6 world.
<p>
1) Passing non-default $base value does not work for Num.sin / Num.cos or Complex.sin / Complex.cos. As far as I can tell the code is fine, and Num.sin("degrees") seems to work fine using p6eval, but the tests fail for me in trig.t. I thought it was some weird interaction with the fact sin is declared as an operator, but Rat.sin("degrees") works just fine in the tests.
I'm stumped on this, if anyone else can offer some insight I'm all ears.
</p>
2) Equally weirdly, I've got working implementations of sin(Complex) and sin(Complex, $base). But they only work if defined trig.t, moving them to Complex.pm made those tests fail. Do they need "is export" added or something like that? What is "is export" for, anyway? 
<p>
3) In general, I'd love it if a few people could look over the new tests for sine (cosine duplicates them). I'm not 100% comfortable with how repetitive they are. You could obviously change my little AngleAndResult to have a method
which allows you to select the base and the numeric type to return, but I don't know how to make that cleanly work with the very much needed SKIP directives. (BTW, these changes I've made add over 1000 tests in trig.t, and they are only the tip of the iceberg.)
<p>
If you could e-mail comments to my user name here at gmail.com, that's probably the best way to reliably get my attention while I am away from the
Internet this weekend. Any comments / suggestions would be deeply appreciated.  In the meantime I'll play around with replacing "degrees", etc with a proper enum, as per the spec.</p>


<hr/>



<h2>Answered by e-mail</h2>
<h3><a href="/user/moritz/">moritz</a> on 2009-09-06T20:24:56</h3>
<p>See <a href="http://www.nntp.perl.org/group/perl.perl6.compiler/2009/09/msg4889.html" title="perl.org">http://www.nntp.perl.org/group/perl.perl6.compiler/2009/09/msg4889.html</a perl.org></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

