<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of pudge: Doing it Right the First Time</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Doing it Right the First Time</h1>
<h2><a href="/user/pudge/">pudge</a> on 2008-06-05T23:12:51</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>So our design guy tells us that it would be much better if, instead of throwing in double &lt;br&gt; tags for paragraphs, we changed it to &lt;p&gt; tags.  Oh, and make sure it works in XHTML in case we want to use that someday, which means we need starting and ending tags.

So, this is sortof a pain, doing it right.  I am trying to think of all the potential problems, and there's a bunch.  So I put in a paragraph tag for the double-linebreak tag, but where do I put the ending tag?  What algorithms do I use to find the right place?  Pain.

And then I remembered that all comments get passed through a function I wrote several years ago called balanceTags().  You can basically throw any HTML you want at it, and it will return valid HTML.  It will balance unbalanced tags (including paragraph tags), it will make sure blockquote tags include block tags inside them, and so on.  If the "xhtml" flag was on, it will even make lone tags like linebreaks and images (and some paragraphs) into proper XHTML tags.  So switching to XHTML is as simple as flipping the switch.

Therefore, all I had to do is find out where to put the open paragraph tags, and balanceTags() takes care of the rest.  Hooray!  So in this case it means putting a paragraph tag at the beginning of each comment (which is something I've wanted to do for awhile anyway), and then another one at each double-linebreak, and we're golden.

I was worrying about doing it right for nothing, since I'd already done it right years ago!

<p>Cross-posted on <a href="http://pudge.net/glob/2008/06/doing-it-right-the-first-time.html">&lt;pudge/*&gt;</a>.</p></p>


<hr/>



<h2>Gifts from your past self</h2>
<h3><a href="/user/cbrandtbuffalo/">cbrandtbuffalo</a> on 2008-06-06T12:38:13</h3>
I love finding little gifts like that from your past self.<nobr> <wbr></nobr>:)





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

