<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of pudge: iPhoto</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>iPhoto</h1>
<h2><a href="/user/pudge/">pudge</a> on 2003-02-01T01:45:10</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>One of the things I didn't like about the first iPhoto was that I could use it to organize my photos, but couldn't use that information for anything useful, such as in cooperation with my <A HREF="http://pudge.net/gallery.pl">online gallery</A>.  Well, that may be changing.  With iPhoto 2, I can use Apple events to find out which photos are in which albums, and find out the relevant information of each photo, so I can regularly run a script that will suck out the information from iPhoto, and then update the information in the MySQL database.  It will be pretty simple, actually, with Mac::Glue.  I'll whip something up when I get around to it (when I get my computer back ... grrr ...).</p>


<hr/>



<h2>format?</h2>
<h3><a href="/user/darobin/">darobin</a> on 2003-02-01T15:10:34</h3>
<p>
  Is iPhoto's storage format known? I read somewhere that starting with Keynote (and following up on the preferences and stuff), Apple was to use XML as the storage format for an increasing number of its apps. Not to over-pitch XML (especially as Keynote's format could be much improved upon, notably by using SVG instead of copying it) but it would make export trivial, could be used directly in AxKit's image gallery, would allow one to search for pics using Find::File::Rule::XPath, etc.
</p>

<p>
  <em>robin, who's to get an iBook real soon now...</em>
</p>



<blockquote>

<h2>Re:format?</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-02-01T17:13:43</h3>
I've not looked for iPhoto 2, but that's a good question.  When I get a chance, I'll find out.  I know iPhoto v1, it was not XML.



<h2>Re:format?</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2003-02-01T17:13:49</h3>
<blockquote><div> <i>
Not to over-pitch XML (especially as Keynote's format could be much improved upon, notably by using SVG instead of copying it)
</i> </div></blockquote>
I don't condone what Apple did, but I don't condemn them either.  Even Tim Bray has said on occasion that it is more important to start using XML than to wait for a nice-sounding whiz-bang specification to gel.
<p>
I was in a position when I needed an Schema language for XML in 1999.  Shortly thereafter, we needed an XML Query language for the same project, just before the first XML Query notes were published.  Had we waited for XML Schema to work out, that project might still be in development instead of shipping for 3 years.  Double ditto for XML Query.  (It also helps that this was an internal project; the internal use of XML was an implementation detail, much like the use of XML as Apple's PList and Keynote Formats.)
</p><p>
If I were to start that project today, I might still be tempted to do something similar again.  Instead of fighting with a spec like WXS or implementing Relax NG (assuming Daniel Veillard wasn't already doing it, and I couldn't use TRANG), it would be a better use of precious developer resources to develop the simplest XML language that could possibly work and move on from there.  Keynote didn't develop overnight; it sounds like Steve has been using it for 2-3 years, which means that the project is likely 3-4 years old.  Going back that far, it is possible that the Keynote development team had to make similar tradeoffs and came to a similar conclusion.  Were they starting today, I think it would be much more probably that they would start with SVG from the beginning.
</p><p>
Yes, it is better to use standards instead of reinventing them poorly.  I don't know the constraints of the Keynote team, but their situation could have been similar to other projects where it was too expensive to implement a full standard or wait for a standard to gel.</p>



<blockquote>

<h2>Re:format?</h2>
<h3><a href="/user/darobin/">darobin</a> on 2003-02-03T09:41:44</h3>
<p>
  Oh I know that ad hoc is good, I'm a great advocate of using ad hoc vocabularies and do so whenever there is no existing solution that satisfies me (which is why I never use DocBook, only convert to it).
</p>

<p>
  However SVG 1.0 has been around for a while, and Apple was on the WG. I know they wanted to use it for some OS X stuff but had to ship earlier than the spec was released. However I <em>am</em> having some trouble understanding why they're using things like <code>&lt;g transformation='1 0 2 2 3 6'&gt; </code> instead of <code>&lt;g transform='matrix(1 0 2 2 3 6)'&gt; </code> when that syntax has been around a <em>long</em> time and they took part in shaping it. Looking at the vocabulary closely, it really seems to me that they in fact were using quasi-SVG and went to some pains to change the names<nobr> <wbr></nobr>:)
</p>

<p>
  Also, Keynote might have been around for a while, but it's been industrialised now. Changing an XML format is trivial in any well built app (a simple reader, a simple writer), and I do expect support for a spec from companies that helped write it<nobr> <wbr></nobr>:)
</p>





</blockquote>


<h2>Re:format?</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-02-03T13:49:29</h3>
It looks like most, but not all, of the info I need is in AlbumData.xml, including a list of all the images, with title, date, filename, comment, and unique iPhoto ID.<br> <br>It does not include heigh/width, though, which is important for my use; however, I could get all the info from the XML and from there query iPhoto via Apple events for the dimensions.  Actually, what I really need is not dimensions, but degrees of clockwise rotation.  It looks like iPhoto does not store that information at all, or at least not in any way I can retrieve it via the XML or Apple events.  Grrr.  If I only need dimensions, I could get those via Apple events, or with a combination of thumbnail path (also in the XML) and Image::Size.<br> <br>Ugh, and Date is messed up.  In the XML, there is Date, which is the date of import, and ModificationDate which is the last time the photo was modified, either the date of the photo on disk (not sure if it uses the filesystem or EXIF data<nobr> <wbr></nobr>... I think it is the former), or the date you last modified the picture, but it is not updated when you modify any part of it, just some parts of it.  There is no way to get the assigned Date except via Apple events, and no way to get the Modification Date (which would be useful for synching if it were more comprehensive) except by XML.  My head hurts.<br> <br>Also, the Date in the XML is not the Date of the image, but the Date of import.  Unuseful to me.  I could make use of ModifiedDate for the purpose of synchronizing metadata between iPhoto libraries, though.



<blockquote>

<h2>Re:format?</h2>
<h3><a href="/user/darobin/">darobin</a> on 2003-02-03T14:01:45</h3>
<p>
  Is there any chance that the rotation would be in the EXIF data? There's a <a href="http://use.perl.org/user/acme/journal/9741" title="perl.org">field for orientation</a perl.org> so there could well be more info.
</p>

<p>
  For my needs I don't mind throwing in a small SAX filter to add the dimensions, it's cool to know that it's XML so that I can think about building drop in apps for AxKit and that kind of stuff I use. Thanks for the info, hopefully I'll have my iBook soon enough to play with that kind of stuff<nobr> <wbr></nobr>:)
</p>



<blockquote>

<h2>Re:format?</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-02-03T14:26:05</h3>
A good idea, but apparently not.<blockquote><div> <tt>$ exifdump<nobr> <wbr></nobr>./iPhoto\ Library/2001/07/23/Originals/DSCN0357.JPG | grep Orientation<br>Orientation -&gt; top_left<br>$ exifdump<nobr> <wbr></nobr>./iPhoto\ Library/2001/07/23/DSCN0357.JPG | grep Orientation<br>Orientation -&gt; [top_left,top_left]<br>$ exifdump<nobr> <wbr></nobr>./iPhoto\ Library/2001/07/23/Thumbs/10.jpg | grep Orientation</tt> </div></blockquote>So even in iPhoto's copy of this image, which was flipped upside down in iPhoto, the orientation remains unchanged in the EXIF data (for some value of "unchanged"<nobr> <wbr></nobr>... it rewrites the EXIF data, but doesn't properly modify the Orientation field).  Both my camera, and iPhoto, apparently ignore this data.  It does properly modify the height and width tags, but not the Orientation tag.<br> <br>Also, iPhoto throws away my CoolPix-$foo tags from the EXIF.  These don't matter a LOT, but it sucks to lose them.  Right now I don't care much, since I am using the originals, but in the future I might want to use iPhoto also to modify the images themselves, and in that case, I lose the data.  Of course, if I do go this route, I don't have to worry about orientation, since the version I will be using online will be oriented properly already.  But that's all down the road.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

