<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of pudge: More iTunes: Playlist Sharing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>More iTunes: Playlist Sharing</h1>
<h2><a href="/user/pudge/">pudge</a> on 2003-05-01T11:33:46</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>In Playlist Sharing, you don't get some of the information for a song, like the disc number, or the artwork.  The playlist sharing window doesn't have disc number as an option for the information you can see in View Options.  If you click Get Info you can see it.  Weird.  But worse is that if you stream the file, you don't get the artwork.  It's right there embedded in the file, before the actual music; you'd think iTunes would/could pull it out.
<P CLASS="center"> <EM><A HREF="http://user@mp3.pudge.net:8000/mp3/iTunes%20Music/Ben%20Folds%20Five/The%20Unauthorized%20Biography%20Of%20Reinhold%20Messner/01%20Narcolepsy.m3u?play=1">Now Playing</A>:</EM> <STRONG><A HREF="itms://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?artistTerm=Ben%20Folds%20Five&amp;albumTerm=The%20Unauthorized%20Biography%20Of%20Reinhold%20Messner&amp;songTerm=Narcolepsy">Narcolepsy</A> - <A HREF="itms://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?artistTerm=Ben%20Folds%20Five">Ben Folds Five</A> (<A HREF="itms://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?artistTerm=Ben%20Folds%20Five&amp;albumTerm=The%20Unauthorized%20Biography%20Of%20Reinhold%20Messner">The Unauthorized Biography Of Reinhold Messner</A>)</STRONG>  </P> </p>


<hr/>



<h2>Incompatible artwork</h2>
<h3><a href="/user/extra88/">extra88</a> on 2003-05-01T14:44:52</h3>
I've found that artwork added to tracks by other programs won't necessarily display in iTunes. I typically add artwork to the OpenBSD theme songs using MusicMatch for Windows but iTunes4 doesn't display it in the album window or the artwork window.<br> <br>I also spent some frustrated time trying to use <a href="http://use.perl.org/user/pudge/journal/11894" title="perl.org">your perl script</a perl.org> for extracting artwork before I decided that the ID3 tags must be different. I'm still a Perl noob, how can I use 'keys' with the hash reference get_mp3tag returns so I know what all the keys are? BTW, while fooling around with that script, I also found that the extraction didn't work even for existing key names (like TITLE) if the parameter RAW_V2 was specified. Changing get_mp3tag($file, 2, 2) to get_mp3tag($file, 2) or even just get_mp3tag($file) made it work. This was all with Perl 5.8, MP3::Info 1.02, and files tagged by MusicMatch for Windows.



<blockquote>

<h2>Re:Incompatible artwork</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2003-05-01T15:52:11</h3>
<tt>my $hash_ref&nbsp; &nbsp;= { Gharlane =&gt; 'Eddore', Mentor =&gt; 'Arisia' };<br>my @nonhumans&nbsp; = keys %{ $hash_ref };</tt>



<blockquote>

<h2>Re:Incompatible artwork</h2>
<h3><a href="/user/extra88/">extra88</a> on 2003-05-01T16:41:12</h3>
Thanks.<br> <br>Key 0: YEAR<br>Key 1: ARTIST<br>Key 2: COMMENT<br>Key 3: ALBUM<br>Key 4: TITLE<br>Key 5: GENRE<br>Key 6: TRACKNUM<br>Key 7: TAGVERSION<br> <br>I'm interested in using Perl to access the art because I'd really like a script which can remove the art from an mp3. We're using MusicMatch to rip a bunch of CDs and its pretty good but one bug is you can't tell it not to add the album art to a ripped track if it finds some. The problem with album art is when we use Apache::MP3 to steam files containing album art, some clients won't play the tracks (tested with iTunes2, iTunes3, RealPlayer 8 for Win). Currently we just added album art removal to the ripping procedure but since we're already using Perl scripts to manipulate the files before they're uploaded, it would be nice to just add stripping out album art as well.<br> <br>BTW, my guess is the problem on those stream clients isn't the art per se. I think the problem is the amount of data at the head of the files before the mp3 data is too big. Since there's no limit to how much data can go in ID3v2 tags, clients should be fixed to play the mp3 data where ever they can find it.



<blockquote>

<h2>Re:Incompatible artwork</h2>
<h3><a href="/user/wgalway/">wgalway</a> on 2007-02-18T19:56:28</h3>
<tt>#!/usr/bin/perl -w<br>#-------------------------------<br># Artwork: artwork.pl v.1 2007-02-18 14:52:09<br># Pull album art from id3v2 tags<br># Copyright (c) 2007 William Galway. All Rights Reserved.<br>#<br>#-------------------------------<br>$VERSION = '.1';<br><br>use MP3::Tag;<br>use File::Find;<br>open( LOGF, "&gt;&gt;logfile.txt" ) || die "$!";<br>print LOGF `date`;<br>print LOGF "The follwing directories are w/o ablum art.\n";<br><br># MP3 Dirctory<br>print "Type the path to your mp3s and press Enter. \n";<br>$mp3dir = &lt;STDIN&gt;;<br>chomp $mp3dir;<br>print "\n";<br><br># Album Art File Name<br>print "Type the name of the album art file you\n";<br>print "would like extracted to your mp3 folder and press Enter.\n";<br>print "For example cover.jpg\n";<br>$cover = &lt;STDIN&gt;;<br>chomp $cover;<br>print "\n";<br><br>if ( -e $mp3dir ) {<br>&nbsp; &nbsp; print "Checking $mp3dir for mp3s.\n";<br>}<br>else {<br>&nbsp; &nbsp; print("MP3 directory does not exist\n");<br>&nbsp; &nbsp; exit;<br>}<br><br>find( \&amp;ExtractTagInfo, $mp3dir );<br><br>sub ExtractTagInfo {<br><br>&nbsp; &nbsp; if (/\.mp3$/) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; my $art;<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $mp3 = MP3::Tag-&gt;new($_);<br><br>&nbsp; &nbsp; &nbsp; &nbsp; $mp3-&gt;get_tags();<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( exists $mp3-&gt;{ID3v2} ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $id3v2_tagdata = $mp3-&gt;{ID3v2};<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $info&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = $id3v2_tagdata-&gt;get_frame("APIC");<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $mp3-&gt;close();<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while ( my ( $key, $value ) = each(%$info) ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if ( $key eq "_Data" ) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $art = $value;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; if ( -e "$File::Find::dir/$cover" ) {<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #print "$File::Find::dir/$cover already exists \n";<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br><br>&nbsp; &nbsp; &nbsp; &nbsp; # write the art to file<br>&nbsp; &nbsp; &nbsp; &nbsp; elsif ($art) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; open ARTWORK, "&gt;$cover"<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; or die "Could not open \n$File::Find::dir/$cover\n Check your permissions.\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; binmode(ARTWORK);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print ARTWORK $art;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print "Pulling Art From $File::Find::name\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; close ARTWORK;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; else {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print LOGF "$File::Find::dir\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br>close(LOGF);<br>print(<br>"All Done! Open logfile.txt for a list of mp3 directories w/o album art information.\n"<br>);<br>exit<br></tt>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

