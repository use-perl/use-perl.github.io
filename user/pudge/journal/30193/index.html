<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of pudge: Rquest for Intel Mac Help</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Rquest for Intel Mac Help</h1>
<h2><a href="/user/pudge/">pudge</a> on 2006-07-06T18:36:23</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I no longer have access to an Intel Mac.  I got a bug report, and I need help.<br/><br/>Requirements:
<ul><li>Install <a href="http://projects.pudge.net/">latest (as of a week or so ago) versions of some modules</a>: Mac::Glue, Mac::Apps::Launch, Mac::AppleEvents::Simple, and Mac::Carbon (in reverse order of normal installation).
<li>Install two small shell scripts, <a href="http://dev.macperl.org/files/scripts/aedebug">aedebug</a> and <a href="http://dev.macperl.org/files/scripts/glue">glue</a>.
<li>Create a glue for iCal ("<tt>sudo gluemac /Applications/iCal.app</tt>")
<li>Run this one-liner script:<pre>aedebug glue iCal '$x = $g->obj(event => gAny, calendar => gAny)->get; print $x->prop("summary")->get; my $t = $x->prop("start date")->get; print $t; print scalar localtime $t'</pre>
</ul><br/><br/>Then send me the entire output (there will be quite a bit of debugging output), either here (use the "Code" posting format), or via e-mail.<br/><br/>Thanks!<br/><br/><b>Update</b> baud helped me out, so now I have a proper diagnosis of the problem, and I don't need further assistance for now.  He also helped me uncover another problem that my test case here exposed, that was not in the original.  W00t.
</p>


<hr/>



<h2>Result</h2>
<h3><a href="/user/triv/">triv</a> on 2006-07-06T20:26:02</h3>
<tt>ctriv@elendil:~/bin$ aedebug glue iCal '$x = $g-&gt;obj(event =&gt; gAny, calendar =&gt; gAny)-&gt;get; print $x-&gt;prop("summary")-&gt;get; my $t = $x-&gt;prop("start date")-&gt;get; print $t; print scalar localtime $t'<br>AE2000 (8590): Sending an event:<br>------oo start of event oo------<br>{ 1 } 'aevt':&nbsp; core/getd (i386){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return id: 562954240 (0x218e0000)<br>&nbsp; &nbsp; &nbsp;transaction id: 0 (0x0)<br>&nbsp; interaction level: 64 (0x40)<br>&nbsp; &nbsp; &nbsp;reply required: 1 (0x1)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;remote: 0 (0x0)<br>&nbsp; &nbsp; &nbsp; for recording: 0 (0x0)<br>&nbsp; target:<br>&nbsp; &nbsp; { 1 } 'bund':&nbsp; 14 bytes {<br>&nbsp; &nbsp; &nbsp; bundle id: com.apple.iCal<br>&nbsp; &nbsp; }<br>&nbsp; fEventSourcePSN: { 0x0,0x2 } (perl)<br>&nbsp; optional attributes:<br>&nbsp; &nbsp; &lt; empty record &gt;<br>&nbsp; event data:<br>&nbsp; &nbsp; { 1 } 'aevt':&nbsp; - 1 items {<br>&nbsp; &nbsp; &nbsp; key '----' -<br>&nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'obj ':&nbsp; - 4 items {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'form' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'enum':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'indx'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'want' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'type':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'wrev'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'seld' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'abso':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ' yna'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'from' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'obj ':&nbsp; - 4 items {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'form' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'enum':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'indx'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'want' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'type':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'wres'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'seld' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'abso':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ' yna'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'from' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { -1 } 'null':&nbsp; null descriptor<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br>------oo&nbsp; end of event&nbsp; oo------<br>AE2000 (8590): Received an event reply:<br>------oo start of event oo------<br>{ 1 } 'aevt':&nbsp; aevt/ansr (i386){<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return id: 562954240 (0x218e0000)<br>&nbsp; &nbsp; &nbsp;transaction id: 0 (0x0)<br>&nbsp; interaction level: 112 (0x70)<br>&nbsp; &nbsp; &nbsp;reply required: 0 (0x0)<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;remote: 0 (0x0)<br>&nbsp; &nbsp; &nbsp; for recording: 0 (0x0)<br>&nbsp; target:<br>&nbsp; &nbsp; { 1 } 'psn ':&nbsp; 8 bytes {<br>&nbsp; &nbsp; &nbsp; { 0x0, 0xa40001 } (iCal)<br>&nbsp; &nbsp; }<br>&nbsp; fEventSourcePSN: { 0x0,0xa40001 } (iCal)<br>&nbsp; optional attributes:<br>&nbsp; &nbsp; &lt; empty record &gt;<br>&nbsp; event data:<br>&nbsp; &nbsp; { 1 } 'aevt':&nbsp; - 3 items {<br>&nbsp; &nbsp; &nbsp; key 'errn' -<br>&nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'long':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -1700 (0xfffff95c)<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; key 'errt' -<br>&nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'type':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'obj '<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; key 'erob' -<br>&nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'obj ':&nbsp; - 4 items {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'form' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'enum':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'indx'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'want' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'type':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'wrev'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'seld' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'abso':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ' yna'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'from' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'obj ':&nbsp; - 4 items {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'form' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'enum':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'indx'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'want' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'type':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'wres'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'seld' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { 1 } 'abso':&nbsp; 4 bytes {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ' yna'<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; key 'from' -<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; { -1 } 'null':&nbsp; null descriptor<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; }<br>}<br><br>------oo&nbsp; end of event&nbsp; oo------<br>iCal-&gt;get(DOBJ, Mac::AEObjDesc=HASH(0x1b554fc)) event failed:<br>errAECoercionFail (-1700)<br>bad parameter data or unable to coerce the data supplied<br>Can't call method "prop" on an undefined value at -e line 2, &lt;DATA&gt; line 1.<br></tt>



<blockquote>

<h2>Re:Result</h2>
<h3><a href="/user/pudge/">pudge</a> on 2006-07-06T22:21:38</h3>
Thanks, I have fixes, and will update Mac-Carbon and Mac-AppleEvents-Simple soon.<br>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

