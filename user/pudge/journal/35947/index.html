<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of pudge: Oooo Sexy: Inline Comments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Oooo Sexy: Inline Comments</h1>
<h2><a href="/user/pudge/">pudge</a> on 2008-03-20T18:20:36</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Comment replies in Slash, on use Perl and soon on Slashdot, if you have "D2"/"Dynamic Discussions" enabled, will now be inline, on the same page.  Ajaxy goodness.  Never leave the page to reply to an article or journal or comment.  Click Reply, box loads in, type your reply, hit preview, then see preview, then hit submit, then new comment magically appears on the page.</p>


<hr/>



<h2>Nice</h2>
<h3><a href="/user/Smylers/">Smylers</a> on 2008-03-27T13:54:43</h3>
<p>Being able to see what you're replying to is a <em>massive</em> advantage.</p>

<p>Thanks.</p>



<h2>Reliability first</h2>
<h3><a href="/user/stu42j/">stu42j</a> on 2008-03-27T14:26:14</h3>
The use.perl server really needs to get more reliable before this ajax stuff will be usable.  The frequent connection timeouts make it impractical.



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-27T15:11:55</h3>
Maybe it's you?  I have very rare timeouts.



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/stu42j/">stu42j</a> on 2008-03-27T15:20:33</h3>
Nope, not just me.<br><br><a href="http://use.perl.org/comments.pl?sid=38429" title="perl.org">http://use.perl.org/comments.pl?sid=38429</a perl.org><br><a href="http://use.perl.org/user/Ovid/journal/35576" title="perl.org">http://use.perl.org/user/Ovid/journal/35576</a perl.org>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-27T16:14:45</h3>
Those connection issues were two months ago.  I know the site can be slow occasionally, and during code refreshes we can be down of course, but I've noticed no significant connection issues recently.



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/stu42j/">stu42j</a> on 2008-03-27T16:28:53</h3>
The connection issues have been less frequent but certainly haven't gone away.  If the downtime is caused by code refreshes, I wouldn't know.  Perhaps I'll email you next time it happens.



<h2>Re:Reliability first</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-27T18:17:10</h3>
<p>What irks me personally is that the entire <em>eight hundred sixty kilobytes</em> YUI albatross is loaded every other time I visit even though I have disabled the Slash Ajax stuff in my prefs.</p>

<p>I know I can check the box to enable the Ajax UI on any page I look at, should I ever change my mind, and that the Ajax UI then immediately starts working, which means some Javascript is needed. But you&#8217;re loading jQuery as well anwyay, which is tiny and perfectly servicable for loading extra libraries on demand. It should be easy to load YUI via jQuery, and to make that conditional on whether the Ajax UI is enabled.</p>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-27T19:35:35</h3>
<p><div class="quote">What irks me personally is that the entire <em>eight hundred sixty kilobytes</em> YUI albatross is loaded every other time I visit<nobr> <wbr></nobr>...</div> Then stop clearing your cache!  And use a browser that handles compression.<p><nobr> <wbr></nobr></p><div class="quote">... even though I have disabled the Slash Ajax stuff in my prefs</div> No, you don't.  You have Discussion 2 disabled.  That's only one specific thing that uses Ajax on the site<p><nobr> <wbr></nobr></p><div class="quote">... you're loading jQuery as well anwyay<nobr> <wbr></nobr>...</div> As of a couple of weeks ago.<p><div class="quote">It should be easy to load YUI via jQuery, and to make that conditional on whether the Ajax UI is enabled. </div> We don't use YUI for Ajax.<br><br>Actually, we don't even use YUI for any of Discussion 2.<br><br>You make some valid points, but you really don't know the code nearly well enough to be making the assertions you do.<br><br>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-27T20:46:49</h3>
<p>I may not know how Slashcode works, but I am no web dev greenhorn. I know what can be done in HTML with and without Javascript, and the interface I do actually use is trivial to implement without any use of Javascript whatsoever, let alone Ajax. If there are still Ajax features somewhere, they are utterly wasted on me, and so is the site&#8217;s bandwidth and mine.</p>

<p>As for the browser cache:</p>

<ol>
<li> <p>Sorry, but it&#8217;s finite. I would like to increase it since I have disk space to spare, but disk cache lookup does not appear to scale tolerably to the GB range in any of the browsers I&#8217;ve tried &#8211; and with 90 tabs being open routinely (with quite some churn), the 50MB I&#8217;ve granted Firefox are pretty tight.</p> </li>
<li> <p>There&#8217;s no <code>Expires</code> header in sight when I request those URIs (despite the query string fudging). So the browser is at least going to keep checking whether the files have changed, anyhow.</p> </li>
</ol>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-27T21:09:24</h3>
<p><div class="quote">I am no web dev greenhorn</div> I didn't imply otherwise.  Indeed, I directly limited my claim of what you don't know to Slash, and I noted that you made valid points, but that they didn't apply as you asserted.<p><div class="quote">If there are still Ajax features somewhere, they are utterly wasted on me</div> Of course, you don't actually know that.  And again, you also don't understand YUI very well since you seem to think it is primarily about Ajax.  As to what YOU think is trivial to implement, I am uninterested in knowing.<p><div class="quote">I would like to increase it since I have disk space to spare<nobr> <wbr></nobr>...</div> That is your choice.<p><div class="quote">There's no <code>Expires</code> header in sight when I request those URIs</div> Yes.  There doesn't need to be.  We use Cache-Control/max-age.  Now, that is not there either right now, but it was there recently and will be back again soon.<br>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-27T21:37:38</h3>
<p>So how about giving an example of how a feature I use requires YUI stuff, instead of skirting the matter with &#8220;you don&#8217;t know what it&#8217;s for&#8221; hints?</p>

<p>Here&#8217;s a summary of how I use the site: I read the site mainly via several <code>search.pl</code> feeds, and hit the site in the browser only to read comments, which I&#8217;ve set to nested mode, and to leave comments, which I do via the Reply links that lead me to a page with a very plain HTML form. None of these interactions happen without a page load.</p>

<p>What part of this requires any Javascript?</p>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-27T21:55:49</h3>
<p><div class="quote">So how about giving an example of how a feature I use requires YUI stuff</div> /me mumbles something about pearls before swine<br>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-27T22:43:06</h3>
<p>Right, I shouldn&#8217;t have expected an actual, straight answer. So, I&#8217;ve blocked <code>images.use.perl.org</code> and cleared my cache. Nothing appears to have broken, other than missing stylesheet.</p>

<p>But I&#8217;m sure there&#8217;s something I need YUI for that I don&#8217;t know anything about.</p>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-27T23:37:22</h3>
<p><div class="quote">Right, I shouldn&#8217;t have expected an actual, straight answer</div> Correct.  When you act like I owe you something, you get nothing.<br>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-28T02:07:18</h3>
<p>Well, use.perl is where the community is, so I have to put up with Slashcode. I suppose that given sufficient effort, the resultant complaints can be interpreted as a sense of entitlement; refusing to address any of the actual issues is then a reasonable response.</p>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-28T02:29:13</h3>
<p><div class="quote">Well, use.perl is where the community is, so I have to put up with Slashcode</div> And I have to put up with you.  I think I got the worse of the bargain.<br>



<blockquote>

<h2>Re:Reliability first</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2008-03-28T03:35:50</h3>
<p>Such is the curse of success.</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:Reliability first</h2>
<h3><a href="/user/ChrisDolan/">ChrisDolan</a> on 2008-04-30T04:28:05</h3>
Hi Chris,<br><br>I've been fighting the same problems on a website I'm working on (using scriptaculous instead of YUI, but the same issues with large JS).  I've got a couple of easy tricks to get huge compression.<br><br>I use yuicompressor to squish my JS and then gzip it. Simple<nobr> <wbr></nobr>.gz content works smoothly on all browsers except Safari.  To make it work with Safari too, all you have to do is name your file<nobr> <wbr></nobr>.jsgz instead of<nobr> <wbr></nobr>.js.gz and then do the following in your apache conf:<p><blockquote> <div><tt>&nbsp; &nbsp; &lt;files *.jsgz&gt;<br>&nbsp; &nbsp; &nbsp; ForceType text/javascript<br>&nbsp; &nbsp; &nbsp; Header set Content-Encoding: gzip<br>&nbsp; &nbsp; &lt;/files&gt;</tt></div> </blockquote> With those tricks, I predict use.Perl.org can get about a factor of 20 compression. The tricks work on CSS files too with a lower compression ratio.<br><br>If the above interests you, I'd be happy to volunteer an hour or two to dig into slashcode to help implement -- basically a simple tool to make the gz files.  I run my tool a mod_perl launch time, but it could be part of any deploy step.<br><br>I agree that cache mitigates the problem, but it's so easy to fix that the payoff is worthwhile.





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Hidden comments</h2>
<h3><a href="/user/stu42j/">stu42j</a> on 2008-03-28T15:24:00</h3>
Is there an option I can change so that Score:1 comments will not be hidden by default?  I looked in the D2 Prefs link and the standard user Preferences but couldn't find it.  --thanks.



<blockquote>

<h2>Re:Hidden comments</h2>
<h3><a href="/user/stu42j/">stu42j</a> on 2008-03-28T15:29:39</h3>
Maybe it is not score:1 that is the problem so here is an example.  On this journal below, there is a comment titled "nearlyfreespeech.net" but it does not show up.  Not even with a "1 hidden comment" link.<br><br><a href="http://use.perl.org/user/renodino/journal/35971" title="perl.org">http://use.perl.org/user/renodino/journal/35971</a perl.org>



<blockquote>

<h2>Re:Hidden comments</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-03-28T16:21:29</h3>
See that widget thingy with the white and dark grey slider bars?  Drag those around.  This changes your thresholds.



<blockquote>

<h2>Re:Hidden comments</h2>
<h3><a href="/user/stu42j/">stu42j</a> on 2008-03-28T16:38:10</h3>
Ah, I probably moved those around not realizing it was doing anything.  Also, it doesn't quite work.  If I move the slider to 0 Hidden all this blank space opens up where the comments should be but they are still not visible.  If I reload the page, they are now visible so it is not really a problem.<br><br>Also, I am using Firefox 3 B4, in case that is the problem.



<blockquote>

<h2>Re:Hidden comments</h2>
<h3><a href="/user/pudge/">pudge</a> on 2008-04-03T00:41:46</h3>
This should be fixed now.  Did a major overhaul and upgrade of a lot of the D2 stuff for this week.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

