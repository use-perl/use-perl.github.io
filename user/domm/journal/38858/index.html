<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of domm: Lession of the day: Don't always do what the customer wants</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Lession of the day: Don't always do what the customer wants</h1>
<h2><a href="/user/domm/">domm</a> on 2009-04-23T18:50:21</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Today I got a call from an client who wanted a <a href="http://oe1.orf.at/kulturwandertag">new feature</a> - that was not completely done yet - deployed ASAP, so that they can mention it in their weekly newsletter. Instead of doing the sensible thing (i.e. tell them to wait until I'm home and have access to the proper staging setup (i.e. my laptop...)) I did the stupid thing and finished the implementation in a hurry.</p>

<p>And then I did the even stupider thing, namely "deploying" the code ("deploying" means uploading the changed files via ftp and then touching a certain file to trigger a server restart. hrmpf). Of course, the server did not came up again, and I had to cycle home in a hurry, to fix things properly. (In the meantime the sysadmins removed the broken code and got the site back up. Uff...)
</p>

<p>In the end the reason was this:</p>

<p><pre>
$digest //= $c->req->captures->[0];
...
$content_type = 'application/pdf';
</pre>
</p>

<p>Looks perfectly ok. And it is perfectly ok, as long as you're running 5.10. Which is what I use for nearly all of my projects. Except for this one (which in fact was only moved to 5.8 two years ago).</p>

<p>Oh, and it took me a while to figure out that error message: "Bad name after pdf' at bla"</p>

<p>Conclusion: Do not rush deploys, even if the customer wants you to. And remember what Perl you're actually using...</p>

</p>


<hr/>



<h2>Time for Test::MinimumVersion?</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2009-04-23T19:01:45</h3>
<p>Maybe add <a href="http://search.cpan.org/perldoc?Test::MinimumVersion" title="cpan.org">Test::MinimumVersion</a cpan.org> to your pre-deployment testing...</p><p>-- dagolden</p>



<blockquote>

<h2>Re:Time for Test::MinimumVersion?</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2009-04-27T14:52:09</h3>
<p>How will that help code that gets deployed without testing?<nobr> <wbr></nobr><tt>:-)</tt> </p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

