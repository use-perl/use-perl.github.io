<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of domm: CPANPLUS::Shell::Default::Plugins::Prereqs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>CPANPLUS::Shell::Default::Plugins::Prereqs</h1>
<h2><a href="/user/domm/">domm</a> on 2008-10-02T06:57:39</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Deep in one of the current threads on autobundling installers, someone (I think Jos) mentioned a hitherto unkown (to me) module called 
<a href="http://search.cpan.org/dist/CPANPLUS-Shell-Default-Plugins-Prereqs/">CPANPLUS::Shell::Default::Plugins::Prereqs</a>, which is another very cool plugin for CPANPLUS.</p>

<p>It will give a very nice overview of what other dists a given dist (local or on CPAN) needs, and will even install them. While the last point isn't so revolutionary for regular CPAN stuff, I find it very comfortable for custom code that's not on CPAN. Yes, Module::Install can also do that, but I think it's evil and I really hate <code>make</code> (or rather <code>Makefile</code>s - using tabs for semantics is just fu&#823;cked)</p>

<p><b>Examples</b></p>

<p><pre>
~$ cpanp /prereqs show Moose
  Module                            Req Ver  Installed       CPAN  Satisfied
  Test::LongString                        0       0.11       0.11        Yes
  Scalar::Util                         1.18       1.19       1.19        Yes
  Test::Exception                      0.21       0.27       0.27        Yes
  Filter::Simple                          0       0.82       0.82        Yes
  Class::MOP                           0.66       0.65       0.66         No
  ExtUtils::MakeMaker                  6.44       6.44       6.46        Yes
  Sub::Exporter                       0.972      0.980      0.980        Yes
  Carp                                    0       1.08       1.08        Yes
  Test::More                           0.62       0.80       0.80        Yes
  List::MoreUtils                         0       0.22       0.22        Yes
</pre></p>

<p>It also works on stuff that's not on CPAN. You just need to chdir into the dir containing Build.PL (of course it also works with Makefile.PL, but no sane person is still using that...)</p>

<p><pre>
~$ cd revdev/RevDev-Schema
~/revdev/RevDev-Schema$ cpanp /prereqs show .
  Module                            Req Ver  Installed       CPAN  Satisfied
  DBIx::SchemaChecksum                 0.23       0.23       0.23        Yes
  DBIx::Class                             0    0.08010    0.08010        Yes
  Array::Diff                          0.04       0.04       0.04        Yes
  RevDev::Utils                        0.10       0.12       0.11        Yes
  DBD::Pg                            2.10.0     2.10.5   2.010007        Yes
  Sys::Hostname                           0       1.11       1.11        Yes
  DateTime::Format::Pg                    0    0.16002    0.16002        Yes
</pre></p>

<p>And of course it's totally easy to install the dependencies:</p>

<p><pre>
~$ cpanp /prereqs install Moose
  Module                            Req Ver  Installed       CPAN  Satisfied
  Test::LongString                        0       0.11       0.11        Yes
...
  Class::MOP                           0.66       0.65       0.66         No
Running [/opt/perl5.10/bin/perl /opt/perl5.10/bin/cpanp-run-perl /home/domm/.cpanplus/5.10.0/build/Class-MOP-0.66/Makefile.PL ]...
Testing if you have a C compiler
Checking if your kit is complete...
Looks good
Writing Makefile for Class::MOP
...
Result: PASS
  ExtUtils::MakeMaker                  6.44       6.44       6.46        Yes
...
</pre></p>

<p>Another very sharp tool in my deployment toolbox. <a href="http://search.cpan.org/user/mgrimes/">MGRIMES</a>++
</p>
</p>


<hr/>



<h2>In defense of Module::Install...</h2>
<h3><a href="/user/Alias/">Alias</a> on 2008-10-03T01:57:34</h3>
<p>... it recommends AGAINST the use of auto_install() and I even tried to remove the feature altogether (but it didn't stick, too many things broke).</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

