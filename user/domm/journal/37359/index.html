<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of domm: /me loves git</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>/me loves git</h1>
<h2><a href="/user/domm/">domm</a> on 2008-09-05T10:07:07</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Some of the reasons I really like git, all experienced in this week:</p>

<p><b>Prepare CHANGES file</b><p>

<p>Run <code>git log --no-merges --pretty=format:'  - %s (%an)' `git tag | tail -n 1`..</code> to get a nicely formatted list of changes (and who checked it in) since the last tag. OK, most other VCS can also do similar, but git let's me alias this in my .gitconfig so I don't have to remember the details and just say <code>git last_changes</code>.

<p><b>Revert a repo to a few hours earlier</b></p>

<p>A colleague complains that the test suite for one modul is broken, and he
can't fix it. I check out his head, and can't find the problem after a few
minutes. But I experience strange behaviour during tests (if you run a single
test, it works, if you run all tests, it fails). So, we assume it has to with
the tests fu&#824;cking up the DB. To prove that his changes caused the problem, I do
<code>git co a_ref_befor_his_commit</code> and magically travel back in time.
The tests work now. So we do <code>git co HEAD</code> to travel back into the
present, and after some cross-history-diffing, we find the bug & fix it.  </p>

<p><b>No need to set up a server</b></p>

<p>I was fuzzing with our post-receive hooks, which run after somebody pushed something into the public repo. Our hooks do obvious things like sending out commit mail and IRC notifications, but also nice stuff like building a tarball and uploading it to our custom cpan when the commit was a tag. Only this wasn't working after we switched to another notify-script.</p>

<p>But because git doesn't care where you clone from, and what exactly is a public repo, it was easy to set up a local repo on my disk, clone from it, declare another repo on my disk to be the "remote" and thus test all of the scripts without a) network, b) spamming my colleagues and (most importanly) c) any complicated setup. All that was needed were some dirs on my laptop.
</p>

<p>And that's it for todays git propaganda!</p>


</p>


<hr/>



<h2>order of &quot;git tag&quot;</h2>
<h3><a href="/user/amoore/">amoore</a> on 2008-09-05T15:07:57</h3>
On my machine, "git tag" appears to give the tags in alphabetical order, not in chronological order. So, this gives the changes since the tag that is last alphabetically, not chronologically. Those may be different if you don't name your tags after version numbers.



<blockquote>

<h2>Re:order of &quot;git tag&quot;</h2>
<h3><a href="/user/mugwumpjism/">mugwumpjism</a> on 2008-09-05T22:05:21</h3>
<p>that's a strange requirement, but you can use something like this:

</p><p> <code>git-for-each-ref refs/tags/* --format="%(tag)" --sort="taggerdate"</code> </p><p>Well, that only works for annotated tags... use '%(refname)' instead of '%(tag)' and add '--sort=committerdate' for a version that works with lightweight tags too.  It just looks slightly uglier<nobr> <wbr></nobr>:-)</p>





</blockquote>


<h2>Re: Revert a repo to a few hours earlier</h2>
<h3><a href="/user/melo/">melo</a> on 2008-09-05T15:37:39</h3>
<p>You should look at git bisect<nobr> <wbr></nobr>:)</p>



<h2>tab completion of that alias</h2>
<h3><a href="/user/mugwumpjism/">mugwumpjism</a> on 2008-09-05T21:29:26</h3>
<p>Did you notice that the bash/zsh tab-completion will also tab complete that alias command you defined?

</p><p>Also, be warned that when you clone, it doesn't clone absolutely everything unless you use --mirror - by default it will just clone "heads" and "tags"</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

