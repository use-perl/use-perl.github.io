<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of domm: CPANTS news</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>CPANTS news</h1>
<h2><a href="/user/domm/">domm</a> on 2004-10-08T19:26:14</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I just released a new version of Module::CPANTS::Generator. Should be on your favourite CPAN mirror soon.
<p>
It contains the following new metrics:
<ul>
<li>proper_libs - is there only one .pm file in the top dir or one or more in libs
<li>use_stric - do all modules in dist use strict
<li>use warnings - do all modules in dist use warnings
</ul>
The last two are generated by parsing the source code with a Parse::RecDescent based parser (<a href="http://search.cpan.org/user/domm/Module-ExtractUse-0.15/">Module::ExtractUse</a>). This might be buggy, so please inform me if something got parsed wrong.
<p>
There's also quite a bit of new metadata, mainly a list of all modules actually used by a dist (again gathered by parsing). This information isn't used currently, but I plan to compare this list with what's specified in PREREQ_PM (minus Module::CoreList, of course).
<p>
Some data (total Kwalitee available is 14) (SQLite db is available here: <URL:http://cpants.dev.zsi.at>):
<pre>
sqlite> select kwalitee,count(kwalitee) as cnt from kwalitee group by kwalitee order by kwalitee;
kwalitee    cnt       
----------  ----------
0           30        
2           3         
3           11        
4           57        
5           35        
6           34        
7           95        
8           276       
9           670       
10          1609      
11          2567      
12          1780      
13          747       
14          21        

+++++++++++++++++++++++++++

sqlite> select avg(kwalitee) from kwalitee;
avg(kwalitee)       
--------------------
10.7424070573409    

+++++++++++++++++++++++++++

sqlite> select cpanid,name,average_kwalitee from authors where distcount>5 order by average_kwalitee desc limit 20;
cpanid      name                       average_kwalitee
----------  -------------------------  ----------------
BPOSTLE     Bruno Postle               13              
STEPHANB    Stephan Buys               13              
JCDUQUE     Julius C. Duque            12.9411764705882
AMBS        Alberto Manuel Brandao Si  12.9            
IAN         Ian Langworth              12.7857142857143
BARBIE      Barbie                     12.75           
FABPOT      Fabien Potencier           12.7272727272727
RMCFARLA    Ross McFarland             12.7142857142857
BMORROW     Ben Morrow                 12.7142857142857
RSAVAGE     Ron Savage                 12.68           
RJBS        Ricardo SIGNES             12.5769230769231
SSCOTTO     Salvatore E. ScottoDiLuzi  12.5714285714286
COG         Jose' Alves de Castro      12.4615384615385
DAVECROSS   Dave Cross                 12.4375         
JOUKE       Jouke Visser               12.4285714285714
NKH         Nadim Ibn Hamouda El Khem  12.4285714285714
JFITZ       James FitzGibbon           12.4            
TSCH        Torsten Schoenfeld         12.3333333333333
CLOTHO      Clotho Advanced Media      12.3333333333333
FLORIAN     Florian Helmberger         12.3333333333333

+++++++++++++++++++++++++++

sqlite> select module,count(module) as cnt from uses group by module order by cnt desc limit 20; 
module                cnt                      
--------------------  -------------------------
strict                7026                     
vars                  4542                     
Carp                  3226                     
Exporter              3052                     
warnings              2255                     
DynaLoader            751                      
constant              747                      
5.006                 731                      
Data::Dumper          631                      
AutoLoader            503                      
POSIX                 381                      
File::Spec            341                      
IO::File              337                      
File::Basename        336                      
5.004                 321                      
DBI                   309                      
Fcntl                 294                      
5.005                 284                      
Apache::Constants     274                      
Cwd                   269 

</pre>

Next steps:
<ul>
<li>Set up a <b>proper</b> cronjob (sorry Jos, you're butt-kick on #perl wasn't hard enough :-)
<li>Set up something to automatically generate nice reports
<li>add more metrics
</ul></p>


<hr/>



<h2>use warnings;</h2>
<h3><a href="/user/nicholas/">nicholas</a> on 2004-10-08T21:15:26</h3>
<p> <i>use warnings</i> as a metric is unfair if a module expects to work with 5.005 or earlier. Likewise, having <i>use warnings</i> without a <code>require 5.006</code> (or later) in Makefile.PL is probably a sign of poor kwalitee.</p>



<blockquote>

<h2>Re:use warnings;</h2>
<h3><a href="/user/domm/">domm</a> on 2004-10-10T19:18:50</h3>
Hmm, you're right.<br> <br>So I guess I'll drop <i>use warnings</i> as a metric, and maybe add a combined <i>use warnings &amp;&amp; require 5.006</i> check.



<blockquote>

<h2>Re:use warnings;</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2004-10-10T22:37:24</h3>
This might be too much to do for every package, but I think checking for emitted warnings during tests might be a good metric.  It's not perfect either, though.<br/><br/>Still, good work<nobr> <wbr></nobr>:)





</blockquote>

</blockquote>


<h2>Some oddities</h2>
<h3><a href="/user/brian_d_foy/">brian_d_foy</a> on 2004-10-08T22:14:47</h3>
It seems the "use strict" test doesn't work out right for Business::ISMN.<br> <br>I'm curious how your system decides which modules to include: several of mine are missing, such as Chemistry::Elements, Apache::Htaccess, and Data::Constraint.<br> <br>The "use warning" metric is a bit unfair.  Not only does it not work with perl versions prior to 5.6, but some people don't want warnings on in production code lest a perl upgrade start dumping new warnings into logs files.  Before disks got to be as big as they are today, one such instance filled up a disk overnight and crashed the server.



<blockquote>

<h2>Re:Some oddities</h2>
<h3><a href="/user/domm/">domm</a> on 2004-10-10T19:29:07</h3>
<p> <i>It seems the "use strict" test doesn't work out right for Business::ISMN.</i>
</p>
<p>You're right. Business::ISMN contains two module files, but defines three namespaces, all of which <i>use strict</i>. The bug in CPANTS is that it expects the number of <i>use strict</i>s to be the same as the number of module files. Which is obviously wrong. I changed '==' to '
</p><p> <i>I'm curious how your system decides which modules to include: several of mine are missing, such as Chemistry::Elements, Apache::Htaccess, and Data::Constraint.</i>
</p>
<p>Hmm, strange. I'm using CPANPLUS to fetch all dists from CPAN (or so I thought). I'll take a closer look ASAP.
</p>
<p>See my reply to Nicholas on <i>use warnings</i>
</p>





</blockquote>


<h2>Another possible metric?</h2>
<h3><a href="/user/runrig/">runrig</a> on 2004-10-12T00:42:20</h3>
I'm not sure exactly how to include it, but I think the <a href="http://cpanratings.perl.org/" title="perl.org">CPAN ratings</a perl.org> ought to be some sort of kwalitee indicator<nobr> <wbr></nobr>:-)





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

