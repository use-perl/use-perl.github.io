<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of davorg: When Drop-In Replacements Aren't</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>When Drop-In Replacements Aren't</h1>
<h2><a href="/user/davorg/">davorg</a> on 2002-10-03T14:07:46</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The <a href="http://nms-cgi.sourceforge.net/">nms</a> scripts are advertised as being "drop-in replacements" for <a href="http://www.scriptarchive.com/">Matt's scripts</a>. This is largely true, but there are a couple of caveats.</p>
<ol>
<li>They are drop-in replacements for Matt's version 1.9. Anything earlier than that is just beyond help.</li>
<li>We have an <tt>$emulate_matts_code</tt> flag. If it's unset then the scripts more secure, but the the "drop-in replacability" drops.</li>
</ol>

<p>It's the first of these that is causing us some problems recently. The nms project seems to be becomimg pretty well-known around the web. A lot of ISPs have seen Matt's formmail being used as a spam relay and have changed to our version.</p>

<p>But in many cases the version of Matt's script that they were using was 1.6. This version is infamous for having absolutely no protection against being used as a spam relay. You just set the script up on your server and <i>anyone</i> could use it. So that's what a lot of ISPs seem to have done. They've set up the script on one central server and tell all of their clients to configure their HTML form to use that script.</p>
<p>Now they've installed the nms version of formmail. They haven't read much of the documentation (because, hey, it's a drop-in replacement!) so they don't know that you now have to give it a list of domains that are allowed to use the script. This means that none of their clients' domains are permitted to access the script and anyone who tries to use a form on a client's site gets an error message. And the default error message has a link to nms in it - so the client's client thinks it's all our fault so we get another email to the support mailing list.</p>

<p>There should be some sort of intelligence test for running an ISP.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

