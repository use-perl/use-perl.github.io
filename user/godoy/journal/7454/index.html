<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of godoy: suidperl problems</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>suidperl problems</h1>
<h2><a href="/user/godoy/">godoy</a> on 2002-08-31T23:35:00</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I'm trying to run a SUID (owner is root) perl script without success for the last 30 minutes. <br/><br/>I've already done this before and I've already fixed prior packages errors with regards to sperl/suidperl permissions. Now, I'm not being able to find what the problem is. <br/><br/>I have this:
<code>
[godoy@wintermute ~/desenvolvimento/perl]$ l suid-script 
-rwsrwsr-x    1 root     root         4549 Ago 31 19:51 suid-script
[godoy@wintermute ~/desenvolvimento/perl]$ l /usr/bin/suidperl /usr/bin/sperl
-rws--s--x    1 root     root       715888 Ago 31 19:53 /usr/bin/sperl
-rws--s--x    1 root     root       715888 Ago 31 20:29 /usr/bin/suidperl
[godoy@wintermute ~/desenvolvimento/perl]$ 
</code><br/><br/>and Perl only says this:<br/><br/><code>
[godoy@wintermute ~/desenvolvimento/perl]$ sperl -wT suid-script             
Can't do setuid
[godoy@wintermute ~/desenvolvimento/perl]$ perl -wT suid-script 
Can't do setuid
[godoy@wintermute ~/desenvolvimento/perl]$ 
</code><br/><br/>I don't know where else should I look. Maybe I'll write some C wrapper just to have this SUID thing sorted out once and for all... <br/><br/>If you have any hint, I'd like hearing it. I'm not as good in C as in Perl. <br/><br/>
Oh, I was forgetting it... Perl is 5.6.1. <br/><br/></p>


<hr/>



<h2>did you check...</h2>
<h3><a href="/user/hfb/">hfb</a> on 2002-09-01T01:40:18</h3>
<p>...if the filesystem this program resides on or acts upon is NFS mounted did you check to make sure there is no 'nosuid' bit set on the mount. Also, you can run trace/truss/strace/etc on your unix variant to see what it's doing at the time of failure. That message is less esoteric and opaque than the usual perl error messages so I'm guessing that it's something at the system level rather than perl.</p>



<blockquote>

<h2>Re:did you check...</h2>
<h3><a href="/user/godoy/">godoy</a> on 2002-09-01T02:05:56</h3>
It can run SUID scripts. It's a local filesystem. <br> <br>I'm trying to find out what's happening (with the help of people on #perl). I've putten a copy of the full strace output <a href="http://godoy.homeip.net:81/suid.strace" title="homeip.net">here</a homeip.net>.<br> <br>



<blockquote>

<h2>Recompiling perl.</h2>
<h3><a href="/user/godoy/">godoy</a> on 2002-09-01T02:34:34</h3>
After a few tests with C programs and SUID bits, we think there are problems with this suidperl. I'll rebuild it. <br> <br>Tomorrow, when I see the compilation results, I'll tell you what happened.<br> <br>Thanks for your help.<br> <br>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

