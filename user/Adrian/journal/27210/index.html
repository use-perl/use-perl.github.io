<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Adrian: Dependency Injection rocks!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Dependency Injection rocks!</h1>
<h2><a href="/user/Adrian/">Adrian</a> on 2005-10-17T10:59:53</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Since there aren't comments on his blog I'm gonna take a mild poke at Artistotle's recent <a href="http://plasmasturm.org/log/338/">Dependency Injection</a> post here :-)</p>

<p>He asks, in relation to Fowler's <a href="http://martinfowler.com/articles/injection.html">DI article</a>:</p>

<blockquote><em>Why do the design patterns people come up with such ridiculously elaborate conceptualisations of perfectly trivial ideas? </em></blockquote>

<p>First off, I'd disagree that these ideas are trivial. If it's trivial why do I see so much code with tightly coupled external dependencies? Why am I so often faced with applications where I have to mock up half the fardling world before I can test a single module?</p>

<p>The DI pattern might not be difficult to understand or apply - but the problems it can help solve are not trivial.</p>

<p>Now, I do agree that Fowler's exposition isn't an example of his best writing. It's a bit of a mish-mash article which is trying to cover at least four different things (what DI is, why it's useful to separate it from inversion of control, why it can be better than things like service locators, how this relates to the J2EE complexity backlash, etc.)</p>

<p>However it did do one hugely useful thing. It named Dependency Injection and separated it out from the more general Inversion Of Control.</p>

<blockquote><em>I read and reread the definition, examined the flimsy code snippets carefully, stared at the nearly tautologic diagrams for roughly 10 minutes, trying to grasp the deeply profound idea but failing. It finally dawned on me, after investing much effort, that it was right there Ã¢â¬â only banal enough that it was obscured by the heaps of pontification. It turns out the concept is so trite I've used it more times than I can remember, without ever having thought of it as any kind of dinstinct idea.</em></blockquote>

<p>That last sentence is a doosy.</p>

<p>The whole <em>point</em> of patterns is to describe and name common design strategies - and thank god for that.</p>

<p>If you don't have DI in your head as a distinct concept - something you can name and describe - then it becomes really hard to communicate that idea. Judging from the code I regularly encounter it's an idea that could do with a bit more communication :-)</p>

<p>Now Fowler has done the work of naming DI and separating it out from the more general inversion of control pattern I've been given the gift of a beautiful new communication tool.</p>

<p>My coding partner can say things to me like "Hmm... the fact that this code is pulling all it's configuration information out of these singletons is making testing a pain in the arse, maybe refactor it so it uses dependency injection?"</p>

<p>Think about how much information is in that question. Try communicating that intent without naming the design patterns "singleton" and "dependency injection" and see how long it takes.</p>

<p>I do think that part of the reason the descriptions of DI seem so clumsy to us Perl folk, is that it's a harder concept to put into code with languages like Java.</p>

<p>DI is pretty darn easy in dynamic languages like Perl, Ruby and Lisp. We can also do really neat things at runtime that mean we can solve the problems that DI solves with considerably less effort than Java folk. </p>

<p>Jim Weirich's nice OSCON presentation <a href="http://conferences.oreillynet.com/cs/os2005/view/e_sess/6473">Dependency Injection: Vitally Important or Completely Irrelevant?</a> does a nice job of highlighting this (and does a better job of describing DI too.)</p>
</p>


<hr/>



<h2>Re:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2005-10-18T01:50:06</h3>
<p>Hey, thanks for the feedback.<nobr> <wbr></nobr><tt>:-)</tt> </p>

<p>Yeah, Kragen Sitaker argued the same when I mentioned my article on IRC. To that I argue that the value of the Dependency Injection moniker is not in itself, so much as it is in naming the concept of a Dependency. If you recognise dependencies as such, then injecting them just falls out naturally from good OO design sense &#8211; that&#8217;s what I am saying in that article.</p>

<p>Don&#8217;t miss <a href="http://plasmasturm.org/log/340/" title="plasmasturm.org">my follow-up</a plasmasturm.org> either on <a href="http://www.netalive.org/swsu/archives/2005/10/in_defense_of_the_nearly_tautologic_diagram_1.html" title="netalive.org">Henning Koch&#8217;s response</a netalive.org> either, it picks up on some of your argument.</p>

<p>It&#8217;s interesting that you&#8217;d say DI is easy in Perl and other dynamic languages: I said the same in the comments on Henning Koch&#8217;s article&#8230;</p>



<blockquote>

<h2>Re: Dependency Injection Rocks</h2>
<h3><a href="/user/Adrian/">Adrian</a> on 2005-10-30T10:36:06</h3>
<blockquote> <div><em>Hey, thanks for the feedback.<nobr> <wbr></nobr>:-)</em></div> </blockquote>

<p>You're welcome<nobr> <wbr></nobr>:-)</p>

<blockquote> <div><em>To that I argue that the value of the Dependency Injection moniker is not in itself, so much as it is in naming the concept of a Dependency. If you recognise dependencies as such, then injecting them just falls out naturally from good OO design sense &#8211; that&#8217;s what I am saying in that article.</em></div> </blockquote>

<p>I'd disagree with the "falls out naturally" bit. Well... kind of anyway.</p>

<p>You're right that dependency injection techniques are a specific instance of the more general technique of removing hard coded dependencies. However I don't think that for many people the specific techniques of dependency injection are necessarily particularly <em>obvious</em>.</p>

<p>To put it another way. The naming and description of Dependency Injection  is a really good pedagogical tool for highlighting certain kinds of dependencies, and demonstrating a variety of ways of removing them.</p>

<p>Indeed all design patterns are like this. The definition of design pattern could almost be something that "falls out naturally from good OO design sense"<nobr> <wbr></nobr>:-)</p>

<p>In my experience people learn best from examples - and that's what design patterns are. Little nuggets of easily digestible good design.</p>

<p>There's also the rise of the dependency injection frameworks. I'm uncertain that this would have happened without the naming of Dependency Injection.</p>

<p>I know that since I started reading about IoC/DI I started noticing where I've been doing dependency injection in my own code. The thing that I hadn't noticed, until clever sods like Fowler went and named it, is that I'd been doing the <em>same thing</em> in a variety of different ways.</p>

<p>Now that I've noticed that I can start thinking about better ways of abstracting out the DI stuff from the rest of the code, which is going to make the main flow of control easier to grok.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

