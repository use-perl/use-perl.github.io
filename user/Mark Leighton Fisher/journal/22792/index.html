<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Mark Leighton Fisher: Test::MockDBI v0.50</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Test::MockDBI v0.50</h1>
<h2><a href="/user/Mark Leighton Fisher/">Mark Leighton Fisher</a> on 2005-01-19T16:47:10</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Test::MockDBI v0.50 is wending its way through CPAN, even as I write this.  Test::MockDBI uses Test::MockObject::Extends to mock up the whole DBI interface for testing.  Rules for DBI behavior are set up, then the standard output of the containing program can be examined for matching patterns.</p>
<p>Mocking up the whole DBI interface is useful for us consultants, as the Test::MockDBI code can be added to an existing program without that program's knowledge, allowing you to test the program's use of DBI without modifying the base code of the program -- or for that matter, hitting an actual database at all (unless you want to).</p>
<p>The rules can be sensitive to what SQL is currently being processed, as well as depending on a numeric DBI testing type.  Wildcarding is allowed, so if you have some DBI processing that is done by all programs, you can set up that processing without it interfering with testing your specific program's DBI usage.</p>
<p>Test::MockDBI is an improvement over DBD::Mock or DBI::trace(), as you can modify the mocked-up DBI's behavior to force conditions to occur that might be difficult or impossible to otherwise force to occur.</p>
<p>Test::MockDBI v0.50 is marked as alpha code, because although what I have written and tested is beta or production-quality code, not all of the DBI is mocked-up yet.  If anyone has a good idea on how DBI::quote() should work in Test::MockDBI, I would love to hear from you.</p></p>


<hr/>



<h2>Whats so wrong with DBD::Mock</h2>
<h3><a href="/user/stvn/">stvn</a> on 2005-01-19T19:04:51</h3>
<p>
What exactly would you like to see DBD::Mock do that it doesn't? I am happy to take suggestions and/or patches.
</p>
- stvn



<h2>DBD::Mock and Test::MockDBI</h2>
<h3><a href="/user/Mark Leighton Fisher/">Mark Leighton Fisher</a> on 2005-01-19T19:26:57</h3>
<p>First off, I view DBD::Mock, Test::MockDBI, and DBI::trace() as complementary, as they each take a somewhat different tack to the same problem.</p>
<p>Although I finally realize that you can use DBD::Mock for similar purposes as Test::MockDBI, the current documentation (at least) is geared more towards using DBD::Mock as a tracing tool.  My docs for Test::MockDBI explicitly stress changing the DBI behavior.</p>
<p>Plus, DBD::Mock is good for situations where you use configurable data sources, while Test::MockDBI is good when you need to insert DBI debugging code without changing the base code of a program (something I've had to do a lot lately as a consultant).</p>
<p>My suggestion for DBD::Mock is to stress changing the DBI behavior in the documentation, so as to tease out those edge cases and difficult/impossible to otherwise generate failures.  Meanwhile, I will look again at DBD::Mock for what I can learn from it.</p>
<p>Thanks for your comments!</p>



<blockquote>

<h2>Re:DBD::Mock and Test::MockDBI</h2>
<h3><a href="/user/stvn/">stvn</a> on 2005-01-19T19:38:40</h3>
<p>
I too see them as complementary (at least as much as I can glean of what Test::MockDBI does). I would actually be <i>very</i> interested in seeing more information on Test::MockDBI if you care to provide it<nobr> <wbr></nobr>:)
</p>
<p>
I am actually planning a re-write parts of the DBD::Mock docs when I have some time to better show some of it's newer features. I will take your suggestions, and also try to stress it's role in testing more as well.
</p>
<p>
You are correct that DBD::Mock cannot really insert debugging code, and it only allows some changes in the DBI behavior (it can support more, I just haven't found a need yet). In the end, DBD::Mock will always be limited in what it can do because it is a DBD. Whereas Test::MockDBI will not have such limits.
</p>
-stvn





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

