<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Mark Leighton Fisher: Code Contracts for .NET</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Code Contracts for .NET</h1>
<h2><a href="/user/Mark Leighton Fisher/">Mark Leighton Fisher</a> on 2009-03-20T20:36:11</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p><a href="http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx">Code Contracts for .NET</a>
"provide a language-agnostic way to express coding assumptions in .NET programs" (from their website). This lets .NET programmers -- whether C#, VB.NET, Iron Python, or whatever -- verify coding assumptions both statically and dynamically. (This is similar to 
<a href="http://www.eiffel.com/developers/design_by_contract.html">Design by Contract</a>
 in Eiffel.)</p>

<p>Code Contracts includes a static checker program for verifying both explicit and implicit (null references, array bounds, etc.) code contracts. Runtime (dynamic) contract checking can use marked series of If-Then-Throw guard clauses as in:</p>
<pre>
 
if ( x == null )
    throw new ArgumentNullException("x");
if ( y < 0 )
    throw new ArgumentOutOfRangeException(...);
Contract.EndContractBlock();
 
</pre>
<p>(so you don't waste perfectly good guard clauses) as well as the standard, explicit code contracts like:</p>
<pre>
 
    Contract.Invariant(this .y >= 0);
    Contract.Assert(this .x == 3,
     "Why isn't the value of x 3?");
    Contract.Requires(x ! = null,
     "DANGER -- missles fired!");
 
</pre>

<p>Code Contracts defaults at runtime to throwing an exception (<b>System.Diagnostics.Contracts.ContractException</b>) when a contract is violated (this behavior is configurable).</p>

<p>I have not tried Code Contracts (or any code contract mechanism) yet, but the idea is intriguing because it lets the computer do something it does well (exhaustive examination of your code in tedious detail) thereby freeing you to work on the higher-level aspects of your program, just as C freed us from assembly language bookkeeping and Perl/Java/VB.NET etc. free us from C language bookkeeping.</p>

<p>If anyone has experience with code contracts for any language (positive or negative), please comment.</p>
<p><i>(Ob. Perl ref. -- see <a href="http://search.cpan.org/dist/Moose/">Moose</a> and <a href="http://search.cpan.org/dist/Class-Contract/">Class::Contract</a> among others...</i></p>
</p>


<hr/>



<h2>But what's the overhead?</h2>
<h3><a href="/user/Ron Savage/">Ron Savage</a> on 2009-03-21T04:21:19</h3>
<p>Hi Mark</p><p>I can understand the theoretical arguments for all these asserts, but I can't actually envision writing such code in the real world.</p><p>And I don't think it's good enough to say people ought to - the simple fact is that, in general, they won't.</p><p>So, what are your thought on this<nobr> <wbr></nobr>:-)?</p>



<blockquote>

<h2>Re:But what's the overhead?</h2>
<h3><a href="/user/Mark Leighton Fisher/">Mark Leighton Fisher</a> on 2009-04-02T16:57:44</h3>
The ability to perform static analysis is what intrigued me about Code Contracts for<nobr> <wbr></nobr>.NET. Even in VB.NET (more strictly data-typed than Perl), I end up writing assertation-like code anyway for argument and return-value validation. It would be nice to leverage that validation code for some additional static analysis, without requiring strong data-typing everywhere all of the time.<br/><br/>If I was writing server code, I would probably also use some kind of runtime assertation mechanism, just because I like to have my servers run until someone trips over the power cord<nobr> <wbr></nobr>:).





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

