<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Matts: Hotmail Content-Type</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Hotmail Content-Type</h1>
<h2><a href="/user/Matts/">Matts</a> on 2003-03-05T09:18:43</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>In Hotmail you can create rich text emails by selecting a special editor. This works only on Windows, and uses an ActiveX control to do the editing. A few weeks ago, if you created a rich text email it would send out a multipart/alternate email with two parts - a text/plain part first, and a text/html part second. This is standard practice for email clients, and is recommended in the relevant RFCs.<br/><br/>A couple of weeks ago Hotmail changed their system to <em>only</em> send out text/html - no text/plain part and no multipart/alternate.<br/><br/>Now I can see <em>why</em> they did this - it saves them an awful lot of bandwidth to do it this way. And my problem with them doing this isn't that it goes against the RFC suggestions (it's not mandatory after all).<br/><br/>My problem with this is it lessens the capabilities of spam filters.<br/><br/>Prior to this change a good heuristic was checking if the content-type was <em>just</em> text/html. If that was the case (and in a lot of spam it is the case) then there was a pretty good chance it was spam.<br/><br/>But Hotmail represents an awfully large portion of the internet. With some 60+ million users. That means anyone filtering on the above heuristic and still wanting to get hotmail email either has to whitelist hotmail, or has to cut back that heuristic. Neither are great options.<br/><br/>It makes me wish with email you could do content negotiation like you can with HTTP:
<blockquote>
<em>Sender:</em>What formats can you accept and what encodings?
<em>Recipient:</em>I can accept text/plain, text/html or text/rtf, but my preferred format is multipart/alternate
<em>Recipient:</em>I can also accept deflate encoding
<em>Sender:</em>Cool! Here's the email in multipart/alternate, body is deflated.
</blockquote>
Experience on the web with AxKit tells me that deflating text is going to be better than removing the text/plain part anyway.<br/><br/>Ho hum.</p>


<hr/>



<h2>Content-type negotiation and SMTP</h2>
<h3><a href="/user/dlc/">dlc</a> on 2003-03-05T13:44:22</h3>
<blockquote><div>It makes me wish with email you could do content negotiation like you can with HTTP</div></blockquote>

<p>I have an on-going argument/discussion with a coworker about whether SMTP is broken or not; in general, I'm on the <em>not</em> side, though things like this sometimes make me want to rethink my position.</p>

<p>However, given the basic assumptions of SMTP (store and forward, recieving host might not always be connected to a network, etc), how could the interaction you describe possibly take place?  It can be done with HTTP because, in general, HTTP is a 2-point protocol (web proxies are specialized pseudo-points, since they perpetuate the illusion that there is only two points involved in the transaction), but SMTP is a fundamentally different protocol.</p>

<p>One possible solution to this problem would be to negotiate types beforehand, as (for example), an entry in a directory that a client would consult before contacting the mailhost, but this is effectively convention (many clients offer this already, and few people use it).</p><p>



<blockquote>

<h2>Re:Content-type negotiation and SMTP</h2>
<h3><a href="/user/Matts/">Matts</a> on 2003-03-05T13:54:15</h3>
<i>However, given the basic assumptions of SMTP (store and forward, recieving host might not always be connected to a network, etc), how could the interaction you describe possibly take place?</i> <br> <br>Well it couldn't work, as you say. But if it could, it *would* be a fundamentally different protocol anyway. And a fundamentally different SMTP-NG might take the view of HTTP - that if the remote end is down then its just down (so you store on the local machine, rather than at the ISP).<br> <br>I'm not suggesting it should happen (and I'm definitely not suggesting it will happen) though. There are serious and obvious problems with the above design.



<blockquote>

<h2>Re:Content-type negotiation and SMTP</h2>
<h3><a href="/user/ask/">ask</a> on 2003-03-08T20:28:17</h3>
IM2000!





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

