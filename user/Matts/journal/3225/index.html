<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Matts: Finished!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Finished!</h1>
<h2><a href="/user/Matts/">Matts</a> on 2002-03-01T17:21:55</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Whew, I'm SO glad that's over. The 16000 line program no longer has any globals (at least no non-constant globals). Now I can move functions into different files and as long as I export the right functions everywhere, it should all just work.<br/><br/>Well, I did all that while being sick, and it didn't really contribute to my recovery, so I'm going to take it easy for a little while now.</p>


<hr/>



<h2>Antiperl</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2002-03-01T17:40:51</h3>
<blockquote><div> <i>
The 16000 line program no longer has any globals (at least no non-constant globals).
</i> </div></blockquote>
I was just thinking about that particular antipattern today.  I'm dealing with code like this:
<blockquote><div>
<tt>
my $DB = 'db';<br>
my $PARAM = 'param';<br>
</tt><p><tt>
$obj-&gt;{$DB}-&gt;{$PARAM} = $FOO;<br>
</tt></p>
</div></blockquote>
Now, obviously that's bad style, but <b> <i>why</i> </b> is it bad style?  Then it struck me that it's a perversion of an old FORTRAN/C meme about peppering constant values around as bad style.  Sure, it helps to put PI into a [constant] variable so that you localize the changes in exactly one place.  Then, should your program ever be run in Indiana, it's much easier to reset the value of Pi to 3.<nobr> <wbr></nobr>:-)
<p>
But Perl is more smalltalkish in that respect, and it's more important to say what you really mean to say (when sending messages to objects, or indexing variables, or whatnot) rather than obscuring it through global variable references.  So, constants used as part of a published API are <b>good</b>.
</p><p>
The more appropriate way to factor out globals and constant strings is when they are expected to vary, as in constants that are <b> <i>not</i> </b> part of an API:
</p><blockquote><div> <tt>
my $input = "/opt/foo/bar/input.txt";<br>
my $output = "/opt/foo/baz/output.txt";<br>
</tt> </div></blockquote>
Obviously, that's missing a <tt>$root_path</tt> type variable to handle the case where the program is moved to a host that has<nobr> <wbr></nobr><tt>/opt/foo</tt> located elsewhere.
  Somehow, I don't recall that distinction being made to a novice audience.  Maybe it's time to start updating that meme....



<h2>Sounds like a little project I once worked on ...</h2>
<h3><a href="/user/pudge/">pudge</a> on 2002-03-01T17:42:13</h3>
... called Slash.<nobr> <wbr></nobr>:-)  It acutally wasn't as bad as its reputation.  There were just a few globals, and a bunch of undeclared variables, but only a handful of conflicts.  But there were a lot of lines of code to go through.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

