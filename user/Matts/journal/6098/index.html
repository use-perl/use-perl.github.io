<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Matts: IRC Bots</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>IRC Bots</h1>
<h2><a href="/user/Matts/">Matts</a> on 2002-07-01T16:56:26</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I've been working really hard on the POE tutorial lately for OSCon. It's a very long thing to write, since POE is quite in-depth. But it's going to be good.<br/><br/>One of the things that I've come across is that some of the components on CPAN for POE don't exactly work how I'd expect a POE component to work, or certainly not how I'd like them to work.<br/><br/>Take POE::Component::IRC as an example. In order to create a bot that joins a channel you need to do at least 5 things:
<ol>
<li>Create a PoCo::IRC instance
<li>Create a POE::Session instance, with an _start handler, and a bunch of events that correspond to PoCo::IRC event names
<li>register all your events with the PoCo::IRC instance
<li>in your _start handler, you tell the PoCo::IRC instance to connect to a server
<li>In the irc_001 event handler you join your channel
</ol>
That seems like an awful lot of work to me... And it doesn't stop there - you have to write your own reconnect code, your own ping code, and so on.<br/><br/>So I wrote a wrapper. It's basically a class that you have to subclass to create a bot. Then you create an instance of your class, passing in the server name, the nick, etc. Then all you have to do is define an irc_001 method in your subclass, and that gets called automatically when you are connected (so you can join channels, etc). The base class also takes care of reconnects and pings and stuff.<br/><br/>Anyway, I'm going to wait until Dennis (the author of PoCo::IRC) has a look at the docs so he can see if he thinks the interface is good, and then I'll upload it to CPAN.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

