<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of lilstevey: perl 6 - a &quot;re-dip&quot;</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>perl 6 - a &quot;re-dip&quot;</h1>
<h2><a href="/user/lilstevey/">lilstevey</a> on 2009-10-28T23:59:38</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
In response to my last Rakudu/Parrot post, daxim responded with a clear and concise answer, of which
I am very greatful.
</p>
<blockquote>
parrot_config is an executable, installed by default in $PREFIX/bin/parrot_config. Run parrot_config --dump to see interesting stuff.
</blockquote>
<p>
I'm now watching Britains Best Dish - a fascinating show in which predominantly amateur cooks
cook a single dish - either a starter, main or a dessert. This week is the finals, and today
6 or 7 main courses get whittled down to the final two. Its very british - game dishes and
pies.
</p>
<p>
Anyway, I digress.
</p>
<p>
I now run:
</p>
<p><tt>
perl Configure.pl --parrot_config=c:\Parrot-1.7.0\bin\parrot_config.exe
</tt></p>
<p>
and 
</p>
<p>
<tt>
mingw32-make
</tt>
</p>
<p>
and again have the previous error:
</p>
<p>
<tt>
In file included from perl6_group.c:17:<br/>
/Parrot-1.7.0/include/parrot/parrot/parrot.h:235:23: libintl.h: No such file or directory<br/>
mingw32-make: *** [src\pmc\perl6_group.dll] Error 1<br/>
</tt>
</p>
<p>
That appears to be "libintl.h." perhaps it's related to the dependency on the ICU library mentioned at: http://rakudo.org/how-to-get-rakudo
</p>
<p>
Breaking now for the pub quiz.
</p>
<p>
Ok. back from pub quiz. 
</p>
<p>
<dl>
<dt>I have:</dt>
<dd>A win32 platform</dd>
<dd>Downloaded Parrot win32 installer</dd>
<dd>Downloaded Rakudo</dd>
</dl>
<p>
I attempted to install them by downloading the parrot win32 installer, and downloading the rakudo tar.gz installer. Then I got a little lost.
</p>
<p>
I believe I messed it up by not concentrating on the task in hand, and instead doing it in the background whilst watching a rather excellent film ( the Last King of Scotland ) for the first time.
</p>
<p>
So I think I have missed a dependency - the <a href="http://site.icu-project.org/">ICU library.</a>
</p>
<p>
I visit the site and try ICU4C, downloading "Windows (win32 x86 32-bit) Visual Studio 9".
</p>
<p>
After a snooze and day at work I have another bash.
</p>
Rakudo docs at <url>http://github.com/rakudo/rakudo/blob/master/README</url> suggest:
<blockquote>
<p>
In order to fully support Unicode, you'll also want to have the
</p>
<p>
ICU library installed (L&lt;http://site.icu-project.org/&gt;).
Rakudo can run without ICU, but some Unicode-related features
may not work properly.
</p>
</blockquote>
<p>
which seems odd if the lack of ICU is causing the problem, and maybe I'm reading the following wrong, but to me the <url>http://rakudo.org/how-to-get-rakudo</url> site seems to be contradictory:
<blockquote>
Building Rakudo from the sources requires Perl 5.8 or newer, a C compiler, a make utility, subversion, and the ICU library.
</blockquote>
</p>
<p>
Turning to google again, this page turns up: <url>http://cpansearch.perl.org/src/ARANDAL/parrot-1.0.0/README_win32.pod</url>
with some nice instructions on installing ICU - I install it and add it to path as it suggests. I download parrot 1.6 from parrot.org
</p>
<tt>\parrot-1.6.0&gt;mingw32-make</tt><br/>
<tt>"Compiling with:"</tt><br/>
<tt>xx.c</tt><br/>
<tt>Can't spawn "cmd.exe": No such file or directory at tools\dev\cc_flags.pl line 152, &lt;$F&gt; line 37.</tt><br/>
<tt>mingw32-make: *** [flags_dummy] Error 255</tt><br/>
</p>
<p>
The "Current developer release" on the parrot download page seems to point to 1.60, so I download 1.7 instead. I'll have a play with that.
</p>
<p>
<tt>C:\install\parrot-1.7.0>mingw32-make</tt><br/>
<tt>"Compiling with:"</tt><br/>
<tt>xx.c</tt><br/>
<tt>Can't spawn "cmd.exe": No such file or directory at tools\dev\cc_flags.pl line 152, &lt;$F&gt; line 37.</tt><br/>
<tt>mingw32-make: *** [flags_dummy] Error 255</tt><br/>
</p>
<p>
So I try to run cmd - it fails - so lets try setting the appropriatte path and starting again:
</p>
<p>
<tt>set PATH=%PATH%;C:\WINDOWS\system32</tt>
</p>
<p>
Misconfigured system perhaps? Lets run configure again...
</p>
<p>
It was going so well...<br/>
<tt>Invoking Parrot to generate runtime\parrot\include\config.fpmc --cross your fing
ers</tt><br/>
<tt>.\miniparrot.exe config_lib.pasm &gt; runtime\parrot\include\config.fpmc</tt><br/>
<tt>mingw32-make: *** [runtime\parrot\include\config.fpmc] Error -1073741515</tt><br/>
</p>
<p>
with the popup:
<blockquote>
miniparrot.exe - Unable to Locate Component<br/>
This application has failed to start because icuuc42.dll was not found. Re-installing the application may fix this problem.
</blockquote>
</p>
<p>
Maybe I used the wrong arguments to configure - I'll try again
</p>
<tt>
perl Configure.pl --icushared="C:\usr\lib\icu\lib\icudt.lib C:\usr\lib\icu\lib\icuuc.lib" --icuheaders="C:\usr\lib\icu\include"
</tt>
<p>
Did I say I was watching Heston at the moment? He's back at Little Chef. This may be slightly lost to readers out of the UK. Right. Advert break. Time to grab some stilton and biscuits. 
</p>
<p>
hmm. nice stilton. Goes suprisingly well with this glass of white. Anyway - back to it. that resulted in the same error. I'll do a sanity check on the arguments. Look ok, now I noticed I had installed ICU4C - i'll try the "ICU 4.2" download instead.
Ahh. notice I am trying to use 4.2.1 rather than 4.2 - I'll try installing that instead. damn. I've run out of stilton.
</p>
<p>
Ahhhh! Me being an eeedjit! Configured the environmental variables after opening the window - re added set <tt>C:\usr\lib\icu\bin</tt>
 to <tt>%PATH%</tt> and bingo!
</p>
<p>
And lets see...<br/>


<tt>C:\install\rakudo-2009-10>perl Configure.pl --parrot-config=c:\Parrot\bin\parrot
_config.exe</tt><br/>
<tt></tt><br/>
<tt>Reading configuration information from c:\Parrot\bin\parrot_config.exe ...</tt><br/>
<tt>Verifying Parrot installation...</tt><br/>
<tt></tt><br/>
<tt>===SORRY!===</tt><br/>
<tt>I'm missing some needed files from the Parrot installation:</tt><br/>
<tt>    C:/Parrot/lib/parrot/1.7.0/languages/nqp/nqp.pbc</tt><br/>
<tt>    C:/Parrot/lib/parrot/1.7.0/tools/build/ops2c.pl</tt><br/>
<tt>    C:/Parrot/lib/parrot/1.7.0/tools/build/pmc2c.pl</tt><br/>
<tt>    C:/Parrot/src/parrot/1.7.0</tt><br/>
<tt>    C:/Parrot/src/parrot/1.7.0/pmc</tt><br/>
<tt>    C:/Parrot/include/parrot/1.7.0/pmc</tt><br/>
<tt>(Perhaps you need to use Parrot's "make install-dev" or</tt><br/>
<tt>install the "parrot-devel" package for your system?)</tt><br/>
</p>
<p>
DOH! very nice error message though. I'll try install-dev.
</p>
<p>
That slipped in, and Configure.PL ran ok in the rakudo dir.
</p>
<p>
make ( well the mingw variant ) worked.... now running $make test
</p>
<p>
<tt>All tests successful.</tt><br/>
<tt>Files=29, Tests=236, 146 wallclock secs ( 0.81 usr +  0.16 sys =  0.97 CPU)</tt><br/>
<tt>Result: PASS</tt><br/>
</p>
<p>
yay.
</p>
<p>
So it seems install. One thing left then. 
</p>
<p>
I create a file, greet.pl, with the following content:<br/>
<tt>say "Hello world";</tt><br/>
and lets try to run it ( making sure that perl6 is added to path this time ... ) and .....
</p>
<p>
Agggh! our friend the icuuc42.dll alert!. I hadn't added C:\usr\lib\icu\bin; to the global %PATH%! Easily fixed.
</p>
<p>
And, finally, largely due to my distracted state!:<br/>
<tt>C: ... \perl6>perl6 greet.pl</tt><br/>
<tt>Hello world</tt><br/>
yay!
</p>
<p>
Conclusions:
<ul>
<li>Focus on what you are doing - watching telly simultaneously isn't great</li>
<li>Follow the instructions in the parrot distro.</li>
<li>ICU seems important.</li>
<li>Be carefull about your environment variables.</li>

</ul>
</p></p>


<hr/>



<h2>libintl.h isn't from libicu</h2>
<h3><a href="/user/daxim/">daxim</a> on 2009-10-29T19:11:59</h3>
On Linux:<blockquote><div><p> <tt>&gt; rpm -ql libicu-devel | ack libintl.h<br>&gt; locate libintl.h | xargs rpm -qf<br>glibc-devel-2.9-2.12.1</tt></p></div> </blockquote><p>Interpretation: That header file does not belong to libicu, but to the C library instead. It feels strange to me that installing libicu fixed this dependency for you; can you explain that?</p>



<blockquote>

<h2>Re:libintl.h isn't from libicu</h2>
<h3><a href="/user/lilstevey/">lilstevey</a> on 2009-10-29T20:56:58</h3>
<p>
Thanks for the observation. The comment:
</p><blockquote><div><p>That appears to be "libintl.h." perhaps it's related to the dependency on the ICU library mentioned at: <a href="http://rakudo.org/how-to-get-rakudo" title="rakudo.org">http://rakudo.org/how-to-get-rakudo</a rakudo.org></p></div> </blockquote><p>
Was merely a wild stab in the dark, perhaps based on me assuming it might have something to do with unicode from a possible "intl" angle.
</p><p>
So - explain - no. A wild guess rather than a result of analysis, and not a particulary good one by the sounds of your studies. At some point after that, I gave up on the windows binary distribution of parrot, and switched to compiling the sources - also changing the location of them to ensure the directory containing the source didn't contain spaces. After that, most of the errors and mistakes were just down to my distracted state, and messing up environment variables - which could have had a contributory effect to the earlier problems.
</p><p>
Hope that explains things - I'm very sorry if you've wasted time as a result of my notes...
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

