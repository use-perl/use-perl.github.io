<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of malte: Joose now has method modifiers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Joose now has method modifiers</h1>
<h2><a href="/user/malte/">malte</a> on 2008-03-21T09:21:19</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>You can now use the following method modifiers in Joose:

<pre>
Class("S3", {
	isa: S2,
	override: {
		two: function () { 
			this.result2 += "3"
			this.SUPER();
		}
	},
	before: {
		add: function () { this.result += "5" }
	}
	after: {
		add: function () { this.result += "7" }
	},
	wrap: {
		add: function (original) { this.result += "8"; original(); this.result += "9" }
	}
})
</pre>

<p>By using the excplicit override modifier you get access to the overridden method using this.SUPER(). This is basically the same as the wrap modifier, but it keeps the methods signature intact (wrap passes the wrapped function as the first parameter).</p></p>


<hr/>



<h2>You++</h2>
<h3><a href="/user/Stevan/">Stevan</a> on 2008-03-21T15:34:44</h3>
<p>
Wow, very cool to see so much progress. I like very much where this is going. Couple of questions for you:
</p>
<ul>
<li>Why "wrap" and not "around"?</li>
<li>Can the before/after/wrap methods be stacked? Can you add more than one of them basically.</li>
<li>Would you consider moving Joose to the Moose code repository? I am sure we could get several of the #moose people to help write more tests and such.</li>
<li>And lastly,.. have you given any thought to how this could be intergrated with MooseX::Storage's JSON dumping? Like a JooseX::Storage JSON component of some kind?</li>
</ul>
<p>
- Stevan
</p>



<blockquote>

<h2>Re:You++</h2>
<h3><a href="/user/malte/">malte</a> on 2008-03-21T15:51:12</h3>
Thanks for the feedback<nobr> <wbr></nobr>:)<p><div class="quote"> Why "wrap" and not "around"?</div> Probably, because I looked at the prototype.js code too much<nobr> <wbr></nobr>:)<p><div class="quote">Can the before/after/wrap methods be stacked? Can you add more than one of them basically.</div> Yeah, they get inherited and you can add multiple wrappers for the same method in the same class.<p><div class="quote">Would you consider moving Joose to the Moose code repository? I am sure we could get several of the #moose people to help write more tests and such.</div> Sure, no problem.<p><div class="quote">And lastly,.. have you given any thought to how this could be intergrated with MooseX::Storage's JSON dumping? Like a JooseX::Storage JSON component of some kind?</div> I'll take a look at it.



<blockquote>

<h2>Re:You++</h2>
<h3><a href="/user/malte/">malte</a> on 2008-03-21T18:59:03</h3>
I refactored the Joose test suite, so that it is much more accessible. You can see the <a href="http://code.google.com/p/xssinterface/source/browse/trunk/projects/Joose/tests/10_method_wrappers.js" title="google.com">method wrapper tests here.</a google.com>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

