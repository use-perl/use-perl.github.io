<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of demerphq: Regex hacking</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Regex hacking</h1>
<h2><a href="/user/demerphq/">demerphq</a> on 2006-09-14T18:06:29</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
I recently left my job and have been decompressing from a long period of continuous employment by enjoying some time off with some nice weather, bike riding, late mornings, breakfast at the cafe and lots of hacking. 
</p>
<p>
I've managed to close off most of my regex engine todo list: ANYOF and jump tries, aho-corasick startclass matching, postitive-look(ahead|behind) optimisation (theres some rough edges to deal with on this one yet), charname support in the parser, and about 75% of what needs to happen to the debug output to make it "non-regex engine hacker" friendly.</p>
<p>
All this combined with my earlier efforts (single-char-ANYOF to EXACT, simple-TRIE's) mean that perl now comfortably outperforms python in the so-called <a href="http://utcc.utoronto.ca/user/cks/space/blog/python/MoreRegexpPerformance">
"rebench"</a> tests. (bleadperl average time per test: 28 usecs,  python average time per test: 297 usecs) The use of regex preprocessors to do "trie" like optimisation will no longer be necessary, and in fact will often slow things down, as it will result in duplicating things that are already happening internally.
</p>
<p>
I need to revisit perlreguts and update it with what Ive learned, and in some cases what has changed.
</p>
<p>
I need to update my journal more often. :-(
</p>
<p>
Things still to do: Clean up/reorganize re Debug stuff to be easier to use. Look into using reghop4() for things. Look into the MAGIC hack for making things pluggable. Look into migrating code in sv.c re_dup over to regcomp.c Maybe split regcomp into several pieces to make it smaller and easier to manage. 
</p>

</p>


<hr/>



<h2>perlguts</h2>
<h3><a href="/user/speters/">speters</a> on 2006-09-15T01:23:59</h3>
I've been meaning to add a review of perlguts to perltodo.pod.  There have been quite a few refactorings, new bits of API, and new macros meant to make life easier for Perl 5.10.  This is something actual that a lot of people need to look into and make suggestions on.



<blockquote>

<h2>Re:perlguts</h2>
<h3><a href="/user/demerphq/">demerphq</a> on 2006-09-15T10:32:41</h3>
If you do could you mention that perlreguts needs to be reviewed as well please?





</blockquote>


<h2>There must be some award...</h2>
<h3><a href="/user/Matts/">Matts</a> on 2006-09-15T08:01:29</h3>
There really must be some award for the incredible work you've done on the regexp engine. For a long time it was feared that the only person left who could hack on it was Ilya Zakharevich (well, that was my fear) and you've really taken up the banner and pushed perl's regexp implementation into fantastic new territories. I can't wait for perl 5.10 now!



<blockquote>

<h2>Re:There must be some award...</h2>
<h3><a href="/user/demerphq/">demerphq</a> on 2006-09-18T12:48:37</h3>
<p>
You know its comments like this one that really get me motivated. Often in the p5p circles its hard to tell how ones work is received. Everybody is so experienced (and in some ways jaded....) that they tend not to give to feedback like this. So hearing you say this really warms my heart. Thank you, and I'm pleased that you like it.
</p>



<blockquote>

<h2>Re:There must be some award...</h2>
<h3><a href="/user/jmason/">jmason</a> on 2006-11-14T16:43:52</h3>
I'm late to this journal comment -- but I agree with Matt.  This is really cool code, and I hope we can use it effectively in Spamassassin; I'm certainly trying<nobr> <wbr></nobr>;)



<h2>Re:There must be some award...</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2006-11-17T00:03:06</h3>
<p>I wonder if they're jealous of the time and energy you have to do such work.  I certainly am, but I look forward to using it.</p>





</blockquote>

</blockquote>


<h2>PCRE</h2>
<h3><a href="/user/Tony Finch/">Tony Finch</a> on 2006-11-17T20:28:47</h3>
That sounds pretty awesome. How doe PCRE compare?





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

