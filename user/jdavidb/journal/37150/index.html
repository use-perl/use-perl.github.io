<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jdavidb: How to determine file type from data stream</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>How to determine file type from data stream</h1>
<h2><a href="/user/jdavidb/">jdavidb</a> on 2008-08-11T13:46:36</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I'd like to use MIME::Lite to take arbitrary data as input and send an email with that data as an attachment.  I presume that to do this I need to get the MIME type correctly set.  So I'm looking for something that can examine that stream of arbitrary, presumably binary, data, and then spit out the MIME type, or else something that I can use to derive the MIME type.</p>

<p>Basically, I'm looking for the "file" command in Perl.  I was just remarking with a co-worker the other day how "file"'s database is an incredible resource and how that utility really does an amazing job figuring out what formats things are.  It takes a hard job that can never been done perfectly, and does it intelligently.  (Actually, that's my definition of artificial intelligence.  Maybe "file" is sentient.)</p>

<p>I thought of looking to see if Perl Power Tools has a file command, but ppt.perl.org seems to be unreachable from my position in time and space, and I'm not really sure I want to download the entire distribution and pore through it, especially since whatever I find probably won't be a library, anyway.  I did find a module called MIME::Types, updated as recently as May of this year, but it doesn't really do this job; it will give me a MIME type based on a file extension or based on a filename, which does me no good since STDIN doesn't come with a filename. :)  If I had a filename, I most likely wouldn't need the module I'm looking for.  The docs for MIME::Types mentions a File::TypeInfo module, but that doesn't seem to exist on CPAN at this point in time.</p>

<p>Even if I need to do this some other way, or don't need to do this at all to achieve my goal, I'm still curious if anything like this exists.</p></p>


<hr/>



<h2>CPAN to the rescue</h2>
<h3><a href="/user/acme/">acme</a> on 2008-08-11T13:59:24</h3>
<code>file</code> works via <a href="http://en.wikipedia.org/wiki/Magic_number_(programming)#Magic_numbers_in_files" title="wikipedia.org">magic numbers</a wikipedia.org>. Use <a href="http://search.cpan.org/dist/File-Type/" title="cpan.org">File::Type</a cpan.org> or <a href="http://search.cpan.org/dist/File-MMagic/" title="cpan.org">File::MMagic</a cpan.org>.



<blockquote>

<h2>Re:CPAN to the rescue</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2008-08-11T18:25:41</h3>
<p>Thank you!</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

