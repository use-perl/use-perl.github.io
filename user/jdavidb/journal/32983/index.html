<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jdavidb: GROUP BY</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>GROUP BY</h1>
<h2><a href="/user/jdavidb/">jdavidb</a> on 2007-04-13T15:09:50</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The GROUP BY clause of SQL queries is completely redundant.  All of the information in it can be derived from the rest of the query.  Redundancy in communication is a great thing for human communication, to prevent misunderstandings.  It allows for error correction.  But it's not a great thing when I'm hand-typing such a verbose language.</p>

<p>GROUP BY should be made optional.  In some cases it might allow the SQL parser to detect an error I've made in my query.  And in some cases it might be necessary (but so far I can't think of any).  I'd probably want to leave it in to programs that I am going to leave lying around.  But for queries I'm throwing into an interactive system, I don't want to deal with it.</p></p>


<hr/>



<h2>You assume...</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-04-14T01:54:08</h3>
Machine communication is not human communication.<br><br>SQL is not about reducing redundancy.<br><br>SQL is about offloading work related to data storage retrieval to a dedicated machine.<br><br>Should I have to implement my own grouping code in every single application?



<blockquote>

<h2>Re:You assume...</h2>
<h3><a href="/user/bart/">bart</a> on 2007-04-14T09:52:57</h3>
<p><div class="quote">Should I have to implement my own grouping code in every single application?</div> No, I think his basic idea is that the database should be able to deduce the <code>GROUP BY</code> clause from the rest of the statement. Now, a database complains if you output a column that isn't in an aggregate function, or in the GROUP BY clause. Instead, it could implicitly add the column to the GROUP BY clause.<br><br>I don't think that overall it would save much typing. And having to be explicit has its advantages, in cases the SQL statement implies a different grouping than what you had in mind.<br><br>





</blockquote>


<h2>Offered without further comment</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-04-14T11:08:52</h3>
<p><blockquote> <div><tt>SELECT foo, bar, SUM(quux) FROM qux GROUP BY foo, bar;<br> <br>SELECT foo, bar, SUM(quux) FROM qux GROUP BY bar, foo;<br> <br>SELECT foo, SUM(quux) FROM qux GROUP BY foo, bar;<br> <br>SELECT foo, SUM(quux) FROM qux GROUP BY bar;</tt></div> </blockquote>



<blockquote>

<h2>Re:Offered without further comment</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2007-04-16T14:47:24</h3>
<p>Maybe I need the comments to clue me in.  The last two won't work<nobr> <wbr></nobr>... is your point that in such an instance having the GROUP BY allows the programmer to figure out what the previous programmer meant and correct?  Because I thought I clearly limited myself to talking about interactive, one-shot queries.  This is like requiring strict for a perl-one liner.<nobr> <wbr></nobr>:)</p>

<p>As near as I can tell, there is no difference between the first two, although I'm willing to be enlightened.  I may just be sleepy on this early Monday morning.</p>



<blockquote>

<h2>Re:Offered without further comment</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-04-16T17:08:44</h3>
<p>Why won&#8217;t the last two work?</p>

<p>As for the first two, you&#8217;re right, there is no difference. Order matters when you use window functions, but not in ordinary grouping.</p>



<blockquote>

<h2>Re:Offered without further comment</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2007-04-17T15:17:54</h3>
<p>Never mind, they will.  It's just not something I do often.  And I think you've shown me why that clause can't be made optional.  Of course, I'd prefer that it be made optional and that expressing the fields to group by in the SELECT be made mandatory, but I guess that would probably bork a lot of people up.<nobr> <wbr></nobr>:)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

