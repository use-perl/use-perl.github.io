<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jdavidb: startx considered harmful</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>startx considered harmful</h1>
<h2><a href="/user/jdavidb/">jdavidb</a> on 2002-01-10T22:58:37</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>So everyone knows when you install most UNIX distros, you can choose to start up in graphical or text mode.  If you come in on text mode, you run <tt>startx</tt> to start the Xwindow system (possibly plus gnome, KDE, etc.).  I've always preferred just having the computer boot into graphical login mode.</p>

<p>For the record, these two modes are different runlevels.  Text login mode is 3 (I think) and graphical login mode is 5 (I think).  (Probably depends on your distro, though.  This is RedHat 7.x.)  So you can switch between them with the <tt>telinit</tt> command.</p>

<p>Now, I've been learning wonderful lessons from <a href="http://www.linuxfromscratch.org/">building my own Linux systems from scratch</a>.  This is a concept I'd sort of refer to as a "distributionless" Linux; you install a distro, download source packages, make a new, empty, pristine partition, and start compiling.  Or, if you're a real hacker, you get <a href="http://www.toms.net/rb/">Tom's root boot</a> on a floppy, boot, fdisk and mkfs your whole hard drive, download gcc, and compile like that.</p>

<p>So after you've done all this, you get to compile and install X yourself.  (Not to mention a desktop like Gnome or KDE.  If you want.)  In learning things (boy have I been learning), I learned that the X server starts up on the first available virtual console terminal.  I further learned that you could switch back to the text virtual terminals with control-alt-F\d .</p>

<p>So, after thinking about that for a few days, I suddenly had a brainstorm today.  I locked my X session (started with startx) and hit control-alt-F1.  Lo and behold, there was the virtual terminal from which I had run startx.  It was still running startx as me, too.  I could background it or kill it if I wanted.  I could get to a shell prompt and be me.  Or someone else could've walked over to my locked terminal, gotten to a shell prompt, and been me.  Ouch.</p>

<p>This is a new experience to me.  Until recently I've used the graphical login, so I've never had to use startx.  The guy next to me, though, prefers his system to boot in text mode.  So imagine his surprise when I walked over today, said, "Let me check something," punched control-alt-F1 on his system (safely locked and running a Matrix screensaver), backgrounded his startx, and started typing away!  All this time we thought everything was secure, anyone could've walked up and broken into who knows what.</p>

<p>After thinking about this, the best solution seems to be the graphical login runlevel.  But, for those who prefer startx, we got a workaround: <tt>$ startx & exit</tt>.  This will background the startx and immediately log out.  Just make sure you aren't logged in on any other terminals.</p>

<p>Sigh.  Maybe I'll go do a google search and see who else has had this problem.</p></p>


<hr/>



<h2>Heh...</h2>
<h3><a href="/user/djberg96/">djberg96</a> on 2002-02-13T19:54:53</h3>
I tried this on my neighbors computer - you're right!  Holy crap!
<p>
I couldn't seem to background his startx though - I mean I could see the terminal but it didn't seem to accept any signals (Ctrl-Z, etc).
</p><p>
Still, something worth knowing.<nobr> <wbr></nobr>:)</p>



<blockquote>

<h2>Re:Heh...</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2002-02-15T18:39:31</h3>
<p>Another fun thing for Mac users.  When I got my new iBook and put Debian on it, I tested and thought it was immune to this.  Then I discovered that in console mode, open-apple is the alt key, while in X mode, option (which has "alt" as an alternate label) is the alt key.</p>

<p>Yeah, this startx thing is quite a security hole, isn't it?  Except, truly, it's more of a feature than a bug.  (I find it useful on the laptop.)</p>

<p>I never would've found it if I hadn't been poring through X documentation.  (I compiled my own Linux (<a href="http://www.linuxfromscratch.org/" title="linuxfromscratch.org">LFS</a linuxfromscratch.org>) and then put X and Gnome on it myself the hard way.  Fun!)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

