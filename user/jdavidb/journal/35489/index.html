<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jdavidb: Java brain damage of the day: substr</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Java brain damage of the day: substr</h1>
<h2><a href="/user/jdavidb/">jdavidb</a> on 2008-01-25T20:12:05</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>In Java, if you want to write:</p>

<pre>substr($str, 0, $n)</pre>

<p>You have to write something like:</p>

<pre>str.substring(0, min(n, str.length - 1))</pre>

<p>Because if your second index is greater than the length of the string, Java throws an exception, rather than realizing you wanted everything that far, or to the end of the string if you can't go that far.</p>

<p><b>Update 2008-02-22T19:37Z:</b> This is apparently completely wrong.  I realized that the next day, when I saw how one of my coworkers solved the same problem I was working on, and substring seemed to work for him.  I have no idea why it didn't work for me.  But I saw this today and thought, "Ew, I'd hate for anyone to read this and think it were actually true."</p></p>


<hr/>



<h2>idiomatic?</h2>
<h3><a href="/user/slanning/">slanning</a> on 2008-01-27T04:38:40</h3>
I don't know much Java, but one of the criticisms of some Perl programmers is that they program Perl in C (i.e. using C idioms like <code>for(i=0;i&lt;N;i++)</code>). Is it possible that using <code>substring</code> like that in Java is just a bad "translation" from Perl to Java, and there is a more natural Java-esque way to do it (not necessarily including only that particular statement, but possibly also the larger problem you're working on; e.g. it might be more natural to use an input stream and read from it or whatever -- I dunno just wondering).



<blockquote>

<h2>Re:idiomatic?</h2>
<h3><a href="/user/davegaramond/">davegaramond</a> on 2008-02-16T01:30:46</h3>
<p>I think the moral of the story is that Java throws exception for the littlest things. If I try to open a file and it fails, an exception is a sensible thing, as the next lines in the code would expect the file handle to be there.</p>

<p>But if you take a substr($str, $offset, $len), do you expect to always get exactly $len characters worth of substring?</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

