<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jdavidb: timed reads from files</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>timed reads from files</h1>
<h2><a href="/user/jdavidb/">jdavidb</a> on 2002-05-06T20:11:04</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>This probably belongs on perlmonks or a newgroup, but this site is my primary interface into the Perl community.  I'm debating submitting this as an ask use Perl;.</p>

<p>I need to read from arbitrary filehandles with a timeout, i.e., timed_read($fh, 2) reads from the filehandle in $fh but if nothing is received in 2 seconds the call is interrupted and you return with an undef.  Now, you're thinking $SIG{ALRM}, but I can't do that.  I've already got alarms going for something else, and I might need resolution other than integral seconds.</p>

<p>Expect (the TCL version) comes with a timed-read command-line script that accomplishes this very nicely.  I won't have expect on the machine I'm using, though, and besides, I want to do this in pure Perl.  The way it's accomplished there is with the select() system call.  I'm working to do the same thing in Perl, and it seems to sort of work.</p>

<p>What's the right way to be doing this?  Is there a module for timed reads?  Is there a FAQ entry somewhere I've missed?  My version with select() doesn't work reliably at the moment, and I'm hoping to find someone else has already invented this wheel.</p></p>


<hr/>



<h2>Expect.pm</h2>
<h3><a href="/user/djberg96/">djberg96</a> on 2002-05-06T20:21:15</h3>
Isn't Roland Giersig's <i>Expect.pm</i> module pure-Perl?  I haven't looked at the internals too closely (though I did look once), so I'm not entirely sure.  If so, I think that's what you need.  The README file says he modeled it after Tcl Expect, and yes, you can set a timeout.
<p>
As for timed reads, is <i>Time::HiRes</i> what you're looking for?*
</p><p>
* both on CPAN</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

