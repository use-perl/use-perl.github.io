<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of cwest: Pragmatism</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Pragmatism</h1>
<h2><a href="/user/cwest/">cwest</a> on 2003-09-22T22:25:54</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>At work I was asked to write a Class::DBI interface to a database. I've already written one for the database used by my first project, and this new assignment would be rather boring if I had to do it again. I like Class::DBI, but setting it up is ugly grunt work. So I wrote a program to write my abstraction for me. It is currently MySQL specific (but that doesn't bother me right now, except that I'd like it to work with Postgres and SQLite).

It has some neat features. It builds a top level package that contains the entire abstraction for all of the tables in your database. Then it also builds packages for each of the classes (tables) so business logic (custom code) can be put there. That way, when the database changes the abstraction can be updated and the custom code can be left alone. The abstraction figures out what the primary key is, and tries several heuristics if a primary key isn't specified, to come up with a suitable key (or keys). It also tries to figure out has_a relationships between the tables using several heuristics. Any date related fields are setup with has_a relationships to Time::Piece. Documentation is also built detailing each column in each class, as well as usage instructions for the package (the entire abstraction) as a whole.

Perhaps I can clean this up and let other folks play with it. I'll have to see what the folks here at pair think of that, and I doubt it will be a problem.

Some interesting numbers; I wrote 365 lines of code in the program and a medium sized database generated 3550 lines of code, comments, and documentation for me. I can think of at least 35 databases I want to run the generator on. If I did, and I used my first database as an average, I'd get 124250 lines of code I never had to write. I like that. </p><p>Posted from <a href="http://caseywest.com">caseywest.com</a>, comment <a href="http://caseywest.com/journal/archives/000255.html">here</a>.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

