<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of BooK: Test::Database, for CPAN testers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Test::Database, for CPAN testers</h1>
<h2><a href="/user/BooK/">BooK</a> on 2009-09-29T12:04:29</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
Hopefully, a week after my <a href="/user/BooK/journal/39660">Test::Database,
for CPAN Authors</a>, some CPAN authors have started to use
<a href="http://search.cpan.org/dist/Test-Database/">Test::Database</a>. ;-)
</p><p>
<a href="http://search.cpan.org/dist/Test-Database/">Test::Database</a> 
is fine to test database independence on your local setup,
but to really leverage the power of CPAN Testers to fully test your
module over all types of setups, it needs to be installed
<i>and configured</i> on a sufficient number of tester hosts.
</p><p> 
During my <a href="http://www.yapceurope.org/2009/">YAPC Europe 2009</a>
<a href="http://yapceurope2009.org/ye2009/talk/1913">talk about Test::Database</a>, 
I invited several CPAN testers to attend. This is a chicken and egg
type situation: this is a useful module, but CPAN authors will use it if
they know it will be available on a reasinable number of testing hosts.
On the other hand, few CPAN tester will bother configuring it if
noone's using it anyway. 
</p><p> 
This post is basically a replay of my YAPC::Europe talk: last week I
invited CPAN authors to try out 
<a href="http://search.cpan.org/dist/Test-Database/">Test::Database</a>, 
and this week I invite CPAN testers to install <i>and configure</i>
<a href="http://search.cpan.org/dist/Test-Database/">Test::Database</a>
as part of the toolchain installed on their smokeboxes.
</p><p> 
And the documentation contains a
<a href="http://search.cpan.org/dist/Test-Database/lib/Test/Database/Tutorial.pod">nice tutorial</a>, 
so it shouldn't be too hard.
</p>
</p>


<hr/>



<h2>So what should be the order of precedence?</h2>
<h3><a href="/user/jjn1056/">jjn1056</a> on 2009-09-29T13:21:36</h3>
For example, in my Test::DBIx::Class module, which is a tool to ease DBIC testing, you can specify a target database type and if you leave the connect info blank, I will try to automatically deploy a database (either mysql or postgresql) to a temporary area.  If none of these are available, I fall back to SQLite.<br/><br/>So, ideally if you are testing, I should first look for this system, and if it's not setup, fall back to sqlite?<br/><br/>Seems like we have some overlapping concerns and might be valuable to collaborate a bit.  My stuff is at <a href="http://search.cpan.org/dist/Test-DBIx-Class/" title="cpan.org">http://search.cpan.org/dist/Test-DBIx-Class/</a cpan.org>
and I am currently working on supporting mysql replication.  Let me know what you think.  At the very least I think I want to use your framework to help with the 'default' mode.<br/><br/>john



<blockquote>

<h2>Re:So what should be the order of precedence?</h2>
<h3><a href="/user/BooK/">BooK</a> on 2009-10-06T14:51:18</h3>
<p> <small>(Sorry for the late answer...)</small> </p><p>I agree that we have overlapping concerns, and that I have probably overlooked some use cases (I was concerned with testing over as many database engines as possible).</p><p>Regarding defaults, Test::Database will automatically fallback on any file-based database that is available.</p><p>Test::Database is about letting the system owner do all the hard work of configuring databases for us, and just providing what's available. Test::Database only provides the DSN information, but filling the database is up to the test author (or, if I understood correctly, your module). On the other hand, it garantees you'll get the same DSN information between scripts in the same test suite (the mapping algorithm is based on the cwd).</p><p>We should probably continue by email, if you're interested.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

