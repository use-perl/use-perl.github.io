<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of BooK: Damn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Damn</h1>
<h2><a href="/user/BooK/">BooK</a> on 2005-03-03T10:35:36</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
One of my contracts involves writing Perl scripts that read
logs files and try to find out intersting data in them
(that's original, isn't it?), put some of the data in RRD
while also outputing some top 10 reports, etc.
</p><p>
After writing three times the same 20 lines script (only
changing the fields names) as a proof that we could get some
interesting information that way, I decided that it would
more useful to write one longer script that would produce
the kind of report I wanted (along with fancy filters to
ignore useless information) from a configuration file.
I would produce the same ouput (and give way to produce other
interesting reports I hadn't thought of yet).
</p><p>
Then I thought that the way to go was to build a
tree of nodes (input nodes, filter nodes, output nodes)
that would pass data to one another tp modify it, filter it
and produce the reports. Each node would be given a code
reference as its "action" (the parameter being the data).
</p><p>
I got the client to accept a silly name for the project
(DAta Munging Network - Damn)
and started coding it. After having produced <tt>Damn</tt>,
<tt>Damn::Node</tt>, <tt>Damn::Source</tt> and <tt>Damn::Filter</tt>
(achieving near 100% overall code coverage with my test suite,
some of the tests code being actually handled by nodes doing
<tt>is_deeply()</tt> in their action code), I began
to test it to read through the log files, filter some
lines out, aggregate some data and update a RRD.
</p><p>
The 6 nodes network was just <i>damn slow</i>.
I reduced it to a 3 node network that was only a little
less slow. The conclusion is that it is totally unusable
as it is.
</p><p>
Well, the good news is that it only took one and half
day to fly from big idea to bit bucket. <tt>:-)</tt>
</p><p>
My next attempt to do something generic will probably
involve code templates and a big nice <tt>eval $code</tt>
as the last statement.
</p></p>


<hr/>



<h2>But at least it was a fitting name!</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2005-03-04T07:08:10</h3>
That was a damn fine choice, I must admit.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

