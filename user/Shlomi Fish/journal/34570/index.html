<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Shlomi Fish: The MediaWiki Parser Grant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>The MediaWiki Parser Grant</h1>
<h2><a href="/user/Shlomi Fish/">Shlomi Fish</a> on 2007-09-30T15:25:51</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
As you may know by reading the Perl Foundation blog,
<a href="http://news.perlfoundation.org/2007/09/perlbased_mediawiki_syntax_par.html">I 
was awarded a grant to work on a MediaWiki parser</a>. Now, I knew about this
grant a long time before it was announced, because it took a long time from
the time the committee decided to give me the grant, until it was announced on 
the foundation's blog.
</p>

<p>
I've started working on some 
<a href="http://svn.berlios.de/svnroot/repos/web-cpan/MediaWiki-Parser/">working
code</a>. However, as I've made only slow progress. There are several reasons 
for it:
</p>

<ol>

<li>
<p>
Recently, I've been relatively lethargic. Being out of job, and without 
motivation to do anything, I don't seem to have the will to get things
done. Most of the time, I just rest, play games, read emails and RSS, etc.
but not really code.
</p>

<p>
The prospect of getting the money in return is not enough of a motivation to 
work on the parser. 
</p>
</li>

<li>
<p>
This is an annoying task. So far the code I wrote, handles only a small
subset of the syntax, but is already very complicated, monolithic, and "ugly".
The MediaWiki syntax is highly irregular and I find that handling all the
edge cases while outputting a well-formed stream of tokens, is hard.
</p>
</li>

<li>
<p>
It's complicated. Like I said, the syntax is highly irregular, which makes
it a hard task. So I may feel intimidated by it, and as such 
de-motivated even more.
</p>
</li>
</ol>

<p>
So to sum up - I've neglected working on it. There's still a substantial
amount of code I've written with many extensive tests, but it still covers
only a very small subset of the syntax. If someone wishes to help with this
work, I'll be grateful to help him by giving him a commit access to the
repository. But I don't feel very motivated to work on it myself.
</p>

<p>
I've been thinking of doing something to compensate for that. I'd like
to <a href="http://rt.cpan.org/Public/Dist/Display.html?Name=Archive-Zip">help
squash Archive::Zip bugs</a>, but still need repository access. I'll also like
to resume work on 
<a href="http://web-cpan.berlios.de/modules/Test-Run/">Test-Run</a>, but
may possibly need to re-implement it more directly above TAP::Parser and 
TAP::Harness. I've also been neglecting work on File::Find::Object, and can
resume it. This was an alternative grant proposal that I submitted along with
the MediaWiki parser grant.
</p>

<p>
I can also help resolve random bugs from rt.cpan.org, or, unrelated to
Perl, dedicate more time to be a Linux kernel janitor. (Which I'm trying to
do also because I hope it will help me find a job.).
</p>

<p>
In any case, I hope you're not too disappointed from my lack of willingness 
to work on the MediaWiki parser. I guess you can't always be successful at
what you're trying to do.
</p>
</p>


<hr/>



<h2>Great work - how can we fund its continuation?</h2>
<h3><a href="/user/SuperCruncher/">SuperCruncher</a> on 2007-10-01T19:47:10</h3>
Thanks for your work so far!<p>

I'm a massive fan of Wikipedia and other Wikimedia projects like Wikiquote, but I am very concerned that so much valuable data is being created in such a terrible format. I have been looking for other parsers, but so far have only found this <a href="http://code.google.com/p/wikimarkup/" title="google.com">Python MediaWiki parser</a google.com> which in any case doesn't separate the parsing and output phases.</p><p>

Given MediaWiki's <a href="http://en.wikipedia.org/w/index.php?title=UEFA_Euro_2008_qualifying&amp;action=edit" title="wikipedia.org">horrible  syntax</a wikipedia.org> where 'normal' wikitext, HTML and CSS can be liberally mixed together, I'm not surprised you had significant problems writing a parser.</p><p>

Still, I would like a Mediawiki parser, so I'm wondering if it's possible for the Perl Foundation
to set up a fund specifically this project. I would gladly donate to it. Perhaps other people might be more motivated by funding.</p><p>

As an aside, I'm starting to wonder if Wikimedia content can really be licensed under the <a href="http://www.gnu.org/licenses/fdl.txt" title="gnu.org">GNU FDL</a gnu.org>, as the license states that a transparent copy of the content must be provided. "Transparent" is defined as "represented in a format <b>whose specification is available to the general public</b>, that is suitable for revising the document straightforwardly with generic text editors". Clearly it is possible to edit Mediawiki markup with a text editor, but there is no specification for Mediawiki markup. There are instead just several <a href="http://meta.wikimedia.org/wiki/Help:Contents" title="wikimedia.org">help documents</a wikimedia.org> and a <a href="http://www.mediawiki.org/wiki/Markup_spec" title="mediawiki.org">basic attempt</a mediawiki.org> to create a spec. The FDL also adds "A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent". I wouldn't go <i>quite</i> as far as saying that Mediawiki markup is deliberately obfuscated, as clearly that wouldn't be compatible with the project's aims, but it certainly doesn't lend itself to quick and easy modification.</p><p>

In the longer term, if Wikipedia is serious about <a href="http://en.wikipedia.org/wiki/Wikipedia:10_things_you_did_not_know_about_Wikipedia" title="wikipedia.org">being around in 100 years</a wikipedia.org>, I think they really need to produce a proper Mediawiki markup specification, then develop a standalone (read: non hacky PHP) parser against it and use this to convert Mediawiki markup to a more well-designed wiki markup language like <a href="http://wikicreole.org/" title="wikicreole.org">wikicreole</a wikicreole.org>.</p>



<blockquote>

<h2>Re:Great work - how can we fund its continuation?</h2>
<h3><a href="/user/Shlomi Fish/">Shlomi Fish</a> on 2007-10-03T08:49:31</h3>
<p>
Hi!
</p>

<p>
Thanks for your comprehensive reply.
</p> <p><div class="quote">Thanks for your work so far!</div>  <p>
You're welcome, but I don't think I deserve a lot of thanks.
</p> <p><div class="quote"> <p>

I'm a massive fan of Wikipedia and other Wikimedia projects like Wikiquote, but I am very concerned that so much valuable data is being created in such a terrible format. I have been looking for other parsers, but so far have only found this <a href="http://code.google.com/p/wikimarkup/" title="google.com">Python MediaWiki parser</a google.com> which in any case doesn't separate the parsing and output phases.</p> </div>  <p>
Well there's <a href="http://www.shlomifish.org/philosophy/computers/web/which-wiki/update-2006-07/#docbook_and_html_to_wikis" title="shlomifish.org">wiki2xml</a shlomifish.org> for MediaWiki (possibly based on the MW code) that converts MW code to XML. Maybe it's what you're looking for.
</p> <p><div class="quote"> <p>

Given MediaWiki's <a href="http://en.wikipedia.org/w/index.php?title=UEFA_Euro_2008_qualifying&amp;action=edit" title="wikipedia.org">horrible  syntax</a wikipedia.org> where 'normal' wikitext, HTML and CSS can be liberally mixed together, I'm not surprised you had significant problems writing a parser.</p>

<p>

Still, I would like a Mediawiki parser, so I'm wondering if it's possible for the Perl Foundation
to set up a fund specifically this project. I would gladly donate to it. Perhaps other people might be more motivated by funding.</p> </div>  <p>
That may be a good idea.
</p> <p><div class="quote"> <p>

As an aside, I'm starting to wonder if Wikimedia content can really be licensed under the <a href="http://www.gnu.org/licenses/fdl.txt" title="gnu.org">GNU FDL</a gnu.org>, as the license states that a transparent copy of the content must be provided. "Transparent" is defined as "represented in a format <b>whose specification is available to the general public</b>, that is suitable for revising the document straightforwardly with generic text editors". Clearly it is possible to edit Mediawiki markup with a text editor, but there is no specification for Mediawiki markup. There are instead just several <a href="http://meta.wikimedia.org/wiki/Help:Contents" title="wikimedia.org">help documents</a wikimedia.org> and a <a href="http://www.mediawiki.org/wiki/Markup_spec" title="mediawiki.org">basic attempt</a mediawiki.org> to create a spec. The FDL also adds "A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent". I wouldn't go <i>quite</i> as far as saying that Mediawiki markup is deliberately obfuscated, as clearly that wouldn't be compatible with the project's aims, but it certainly doesn't lend itself to quick and easy modification.</p> </div>  <p>
Well, presumably, a human can take a document written in MediaWiki syntax and convert it to something more strict manually, so it may be OK.
</p> <p><div class="quote"> <p>

In the longer term, if Wikipedia is serious about <a href="http://en.wikipedia.org/wiki/Wikipedia:10_things_you_did_not_know_about_Wikipedia" title="wikipedia.org">being around in 100 years</a wikipedia.org>, I think they really need to produce a proper Mediawiki markup specification, then develop a standalone (read: non hacky PHP) parser against it and use this to convert Mediawiki markup to a more well-designed wiki markup language like <a href="http://wikicreole.org/" title="wikicreole.org">wikicreole</a wikicreole.org>.</p> </div>





</blockquote>


<h2>Parser inspirations...</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-10-01T23:47:58</h3>
If worst comes to worst, you could always use PPI as a starting point.<br><br>But that's probably a strategy of last resort, as the PPI codebase is fairly hideously complicated.



<blockquote>

<h2>Re:Parser inspirations...</h2>
<h3><a href="/user/Shlomi Fish/">Shlomi Fish</a> on 2007-10-02T09:09:40</h3>
<p><div class="quote">If worst comes to worst, you could always use PPI as a starting point.<br> </div>  <p>
Isn't PPI a parser for Perl 5 code? How will this help me parse MediaWiki syntax?
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

