<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Shlomi Fish: Test::Run Regression Bug</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Test::Run Regression Bug</h1>
<h2><a href="/user/Shlomi Fish/">Shlomi Fish</a> on 2007-07-10T14:23:52</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
After I released 
<a href="http://web-cpan.berlios.de/modules/Test-Run/">Test-Run</a> version 
0.0111, and made some related Test-Run-CmdLine 
releases, I noticed that Test-Run-CmdLine got broken. As it turned out,
a regression was introduced into Test-Run which, due to inadequate testing
in the core distribution, was only discovered in the Test-Run-CmdLine tests.
I could have discovered it on my machine, if only I had ran my script to build
all the Test-Run-related distributions. 
</p>

<p>
Namely, in my continuous work on converting the legacy GPL and (original) 
Artistic code that I inherited from Test::Harness to an MIT-X11 Licensed 
code, while refactoring it in the process, I broke the "leaked directory" 
(which indicates which files inside it were leaked). After I added a regression
test for it in the core Test-Run distribution, I found out that I had about
three bugs in the new code, which was about 20 lines. (Reminds of
<a href="http://www.xbox-linux.org/wiki/The_Hidden_Boot_Code_of_the_Xbox">"How
to fit 3 bugs in 512 bytes of security code"</a>). After I fixed them,
Test-Run-CmdLine did not complain. 
</p>

<p>
There are several lessons here. One is that one should also test modules that
are based on the core module before releasing it. The other is that if bugs 
are discovered by testing a derived module, then regression tests should also 
be added to the test of the core module. And finally, that it is a good idea
to have a good test coverage before refactoring.
</p>
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

