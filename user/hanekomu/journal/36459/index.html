<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of hanekomu: use &amp;#31622;; or: Distributions with Kanji on CPAN</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>use &amp;#31622;; or: Distributions with Kanji on CPAN</h1>
<h2><a href="/user/hanekomu/">hanekomu</a> on 2008-05-18T12:16:34</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>During the YAPC::Asia hackathon day 2, we discovered a kanji that we could use for Moose.pm: &#31622;. It even looks a bit like some thing with antlers. Here is the JEDict definition:<br/><br/>&#31622; [&#12408;&#12425;: HERA]  spatula
&#31622;&#40575; [&#12408;&#12425;&#12376;&#12363;: HERAJIKA]  (uk) moose, elk<br/><br/>So a moose is an animal with a spatula on its head? Larry said that &#31622; could also mean "comb", so a moose is an animal with a comb on its head. But I digress.<br/><br/>I've made a simple proof-of-concept distribution. The main module's code basically is:<br/><br/>    use utf8;
    package &#31622;;
    1;<br/><br/>'perl Makefile.PL', 'make', 'make test' and 'make dist' all worked well. It produced a tarball: &#31622;.tar.gz. So far, so good.<br/><br/>Then I've tried to upload the tarball to cpan:<br/><br/>    $ cpan-upload-http &#31622;.tar.gz<br/><br/>That also gave no error message. So I waited for the emails from PAUSE. Here is the first one:<br/><br/>> Subject: Notification from PAUSE
>
> MARCEL (Marcel GrÃÂ¼nauer == hanekomu (&#36339;&#12397;&#36796;&#12416;)) visited the PAUSE and
> requested an upload into his/her directory. The request used the
> following parameters:
>
> pause99_add_uri_upload ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ [ÃÂ§ÃÂ®&#134;-0.01.tar.gz]
> SUBMIT_pause99_add_uri_httpupload [ Upload this file from my disk ]
> pause99_add_uri_httpupload ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ [-0.01.tar.gz]
>
> The request is now entered into the database where the PAUSE daemon will
> pick it up as soon as possible (usually 1-2 minutes).
>
> During upload you can watch the logfile in
> https://pause.perl.org/pause/authenquery?ACTION=tail_logfile&pause99_tail_logfile_1=5000.
>
> You'll be notified as soon as the upload has succeeded, and if the
> uploaded package contains modules, you'll get another notification from
> the indexer a little later (usually within 1 hour).
>
>
> Thanks for your contribution,
> -- 
> The PAUSE<br/><br/>
Due to the good fortune of having kanji and kana in my CPAN display name (&#36339;&#12397;&#36796;&#12416;), I was sure that the email had the right encoding. But the tarball filename it returned was wrong: "ÃÂ§ÃÂ®&#134;-0.01.tar.gz". Well, let's see. Maybe it's just a problem with generating the email. Wait and see... Here is the second email:<br/><br/>> Subject: CPAN Upload: M/MA/MARCEL/-0.01.tar.gz
>
> The uploaded file
>
> ÃÂ ÃÂ ÃÂ -0.01.tar.gz
>
> has entered CPAN as
>
> ÃÂ file: $CPAN/authors/id/M/MA/MARCEL/-0.01.tar.gz
> ÃÂ size: 24392 bytes
> ÃÂ ÃÂ md5: 39ebd0b5ab4bd9acdb2a80c1c4a733dd
>
> No action is required on your part
> Request entered by: MARCEL (Marcel GrÃÂ¼nauer == hanekomu (&#36339;&#12397;&#36796;&#12416;))
> Request entered on: Sun, 18 May 2008 11:00:42 GMT
> Request completed: ÃÂ Sun, 18 May 2008 11:00:52 GMT
>
> Thanks,
> -- 
> paused, v996<br/><br/>Hm, doesn't look good either. Well, wait for the indexer report... Here it is:<br/><br/>> Subject: Failed: PAUSE indexer report MARCEL/-0.01.tar.gz
>
> The following report has been written by the PAUSE namespace indexer.
> Please contact modules@perl.org if there are any open questions.
>  ÃÂ Id: mldistwatch 1001 2008-05-15 05:34:01Z k 
>
> ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ User: MARCEL (Marcel Gruenauer == hanekomu)
> ÃÂ Distribution file: -0.01.tar.gz
> ÃÂ ÃÂ ÃÂ Number of files: 21
> ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ *.pm files: 14
> ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ README: &#31622;-0.01/README
> ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ META.yml: &#31622;-0.01/META.yml
> ÃÂ Timestamp of file: Sun May 18 11:00:51 2008 UTC
> ÃÂ ÃÂ Time of this run: Sun May 18 11:02:23 2008 UTC
>
> No package statements could be
> ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ found in the distro (maybe a script or
> ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ ÃÂ documentation distribution?)
>
> __END__<br/><br/>Ah, so it could actually untar it because it found the README and META.yml files. But it seems it uses the wrong regex to find the package statements. Maybe it needs to read the file as utf8...<br/><br/>Just to be sure it wasn't a problem with cpan-upload-http, I also uploaded the file from the PAUSE web interface directly. Here is the response:<br/><br/>> The Perl Authors Upload Server
>
> Upload a file to CPAN
> Add a file for MARCEL
> File successfully copied to '/home/ftp/incoming/-0.01.tar.gz'
> Your filename has been altered as it contained characters besides the class [A-Za-z0-9_\-\.\@\+].
> DEBUG: your filename['ÃÂ§ÃÂ®&#134;-0.01.tar.gz'] corrected filename['-0.01.tar.gz'].<br/><br/>So this doesn't work either.<br/><br/>Dear CPAN maintainers, please fix it.<br/><br/></p>


<hr/>



<h2>unidecode, transcribe, timtowdti</h2>
<h3><a href="/user/LaPerla/">LaPerla</a> on 2008-05-18T14:41:12</h3>
<p>Fortunately CPAN filenames are 7 bit and only a few of the non <code>\w</code> filenames are allowed. As much I'd like to change that as much CPAN has to be the advocate of the limitations that the last poor soul in the chain has to fight with who wants to <b>use</b> CPAN.</p>

<p>I'm sure you know how to give the tarball a different name. I'm not so sure that perl is able to deal with UTF-8 module names. So please bring your first UTF-8 module into the core. I'm looking forward to see how it fares.</p>



<blockquote>

<h2>Re:unidecode, transcribe, timtowdti</h2>
<h3><a href="/user/rafael/">rafael</a> on 2008-05-19T06:17:40</h3>
Regarding UTF8 variable names, the core doesn't support them very well. See this item in perltodo.pod :<br><br>=head2 Properly Unicode safe tokeniser and pads.<br><br>The tokeniser isn't actually very UTF-8 clean. C is a hack -<br>variable names are stored in stashes as raw bytes, without the utf-8 flag<br>set. The pad API only takes a C pointer, so that's all bytes too. The<br>tokeniser ignores the UTF-8-ness of C, or any SVs returned from<br>source filters.  All this could be fixed.<br>



<blockquote>

<h2>Re:unidecode, transcribe, timtowdti</h2>
<h3><a href="/user/schwigon/">schwigon</a> on 2008-05-26T07:48:38</h3>
<p>
But package names work quite ok. I did a similar experiment at nearly the same time with Acme::&#195;&#339;nic&#195;&#182;de. Locally on disc it just works fine. Once uploaded it is even installable via CPAN.pm by the dist name (eg. S/SC/SCHWIGON/acme-unicode/Acme-nicde-0.02.tar.gz). The filename problem is solveable anyhow during/after "make dist".
</p>

<p>
The only remaining problem is getting the PAUSE indexer to use the META.yml instead trying his luck on the files and to generate that META.yml with some more explicit information than usual.
</p>

<p>
Probably.
</p>





</blockquote>

</blockquote>


<h2>Chinese character for moose is  &amp;#233;&amp;#186;&amp;#8249</h2>
<h3><a href="/user/mr_bean/">mr_bean</a> on 2008-05-21T13:14:56</h3>
Another name, besides &#233;&#186;&#8249;&#233;&#185;&#191;, is &#233;&#167;&#233;&#185;&#191;. That is, literally, 'camel deer.'
<br> <br><br/><br/>Slaps forehead.
<br> <br><br/><br/>Of course! What other translation explains Moose's power?
<br> <br><br/><br/>But according to some, &#233;&#186;&#8249; is the character for <a href="http://en.wikipedia.org/" title="wikipedia.org">P%C3%A8re David's Deer</a wikipedia.org><br/><br/>See this explanation on a <a href="http://www.chinahunts.com/bbs/dispbbs.asp?" title="chinahunts.com">Chinese hunting site</a chinahunts.com>.
<br> <br><br/><br/>The Chinese <a href="http://zh.wikipedia.org/wiki/&amp;%23167;&amp;%23233;&amp;%23185;&amp;%23191;" title="wikipedia.org">Wikipedia</a wikipedia.org> says it's because the shoulders and buttocks of the 2 animals are similar.
<br> <br><br/><br/>There's another <a href="http://www.fileformat.info/info/unicode/char/4d22/index.htm" title="fileformat.info">character</a fileformat.info> that means the same thing. I can't see it, but it is probably similar, with the 'rice' character, giving the reading, next to the 'deer' radical, rather than underneath it.
<br> <br><br/><br/>[I'm having an encoding problem here. It looks OK when I key it in, but the preview I get back from use.perl shows it converted to ISO-8859-1, I guess. I will see what the submiited comment looks like.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

