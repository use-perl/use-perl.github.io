<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of markjugg: refactoring CGI::App for Perl6: simple recipe for porting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>refactoring CGI::App for Perl6: simple recipe for porting</h1>
<h2><a href="/user/markjugg/">markjugg</a> on 2006-08-23T03:25:34</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Today's work on porting CGI::Application to Perl6 was special because some of the tests actually began to pass. :) To make this happen, the test scripts themselves have been translated to Perl6. In this case, I also had a dozen test application modules which needed to be converted. 
<p>
It turned these test modules included fairly simple Perl object syntax, and could largely be converted to Perl6 by running the following find-and-replace functions on them with my editor:
<p>
<pre>
s/use strict;\n/          # use strict is no longer needed!
s/^sub /method /          # convert subs to methods
s/.*my $self = shift;\n// # ...and get rid of this!
s/\$self->/self./         # shorten object syntax
s/1;//                    # 1; is gone!
</pre>
<p>
As yesterday, the theme in porting to Perl6 is code removal and simplification. Just by casually browsing the code for refactoring possibilities, I  removed an additional 12 lines of code with little effort. 
<p>
Next I just need to keep working my way through the test suite, continuing to convert the test scripts themselves to Perl6, and see what else needs to change for the tests to pass. 
<p>
Today's learning experience was that <code>ref</code> returns more and different values than it used to, and I haven't found good documentation about this yet. So far, I've found that "Pair", "Array" and "Array::Const" are possibilities. So far, I like the simplicity of just HASH and ARRAY from Perl5. 

 




</p>


<hr/>



<h2>I have to admit</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2006-08-23T13:43:06</h3>
I have been wondering at Perl6 and whether it will be too *complex* and whether I would just stick with Perl5. You postings have given me hope that even I will be able to make the transition.  : )



<blockquote>

<h2>the biggest deficiency of Perl6</h2>
<h3><a href="/user/markjugg/">markjugg</a> on 2006-08-23T14:33:32</h3>
The biggest deficiency I see in Perl6 right now is that CPAN hasn't been ported to Perl6 yet.<nobr> <wbr></nobr>:)<br><br>I expect I'll be preferring Perl5 for production for a long time. One of things I have yet to explore is Perl5 embedding, so Perl5 modules can be used in Perl6.<br><br>The definitely seems like a transitional solution, though, due to the extra overhead and complexity of it.<br><br>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

