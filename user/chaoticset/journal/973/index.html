<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chaoticset: Tunes, Coffee, And Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Tunes, Coffee, And Notes</h1>
<h2><a href="/user/chaoticset/">chaoticset</a> on 2001-10-12T08:03:49</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Okay - things are better.  When the DOS more command is removed from the equation, the script processes the entire file fairly quickly.
<P>
One thing still bothers me.
<P>
Lazy type that I am, I didn't bother to find out how to represent that mashed-together AE symbol; I just built a check to see if the first character of the line is nonword (\W in the regex) and if it is, replace it with Ae.
<P>
That's just sloppy.  If they ever make a card called @#&*ing Bastards (say, in the next Unglued expansion), then I'll be shown for the fraud I am.
<P>
Until then, I'll keep programming.
<P>
Other than that, I've got how it's going to be laid out in the file all set up.
<P>
I realized that all this complex crap boils down to essentially three things - card name, card cost, and how many of the card is there to be bought.  Then it occurred to me:
<P>
"All of that can be compiled in pre-site scripts."
<P>
It should help make the CGI fast, if all it's got to do is strip three values out and slap a little bit of table this, table that around it.  That, of course, plus build and access their cart file.
<P>
Drew it all out on my whiteboard, which I'm really getting used to now.  Just have to implement it now.
<P>
Still got ice cream, but I'm all out of Swiss Cake rolls, all out of Dew as well.  Nice fresh coffee though.
<P>
(This isn't a food review, self...let it go.  Drink your coffee and eat your ice cream and CODE.)
<P>
Oh, another little decision:  The inventory file will only get updated when the compile goes through.  I'm presuming this guy is going to want to do the price updates at least every two or three days, so that shouldn't be a problem.  (He wants to make sure nobody buys out some of the faster-selling cards all at once, so this should serve that purpose admirably.)
<P>
This whole thing is going with a physical model of inventory.  That is, when someone puts something in their cart file, it gets *decremented* in the stock file.  Like it's physically in a 'cart'.
<P>
I realize that may sound stupid, but there's actually a good reason.  The inventory for the website is the inventory for the shop; when there's a physical store, this system will use the same file to act as a cash register of sorts.  The only real downside is the lack of physical security; he's going to have to trust the people running the register with his life, because they could just take what they want and there'd be no tracking of the money.  (I am literally assuming that he'll be working out of a cash box at first, as he is assuming as well.  It's slipshod but it will work, I think.)
<P>
Times like this remind me of something from _Farscape_.<BR>
"You're learning more slowly than the dumbest recruit."<BR>
"Yeah, but I *am* learning."<BR>
<P>
I'm yawning, so I better hurry.
<P>
It occurs to me that I'll probably collapse some, perhaps all, of these programs together; that way, there's less "whaddaya mean, I ran it in the wrong order and now we don't have enough stock" style problems that could crop up.  If it all just gets fed into 'pricer.pl' and comes out the other end ready and clean, good, one program would simplify things.
<P>
That's future work, though.  For now, if it works, it works.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

