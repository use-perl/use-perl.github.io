<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of acme: Extracting books from recipes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Extracting books from recipes</h1>
<h2><a href="/user/acme/">acme</a> on 2005-01-20T10:48:23</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I did do a little research on large-scale spelling, but all the equations scared me. I'll look at it again in a bit. Instead, I spent a day trying to construct metadata about partially-structured data. OK, what I really did was try and extract book information from the <a href="http://www.astray.com/recipes/">recipes</a>. This way I can link to Amazon using the <a href="http://www.amazon.com/gp/browse.html/ref=gw1_mm_2/?node=3435371">Amazon Associates</a> program, get 5% in in referral fees and be a millionaire by the time I'm 21. *cough*
<p>
Now it really was quite hard. <a href="http://www.astray.com/recipes/?show=Potato-pepper%20sauce">Some</a> <a href="http://www.astray.com/recipes/?show=Potato%20soup%20with%20lemons">recipes</a> contained ISBNs. These were fairly easy to extract, and then I could use <a href="http://www.amazon.com/gp/browse.html/?%5Fencoding=UTF8&node=3435361">Amazon Web Services</a> to extract the book title and an image.
However, the <a href="http://www.astray.com/recipes/?show=Chocolate%20%26%20cherry%20loaf">vast</a> <a href="http://www.astray.com/recipes/?show=Laksa%20lemak">majority</a> of <a href="http://www.astray.com/recipes/?show=Okra%20shoyu-zuke%20(okra%20%26%20onion%20pickles)">book</a> <a href="http://www.astray.com/recipes/?show=Dark%20lager%20mustard">references</a> were free-form. This is slightly harder. I ended up taking a random sample of a couple hundred recipes and building a test suite of the correct book references. After a full day of heuristic building, it came up with mostly the correct results. I could then plug the title into AWS and get a related ISBN.
<p>
I really do like the Amazon Web Services. I haven't played with them until now and they do really expose an awful lot of Amazon's database. Also, notice in the previous links that it hasn't always been the exact book, but sometimes a similar one in the same category. OK, so sometimes it goes a little <a href="http://www.astray.com/recipes/?show=Roast%20polar%20bear">freaky</a> but mostly it works out. It was tough, but I'd say it was a day well spent. And I don't think it's <i>too</i> evil to mention related books.
<p>
Whoops, you probably want some Perl content. I used <a href="http://cpan.uwinnipeg.ca/dist/Business-ISBN">Business::ISBN</a> to validate the ISBNs and <a href="http://cpan.uwinnipeg.ca/dist/Net-Amazon">Net::Amazon</a> to do lots of AWS queries. <a href="http://cpan.uwinnipeg.ca/dist/Lingua-EN-NamedEntity">Lingua::EN::NamedEntity</a> does a similar thing to my heuristics, but mine are more linked to my data. Note links to kobesearch as search.cpan.org has been almost down for the last week. Time for dimsum!</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

