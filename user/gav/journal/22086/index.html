<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of gav: Domain Specific Testing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Domain Specific Testing</h1>
<h2><a href="/user/gav/">gav</a> on 2004-12-01T04:09:24</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
One of the things I do is implement tax and shipping rules for clients. As an interesting aside, we use a early web services technique invented at Yahoo! where we recieve a POST of all the data and return the results in custom headers. Anyway, as you can expect, it's often a challenge to capture the exact rules required and they tend to be pretty complicated. 
</p>
<p>
I'd just been working on adding rules for AK and HI for a client that only previously shipped to the 48 contiguous states and the added complexity made me worried that I made a mistake. I wanted to write tests, but I wanted something at a higher level than just writing Perl code, and more importantly I wanted a test suite that the client can add to. I came up with the following format:
</p>
<p>
<tt>
product: 9848rdc
<br />quantity: 1
<br />options: Size: 148
<br />product: 9852rdc
<br />quantity: 2
<br />options: Size: 152
<br />state: AK
<br />country: US
<br />method: Ground
<br />cost: 24.95
<br />--
<br />product: bk7ma
<br />product: 9848rdc
<br />options: Size: 148
<br />state: AK
<br />cost: 39.95
<br />method: Ground
</tt>
</p>
<p>
I then wrote a script that reads this in, turns each section into three tests (using <tt>Test::More</tt>): we were able to POST, we didn't get back an error, and we got back the right cost. We've now got a format that allows non-programmers to write tests, and they're often the best people to write them because they know what they expect the system to do. 
</p></p>


<hr/>



<h2>Wiki tests</h2>
<h3><a href="/user/cbrandtbuffalo/">cbrandtbuffalo</a> on 2004-12-01T17:06:43</h3>
I think this gets close to one of the ideas for wiki usage. I remember reading that an implementation goal of the wiki framework was to set up editable web pages that end users could use to design tests for code. Then the users can build the acceptance tests and see the results right away. Very cool idea, and it looks like you're almost implemented it!



<blockquote>

<h2>Re:Wiki tests</h2>
<h3><a href="/user/lachoy/">lachoy</a> on 2004-12-01T20:43:46</h3>
Thinking of <a href="http://fit.c2.org/" title="c2.org">FIT</a c2.org> or <a href="http://search.cpan.org/user/ingy/Test-FIT-0.11/" title="cpan.org">Test::FIT</a cpan.org>? These are nifty, but I have a sneaking suspicion that customers who use such systems are are more willing to learn than the ones I normally deal with.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

