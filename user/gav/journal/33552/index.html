<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of gav: Square wheels</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Square wheels</h1>
<h2><a href="/user/gav/">gav</a> on 2007-06-19T02:33:50</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Why would somebody implement a database in a database? I've seen this anti-pattern a few times before and it's confusing to me, when do you wake up and say "obviously the answer is to put the data a database, but let's invent our own abstraction".<br/><br/>Instead of nice code that looks like:<br/><br/>SELECT some_value FROM some_table WHERE some_other_value = 'something';<br/><br/>Figure out how many SQL statements your poor database will have to execute if the schema looks like:<br/><br/>object(object_id, object_type)
object_type_to_attribute(object_type, attribute_id)
attribute(attribute_id, attribute_name, data_type)
table_bit(object_id, attribute_id, value)
table_string(object_id, attribute_id, value)
table_number(object_id, attribute_id, value)
table_text(object_id, attribute_id, value)<br/><br/><br/><br/></p>


<hr/>



<h2>hm?</h2>
<h3><a href="/user/slanning/">slanning</a> on 2007-06-19T10:27:42</h3>
I wish I knew what you were talking about.<nobr> <wbr></nobr>:)



<h2>Could be worse ...</h2>
<h3><a href="/user/fansipans/">fansipans</a> on 2007-06-19T14:03:17</h3>
Actually this is pretty fancy stuff:<br>
<code> <br>
object(object_id, object_type)<br>
object_type_to_attribute(object_type, attribute_id)<br>
</code> <br>
<br>
Just be glad it's not:<br>
<code> <br>
bit(bit_id, value)<br>
bit_sequence(sequence_id, name)<br>
bit_sequence_member(sequence_id,bit_id,ordinal)<br>
</code> <br>
<br>
Maybe your tables are just views over bit and bit_sequence<nobr> <wbr></nobr>...



<h2>This is sometimes a workaround for other problems</h2>
<h3><a href="/user/btilly/">btilly</a> on 2007-06-19T16:59:07</h3>
For instance a lot of places don't want to create or modify lots of different tables.  Sometimes this is due to poor communication between programmers and DBAs, sometimes there are real problems trying to keep table definitions in sync across multiple databases.  However if you can convince them to create tables like this, then those issues just magically go away.<br><br>But, that said, it is more often a sign of a developer who heard about the fact that you can do this, the developer thought it would be cool, and didn't have the common sense to understand why it is a bad idea.



<h2>I've always thought of it as ...</h2>
<h3><a href="/user/derby/">derby</a> on 2007-06-19T18:15:29</h3>
... a real bad case of premature generalization



<h2>It's the Inner-Platform Effect</h2>
<h3><a href="/user/Phred/">Phred</a> on 2007-06-19T19:41:55</h3>
<a href="http://en.wikipedia.org/wiki/Inner-Platform_Effect" title="wikipedia.org">Inner-Platform Effect</a wikipedia.org>



<h2>All tables in one table</h2>
<h3><a href="/user/Ron Savage/">Ron Savage</a> on 2007-06-21T01:03:32</h3>
Yep, I've seen a RDBMS used to put all tables in one. The first column was the name of the table, so just by selecting a table name in that column, the remaining tables were 'known' so-to-say as belonging to that table. The programming language was Perl<nobr> <wbr></nobr>:-(.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

