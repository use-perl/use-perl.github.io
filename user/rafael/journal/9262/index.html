<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of rafael: Subversion / MakeMaker tricks</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Subversion / MakeMaker tricks</h1>
<h2><a href="/user/rafael/">rafael</a> on 2002-12-04T11:33:33</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Want to maintain a Perl module under Subversion ?<br/><br/>If you're using a version of ExtUtils::MakeMaker < 6.06 (which is not
released at the time of this writing), the following steps are necessary :<br/><br/>1. Put a MANIFEST.SKIP file in your top-level directory. It
should contain the line<br/><br/>    \B\.svn\b<br/><br/>as well as the other MANIFEST.SKIP standard excluded files :<br/><br/>    # Avoid Makemaker generated and utility files.
    ^MANIFEST\.bak
    ^Makefile$
    ^blib/
    ^MakeMaker-\d
    ^pm_to_blib$
    # Avoid temp and backup files.
    ~$
    \.old$
    \#$
    ^\.#<br/><br/>2. In your Makefile.PL, redefine libscan() :
(see the manpage for ExtUtils::MM_Unix)<br/><br/>    sub MY::libscan {
        my $path = $_[1];
        return '' if $path =~ /\B\.svn\b/;
        return $path;
    }<br/><br/>Other tricks :<br/><br/>Want to have an automatically generated changelog in your distribution
tarball ? Here's how :<br/><br/>    WriteMakefile(
        ...
        dist => {
            PREOP => 'svn log > ${DISTVNAME}/ChangeLog',
        },
    );<br/><br/>Want to avoid noise when using "svn status" ?
Use this svn command at the root of your source tree :<br/><br/>    $ svn propset svn:ignore 'blib
    Makefile
    pm_to_blib' .
    $ svn commit -m 'Ignore MakeMaker-generated files in svn status' -N .<br/><br/>For a maximized hype, use the following options to WriteMakefile() :<br/><br/>    WriteMakefile(
        ...
        dist => {
            CI => 'svn commit',
            RCS_LABEL => '@ :',
        },
    );<br/><br/>This enables you to use "make ci" to commit your changes. That's not
really useful, but it's neat.<br/><br/>(Comments welcome. I plan also to put this on my website.)
</p>


<hr/>



<h2>Autogenerated changelogs</h2>
<h3><a href="/user/lachoy/">lachoy</a> on 2002-12-04T13:01:59</h3>
Not to be picky, but does anyone else find autogenerated changelogs unhelpful? IMO a changelog should describe the overall changes and their effects rather than the detailed code modifications. If a hacker is interested in the steps taken to achieve these changes there's always 'cvs log foo.pl' -- or the svn equivalent<nobr> <wbr></nobr>:-)



<blockquote>

<h2>Re:Autogenerated changelogs</h2>
<h3><a href="/user/rafael/">rafael</a> on 2002-12-04T16:39:36</h3>
I guess that it depends on your project and on your audience. I happen to like verbose changelogs, and tools that write them for me (provided I've been careful with my commit messages). For example, <code>perl</code> comes with extra-large detailed autogenerated changelog files. This doesn't prevent me to write elsewhere (eventually<nobr> <wbr></nobr>;-) a short summary of what has changed recently. I don't do that because I don't maintain anything mainstream. <p>Moreover, noone will be able to 'svn log' my repository if it's not network-accessible.</p>



<blockquote>

<h2>Re:Autogenerated changelogs</h2>
<h3><a href="/user/lachoy/">lachoy</a> on 2002-12-06T13:43:41</h3>
It's not verbosity/length that I object to, it's that people looking to see what's changed need to be intimately familiar with the code structure to figure out what's going on. You could say we're discussing two separate items -- to use your example, Perl's detailed auto-generated changelog file versus 'perldoc perldelta'. It's great having both, but having the former without the latter isn't useful. (IMO, of course.)



<blockquote>

<h2>Re:Autogenerated changelogs</h2>
<h3><a href="/user/jhi/">jhi</a> on 2002-12-10T20:48:27</h3>
Having written few perldeltas I can say that automating that process is highly unlikely. Condensing hundreds or thousands of patches into an "end- user" description requires days of hard work, and many editing rounds.<br> <br>I have to mention one common fallacy people seem to have that one patch equals one fix / one feature. Well, yeah, rarely it does work like that. But usually the mapping is many-to-many.<br> <br>But without the autogenerated verbose changelogs<br>one would be very hard pressed to be able to write the more approachable descriptions.



<blockquote>

<h2>Re:Autogenerated changelogs</h2>
<h3><a href="/user/pudge/">pudge</a> on 2002-12-11T14:42:19</h3>
I concur.  I like perldelta or somesuch for a summary of changes, but I like the generated changelog for specifics.  Perl's Changes file has helped me innumerable times, but I wouldn't want to have to read that to see what important things have changed in a new release.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

