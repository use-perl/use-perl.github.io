<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of cog: Obfuscation is not Security</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Obfuscation is not Security</h1>
<h2><a href="/user/cog/">cog</a> on 2005-04-11T12:01:39</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><i>"<a href="http://www.macdevcenter.com/pub/a/mac/2005/04/08/code.html">You can protect your applications from attack by applying obfuscation techniques to convolute your source code.</a>"</i>

<p>No, <b>you can't</b> :-) The mere idea!! :-)

<p>Obfuscating code to protect it is like putting a big stone in front of your house's door. It won't prevent people from getting in. It will just give them extra work.

<p>The more you obfuscate, the more likely you are to challenge the great hackers who deobfuscate just for fun :-)

<p>I am yet to see obfuscated code I can't deobfuscate (but sure, if you give me obfuscated code in a language I don't understand... it's going to take me some time).

<p><i>"<a href="http://www.macdevcenter.com/pub/a/mac/2005/04/08/code.html?page=2">Hopefully, you now have a better feel for the compilation process and understand how obfuscation is a powerful tool you can use to protect your code from exploitation and hacking.</a>"</i>

<p>No, <b>I don't</b>. I'm sorry, but I have to disagree... :-)</p>


<hr/>



<h2>I wonder...</h2>
<h3><a href="/user/cog/">cog</a> on 2005-04-11T12:02:28</h3>
I wonder if I could get a job obfuscating code<nobr> <wbr></nobr>:-)



<h2>been there, done that</h2>
<h3><a href="/user/jmm/">jmm</a> on 2005-04-11T13:30:30</h3>
I wrote the initial set of code that Larry turned into the CRYPTSWITCH enabled encryption filter in early perl3. Carrying forward that ability for encrypting scripts was the initial purpose of the Filter module in perl5, although the ability to apply arbitrary filtering to the incoming code stream was designed into it and the Filter::Crypt module was one of the initial examples of how to use that ability.<p>
But, the company I was at was never foolish enough to believe that encrypting scripts made the code safely unreadable to all end users.  It does make it unreadable to coldshot users and it lets the hotshot programmer type users know that the copyright owners of the code don't want to share it with them so if they were to actually copy the code they will clearly be aware of taking part in copyright infringement.  Which they generally respect (although they might break the encryption just to prove to themselves that they can).  The company didn't believe it because the two of us who implemented the encryption taught them that it was impossible - if the script is going to run at all, then Perl has to be able to read it which means that at some point it has to be in readable form.  So, they were foolish enough to ask for the impossible but smart enough to accept that it couldn't be done.</p>



<blockquote>

<h2>I, haX0r</h2>
<h3><a href="/user/schwern/">schwern</a> on 2005-04-12T07:07:45</h3>
I recall scaring the hell out of a programmer that was relying on Filter::decrypt.  He'd thought it was full on encryption rather than just elaborate obfuscation and apparently the company had bought into that, too.  I told him I could bust the obfuscation.  He didn't believe me so he sent me a simple sample.  IIRC my algorithm was something like...<br> <br>require the code<br>walk the symbol table looking for globals and subroutines<br>Data::Dumper the globals<br>B::Deparse the subroutines<br> <br>The tricky part was the file-scoped lexical arrays used inside the subroutines.  I couldn't quite get padwalker working to grab at them.  Instead I just ran the program over and over again with the proper inputs to cause it to print out each element of the arrays.<br> <br>Then I sent the result back to the poor guy.  I think it took less than an hour.<br> <br>It was an interesting exercise.  I'd been saying for years prior that Filter::decrypt was defeatable by B::Deparse but had never actually performed an attack.<br>



<blockquote>

<h2>Re:I, haX0r</h2>
<h3><a href="/user/jmm/">jmm</a> on 2005-04-12T14:00:41</h3>
I haven't tried it, but what I figured the easiest method (even before B::Deparse came along) would be to write another filter and name it Filter::Decrypt.  It would use the "real" Filter::Decrypt but tee the results before passing them on as its "filtered" output.  It's the basic man-in-the-middle attack.



<blockquote>

<h2>Re:I, haX0r</h2>
<h3><a href="/user/schwern/">schwern</a> on 2005-04-13T19:49:07</h3>
Wow, I never would have thought of that!





</blockquote>

</blockquote>

</blockquote>


<h2>Re:</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2005-04-12T06:53:54</h3>
<p>Man what the heck is that doing on an O&#8217;Reilly site.</p>

<p>I do have to qualify that obscurity is not the devil: there is no need to help an attacker along, regardless how safe you think you are. It&#8217;s way foolish to <em>rely</em> on obscurity as the your sole line of defense, though. That&#8217;s just asking for trouble.</p>



<h2>Those who do not learn from history...</h2>
<h3><a href="/user/schwern/">schwern</a> on 2005-04-12T07:29:35</h3>
<blockquote><div> <tt>the vast majority of software pirates won't spend 500 hours reverse engineering and patching a simple $10 shareware application</tt> </div></blockquote> <p>Every anti-piracy method is based on this assumption.  Every one fails because it is not true.  It was not true back when it was a bunch of computer nerds copying 5 1/4" floppies using BitNibbler downloaded off a dial-up BBS and its not even remotely true now with your grandma downloading music over BitTorrent.

</p><p>The vast majority do not need to break the obfuscation.  Just one.  The Internet takes care of the rest.  And there's always somebody who does this sort of thing for fun and is ASTOUNDINGLY good at it.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

