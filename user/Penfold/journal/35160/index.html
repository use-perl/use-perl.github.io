<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Penfold: 21st Century Perl (part 1)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>21st Century Perl (part 1)</h1>
<h2><a href="/user/Penfold/">Penfold</a> on 2007-12-20T07:34:15</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>So, here we are: blank slate, new project. The only stipulations from on high are an API to code to, which mandates Perl (good job, really, as that's why we're all here, I hope). In a nutshell, I have to duplicate the essential methods of a certain sprawling God Object, but talking to someplace different. Fortunately, in this context, 'essential' means mostly the ones it originally was designed to provide, not the subsequent decade of accumulated cruft.
<p>
I was, when I started this blog, not... wholly enlightened. I knew there was a place I and my Perl needed to be, and I was aware that there seemed to be a lot of people in the same boat, some searching for that place, some dismissing Perl because it didn't seem to be in that place. If you're coming to this blog from the enlightened perspective I started out searching for, none of this should be all that new, really: it isn't rocket science, and it certainly is possible in Perl, just as it is in any other modern programming language. So, let's begin...
<p>
...with Unit Tests.
<p>
One of the 'scales falling from my eyes' moments I had at $PreviousJob (involving Java and the like, for those for whom it's been so long they can't remember previous posts here) was in the realm of unit testing and the whole Test Driven Development philosophy. The decree came from On High (small company, so only one level up), "Thou shalt write unit tests."
<p>
I groaned. " What am I? QA?"
<p>
I had to figure out the answer for that one myself, but when I did, it was a Road to Damascus moment, a real 'holy shit, of course' leap. And it's this: 21st Century Perl Revelation # 1:
<p style="text-indent:20pt;"><em>We all write unit tests </em>anyway<em>.</em></p><p style="text-indent:20pt;"><em>We just don't necessarily </em>call<em> them unit tests or treat them like it.
</em></p>Think about it. You write a new piece of code, and then you satisfy yourself it works. First off, by the simple things like 'is it actually syntactically correct Perl', and then you start writing little command-line Perl one and two liners to invoke the code in various ways and see if and how it breaks. It does, so we move on. And a little while later, something makes us refactor the code, and we go back and we write <em>more</em> little command-line Perl one and two liners to make sure it still works.
<p>
Those are unit tests. Except that if you're like I was, you never kept the little Perl one liners from one iteration to the next.
<p>
Behold, <code>Test::More</code> and all its red-headed stepchildren.
<p>
Your repeated invocations of <code>perl -cw My::New::Module</code>?
<p>
<code>    use Test::More plan_tests =&gt; 1;
<br>
    use_ok(qw/My::New::Module/);
</code><p>Glory Hallelujah, a unit test. And blow me, if it isn't even less typing: <code>prove -v t/*.t</code>, or even <code>make test</code>. Praise the Lord, I have <em>seen</em> the light! The first step on the road to salvation.
<p>
Look at that code for that method you just put in the <code>sub {}</code> declaration for. Ask yourself, <em>how would I check if this works?</em> What is my little Perl one or two liner going to look like? Define "works" for your method, for your module. Write some tests that encapsulate that definition of "works" <em>before you even finish coding the module. </em>Save them under useful names in t/. Run them, <em>every time you change your code.</em>
<p>
Testify, brother.</p>


<hr/>



<h2>Probe deeper young one</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-12-20T08:31:44</h3>
Even better than little programs (and of course unit tests) that you run to see that the code works, is little programs and tests you run in the debugger to WATCH the newly written code and see it working.<br><br>And with "pler" (installable from CPAN) it's even LESS typing!<br><br>t/02_dosomething.t<br><br>pler 2<br>



<blockquote>

<h2>Re:Probe deeper young one</h2>
<h3><a href="/user/jplindstrom/">jplindstrom</a> on 2007-12-20T11:48:30</h3>
Confused. Is pler or Devel::Pler the preferred thing to use?<br><br>It seems pler is maintained, obsoleting Devel::Pler, but that neede some research. Maybe one of them should go?





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

