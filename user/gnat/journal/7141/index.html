<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of gnat: Gotta love that LWP</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Gotta love that LWP</h1>
<h2><a href="/user/gnat/">gnat</a> on 2002-08-17T05:09:56</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I spent a few hours tonight knocking up code to milk <a href="http://www.lmp3.net/">the Chinese mp3 server that Slashdot pointed to</a>.  So while I sleep tonight, my machines will be fetching me hot mp3 action.  Not that I'm particularly fond of Brandy's latest album, but it was fun to write the code ...<p>

<i>--Nat</i></p>


<hr/>



<h2>Open source and all that...</h2>
<h3><a href="/user/darobin/">darobin</a> on 2002-08-17T16:05:51</h3>
<p>
  So, it's sure nice to know you had fun with LWP but are you going to keep that script to yourself or is there any chance you'll share it with the other nice kids so they don't have to rewrite it?<nobr> <wbr></nobr>:-)
</p>



<h2>Gone</h2>
<h3><a href="/user/vek/">vek</a> on 2002-08-18T06:07:18</h3>
Blimey, glad I grabbed that Oasis album when I did (grin).  I just visited the site and was greeted by a blank page with the following line:<br> <code> <br>Lmp3 will be closed and will never come back!<br> </code> <br>



<blockquote>

<h2>Re:Gone</h2>
<h3><a href="/user/boru/">boru</a> on 2002-08-18T17:40:40</h3>
The site with the MP3s is still at:
http://www.music369.com



<h2>Re:Gone</h2>
<h3><a href="/user/bart/">bart</a> on 2002-08-19T11:58:54</h3>
<i>Lmp3 will be closed and will never come back!</i> <br>Oh bloody hell. &lt;listen4ever.com&gt; has been taken offline within 24 hours as well. It looks like the terrorists are winning... Yes I'm talking about the RIAA and the whole DMCA mob... <br> <br>See <a href="http://www.oreillynet.com/pub/a/policy/2002/08/15/lessig.html" title="oreillynet.com">Lawrence Lessig's talk</a oreillynet.com>, link currentluy at use.perl.org's home page. <b> <i>Maybe</i> </b> a 5 percent loss! While <a href="http://www.forrester.com/ER/Research/Report/Summary/0,1338,14854,FF.html" title="forrester.com">this study here</a forrester.com> seems to indicate that those people who regularily download and burn MP3's buy as many CD's as everybody else. Read more <a href="http://www.chron.com/cs/CDA/story.hts/tech/weekly/1538086" title="chron.com">here</a chron.com> and <a href="http://www.theregister.co.uk/content/6/26710.html" title="theregister.co.uk">here</a theregister.co.uk>.<br> <br>



<h2>Re:Gone</h2>
<h3><a href="/user/gnat/">gnat</a> on 2002-08-19T15:16:15</h3>
The good news is that their FTP site is still live.  The bad news is that it doesn't give directory listings.  The good news is that I snarfed some paths and filenames from the site while it was live.<p>

I'll give out the code once I figure out how to detect an aborted get().  It seems like every second to third get is bungholed, and I'm not sure why.</p><p>

<i>--Nat</i></p>



<blockquote>

<h2>Re:Gone</h2>
<h3><a href="/user/briac/">briac</a> on 2002-08-20T12:50:51</h3>
<p>Perhaps you could use the <code>$ua-&gt;request($req, $callback)</code> variant to detect aborted downloads. I use something like this:</p> <blockquote><div> <tt>my ($bytes_read, $total_size);<br>my $res = $ua-&gt;request(<br>&nbsp; &nbsp; HTTP::Request-&gt;new( GET =&gt; $url ),<br>&nbsp; &nbsp; &nbsp; sub {<br>&nbsp; &nbsp; &nbsp; &nbsp; $bytes_read&nbsp; += length( $_[0] );<br>&nbsp; &nbsp; &nbsp; &nbsp; $total_size ||= $_[1]-&gt;content_length;<br>&nbsp; &nbsp; &nbsp; &nbsp; print ( shift() );<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; );<br> <br>if ( $bytes_read != $total_size ){<br>&nbsp; &nbsp; print "Aborted"<br>}<br>elsif ( $res-&gt;is_success ) {<br>&nbsp; &nbsp; print "Ok"<br>}<br>else {<br>&nbsp; &nbsp; print $res-&gt;status_line<br>}</tt> </div></blockquote>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

