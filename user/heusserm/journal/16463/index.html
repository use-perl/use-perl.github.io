<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of heusserm: Net::Ftp.pm</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Net::Ftp.pm</h1>
<h2><a href="/user/heusserm/">heusserm</a> on 2003-12-22T18:45:09</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>So, I've got some code that uses Net::Ftp.pm.<br/><br/>Now and again, I have to transfer really really big files.  The whole system is automated, but it hangs and dies on a call to $ftp->put($filename). <br/><br/>So, the app dies, the sysadmin re-starts it, and it starts over again, transmitting the same file, hangs and dies.  Never gets to the rest of the files, some of whom go to FTP sites that actually, you know, work.<br/><br/>I'm thinking of refactoring the code so that it just reports error instead of die-ing. Then it can process the ones that might work, and then come back and try again with the big file that only works rarely.<br/><br/>To do so, I'm planning on wrapping an eval block around the offensive code, and checking $@ to see if the call 'dies.'<br/><br/>Does this sound like a good approach?<br/><br/>regards,<br/><br/></p>


<hr/>



<h2>Net::FTP</h2>
<h3><a href="/user/runrig/">runrig</a> on 2003-12-22T21:58:28</h3>
<blockquote><div> <em>To do so, I'm planning on wrapping an eval block around the offensive code, and checking $@ to see if the call 'dies.'</em><p><em>Does this sound like a good approach?</em></p>
 </div></blockquote>
There's no rule that says you have to stop the program if one file transfer fails, so yeah, that's how you can do it. Remember to include <code>$ftp-&gt;message</code> in the error message. Does a command line FTP of the same file to the same site work?





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

