<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of grinder: Stalling the pipeline in the checkout queue</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Stalling the pipeline in the checkout queue</h1>
<h2><a href="/user/grinder/">grinder</a> on 2002-08-25T22:07:37</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I was in the supermarket the other day after work. I had a number of essentials in my basket and I was itching to get home.</p>
<p>Big problem: which queue to choose? Having learnt about Queuing Theory at school, and knowing that single queue-multiple consumer is as efficient as it gets, it's always an agonizing decision. You have to balance a number of factors: how many people in the queue, how many items do people want to buy, do they look impatient or vagued out. It's better to be behind a person buying 10 of one thing, than one item of ten different things. And, although it pains me to admit it, old people are Bad News. Statistically, you'll waste 30 seconds to five minutes with them in front of you.</p>
<p>So I was pondering this the other day, and reflecting on my worldview, how I tend to algorithmatise things (figuring out the shortest path between the four shops I need to go to, establishing contigency plans in case a shop doesn't have a product I need, that sort of stuff. When house-cleaning I try to keep my hands full. I hate going into room A to fetch something for room B, and realising there was something in room B which should be tidied away in room A). Geeking out, basically.</p>
<p>And as I stood there ruminating on this, I was idly watching the woman at the front of the line, and became more and more alarmed. She was just stacking up the products that the cashier swiped...<i>but not putting them into bags.</i> I couldn't figure out what she was doing, but figured it was bad news for me. And on and on it went, until the cashier had checked out every last item. Then she handed over her credit card, had it swiped, punched in her pin, and only once she had received her docket did she begin to bag up the stuff she'd bought. And I thought "You f5cking moron: can't you deal with asynchronous events?" Because the cashier couldn't start checking out the items of the next person until she'd cleared the decks. Which took a non-trivial amount of time, during which no other work could be done.</p>
<p>Meantime I note that the people who were at the  ends of the other queues are now close to being served, and I've still got two people in front of me. But I'm in too deep at this point to bear the cost of cutting my losses and requeuing on another line.</p>
<p>The next person went through without a hitch: a few items, had cash ready, out straight away.</p>
<p>Then the person in front of me went through. Seemed to be okay: started bagging up the goods as soon as they came through, but she had a fair number of things to buy. Then it turns out that she has a Method. All the fruit goes together, the  stuff that requires Refrigeration goes together, tins kept apart from packets and so on. And the cashier is done quickly and announces the price. But does she do anything? Noooooooooo! She just keeps putting stuff in bags. And the cashier, who is polite (the Customer is always Right and all that) says nothing.</p>
<p>At this point I just take a deep breath and resign myself. The people who were at the ends of the other queues are all long since gone. At times  like this I can't help thinking that a lot of what we learn in Computer Science is applicable to the Real World. And one of the cardinal sins is stalling the pipeline. When you have people queued up to do something, you want to get in and get out as fast as possible, just like an instruction on a  CPU. Because wait states are just time lost. Gone, never to come back.</p>
<p>I really, <i>really</i> hate when that happens.</p></p>


<hr/>



<h2>Check(out)mated</h2>
<h3><a href="/user/chaoticset/">chaoticset</a> on 2002-08-26T02:25:37</h3>
The thing that truly irritates me is the way that most people think that life's better if you just kind of doddle along, letting things <em>happen</em> to you, and how dare you try to get on with your life at the expense of moving <em>around</em> them.
<p>
I can't live like that, and I can't really understand how people even try.  Every once in a while someone will say, "Stop doing things, just <em>relax</em>."  I have a tendency to come back with the Erdos answer "There will be time to rest in the grave."
</p><p>
I don't know.  Maybe some people don't value their time or their life.  I'm not one of them, I know that.</p>



<h2>How to Pick the Right Queue</h2>
<h3><a href="/user/Mr. Muskrat/">Mr. Muskrat</a> on 2003-09-25T20:53:18</h3>
<p>Let me start by saying that it is never easy!</p>
<p>View each queue and make mental notes as to the following:
</p><ol>
<li>How many people are in each queue?</li>
<li>What are their ages?
  <ul> <li>Older people are slower*.  As the body (and mind) get older, people slow down.</li></ul></li>
<li>What are their sexes?
  <ul> <li>Women are slower*.  Why?  Most women are more cost conscience and therefore watching the price as each item is rung up (and correcting the cashier when there are mistakes).</li></ul></li>
<li>Are they married or single?
  <ul> <li>Check for a ring**.  Married people are slower*.  Why?  Wives make sure that their husbands are more cost conscience.  (See #3.)</li></ul></li>
<li>How many items does each person have?
  <ul> <li>More items does not necessarily mean slower.</li></ul></li>
<li>What types of items does each person have?
  <ul> <li>Big items are heavier and therefore take longer to scan.</li>
      <li>Can goods are the fastest items for someone to have*.</li>
      <li>A guy with feminine hygiene items should be considered married for queue choosing purposes.</li>
  </ul></li>
</ol>

<p>There are many more rules that I use but I have doing this for quite a while now.  (Having worked in a grocery store helped considerably.)  You will develop your own set of rules as time goes on.  It takes years and years of practice.  Even then, it is not an exact science.  You will still get stuck in slow queue from time to time.</p>
<p>* Generally speaking.</p>
<p>** I know that it is not a perfect solution but the items that they have will help as well.</p>



<blockquote>

<h2>Re:How to Pick the Right Queue</h2>
<h3><a href="/user/runrig/">runrig</a> on 2007-09-29T15:21:14</h3>
<p><blockquote> <div><em>Check for a ring**. Married people are slower*. Why? Wives make sure that their husbands are more cost conscience. (See #3.)</em></div> </blockquote>
I'm usually cost conscience <em>before</em> getting to the checkout. After which I can't remember what the price of something is. If I think it should've been cheaper (and I think it's worthwhile), I'll go check the price myself after checkout, and if I'm right, I'll bring it to customer service where you get a FULL REFUND for the item(s) (that's the policy<nobr> <wbr></nobr>:-). My favorite was when several pounds of meat were on sale but rang up a full price, and I wasn't sure at first if I bought the right cut. Hmm, maybe you are right though...I think on that one I did say during checkout, "Hey, if that's not on sale, I think I'll put it back".





</blockquote>


<h2>SIMD</h2>
<h3><a href="/user/ChrisDolan/">ChrisDolan</a> on 2007-09-29T01:38:12</h3>
That was a very amusing and interesting read.  Your mind works a lot like mine, apparently.  My solution is SIMD -- amortize the time spent in line by buying more food at once.  I go grocery shopping as infrequently as I can bear and fill my cart as much as it can bear, or sometime two carts if the whole family comes along.<br><br>Time of day matters too.  At night, the ratio of customers to cashiers is much higher.  Although the total number of customers is smaller so the shopping is easier, the longer time spent in line dominates and makes the experience less pleasant.<br>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

