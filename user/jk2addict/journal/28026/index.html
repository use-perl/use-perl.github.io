<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jk2addict: Path::Class and translating paths</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Path::Class and translating paths</h1>
<h2><a href="/user/jk2addict/">jk2addict</a> on 2005-12-16T15:52:03</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>This seems like an easy thing, but it's driving me bonkers. I've been working on a photo gallery app for Catalyst. One of the 'features' I discovered last night was that when I uploaded a file on Windows to the Unix server, file($file)->basename was giving me the whole file name, not just the base name for the windows files.<br/><br/>Given the power of Path::Class and File::Spec, I thought surely there was a better way. But I haven't found it yet.<br/><br/>There is foreign_file and as_foreign, even new_foreign. They all assume that I know the source file system. When uploading files over the web, I don't.<br/><br/>Now sure, I could do some hackery pokery to sniff the user-agent, or sniff the filename for / or \ or : or ::, but that's bad. That's why we have the magic that is Path::Class/File::Spec to begin with.<br/><br/>Maybe there should be a from_foreign() that does the sniffing magic and converts the output to the native fs on which it's running?</p>


<hr/>



<h2>Can you use URI::File?</h2>
<h3><a href="/user/jjn1056/">jjn1056</a> on 2005-12-20T15:24:18</h3>
I do a lot of development across Windows and Unix boxes and have found URI::File to really help even out the path deliminator issues.  However I am just learning Catalyst and am not so familiar with the classes you mentioned so I am not sure my advice will help.<br/><br/>BTW, Something else you should watch out for is that on UNIX the current working directory is set to the path of the script, but on windows it's set to the location to wherever perl.exe is.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

