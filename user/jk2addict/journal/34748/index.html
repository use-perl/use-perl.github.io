<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jk2addict: Ubuntu Networking Borken</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Ubuntu Networking Borken</h1>
<h2><a href="/user/jk2addict/">jk2addict</a> on 2007-10-25T03:30:24</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I swear Ubuntu networking is broken somehow, and for the life of me, I can't figure it out.<br/><br/>Back on my old laptop I have Ubuntu 7.10 and a Dlink wireless card that uses the Atheros madwifi drivers. No matter what I try, large downloads in firefox/wget/fetch, etc just hang. The bitrate starts our grap, then nose dives into nothing. Same goes for uploads to Flickr. If I implement rate limiting on the upload, or on the downloads using the --limit-rate in wget, if works, and stays working.<br/><br/>This happened when I connect to either of my two wireless routers. Never a problem on XP.<br/><br/>Now that I have the new Macbook pro, I'm running Parallels and an instance of Ubuntu 7.10, which now sees network as a Realtek wired connection. Yet again, large downloads bitrate nosedives, then hangs. Of course, downloads in OSX, and XP and even FreeBSD on the same book speed along just dandy without these sorts of problems.<br/><br/>In a nutshell, what in the hell is going on here? I have no idea, and any posts to the Ubuntu forums go unanswered.<br/><br/>What an oddball issue.</p>


<hr/>



<h2>MTU problems?</h2>
<h3><a href="/user/grinder/">grinder</a> on 2007-10-26T13:34:20</h3>
<p>Those symptoms sound like path MTU discovery going bad, and you send a full-sized packet that gets fragmented, and somewhere a router has the DF bit set. Or something like that, it's been a while.</p>

<p>The problem is that when you fling small packets around you never reach the upper limit that causes bad things to happen. So pings and this and that go fine. It's only when you start sending big packets that things go bad.</p>

<p>In short, try dropping the MTU on the interface down by 50 byte increments and see if throughput improves. If you wind up having halved the MTU, then it's something else, so you may as well go back to where you started from and try something different.</p>



<blockquote>

<h2>Re:MTU problems?</h2>
<h3><a href="/user/jk2addict/">jk2addict</a> on 2007-10-26T20:50:31</h3>
Good call. I'll give that a shot. I guess my next question is: why Ubuntu and not XP/OSX? Maybe their wireless drivers auto adjust better than madwifi.



<h2>Re:MTU problems?</h2>
<h3><a href="/user/jk2addict/">jk2addict</a> on 2007-10-27T00:36:48</h3>
Nope. Didn't make a crap of different. I did check OSX. The mtu is 1500 over wireless.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

