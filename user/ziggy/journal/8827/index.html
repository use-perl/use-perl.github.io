<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ziggy: Upgrading and Downgrading</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Upgrading and Downgrading</h1>
<h2><a href="/user/ziggy/">ziggy</a> on 2002-11-07T21:24:56</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Before I send my iBook back for repairs, I want a working laptop that I can use for the week it's away.  I have a nice thin x86 laptop that I've been meaning to install FreeBSD on since I got it over a year ago.
<p>
Since I'm not relying on this machine anymore, now is as good a time as any to reformat the hard drive and start anew.  Sadly, the current versions of FreeBSD (4.6.x/4.7) don't support my PCMCIA cards (CardBus), nor do they support the seemingly quirky APM Bios I have (<tt>/dev/apm</tt> is supposedly broken).  FreeBSD 5.0 might be the answer here, but it's not supposed to be "ready" until later this year.
<p>
After spending a few hours getting this laptop nicely configured, I trashed the FreeBSD installation in search of something more suitable.  Because laptop hardware support tends to be better with Linux, I chose to install <a href="http://www.gentoo.org/">gentoo</a>.  The installation process isn't exactly smooth yet; the current release is 1.4_rc1 (and hasn't been updated for a good few weeks), but the installation instructions seem to focus on 1.2.
<p>
A few things I learned during the installation:
<ul>
<li>Don't try and install over a wireless ethernet connection; the docs and stage1 CD don't match.  (Plus, it doesn't look like my hardware was supported by the stage1 CD).  Instead, use the built-in ethernet that's probably on your motherboard already.</li>
<li><tt>portage</tt> isn't exactly 100% in sync.  There were a few ports I tried to install that wouldn't compile for one reason or another.  Thankfully, there are multiple versions of many ebuild scripts, so manually building one version earlier or later did the trick.  (I think I had to use a previous ebuild script for gtkperl, tetex and vim.)</li>
<li>Installing and configuring gentoo takes a <i>loooong</i> time, because you're compiling <i>everything</i> from source.  I actually prefer doing this, but I didn't used to compile so many packages all at once.  (I typically start a fresh FreeBSD installation with packages and then upgrade via ports.)</li>
</ul>
So far, everything is working fine.  It didn't take much effort to build a workable system from scratch, but working around a few of the glitches did take some sleuthing.
<p>
The most striking thing about this installation is that my desktop looks pretty much like it did 5 years ago (and 5 months ago) when I was using WindowMaker on a daily basis.  A few months of using Mac OS X, and this setup feels ancient and cumbersome.</p>


<hr/>



<h2>Gentoo</h2>
<h3><a href="/user/Matts/">Matts</a> on 2002-11-07T23:07:27</h3>
I just can't bring myself to the idea of using gentoo. The idea that you compile it for yourself seems fine if there were 30 people each using different CPU's, but the fact is that there are 5 million people using P4's and 10 million people using P3's, and 2 million people using AMD's, and so on. It just doesn't seem worth it to me to extend the installation time so much for all those people.<br> <br>The install time probably isn't so bad for people using Gnome apps, but for those using KDE it must be significant. Compiling C++ apps takes forever with gcc, and for me that translates directly into time I'd rather be actually *using* the app, not waiting for it to build.<br> <br>So I feel there has to be a better way - build a distro like gentoo but let there be pre-compiled (but optimised) binaries for your particular platform distributed for everyone.<br> <br>Of course this is pure rant + speculation, because I have no solid solution to this. I'm just bemoaning the loss of time it takes to get gentoo up and running in an optimised manner.



<blockquote>

<h2>Re:Gentoo</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2002-11-08T00:10:19</h3>
<blockquote><div> <i>
The install time probably isn't so bad for people using Gnome apps, but for those using KDE it must be significant. Compiling C++ apps takes forever with gcc, and for me that translates directly into time I'd rather be actually *using* the app, not waiting for it to build.
</i> </div></blockquote>
Oh, boy do I feel that now.  KDE has been compiling for about a day now.  I forget what I installed that got X installed, but I'm running WindowMaker again at the moment with rxvt until KDE is ready.  Even then, I'm not sure how much of KDE I'll be using...
<p>
Of course, I found out about <tt>emerge -b</tt> a little *too* late.  I have a sneaking suspicion that I'll get the gentoo build set up, and wipe the disk clean for one reason or another.  I do <b>not</b> want to spend a week downloading and compiling again if I return to gentoo.  (I've already saved all of<nobr> <wbr></nobr>/usr/portage elsewhere; all that's left is to figure out how to make packages out of what's installed instead of recompiling them.)
</p><blockquote><div> <i>
So I feel there has to be a better way - build a distro like gentoo but let there be pre-compiled (but optimised) binaries for your particular platform distributed for everyone.
</i> </div></blockquote>
Perhaps.  I just remember the early days of RedHat when they'd ship distributions that couldn't self-host, and srpms that couldn't build the rpms they distributed.
<p>
Also, once you count the number of platforms and configurations out there (various mutations of x86, dozens of OS choices on SPARC, PA/RISC, PPC, Mac OS X, etc.) then it's a huge burden on a distributor or a maintainer to compile, test, check, distribute and maintain every possible combination.  Doubly so when you factor in multiple incompatible file system and configuration setups with many popular Linux distributions.
</p><p>
So I'm not exactly sure that letting a thousand precompiled binaries bloom is One True Solution.  Especially when software gets updated so frequently.  Then again, if there ever was a time for that approach, it would be today, with 120GB disks and broadband pipes becoming increasingly common...</p>



<blockquote>

<h2>Re:Gentoo</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2002-11-08T06:55:49</h3>
<p>
Internet-distributed <a href="http://ccache.samba.org/" title="samba.org">ccache</a samba.org>?
</p>
<p>
(I can't believe I just said that.)
</p>



<h2>Re:Gentoo</h2>
<h3><a href="/user/pdcawley/">pdcawley</a> on 2002-11-08T07:30:27</h3>
I think the 'customized optimization' thing is something of a red herring. The Gentoo approach tends to mean that you compile the system the way <em>you</em> want it, in terms of the kinds of packages you want to install.<br> <br>Take a look at an an average ebuild, say XMMS, and in the DEPEND specs you'll see a bunch of lines like:<blockquote><div> <tt>mikmod? ( &gt;=media-libs/libmikmod-3.1.6 )<br>esd? ( &gt;=media-sound/esound-0.2.22 )<br>xml? ( &gt;=dev-libs/libxml-1.8.15 )<br>gnome? ( &lt;gnome-base/gnome-panel-1.5.0 )<br>opengl? ( virtual/opengl )<br>oggvorbis? ( &gt;=media-libs/libvorbis-1.0_beta4 )</tt> </div></blockquote>Those are optional dependencies and they're the <em>really</em> good thing about Gentoo. If I want a system without, say gnome, then I can say so, and when I go to build anything that could be configured with a <code>--with-gnome</code> switch, it'll be configured using <code>--without-gnome</code> instead. On the other hand, if I do want oggvorbis, but haven't installed it yet, then installing XMMS will force a fetch and compile of the oggvorbis support tools.<br> <br>Once you freeze something into a binary package, you magically freeze its dependencies too, and those dependencies are going to be wrong for a large subset of the folks who want to use it.



<h2>Re:Gentoo</h2>
<h3><a href="/user/Matts/">Matts</a> on 2002-11-08T12:58:58</h3>
<blockquote><div> <i>Also, once you count the number of platforms and configurations out there (various mutations of x86, dozens of OS choices on SPARC, PA/RISC, PPC, Mac OS X, etc.) then it's a huge burden on a distributor or a maintainer to compile, test, check, distribute and maintain every possible combination. Doubly so when you factor in multiple incompatible file system and configuration setups with many popular Linux distributions.</i> </div></blockquote> <br> <br>You're thinking in terms of ftp or http hosting though. Do it p2p. I think it's easily the best use of p2p possible.



<blockquote>

<h2>Re:Gentoo</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2002-11-08T16:33:15</h3>
<blockquote><div> <i>
You're thinking in terms of ftp or http hosting though. Do it p2p. I think it's easily the best use of p2p possible.
</i> </div></blockquote>
Yes, specifically because there needs to be a level of trust between the user and the "distributor".  That's why I tend to use RPMs from one of two places when tweaking a RedHat installation -- either they come from RedHat, or they come from the project itself (e.g. MySQL).  Part of that is because I don't trust Joe's Garage and RPM Cellar to make precompiled software that I can trust and will run as expected on my system.  (Trojans are an issue, but coredumps and such are more of an issue.)
<p>
As piers points out, the OS+Architecture is only one set of dimensions that need to be addressed.  Software configuration is another set of issues.  (There used to be 32 different and somewhat incompatible ways to build Perl <i>on any particular platform</i>; the number has probably gone up recently, but I forget what the actual figure is today.)
</p><p>
P2P isn't an answer to the problem of geometric complexity.  But it is an answer to global distribution of a large amount of that complexity.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

