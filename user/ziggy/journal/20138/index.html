<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ziggy: Parrot and Tcl, revisited</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Parrot and Tcl, revisited</h1>
<h2><a href="/user/ziggy/">ziggy</a> on 2004-07-29T22:20:18</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Yesterday, after I <a href="http://use.perl.org/user/ziggy/journal/20117">wrote up</a> some observations why Tcl and Parrot weren't necessarily the best fit for each other, I talked to Jeff Hobbs (<b>The</b> Tcl Guy).

<p>

We had a very good chat.  Turns out that I am mistaken.  My understanding of the Tcl world is heavily focused on legacy apps -- the kind of stuff that's running in the Tcl analog of 5.005 or 5.6.x, and will never be upgraded.  There's an entirely different world that's living in the 8.x series of releases.  Although some Tcl projects <i>may</i> rely on the characteristics of the Tcl implementation, Tcl releases since 8.0 have had macro shims (the "Tcl stubs" interface) that <i>look</i> like direct C calls, but are actually wrappers that add a layer of indirection.  So porting Tcl code that uses C code that uses exported Tcl functions in C should be a simple case of updating the stubs <i>once</i> to run on top of Parrot.  Not only would a port to Parrot be advantageous, but updating the shims should be a small amount of work.

<p>

Pretty damn nifty, that.

<p>

And it gets better.  Back in the bad old days, Perl/Tk involved some herculean efforts by Nick Ing-Simmons to glue Tk to Perl without using an intermediate Tcl interface.  That's because the only real Tcl interface involved stuffing strings into the Tcl parser to push Tk to do stuff.  The new (since 8.0, in use ~7 years now) Tcl_Obj interface provides C-level access to Tcl primitives and completely circumvents the bad old way of creating strings for Tcl to evaluate as Tcl scripts -- for <i>every</i> operation.  Jeff has released bindings that talk to the Tcl APIs directly to poke Tk without messing with double interpretation or Nick's herculean efforts.  The best part is that it is much faster and has a lot less memory overhead.

<p>

Pretty damn nice, that.</p>


<hr/>



<h2>Tcl is nice</h2>
<h3><a href="/user/zatoichi/">zatoichi</a> on 2004-07-30T23:46:22</h3>
Tcl is a really good dynamic language and the people involved are super. The thing I wish is the the Tcl_Obj interface would make it into the mainstream so that we can keep Perl/Tk on par with Tcl/Tk. Even Python has a more up-to-date Tk implementation.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

