<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of rjbs: padwalking, paperwork, and productivity</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>padwalking, paperwork, and productivity</h1>
<h2><a href="/user/rjbs/">rjbs</a> on 2005-03-29T21:09:23</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>First, a question.  When I run this code:
<pre>
use Data::Dumper;
use PadWalker qw(peek_my);
{
  my $lex = "HELLO";
  sub pad {
    my $l = shift;
    warn Dumper(peek_my($l));
    print "While you're here, I'll print my enclosed scalar: $lex\n";
  }
}
pad(0);
</pre><br/><br/>Why does it tell me that $lex is a reference to undef?  No one had an answer for me.  I don't really understand pads very well.<br/><br/>OK, that's that.  Work today was slow.  I worked to put together the framework for the "last" part of the Big Hateful Project, and got a few things converted from the RJBSORBMS to Class::DBI, which was a good thing to do.  Tomorrow I'll start canonizing test data and writing scripts to rebuild pristene test databases.  Then I can start writing tests for this last phase of stuff.<br/><br/>I'm unable to feel enthused about it.<br/><br/>At the end of the day, I needed to put together some example flow charts for some changes I want to make in our quality (ISO 9001) system, and got distracted by some other OmniGraffle work I wanted to do.  I have this simple todo list that I use at work, and I wanted to make a companion form listing what I'd accomplished.  The to do list is anything I need to do.  "Call Joe back" or "reboot inbtcfmailwindows1" are valid entries, even though they take no time.  I wanted something that would show me, hour by hour, how I spent my life.  I produced the form, and struggled for a while trying to get OmniGraffle to print both forms side by side on one piece of paper.  I couldn't get it to work.<br/><br/>Right now they're both about five and a half by eight inches, and I have them on a half-size clipboard.  Having two sheets, though, means that I can't see both at once.  I might combine the forms and use a full-size clipboard.  I need to think about it and see how it goes as is.<br/><br/>I'll post the forms soonish.  So far, the to do list has served me well.<br/><br/>I'm hoping that I will be horrified at seeing how many waking hours get NOTHING written next to them, and that this will force me to do more.<br/><br/>One thing I /did/ do recently was proofread half of the forthcoming pVoice manual.  pVoice is Jouke Visser's free speech-for-the-handicapped software. It provides the neediest people with the ability to communicate, and it does it for free.  It makes me feel proud of free software and the Perl community, and (of course) Jouke specifically.  I'm happy just to help out a little.<br/><br/>This morning I installed pVoice on my workstation and toyed around with it. Very neat stuff!<br/><br/>Oh, and finally: my replacement DVD drive for my Xbox came.  The Xbox now boots, but won't play games.  I've emailed Llama to ask how I can return the disk, and what else I should try.  Research is suggesting that the hard disk is keyed to the motherboard's eeprom, so I can't swap it.  I may need to borrow a memory card and transfer the files from the old Xbox to a new Xbox.  Thanks a lot, Redmond! </p>


<hr/>



<h2>Works here...</h2>
<h3><a href="/user/phillup/">phillup</a> on 2005-03-29T22:22:59</h3>
<i>Why does it tell me that $lex is a reference to undef?</i> <blockquote><div> <tt>$<nobr> <wbr></nobr>./padtest.pl<br>$VAR1 = {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '$lex' =&gt; \undef,<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; '$l' =&gt; \0<br>&nbsp; &nbsp; &nbsp; &nbsp; };<br>While you're here, I'll print my enclosed scalar: HELLO</tt> </div></blockquote>Had to add the shebang... but that was the only change I made.<br> <br>This is on Debian with Perl 5.8.4



<blockquote>

<h2>Ignore me, I'm stupid</h2>
<h3><a href="/user/phillup/">phillup</a> on 2005-03-29T22:24:51</h3>
OK, I get it now... you mean the Data::Dumper printout.<br> <br>Sorry, I was looking at your printing the value $lex.





</blockquote>


<h2>is this more what you expected</h2>
<h3><a href="/user/link/">link</a> on 2005-03-29T23:29:16</h3>
<blockquote><div> <tt>use Data::Dumper;<br>use PadWalker qw(peek_my);<br>{<br>&nbsp; my $lex = "HELLO";<br>&nbsp; sub pad {<br>&nbsp; &nbsp; my $l = shift;<br>&nbsp; &nbsp; warn Dumper(peek_my($l));<br>&nbsp; &nbsp; print "While you're here, I'll print my enclosed scalar: $lex\n";<br>&nbsp; }<br>}<br>pad(0);</tt> </div></blockquote>t sure what your expecting to see <br>Based on Persistent Private Variables in perlsub it sounds like the problem is the pad sub is getting created at compile time and my is happening at runtime and this leads to the sub picking up a reference to $lex too early. This explanation is almost certainly flawed as its printing $lex correctly; Hopefully someone more cluefull with rescue us now.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

