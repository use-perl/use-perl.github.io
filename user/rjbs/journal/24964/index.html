<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of rjbs: fixing my playlists with applescript</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>fixing my playlists with applescript</h1>
<h2><a href="/user/rjbs/">rjbs</a> on 2005-06-01T01:10:08</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>So, some time ago I ranted about how happy I was with my Radio RJBS playlists. Basically, I have a playlist that's always eight hours of three-star music and sixteen hours of four- or five-star music.  It's all "regular music," which by my definition is something like "not a musical, not noise, not spoken word, not classical."  (My "Classical" genre, I admit, is really more like "music composed before 1900.")  All the songs are selected by recency of last playing: less recently played songs are chosen over more recently played songs.<br/><br/>At some point, I realized that because I had sometimes gone on binge days of rating single artists, I ended up with that artist's last play dates clumped together.  For some reason, I decided that the best way to fix this was by clearing the last played dates.  This wasn't a horrible idea, since iTunes seems to have gotten over its old problems with sorting.  It used to be that given ten songs that couldn't be sorted by your given criterion, it would sort by name.  I believe it now picks a distributed sample, but I haven't bothered really researching this.  It just seems better than it used to.<br/><br/>Anyway, given that I have a huge amount of certain artists, they started showing up in big clumps again.  I was hearing nearly all Elvis Costello, DEVO, and Tom Waits.  This wasn't so bad, but it meant that I'd always have these songs clumped together.  (To some extent, this problem is fated to exist, as I've defined the playlists, but it needn't be so bad.)<br/><br/>On the bus on the way home, I brushed off my AppleScript and put a script together to distribute a selection of songs randomly across a given period of time.  My first pass at this was hilarious, because I couldn't remember the silly AppleScript way to get a random number, and settled for building a list and using "some."  It was great.<br/><br/>Anyway, here's what I settled on:<br/><br/>	set earliestDate to date "Tuesday, March 1, 2005 00:00:0 "
	set latestDate to date "Monday, May 30, 2005 00:00:0 "
	set totalRange to latestDate - earliestDate<br/><br/>	tell application "iTunes 4.8"
		set selectedSongs to selection
		repeat with song in selectedSongs
			set played date of song to earliestDate + (random number from 1 to totalRange)
		end repeat
	end tell<br/><br/></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

