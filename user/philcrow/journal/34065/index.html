<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of philcrow: Java to Perl Wrap-Up</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Java to Perl Wrap-Up</h1>
<h2><a href="/user/philcrow/">philcrow</a> on 2007-08-09T21:51:07</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
My life is full of news.  So full I haven't even had time to tell all the relevant people about it.  That includes those in the Perl community interested in my work on Java::Javap a Java to Perl 6 API translator.
</p>
<p>
Just in time for OSCON, I released version 0.04 of Java::Javap to CPAN.  The module name comes from the Java development kit decompilation tool called javap.  If you have that installed on your machine (and in your path), Java::Javap will translate .class files into corresponding Perl 6 .pm files which stub out the API of the Java module.
</p>
<p>
End users will be most interested in the command line tool java2perl6 (which someone pointed sounds like a lopsided world cup score with our favorite language having the better of it).  Using the tool can be as simple as:
</p>
<code>
java2perl6 java.sql.Connection
</code>
<p />
<p>
That would create Connection.pm in the current directory.  There are flags to control where the output lands and whether it falls into a normal directory hierarchy.  The POD for the script has details and examples.  If you add the -r (a.k.a. --recurse), java2perl6 will keep track of Java types encountered as super class types, return types, and method argument types and recursively translate their APIs as well (common types are skipped).
</p>
<p>
Those interested in details should read on for some of them.  There are three phases to the translation.  The first one just uses javap to decompile the requested class.  The second uses a Parse::RecDescent grammar to parse the javap output into a simple (for some definition of simple) tree.  The third phase takes the tree and makes output.  java2perl6 takes a command line flag -g (a.k.a. --genwith) as the name of an output generator.  All of these must live in the Java::Javap::Generator:: namespace.  The POD for Java::Javap::Generator explains the API generators must implement.  The test scripts have examples of the parse tree structure.
</p>
<p>
During this project, I only wrote one generator and it makes perl 6 output.  It is Java::Javap::Generator::Std and uses Template Toolkit.  Other generators are possible and the output is entirely up to their authors.  For instance, it would not be that hard to generate Python (shudder).
</p>
<p>
I would like to thank the Perl Foundation for making the grant that supported this work; Jesse Vincent who coordinated the TPF end; Tim Bunce for suggesting the project, urging me to apply for the grant, and for his support, suggestions, and patches.  Tim also gave a lightning talk at OSCON about this project, I thank him for that effort as well.
</p>
<p>
While I had hoped to write the code for this project in Perl 6, I am pleased with the result which is all in Perl 5.  Comments, suggestions, questions, and patches are all welcome.
</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

