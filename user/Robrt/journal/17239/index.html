<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Robrt: perl.org: now more absorbent</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>perl.org: now more absorbent</h1>
<h2><a href="/user/Robrt/">Robrt</a> on 2004-02-06T04:50:18</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Yesterday we started absorbing mydoom instead of bouncing them.  In around 24 hours, our main MX server for perl.org/cpan.org absorbed 1.3 GB of mydoom.  That's 41083 messages.  Or, 1710 an hour.  Or, 29 a minute.  Or, about one Mydoom every 2 seconds.  Ouch!</p>
<p>In addition, we absorbed 354 MB of bounces, in 17394 messages.  (One bounce every 5 seconds or so.)</p>
<p>The good news is that things seem to have stabilized.  We have the machines configured such that they are no longer pegged to the wall.  Occasionally a burst of mail will make them lean a little, but they're handling just fine.  Mail is moving at full speed, transiting our system in seconds, instead of minutes or hours.</p>
<p>I hope the flow of mail slows soon - even though we are putting plans in place for more servers - I miss the old days, where you could just run sendmail and have it work.</p>
</p>


<hr/>



<h2>2000 mydoom an hour, 2500 bounces an hour</h2>
<h3><a href="/user/merlyn/">merlyn</a> on 2004-02-06T12:30:17</h3>
At the peak, the machine running stonehenge.com/geekcruises.com was getting 2000 mydoom per hour.  I think it's slowed a bit, but the virus notifications are the worst.



<h2>configuration changes</h2>
<h3><a href="/user/WebDragon/">WebDragon</a> on 2004-02-06T16:08:28</h3>
not knowing a whole lot about mailserver configuration, I'd be very interested in knowing specifically what changes you had to make to the system in order to detect-and-absorb the mydoom stuff without also getting false-positives in the process. I mean, even spamassassin misses a few, or is overzealous on rare occasions.<br> <br>And, if you've managed a 100% solution, a config file diff might also go a long way towards helping other admins (who also are not mailserver gurus<nobr> <wbr></nobr>:) do the same and thus further reduce the traffic.



<blockquote>

<h2>Re:configuration changes</h2>
<h3><a href="/user/Elian/">Elian</a> on 2004-02-06T16:37:44</h3>
Dunno about perl.org specifically, but <a href="http://www.clamav.net/" title="clamav.net">ClamAV</a clamav.net>  seems to detect MyDoom and its variants. It's what I'm running on my linux-based mailserver as the virus scanner and while there's a bit of lag with new viruses (like any other system, as you need to wait for the signatures to be updated) it's as reliable as anything else I've found. And free, which is nice.



<blockquote>

<h2>Re:configuration changes</h2>
<h3><a href="/user/krellis/">krellis</a> on 2004-02-06T18:20:12</h3>
Actually, in the case of MyDoom, ClamAV had signatures several hours before ANY of the commercial AV vendors.  We've been blocking up to a peak of just over 5000 copies per hour on our mail servers using ClamAV.  It's awesome.





</blockquote>


<h2>Re:configuration changes</h2>
<h3><a href="/user/Robrt/">Robrt</a> on 2004-02-06T18:27:06</h3>
<p>We're using a hacked up <a href="http://develooper.com/code/qpsmtpd/" title="develooper.com">qpsmtpd</a develooper.com> (soon to be rolled back into the main dist).  Basically, we have a rule that matches mydoom, and directs it to a folder.  </p>
<p>The rule is overly liberal right now - getting hit with 2 of these a second, spamassassin and clamav would grind us to a halt.  But that's ok.
</p>
<p>Of the 25000 emails caught in my mydoom filter in the past 13 hours, there are 1322 unique (case insensitive) subject lines.  None of them look like anything someone will miss.
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

