<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ajt: Debian Kernel strangeness</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Debian Kernel strangeness</h1>
<h2><a href="/user/ajt/">ajt</a> on 2005-04-18T14:28:08</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Over the weekend I started to build a scrap computer for someone. It's a real monster, two tiny hard-drives, non-original CPU, CD-ROM, ethernet and RAM, it's all the bits of other computers that didn't get thrown away.</p>

<p>The new Debian Installer wouldn't install properly, it jammed when checking out the hard drives. A real pity as it's very nice for a text installer.</p>

<p>The old Debian Woody installer worked okay, and I was even able to <code>apt-get</code> the minimal install up to Debian Sarge status without any  problems. I switched from LILO to GRUB, and deleted a few old things. However, though it's running Debian Sarge it still has an antique 2.2.20 kernel, so I added a 2.4 and 2.6 kernel to see if they would work.</p>

<p>So far I can't get it to boot with a 2.4 or 2.6 kernel, both fail on the boot sequence when the "Check Partition" starts, neither like the ancient 500Mb hdb that the box has. Kernel 2.2 is perfectly happy though, and with that booted, all is okay.</p>

<p>I don't know what to do next. I'd rather run a more modern kernel, the stock 2.2.20 is harldy modern, optimised, or secure. I can't run iptables on it either, which is one of the things I want to be able to do.</p>

<p>Strange...</p></p>


<hr/>



<h2>Debian strangeness</h2>
<h3><a href="/user/kjones4/">kjones4</a> on 2005-04-18T18:25:25</h3>
What is the CPU in the frankenstein machine? I'm just guessing, but maybe the 2.4/2.6 kernel is compiled for something newer than the CPU can handle.



<blockquote>

<h2>Re:Debian strangeness</h2>
<h3><a href="/user/ajt/">ajt</a> on 2005-04-18T18:56:25</h3>
<p>Thought of that, they 2.2 and 2.6 kernels are stock i386 and the 2.4 kernel is i586. The CPU is a genuine Intel Pentium 133, a 586 processor, which I have run with stock Debian 586 kernels before.</p>

<p>I'm now wondering if it's something to do with the age of the second hard drive. The motherboard is antique but functional, the IDE interface is PIO, no DMA, and the second drive is even older, pre LBA even...</p>



<blockquote>

<h2>Re:Debian strangeness</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2005-04-19T14:49:52</h3>
The newer kernels might be compiled to turn on DMA by default and if so that may be the culprit.



<blockquote>

<h2>Re:Debian strangeness</h2>
<h3><a href="/user/ajt/">ajt</a> on 2005-04-19T15:31:25</h3>
<p>I must admit that DMA was my first guess, but passing ide=nodma doesn't seem to make any difference, I could see that DMA was disabled, but it still failed the partition check.</p>

<p>The problem is I don't know enough about working with a kernels to know what to do next. Another fear is that the drive doesn't do LBA, but that the kernel is assuming it will. Tonight I'm going to read the lable on the drive to make sure that the geometry is correct, it could be something as simple as that...</p>

<p>Even if I don't get it all to work, it's a useful learning experience.</p>





</blockquote>

</blockquote>

</blockquote>


<h2>Knoppix/Mepis</h2>
<h3><a href="/user/gizmo_mathboy/">gizmo_mathboy</a> on 2005-04-19T00:06:49</h3>
I'm lazy and if I'm going to use a debian based distro I will use Knoppix or Mepis LiveCD's for the install. Like I said, I'm lazy.



<blockquote>

<h2>Re:Knoppix/Mepis</h2>
<h3><a href="/user/ajt/">ajt</a> on 2005-04-19T08:15:11</h3>
<p>I did consider this, BUT it's so antique that it can't boot from a CD, it's floppy or hard disk only...</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

