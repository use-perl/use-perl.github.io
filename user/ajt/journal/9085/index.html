<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ajt: SSH Woes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>SSH Woes</h1>
<h2><a href="/user/ajt/">ajt</a> on 2002-11-22T12:52:45</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p><strong>Confession:</strong> I've never used CVS, and my SSH understanding is not as good as it should be. I know the benefits of CVS, and I know not to use Telnet/ftp when I should be using SSH, but I'm still clearly a novice.</p>

<p>For the <a href="http://sourceforge.net/projects/perl-rss">Perl RSS</a> project I offered to do some XHTML, see <a href="http://www.iredale.net/perl-rss/">here</a> for work in progress. brian said it was okay, and I should check it into the project CVS repository and load it to the site.</p>

<p>I've known that SSH clients support PKI technology, but never bothered with it, as I can remember my password for each machine I use, and anyway I tend to login all day, so I don't pop in and out. So for WinCVS I diligently generated my SSH2 keys and installed the public key on some servers at work, and found that it was actually quite useful, and makes <a href="http://www.chiark.greenend.org.uk/user/sgtatham/putty/">PuTTY</a> even more useful. I then tried the same at home, while I waited for SourceFourge to take and process my public keys.</p>

<p>For some reason my home system refuses to use the keys. Running sshd in uber debug mode I can see that it didn't like the ownership of the .ssh folder (even though on the working machines they were also owned by me, i.e. not root). So I changed the ownership of the folder to root and tried again. This time it went though the motions but failed to find a key in the file, and again defaulted to a manual login. When I copied the .ssh/authorized_keys file to root, and tried to login as root, it worked okay!</p>

<p>I've done some Googling, but so far no luck, I suppose I'll just have to actually read <a href="http://www.oreilly.com/catalog/sshtdg/">SSH: The Definitive Guide</a> and figure it out on my own. I know my home system is running the latest SSH server, as I compiled it myself, and I know that PKI is enabled in the config file, and I even know it works if you logon as root, I just want to get it working for me....</p>

<p>While this may sound like doom and gloom, I must say on the whole when I read the instructions carefully, I tend to find Linux/Unix easier to use than Windows, I suppose I've just got to engage brain before I point and click.....</p></p>


<hr/>



<h2>Beware File Formats</h2>
<h3><a href="/user/Dom2/">Dom2</a> on 2002-11-22T13:08:35</h3>
If you generated your private key using puttygen, you can't use it for unix ssh clients.  And you can only use the public key by cutting and pasting from puttygen to ~/.ssh/authorized_keys2.

<p>SSH File Formats are a nightmare.  Everybody does them differently.

</p><p>-Dom</p>



<blockquote>

<h2>Re:Beware File Formats</h2>
<h3><a href="/user/ajt/">ajt</a> on 2002-11-22T13:53:23</h3>
<p>The Keys were generated by puttygen. I'm only using the PuTTY Private keys with PuTTY clients. The latest version can apparently export the keys in other formats, but I've not tried using them with OpenSSH on either Linux or Cygwin yet.</p>

<p>What freaks me out is that the OpenSSH server on my Linux box at home (RH6), allows root to login with the keys but not me, from the same authorized_keys2 file! I can only assume it's something weird in the ownership of the files/folders, and my work systems (running an older OpenSSH version but on RH7.3) are just less picky.</p>

<p>The only Google thing I could find was a SuSE user who discovered that SSH wouldn't read a authorized_keys2 file if it was shared over NFS (I'm not doing that) or if the <a href="http://kmself.home.netcom.com/Linux/FAQs/sshrsakey.html" title="netcom.com">permissions</a netcom.com> were wrong.</p>

<p>I'll try again tonight, by which time SourceForge should have done it's stuff with it's keys and I can try WinCVS - which is what I was supposed to be doing in the first place...</p>



<blockquote>

<h2>Re:Beware File Formats</h2>
<h3><a href="/user/bbcrack/">bbcrack</a> on 2002-11-22T16:21:10</h3>
and permissions.
use ssh -v -v -v to ge tfull debug info





</blockquote>


<h2>Re:Beware File Formats - RESOLVED!</h2>
<h3><a href="/user/ajt/">ajt</a> on 2002-11-22T19:03:08</h3>
<p>Thanks everyone for the input, I'm even investigating Tortoise CVS.</p>

<p>My problem has now been solved.  I logged in via a console and manually started SSH in -d -d -d mode, swicthed to the Win box with the KVM swicth, started PuTTY and switched back. The problem was that my home directory was writable by "group", (there is only me and me as root on the box). I had incorrectly assumed that this was a problem with the ~/.ssh folder, but I misread, and it was my home directory. One little chmod and it's all fixed!</p>

<p>Now I'm back at home I can carry on and see if SourceForge is going to let me in so that I can start work on <tt>brian</tt>'s Perl-RSS web site for him!</p>





</blockquote>


<h2>Check out Tortoise CVS</h2>
<h3><a href="/user/lachoy/">lachoy</a> on 2002-11-22T18:09:53</h3>
at <a href="http://www.tortoisecvs.org/" title="tortoisecvs.org">http://www.tortoisecvs.org/</a tortoisecvs.org> -- it's got a simple SSH client builtin and IIRC instructions for Win32 SF users.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

