<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ajt: Still No Joy With Automated Test Feedback</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Still No Joy With Automated Test Feedback</h1>
<h2><a href="/user/ajt/">ajt</a> on 2004-04-25T20:56:28</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>This weekend I uploaded another version of <a href="http://search.cpan.org/dist/XML-RSS-Tools/">XML::RSS::Tools</a> onto CPAN. I copied some diagnostic code from XML::Simple, so I'd have a better idea of the modules any tester had on their machine, as XML::LibXML and it's libxml2 that it's based on have a complex existance.</p>

<p>As before it worked perfectly on my older machine at home, and I'll test it with my newer machines at work this week. For some reason, some CPAN tester is having problems. The problem is I can't email the person to ask for additional details, and the damn thing works perfectly well on all the machines I have access to.</p>

<p>The code I copied from XML::Simple now gives me an idea of the Perl modules this tester has, and to my surprise they are all pretty recent and up to date. I don't know what the version of libxml2 and libxslt that sit beneath. These libraries are under active development, so odd things happen to the API, things get added and moved around, even the Perl modules have to maintain a blacklist of library versions that don't work with them.</p>

<p>I understand that many people are busy, these tests are automated, and it's nice to get reports, but sometimes - as in this case - it's not very helpful...</p>
</p>


<hr/>



<h2>Is this what your looking for?</h2>
<h3><a href="/user/link/">link</a> on 2004-04-26T08:52:04</h3>
I tried at home last night and all seemed ok but at work this morning it isn't quite so happy. They are both running debian testing(the difference is possibly down to a different mix of cpan/debian modules).<br> <br>I have added prints of $@ to catalog-test.t and the failures seem to be related to entities.<br> <br>not ok 7<br># Failed test 7 in t/catalog-tests.t at line 39<br>#  t/catalog-tests.t line 39 is: ok (!($@));<nobr> <wbr></nobr>:17: parser error : Entity 'pound' not defined<br>lligent news and comment throughout the day from The Guardian newspaper. &pound;<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<nobr> <wbr></nobr>:23: parser error : Entity 'pound' not defined<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &pound; Tony Blair was accused last night of &apos;completely<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<nobr> <wbr></nobr>:29: parser error : Entity 'eacute' not defined<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &eacute; A chilling new message from Osama bin Laden provides<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br>
&nbsp; at blib/lib//XML/RSS/Tools.pm line 416<br> <br>PERL_DL_NONLAZY=1<nobr> <wbr></nobr>/usr/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/config.t t/use.t t/basic-tests.t t/standard-tests.t t/version-tests.t t/filehandle-tests.t t/error-tests.t t/catalog-tests.t t/http-tests.t<br>t/basic-tests.........ok<br>t/catalog-tests.......NOK 7# Failed test 7 in t/catalog-tests.t at line 39<br>#  t/catalog-tests.t line 39 is: ok (!($@));<br>t/catalog-tests.......NOK 8# Failed test 8 in t/catalog-tests.t at line 43<br>#  t/catalog-tests.t line 43 is: ok($output_html);<br>t/catalog-tests.......NOK 9# Failed test 9 in t/catalog-tests.t at line 45<br>#  t/catalog-tests.t line 45 is: ok(($length == 844) || ($length == 1487));<br>t/catalog-tests.......FAILED tests 7-9<br>
&nbsp; &nbsp; &nbsp; &nbsp; Failed 3/9 tests, 66.67% okay<br># Package                        Version<br>#  perl                           5.008003<br>#  XML::RSS                       1.03<br>#  XML::LibXML                    1.58<br>#  XML::LibXSLT                   1.57<br>#  XML::Parser                    2.34<br>#  LWP                            5.76<br>Use of uninitialized value in sprintf at t/config.t line 38.<br>#  HTTP::GHTTP<br>Use of uninitialized value in sprintf at t/config.t line 38.<br>#  HTTP::Lite<br>Use of uninitialized value in sprintf at t/config.t line 38.<br>#  Test::Pod<br>#  URI                            1.30<br>#  Test::More                     0.47<br>t/config..............ok<br>t/error-tests.........ok<br>t/filehandle-tests...<nobr>.<wbr></nobr> ok<br>t/http-tests..........ok<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4/7 skipped: various reasons<br>t/standard-tests......ok<br>t/use.................ok<br>t/version-tests...<nobr>.<wbr></nobr> ...ok<br>Failed Test       Stat Wstat Total Fail  Failed  List of Failed<br>-----------------------------------------------------------------------<nobr>-<wbr></nobr> -------<br>t/catalog-tests.t                9    3  33.33%  7-9<br>4 subtests skipped.<br>Failed 1/9 test scripts, 88.89% okay. 3/103 subtests failed, 97.09% okay.<br>make: *** [test_dynamic] Error 255<br>



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/ajt/">ajt</a> on 2004-04-26T09:39:59</h3>
<p>Most useful. I now know what failed, I just don't know why. This is a significant step in the right direction.</p>

<p>Do you know what the versions of libxml2 and libxslt you have on your machines? There are quite a few versions of these libraries, and they all have their own "issues", independent of the Perl module sitting on top of them.</p>

<p>At home my old Debian stable machine is okay, it runs the <code>no-catalog.t</code> test, it doesn't have catalog support so it doesn't attempt it. At work the catalog tests work fine on:</p>

<ul>
<li>Win32 (ActiveState, and pre-compiled PPMs)
<ul> <li>Perl 5.8.0</li>
<li>XML::LibXML 1.54</li>
<li>XML::LibXSLT 1.53</li>
</ul> </li>
<li>RedHat
<ul> <li>Perl 5.6.1</li>
<li>libxml 20421</li>
<li>XML::LibXML 1.53</li>
<li>libxslt 10012</li>
<li>XML::LibXSLT 1.53</li> </ul> </li>
<li>RedHat
<ul> <li>Perl 5.8.0</li>
<li>libxml 20508</li>
<li>XML::LibXML 1.56</li>
<li>libxslt 10031</li>
<li>XML::LibXSLT 1.53</li> </ul> </li>
</ul>

<p>I'll also have a look at the example XML file, and how catalog support works. It could be some encoding/UTF thing that got changed in Perl 5.8.1. I'll also dig into XML::LibXML/XML::LibXSLT to see what changed in the newer version, the older versions seem okay.</p>

<p>Again, many thanks, most useful help.</p>



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/link/">link</a> on 2004-04-26T12:46:33</h3>
libxml - 2.6.9<br>libxlt - 1.1.5<br> <br>As in general I'm too lazy to build stuff unless debian doesn't provide it I'd say both my working and broken machines have the same versions of libxsl,libxml and perl.<br>



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/ajt/">ajt</a> on 2004-04-26T15:13:00</h3>
<p>I'm quite perlexed. How can it work on one machine but not the other if they are so similar....? You couldn't run perl -V and let me know if there are any differences, and check the locale of both machine, in fact if you can think of any difference between them, that would be most helpful.</p>



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/link/">link</a> on 2004-04-26T15:56:10</h3>
The only difference is for my machine at home I installed the tools tar by hand and only did the dependencies using CPAN.pm but for the work machine I  installed everything using CPAN.pm.<br>Also the machines may not be identical as I keep work more uptodate than home as at home I'm on dialup but at work I work I get to leverage the fact I work for the worlds largest isp.<nobr> <wbr></nobr>:)



<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/link/">link</a> on 2004-04-26T21:53:03</h3>
Not quite the same.<br>The problem seems to be XML::LibXML. 1.56 works but 1.58 doesn't. Which is strange since I need to modify 1.56 ( undeeded externs ) to install and it doesn't pass its make test 100%<br> <br>link@localhost:~/XML-RSS-Tools-0.14$ export PERL5LIB=./blib/lib/:/home/link/cpan/1.56/lib/perl/5.8.3/<br>link@localhost:~/XML<nobr>-<wbr></nobr> RSS-Tools-0.14$ perl test_case.pl<br>link@localhost:~/XML-RSS-Tools-0.14$ export PERL5LIB=./blib/lib/:/home/link/cpan/1.58/lib/perl/5.8.3/<br>link@localhost:~/XML<nobr>-<wbr></nobr> RSS-Tools-0.14$ perl test_case.pl<nobr> <wbr></nobr>:10: parser error : Entity 'pound' not defined<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &pound; Tony Blair was accused last night of &apos;completely<br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br>
&nbsp; at test_case.pl line 15<br>link@localhost:~/XML-RSS-Tools-0.14$<br> <br>where test_case.pl is below ( t/test-0.91.rdf as DATA )<br> <br>use strict;<br>use warnings;<br> <br>use XML::LibXML;<br> <br>my $parser = XML::LibXML-&gt;new();<br> <br>my $rss_string = join( "" ,  );<br> <br>$parser-&gt;load_catalog( "t/catalog.xml" );<br>$parser-&gt;keep_blanks(0);<br>$parser-&gt;validation(0);<br>$parser-&gt;complete_attrib<nobr>u<wbr></nobr> tes(0);<br> <br>my $so_xml = $parser-&gt;parse_string( $rss_string );<br> <br>__DATA__



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/ajt/">ajt</a> on 2004-04-27T07:36:56</h3>
<p>According to the Changes file they didn't change the catalog interface between these versions. Obviously the module has had a lot of activity between these versions, so something else has been changed - could be the old pass behaviour was a fluke, and the new fail behaviour is correct.</p>

<p>I'll ask on the Perl-XML list to see what I can find. Again many thanks for this most useful debugging help.</p>



<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/ajt/">ajt</a> on 2004-04-27T09:17:23</h3>
<p>link,</p>

<p>Andrew Alakozow, on the Perl-XML list, suggested setting the <code>XML_DEBUG_CATALOG</code> environment variable to see if this helps show up a difference. If you have a minute, it would be nice to know if there is a difference between your working and failing machine.</p>

<p>As ever, many thanks for this help.</p>



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/link/">link</a> on 2004-04-27T13:32:53</h3>
Sorry probably wasn't clear. When I got home yesterday I update the libxml2 and libxml2-dev packages to the current debian testing versions. This means both machines have the same versions of the shared libraries. I then ran make test and the machine at home still passed. I pulled the latest version of XML::LibXML from cpan and updated from 1.56 to 1.58. When I reran make test for RSS Tools it now failed. I then installed XML::LibXML 1.56 and 1.58 to seperate directories and could see when I set PERL5LIB to pick up 1.56 make test passed and when set to pick up 1.58 make test failed.



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/ajt/">ajt</a> on 2004-04-27T14:03:54</h3>
<p>Sorry, I see what you mean. If you have time could you re-run the tests with the <code>XML_DEBUG_CATALOG</code> enironment variable set, and see if you get different results with the two different libraries. Something must have changed in XML::LibXML when they went to version 1.58, I just wish I knew what...</p>



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/link/">link</a> on 2004-04-27T16:37:09</h3>
If you want try and debug this I'm on aim as psinnottie. Not sure debugging via journal entries it the best way to go<nobr> <wbr></nobr>;)



<blockquote>

<h2>Re:Is this what your looking for?</h2>
<h3><a href="/user/ajt/">ajt</a> on 2004-04-27T19:15:21</h3>
<p>Wise words, alas I don't use any IM system. I can be reached by email: <code>atrickett at cpan dot org</code>, if you are still willing to dig deeper.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

