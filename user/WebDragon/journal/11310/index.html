<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of WebDragon: the joy and pain of refactored shell scripts.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>the joy and pain of refactored shell scripts.</h1>
<h2><a href="/user/WebDragon/">WebDragon</a> on 2003-03-30T06:40:09</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Well. My first Journal entry. I wonder what else is going to happen here... <tt>:-)</tt> </p>

<p>I've gotten somewhat frustrated with the quota warning system that comes with Red Hat 8, and after spending some time looking through the various quota modules and scripts on CPAN and having tracked down a quota_check.sh script from the web, that originated on Solaris, I've decided to go ahead and try and refactor it into Perl, to see what can be made of it.</p>

<p>Partially I'm doing this as an exercise, and to stretch my knowledge somewhat. I'm not a shell-scripter in the slightest so it's going to be interesting, to say the least. [I've already fallen for Randal's <tt>sh2perl</tt> joke. *sigh* That'll teach me not to <b>read</b> it first. <tt>:-)</tt>] Just trying to figure out <B>why</B> some of the things were done the way they were, as well as what some of the bizarre bash constructs even mean, is bad enough.</p>

<p>I can easily remove all of the stuff that uses <tt>awk</tt>, since Perl can do it all internally anyway. That's one hurdle that'll be fairly straightforward to resolve. The hard part is that it (the shell script) seems to have chain-loaded a rather large pipe sequence into a variable, in several different places in the script, all of which include awk and sub-scripts for it.</p>

<p>Separating out the wheat from the chaff and making it look clean and maintainable, making it scalable, and safe... is going to be the really hard part.</p>

<p>Some of the initial prep was fairly easy, thank goodness and little coders who whipped up <tt>Getopt::Long</tt>. Some of the wild shell case syntax was obviated thanks to this little gem.</p>

<p>Lord only knows where this is going to take me, how long it will take me, and whether or not ultimately it will be generally more useful and pragmatic than what already exists, but it'll be fun finding out. <tt>=:)</tt></p></p>


<hr/>



<h2>sh2perl the earliest Perl joke module/script?</h2>
<h3><a href="/user/oneiron/">oneiron</a> on 2003-03-31T08:16:45</h3>
<p>Long before the Acme namespace was mandated, there were a number of joke modules lurking around -- the lovely David H Adler esq's seminal Semi::Semicolons, for instance. Not certain, but I'm pretty sure sh2perl was the first (I heard an earlier incarnation of it emailed tchrist with a request to convert a shell script to perl).</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

