<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of TeeJay: ooh, search engine fun</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>ooh, search engine fun</h1>
<h2><a href="/user/TeeJay/">TeeJay</a> on 2003-02-21T14:26:10</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Cool it looks like I could build a funky <a href="http://www.perl.com/pub/a/2003/02/19/engine.html?page=2">vector</a> space search engine using the mysql <a href="http://www.mysql.com/doc/en/Mathematical_functions.html">cosine</a> function.
<p>
...that would be quite cool.
<p>
Is it just me that thinks that search engine internals are fun?!?
<p>
</p>


<hr/>



<h2>Scalar vs. Vector</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2003-02-21T16:02:41</h3>
<blockquote><div> <i>
Cool it looks like I could build a funky vector space search engine using the mysql cosine function.
</i> </div></blockquote>
Not quite.  MySQL has a <i>scalar</i> cosine function, like Perl and damn near every other programming language you can name.  Because this is a vector based search engine, you need to take the cosine of the two vectors, as the article clearly states:
<blockquote><div> <i>
The formula for calculating the cosine is this:
</i><blockquote><div><i> <tt>
        cos  = ( V1 * V2 ) / ||V1|| x ||V2||
</tt></i> </div></blockquote>
Where V2 and V2 are our vectors, the vertical bars indicate the 2-norm, and the * indicates the inner product. You can take the math on faith, or look it up in any book on linear algebra.
 </div></blockquote>
(PDL code for this relation is also provided in the article.)



<blockquote>

<h2>Re:Scalar vs. Vector</h2>
<h3><a href="/user/TeeJay/">TeeJay</a> on 2003-02-23T11:47:57</h3>
I guessed it wouldn't be that easy<nobr> <wbr></nobr>;)
<p>
That confirms my initial concerns that it wouldn't scale well, as you would have to do a lot of mathematical grunt work in Perl (or more likely the C PDL library), as opposed to using a specialised tool like a relational database to the bulk of the processing.
</p><p>
I don't think MySQL would manage the cosine math involved here. Oracle probably would using horrid PL/SQL perversions, but that would subtract rather from the initial elegance.
</p><p>
It would be nice to be able to do simple / fast similar document matches and scoring, but reverse index still offers advantages such as boolean matches and search term weighting and phrase matching that could be hit and miss with vector based searching.
</p><p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

