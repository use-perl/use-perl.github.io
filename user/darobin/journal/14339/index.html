<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of darobin: Politics, Blame, use.perl, etc.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Politics, Blame, use.perl, etc.</h1>
<h2><a href="/user/darobin/">darobin</a> on 2003-08-26T23:45:17</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
  Those of you that follow my journal with even vague regularity will have noticed that many of the recent entries are short, mostly political, entries, and that there is little room for Perl, or even -- alas -- for proper answers to what comments are to be found there. I realize that this may not be considered appropriate by some, wish no quarrel with them, and will no doubt move my journal to some other place when time allows me to. However, there are varied assortments of reasons for this, and some of those follow.
</p>

<p>
  First and least interesting is time. I post about what I notice most, have unfortunately very little time to address objections whether valid, invalid, interesting, or boring, and focus on pointing to other resources way much more than expressing my self. That being said, on to more interesting bits.
</p>

<p>
  It is hard, even for people interested in politics as I am, to find right wing (some of you may prefer to say conservative) people to exchange views, even if briefly, with. Finding right wing people is easy. Finding ones that can articulate non-monosyllabic, in these parts, is hard. Beyond "welfare is evil", "all arabs are terrorists", or "you will burn in hell because you don't believe in &lt;insert favourite fictitious entity>" there is little to be found in terms of "proper" right wing thought around Paris. Even though the current French government is from the right, I could easily pick any right wing economist and roast their actions to silliness. So having two or three right wing people that can finish a sentence without drooling close by is very interesting -- and tempting even when it may be considered off-topic. As a side-note, I realize that some of you may take offense at the equating of religion and right-wingedness that I express above. Simply please keep in mind that that is what I am given to see here. And at the very least, that those that are religious and remotely sane here would refuse in any way -- and probably fight in every way, possibly more than atheists -- any political leader engaging in something he calls a "crusade". And all things considered, unless you want Islam eradicated, for good reason.
</p>

<p>
  So I find value in the opposition. Even when given, as recently, some arguments that I will in all understanding of the weight of words decidedly call delirious -- namely the idea that global warming may not happen, or if it does it is not proven that it is due to CO2 -- the difference is of interest. That particular argument is of course a special case since it is about as valid as the non-incidence of smoking on lung cancer defended by some cigarette companies (hey, it's been shown that over 40% of people that die from lung cancer have cats...), the centrality of the Earth in the Universe, or Elvis' abduction by aliens. It is of value because it is telling when even smart, educated, often science-loving people put forth such claims. And I am sure that they could find such "telling" things in my discourse, because precisely they are smart and educated and all, and we all have our blind spots.
</p>

<p>
  So the take-away thing is, not taking into account the vanilla (is that the right expression?) stuff about understanding other cultures, that the opportunity to talk to people that disagree and can articulate it is interesting because any political belief requires blind spots, and theirs aren't the same ones.
</p>

<p>
  Different cultures? Yes. I'm sure many that were (foolish|courageous) enough to read this far has pretty much pictured "those others" as Americans. Judging from the comments, they indeed seem to be, even if that is not my specific target at all. But do Americans count as a totally different culture from, say, the French? Even from, say, a french guy that writes better English overall than French, is half-Australian, and sometimes shows off his EU passport? Yes. I've lived in the US, and the single worst mistake to make if you're European is to think that it's the same culture, or even one as closely related as european cultures are to one another. It's not that there's that huge a gap, it's just that there are cultural faux-amis. The movies you've seen, the familiar languag, the politics you've at least heard about, and of course the clichÃÂ©s bandied about in many places trick you into behaving as if understanding the american culture was almost a given when <em>really</em> it is not. The false familiarity works as a wall whereas when confronted with a culture perceived as perhaps more "alien" one will make conscious efforts to understand.
</p>

<p>
  Monstrous? Hmmm, tsssst. Yes, I've been accused of calling the Americans "monstrous" (hi jordan!). Was it deserved? I don't think so, at least I hope not. In my experience, it certainly is not true, far from it. What I <em>will</em> gladly admit to is calling the Bush administration monstrous, or rather I wouldn't since that's not a word I use I and think they're worse than that, but yes I'd use much worse words for them. The comparison of Bushists and Bathists is one that has come up before, and I am not foolish enough to put them in the same bag. The Bathist are worse. But by a matter of degree more than one of essence, both being on the same wrong side of the line [having voted for Bush, or being a "Republican", doesn't make one, in this argument, a Bushist. Thinking that Iraqi WMDs could kill more people than the pollution of industrial countries, and rejecting the Kyoto Treaty and at least part of the war in Iraq -- today -- does]. I do confess to not understanding the lack of social unrest in the US when several young Americans are killed almost daily for government lies (ok pudge, very very unproven statements). If democracy is the reason, which it wasn't until late, why is Afghanistan such a terrible mess today, with talibans still owning much of the place? (you'll note .af was a NATO intervention for large parts, and that I'm not talking about countries that weren't on the radar for that fairly short period of time). There were reasons to go to Iraq, why not change Chapter 7 for that sort of situation as has been discussed repeatedly over the past decade? Oh, and don't tell me terrorism has anything to do with it, please.
</p>

<p>
  Ah well, I've diatribed for a while if I may say so. And not on Perl. If you don't like it say so. If you like it but not here say so. Either way Perl bloody rocks, as it exemplified itself to me today when I could write a program that deduced an XML Schema from a large bunch of XML documents in under thirty minutes :) If you do answer, think twice about your bias and mine. And please be patient, as I don't often find the conjunction of sleeplessness, a my girlfriend's computer, time, and the wish to write a little thing down...
</p></p>


<hr/>



<h2>It IS About the Science</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-08-26T23:57:19</h3>
Look, we have just over 100 years of good data on weather patterns.  The Earth has been around for, what, billions of years?  And we think that just because it is hot now, that it is the hottest summer on record, that we didn't have a hotter summer 500 years ago?  Maybe a period of 20 years of increased heat in the 1500s?  We can only assume we didn't.  That's not good science.



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/rafael/">rafael</a> on 2003-08-27T13:09:37</h3>
AFAIK the study of ice at poles and at higher mountains gives good hints about the wheather for the last few dozens of centuries.



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/darobin/">darobin</a> on 2003-08-27T13:28:22</h3>
<p>
  Yes, it does. In my hometown of Grenoble there's one of the more advanced glaciology research centers. We have super-high precision weather <em>direct</em> measures for the 20th century, and less precise for part of the 19th, but we also have very precise indirect data extracted from glaciers and ice caps for more than the past 500 years, and less precise (though I hear it's getting better) for many centuries back. Tree cuts also give information on weather as old as the tree, which can be several centuries old. And the data is better than hints really.
</p>

<p>
  We also have history to inform us that summers this hot aren't on record in France. All droughts, inundations, and marking meteorological events were consigned in writing in much of Europe for the past twenty five centuries. It would seem that the last really hot and dry summer preceded by a terribly cold winter (as this year) was in the 1780s (and is believed to have helped the revolutionary climate through starvation, etc) and can be linked to the terrible eruption of the Laki volcano in Iceland. See for instance <a href="http://www-geology.ucdavis.edu/user/GEL115/volcs2.html" title="ucdavis.edu">http://www-geology.ucdavis.edu/user/GEL115/volcs2.html</a ucdavis.edu> and scroll down to "THE LARGEST BIG BANG&#8249;TAMBORA 1815". You can clearly see how the effects run worldwide for a major volcanic eruption. It's an accepted explanation, there is enough corelation.
</p>

<p>
  Pollution releases <em>way</em> more same and similar gases into the atmosphere. Permanently.
</p>



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/darobin/">darobin</a> on 2003-08-27T13:33:08</h3>
<p>
  There are a few small errors above, written too fast, sorry 'bout that. I just wanted to add that the rest of the article is worth reading to see how climate can be directly affected. Volcanoes are very interesting because they show abrupt changes in the chemical composition of the atmosphere, and provide good data on how global warming operates.
</p>





</blockquote>


<h2>Re:It IS About the Science</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-08-27T13:47:16</h3>
Yes, that is what I meant to imply by my use of the phrase "good data."  We do have hints.  But nothing of the level of -- to use darobin's comparison -- the wide array of hard data that we have for a study of smoking vs. lung cancer.



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/mary.poppins/">mary.poppins</a> on 2003-09-06T02:01:12</h3>
The trouble with running a climate experiment is that we can only run it once.<br>Hopefully we will like the outcome:  by the time we have hard data, it will be<br>very difficult to do anything about it.<br>



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-09-06T07:10:08</h3>
And it is for this reason that I support many efforts to curb pollution.  However, it doesn't make it acceptable, to me, to state as fact that cars are destroying the ozone layer, or whatever.



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/mary.poppins/">mary.poppins</a> on 2003-09-06T19:31:27</h3>
If one adopts an empirical (as opposed to religious) worldview, then nothing is<br>ever certain -- everything is open for refutation by new information.  At the<br>same time, though, it is always clear to one which theories are "really really<br>probably" the case.  Many of use like to call these theories "facts."  Exactly<br>where the cutoff is between a "theory" and a "fact" varies from person to person<br>(Is evolution via natural selection a "fact", or just a "theory" supported by<br>lots of evidence?  How about string theory?  Or gravity?).<br> <br>In the case of climate change, there is much suggestive evidence, and plausible<br>mechanisms to explain the evidence.  Put that together with the difficulty in<br>getting good data, and the difficulty in fixing climate problems once we know we<br>have them, and I think it warrants precautionary action.  Of course, there are<br>lots of people with huge piles of money out spreading disinformation about this<br>(e.g. envirotruth).  I'm just a little pseudonym, so people may not pay much<br>attention to me.<nobr> <wbr></nobr>:)<br> <br>It is also my theory that the changes to our society required to avoid climate<br>change (or further nuclear proliferation leading to use of nuclear weapons, or<br>terrible water shortages, or several other looming problems) are too large to be<br>achieved within the current organization of society.  Lobbying your<br>Representative, writing a letter to Chevron, buying "green power", and so on,<br>won't get you very far.<br>



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-09-06T21:36:34</h3>
<em>At the same time, though, it is always clear to one which theories are "really really probably" the case.  Many of use like to call these theories "facts."</em> <br> <br>Sloppy people or poor scientists, yes.  OK, I am being a bit facetious, I suppose, but I refuse to call something a fact unless I am absolutely convinced of it.  YMMV.<br> <br>However, this is all fine and good, but it has nothing to do with the subject, because in no sense is it '"really really probably" the case' that CO2 emissions are causing global warming.  It really really isn't.  We do not know.  We do not have strong evidence.<br> <br> <em>It is also my theory that the changes to our society required to avoid climate change</em> <br> <br>You say this as if you know what CAUSES climate change.  You don't.  It is just as likely -- if not moreso -- caused by non-man-made phenomena as it is caused by man, by all the available evidence.  We simply do not know.  And you are one of us.<br>



<blockquote>

<h2>Re:It IS About the Science</h2>
<h3><a href="/user/mary.poppins/">mary.poppins</a> on 2003-09-07T00:23:15</h3>
&gt;&gt; At the same time, though, it is always clear to one which theories are<br>&gt;&gt; "really really probably" the case. Many of use like to call these theories<br>&gt;&gt; "facts."<br>&gt;<br>&gt; Sloppy people or poor scientists, yes. OK, I am being a bit facetious, I<br>&gt; suppose, but I refuse to call something a fact unless I am absolutely<br>&gt; convinced of it. YMMV.<br> <br>I think we're on the same page.  What some call a "respect for reality."<br> <br>&gt; However, this is all fine and good, but it has nothing to do with the subject,<br>&gt; because in no sense is it '"really really probably" the case' that CO2<br>&gt; emissions are causing global warming. It really really isn't. We do not know.<br>&gt; We do not have strong evidence.<br> <br>The papers I've read on the subject sound pretty alarming to me, anyway.  Of<br>course, I'm no expert on the subject -- but from what I can tell, people who<br>are, are concerned.  Note that I haven't taken into account what the owners of<br>coal and oil companies say, because I don't think their opinions are<br>trustworthy.<br> <br>&gt; You say this as if you know what CAUSES climate change. You don't. It is just<br>&gt; as likely -- if not moreso -- caused by non-man-made phenomena as it is caused<br>&gt; by man, by all the available evidence.  We simply do not know. And you are one<br>&gt; of us.<br> <br>(I did say it was my theory, BTW)<br> <br>If human activity isn't changing the climate now, it very well might do so<br>eventually.  The scale of human-caused changes to natural systems is really<br>amazing, and only getting bigger.  These systems *are* resilient, but they also<br>are way to complicated to predict, and have many stable states.  I don't want to<br>see it nudged into a state which sucks for humans.<br> <br>I think an important question is where the burden of proof lies.  Should we all<br>think things are fine unless they are proven bad?  Or should we be more careful?<br>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:It IS About the Science</h2>
<h3><a href="/user/jjohn/">jjohn</a> on 2003-09-06T00:57:21</h3>
Isn't this "climate" versus
"weather" confusion?  From the freshman Earth Science class I took (so it must be true), Climate refers to "a weather trend through a long period of time."  While I believe you are dead-on right to bring up the rather patchy daily weather record available to science today, it is a lot of climate data to be obtain through ice cores, rock layers and things of an imperical nature with which I'm not well acquainted (real science is hard and frequently dirty).  Two questions must be answered as a prelude to debating environmental policy.  Is the Earth's climate changing (over some given period of time)?  Is climate change influenced by man's industrial and argicultural output?  I think the answer to the first question isn't quite settled, but it does appear that climate has become hotter this century and will likely continue to get hotter during the next century.  Is the "hand of man" the sole or deciding factor of this change (given that it exists)?  There is far less conclusive evidence for man's contribution to climatic change than to even the existence of said climate change.
<p>That said, we really ought to castrate industrial polluters. <code>=-)</code></p>





</blockquote>


<h2>War</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-08-27T00:26:53</h3>
<em>I do confess to not understanding the lack of social unrest in the US when several young Americans are killed almost daily for government lies.</em> <br> <br>Maybe this will help: even assuming everything that is said about lies by Bush is true, about lack of NBC weapons, about al Qaeda, etc., to me, and many other people, it doesn't matter, because that never had anything to do with why I favored military action against Iraq's government.<br> <br>Go back and look.  I was skeptical about the actual existence of NBC weapons, and I never talked about direct links to terrorists, because I didn't care.  What I emphasized was that Iraq was cited, unanimously, to be a threat by the UN Security Council, to be guilty of breaching its cease-fire obligations, and that full cooperation was required of Iraq, and that Iraq for months refused to cooperate fully, and that therefore -- after 12 years of trying -- the line was finally drawn and force was warranted.<br> <br>You don't have to agree with those reasons.  I expect you won't.  But none of that was lied about, and to me, and many others, it was always the most important thing.  You think of this as "dying for government lies," when the war was, to many people, justified on things NO ONE contends were lies.<br> <br>I today read a Brian Eno piece in TorgoX's journal where Eno says no one cared about Iraq before last summer, and it suddenly became important.  Well, I don't know who he hangs out with, but I have viewed Iraq as a serious threat to regional stability -- as has the UN Security Council -- for many years, and was hoping Bush might push the UN to take action since long before "Axis of Evil" or September 11 came up.  For people who follow security in the Middle East, Iraq has always been an issue on the table, and abot one UN Security Council resolution per year, since 1991, has focused on the rogue nation.<br> <br>That's what the war with Iraq is really about.  The stuff about terrorism was, at worst, a way to get more people behind the effort, because saying "regional security" is a tougher sell, presumably.  But in retrospect, it probably would have gone better for Bush to go that way, which is what I was saying back in January.<br>



<blockquote>

<h2>Re:War</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2003-08-28T16:02:40</h3>
Citing breach of security council resolutions is a straw man.  The US wanted to depose Sadaam Hussein, and the decade of noncompliance with the security council was a convenient justification, not a <i>casus belli</i>.
<p>
As TeeJay will no doubt point out, other nations are not in compliance with UN resolutions or UN Security Council resolutions.  Israel comes to mind, yet there's no US intervention on the scale that we have seen in Iraq.  And let's not forget about the politics going on inside the UN -- the resolutions that weren't voted on because of certain veto by the security council, or resolutions that <i>were</i> vetoed due to one political agenda or another.
</p><p>
Sorry, I'm not read up on specific instances, but we both know that this happens in the UN just like every other bureaucracy.  For the most part, the UN is a mere shadow of what it was intended to become, and security council resolutions are empty pieces of paper.
</p><p>
Except when they can be cited as justification for military action.</p>



<blockquote>

<h2>Re:War</h2>
<h3><a href="/user/pudge/">pudge</a> on 2003-08-28T16:17:54</h3>
<em>Citing breach of security council resolutions is a straw man.  The US wanted to depose Sadaam Hussein, and the decade of noncompliance with the security council was a convenient justification, not a casus belli.</em> <br> <br>You misunderstand what I am saying.  Yes, the purpose of the war was to eliminate the threat of Hussein, but <em>so was the purpose of the resolutions</em>.  The point is that because the resolutions failed to effect the desired result, further action was required (cf. clause 34 of <a href="http://www.fas.org/news/un/iraq/sres/sres0687.htm" title="fas.org">Resolution 687</a fas.org> (1991)).<br> <br> <em>As TeeJay will no doubt point out, other nations are not in compliance with UN resolutions or UN Security Council resolutions.</em> <br> <br>Not in ANY of those resolutions against other nations did the UN Security Council promise to take "further steps" to "secure peace and security in the area" (Res. 687) or threaten "serious consequences" (Res. 1441).<br> <br>The phrasing in 687 there is especially interesting because it is a actual promise to do what is necessary to secure peace and security, which necessarily means that, as a last resort, force will be used (because without the threat of force, no such promise could be worth anything).  Note that Iraq, Kuwait, and the rest of the UN Security Council (hm, maybe except for one of the Middle Eastern nations on it at the time, if my memory is any good) agreed to this promise of force.<br> <br>Anyway, the point is not that they violated the resolutions -- that this in itself is a crime -- but that the resolutions were there to effect a certain outcome, and that because they failed to do that, force was used to achieve it (as promised in the original cease-fire resolution in 1991).  I am sorry I didn't make it clear in the last post.





</blockquote>

</blockquote>


<h2>I like it</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2003-08-27T03:11:29</h3>
<p>I like it, and I like it here.  Because, you see, it's so hard to get a good left-winger who can be articulate about his views....<nobr> <wbr></nobr>:P</p>

<p>Seriously; I appreciate your presence and hope you'll choose to stay.  I like the strange, freakish mix of Perl, politics, and personal lives that is use Perl;.</p>



<h2>Elvis &amp;amp; our beneficent insectiod alien rulers</h2>
<h3><a href="/user/TorgoX/">TorgoX</a> on 2003-08-27T06:19:37</h3>
Don't you doubt for one minute that Elvis is alive and controlling Earth's galactic future!!!  He is ALIVE and I have the CROP CIRCLES and "MISSING TIME" to prove it!!

<p>P.S., good luck finding the least glimmer of intelligent discourse in the French media.  Altho I always hope that I will turn around and see that it has changed, the French media is the horrible evil twin of the US media -- in the US media, people have learned to hoot and gibber baboons.  In the French media, baboons have learned to talk like (<em>like</em>) civilized people.
</p><p>I hear the Belgian media is very slightly better.
</p><p>You're probably better off asking people on the street (or street people) what they think.
</p><p> <a href="http://www.amazon.com/exec/obidos/tg/detail/-/0312094140" title="amazon.com">And when you're done doing that...</a amazon.com></p>



<h2>[OT]  Warning: Perl content</h2>
<h3><a href="/user/htoug/">htoug</a> on 2003-08-27T08:16:45</h3>
<cite>write a program that deduced an XML Schema from a large bunch of XML documents in under thirty minutes<nobr> <wbr></nobr>:)</cite> <p>
Could you extract the central ideas of that and possibly upload it as a module. I am forced to use XML-Schema at work, and would love to have more perl tools for it.<br>
Yes I know that it is a mess. To quote Andy Wardley:<br> <cite> My conclusion, after spending nearly 6 months working
on it, is that it is an utter bastard of a specification written by
a committee of Java XML product vendors.  200+ pages of twisted
specification(s) that attempts to account for anything that the committee
could think they might want to add to their fancy products but wouldn't
have a clue how to implement.</cite> <br>But any help would be better than none.</p><p>
As a side note, I must confess that I enjoy the flame wars^Warguments^Wdiscussions your viewpoints conjure up; please do continue here.</p>



<blockquote>

<h2>Re:[OT] Warning: Perl content</h2>
<h3><a href="/user/Dom2/">Dom2</a> on 2003-08-27T09:09:12</h3>
Heh, XML Schema reminds me of a quote I found the other day somewhere on Peter Gutmans home page.  It was talking about SSL and PKI:

<blockquote><div> <i>The X509 specification was invented by the ecommerce department of the ministry of silly walks</i> </div></blockquote>

<p>I get the impression that XML Schema was designed in much the same manner...</p>

<p>-Dom</p>



<h2>Re:[OT] Warning: Perl content</h2>
<h3><a href="/user/darobin/">darobin</a> on 2003-08-27T09:49:42</h3>
<p>
  It's not at all CPAN worthy. It currently only deals with a single namespace, and has some stuff hardwired for SVG (I needed the schema that is just enough to describe a bunch of SVG documents, not the complete one). Adding multinamespace support shouldn't be too hard, though the loops in the data structures will get a bit twisted. Here is the code, raw. It may help you in some ways, you never know, all help is good when it comes to XML Schema<nobr> <wbr></nobr>;) If you don't understand the data structure which I know is hairy, turn DEBUG on and it'll dump it. Dumped, it becomes a lot clearer. This is a quick and dirty hack, all disclaimers apply.
</p>

<p>
  Andy's view on XML Schema is right, I know, I've taken part in an implementation... Thank $DEITY for &lt;ecode&gt;.
</p> <blockquote><div> <tt># simple schema generator<br> <br>use strict;<br>use XML::SAX::ParserFactory;<br>use Data::Dumper;<br> <br>use constant DEBUG =&gt; 0;<br> <br># conf<br>my @overrideFiles = qw();<br> <br># list files<br>my $dir = '.';<br>opendir DIR, $dir or die "Can't open $dir";<br>my @files = grep<nobr> <wbr></nobr>/\.xml$/, readdir DIR;<br>closedir DIR;<br> <br># process that<br>my %info;<br>my $p = XML::SAX::ParserFactory-&gt;parser( Handler =&gt; SchemaGenerator-&gt;new(\%info) );<br>@files = @overrideFiles ? @overrideFiles : @files;<br>for my $f (@files) {<br>&nbsp; &nbsp; eval {<br>&nbsp; &nbsp; &nbsp; &nbsp; $p-&gt;parse_uri($f);<br>&nbsp; &nbsp; };<br>&nbsp; &nbsp; print "Error: '$@' in document '$f'\n" if $@;<br>}<br> <br>print Dumper(\%info) if DEBUG;<br> <br># generate the schema<br>my $cnt = 0;<br>my $elements;<br>for my $ns (keys %{$info{EltOccurs}}) { # for each ns<br>&nbsp; &nbsp; open my $sch, "&gt;schema$cnt.xsd" or die "Couldn't open schema$cnt.xsd: $!";<br>&nbsp; &nbsp; for my $el (keys %{$info{EltOccurs}-&gt;{$ns}}) { # for each element<br>&nbsp; &nbsp; &nbsp; &nbsp; my $hasCM = scalar keys %{$info{EltContains}-&gt;{$ns}-&gt;{$el}-&gt;{$ns}};<br>&nbsp; &nbsp; &nbsp; &nbsp; my $hasTxt = $info{EltText}-&gt;{$ns}-&gt;{$el} ? " mixed='true'" : '';<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; # we need to deal with text here<br>&nbsp; &nbsp; &nbsp; &nbsp; $elements<nobr> <wbr></nobr>.= "&nbsp; &lt;element name='$el'$hasTxt&gt;\n&nbsp; &nbsp; &lt;complexType&gt;\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; $elements<nobr> <wbr></nobr>.= "&nbsp; &nbsp; &nbsp; &lt;choice minOccurs='0' maxOccurs='unbounded'&gt;\n" if $hasCM;<br>&nbsp; &nbsp; &nbsp; &nbsp; # elements (we don't do multins right now)<br>&nbsp; &nbsp; &nbsp; &nbsp; #for my $ref (keys %{$info{EltContains}-&gt;{$ns}}) {<br>&nbsp; &nbsp; &nbsp; &nbsp; for my $ref (keys %{$info{EltContains}-&gt;{$ns}-&gt;{$el}-&gt;{$ns}}) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $elements<nobr> <wbr></nobr>.= "&nbsp; &nbsp; &nbsp; &nbsp; &lt;element ref='svg:$ref'/&gt;\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; $elements<nobr> <wbr></nobr>.= "&nbsp; &nbsp; &nbsp; &lt;/choice&gt;\n" if $hasCM;<br> <br>&nbsp; &nbsp; &nbsp; &nbsp; # attributes<br>&nbsp; &nbsp; &nbsp; &nbsp; for my $attr (keys %{$info{AttrOccurs}-&gt;{$ns}-&gt;{$el}-&gt;{''}}) {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; next if $attr eq 'xmlns';<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $elements<nobr> <wbr></nobr>.= "&nbsp; &nbsp; &nbsp; &lt;attribute name='$attr' type='string'/&gt;\n";<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; $elements<nobr> <wbr></nobr>.= "&nbsp; &nbsp; &lt;/complexType&gt;\n&nbsp; &lt;/element&gt;\n\n";<br>&nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; # we don't do multiNS<br>&nbsp; &nbsp; print $sch &lt;&lt;"&nbsp; &nbsp; EOXSD";<br>&lt;schema<br>&nbsp; &nbsp; &nbsp; &nbsp; targetNamespace='$ns'<br>&nbsp; &nbsp; &nbsp; &nbsp; xmlns='http://www.w3.org/2001/XMLSchema'<br>&nbsp; &nbsp; &nbsp; &nbsp; xmlns:xsd='http://www.w3.org/2001/XMLSchema'<br>&nbsp; &nbsp; &nbsp; &nbsp; xmlns:svg='$ns'<br>&nbsp; &nbsp; &nbsp; &nbsp; elementFormDefault='qualified'<br>&nbsp; &nbsp; &nbsp; &nbsp; &gt;<br> <br>&nbsp; &nbsp; EOXSD<br> <br>&nbsp; &nbsp; print $sch $elements;<br>&nbsp; &nbsp; print $sch "&lt;/schema&gt;\n";<br>&nbsp; &nbsp; close $sch;<br>}<br> <br># handler<br>package SchemaGenerator;<br> <br>sub new {<br>&nbsp; &nbsp; my $class = shift;<br>&nbsp; &nbsp; my $info&nbsp; = shift;<br> <br>&nbsp; &nbsp; my %self;<br>&nbsp; &nbsp; $self{info} = $info;<br>&nbsp; &nbsp; $self{ctx}&nbsp; = [];<br>&nbsp; &nbsp; return bless \%self, $class;<br>}<br> <br>sub start_element {<br>&nbsp; &nbsp; my $self = shift;<br>&nbsp; &nbsp; my $el&nbsp; &nbsp;= shift;<br> <br>&nbsp; &nbsp; my $ctx&nbsp; = $self-&gt;{ctx};<br>&nbsp; &nbsp; my $info = $self-&gt;{info};<br>&nbsp; &nbsp; if (@$ctx) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $info-&gt;{EltContains}-&gt;{$ctx-&gt;[-1][0]}-&gt;{$ctx-&gt;[-1][1]}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt;{$el-&gt;{NamespaceURI}}-&gt;{$el-&gt;{LocalName}}++;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; $info-&gt;{EltOccurs}-&gt;{$el-&gt;{NamespaceURI}}-&gt;{$el-&gt;{LocalName}}++;  <br>  <br>&nbsp;  &nbsp; for my $attr (values %{$el-&gt;{Attributes}}) {<br>&nbsp; &nbsp; &nbsp; &nbsp; $info-&gt;{AttrOccurs}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt;{$el-&gt;{NamespaceURI}}-&gt;{$el-&gt;{LocalName}}<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&gt;{$attr-&gt;{NamespaceURI}}-&gt;{$attr-&gt;{LocalName}}++;<br>&nbsp; &nbsp; }<br> <br>&nbsp; &nbsp; push @{$self-&gt;{ctx}}, [ $el-&gt;{NamespaceURI}, $el-&gt;{LocalName} ];<br>}<br> <br>sub end_element {<br>&nbsp; &nbsp; pop @{$_[0]-&gt;{ctx}};<br>}<br> <br>sub characters {<br>&nbsp; &nbsp; my $self = shift;<br>&nbsp; &nbsp; my $data = shift-&gt;{Data};<br>&nbsp; &nbsp; return unless $data =~ m/\S/;<br> <br>&nbsp; &nbsp; my $ctx = $self-&gt;{ctx};<br>&nbsp; &nbsp; $self-&gt;{info}-&gt;{EltText}-&gt;{$ctx-&gt;[-1][0]}-&gt;{$ctx-&gt;[-1][1]}++;  <br> }</tt> </div></blockquote>





</blockquote>


<h2>Do stay</h2>
<h3><a href="/user/gtod/">gtod</a> on 2003-08-27T09:23:44</h3>
<p>I don't keep a journal here but I read other people's most days - and really enjoy seeing yours.  I hope you don't have to move elsewhere - Perl or no Perl.

</p><p>On another note - I'm entirely Australian but have lived in the UK for 3 years.  Love to buy you a bottle of wine next time we're in Paris.</p>



<h2>You should stay here and talk...</h2>
<h3><a href="/user/BooK/">BooK</a> on 2003-08-28T13:13:26</h3>
<p>... cause Perl content is <i>so</i> boring.<nobr> <wbr></nobr><tt>;-)</tt> </p>
<p>Anyway, I'm still not sure if I'm more right
wing (the last presidential election shouldn't
count<nobr> <wbr></nobr><tt>;-)</tt>) or left,
or somewhere in the middle (you know, takes the
good ideas where they are, and try to put them
in practice), or just
plainly bored by politics. Sometimes I do not agree with your views and sometimes I do, but
they are very often interesting, and I like to read them.
Here.</p>



<h2>survey says: keep on blogging</h2>
<h3><a href="/user/jjohn/">jjohn</a> on 2003-09-06T01:12:55</h3>
<p>Darobin,
</p><p>I hope that you continue to blog here as long as you find it amusing to do so.  There are many blogs that have nothing at all to do with Perl or programming (personally don't go out of my way to read the technical entries).  There will be those that will shout you down for your opinions, but that is the price of free speech.  Your observation that opposition is valuable to healthy debate has been keenly validated by the 2002-2003 political scene in the US, which was dominated by a small but vocal group of ideologs.  However, even the most radical opinions have a place in the public forum, if for no other reason than show the spectrum of possibilities every issue engenders.  One thinks of the famous ACLU case in the 1970s in which a Jewish lawyer successfully defended the Ku Klux Klan's right to hold a parade.
</p><p>Blogging consumes your most valuable resource: time.  Continue here as long as you feel that you have invested that commodity wisely.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

