<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of darobin: The Perl Cookbook 8.7</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>The Perl Cookbook 8.7</h1>
<h2><a href="/user/darobin/">darobin</a> on 2001-10-08T01:31:54</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
The Perl cookbook that we all know is often a great source of take-away code to inject here and there in an incomplete script or module.
</p>

<p>
However when I read entry 8.7 Randomizing All Lines (in files) that says the solution is to slurp the entire file into an array, shuffle it (using their excellent shuffling sub), and write it out, I couldn't help *coughing*... I've got a ~3Go file the lines of which I need to shuffle, and somehow I was hoping for a more realistic solution :-)
</p>

<p>
Oh well, it still is a great book. I eventually found my own (non-generic solution, I didn't go the seek()ing way) by using the fact that each line had a date and shuffling the dates and hours, then shuffling the lines accordingly in several passes.
</p>

<p>
I couldn't find a generic line shuffling module on CPAN, so if anyone out there knows of one or feels like writing one then please let me know ! The best would be one that would call a callback before writing each shuffled line out so that it can be modified (I'm falsifying lost httpd logs...)
</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

