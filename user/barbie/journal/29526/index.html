<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of barbie: Envelopes &amp;amp; Exim</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Envelopes &amp;amp; Exim</h1>
<h2><a href="/user/barbie/">barbie</a> on 2006-05-04T09:13:24</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><P>
It's recently been noted that the mail I send from home occasionally gets lost for the organisers list for the YAPC::Europe conference. It turns out that the envelope isn't set when it hits the blueyonder server, so its MTA inserts 'barbie@blueyonder.co.uk' as the envelope from, which isn't a valid email address, and thus causes a 550 error when another MTA tries to do a validation check. I've tried setting up an alias to that address, but it claims to have been taken, which makes me wonder why a 550 error is being return. But any road up, the blueyonder address I have is missbarbell@blueyonder.co.uk, in keeping with my domain, and I'm trying to find ways of setting the envelope header in exim.
<P>
I've been looking at the online references for exim, but the examples in the documents I've read so far don't appear to work. If anyone has any exim knowledge, I've set the following at the end of /etc/exim4/update-exim4.conf.conf:
<pre>
begin rewrite<br/><br/>*@* missbarbell@blueyonder.co.uk Es
</pre>
<P>
but running update-exim4.conf gets:
<pre>
rainbow:/etc/exim4# update-exim4.conf
/usr/sbin/update-exim4.conf: line 23: begin: command not found
/usr/sbin/update-exim4.conf: line 25: *@*: command not found
/usr/sbin/update-exim4.conf: Error, no
/etc/exim4/update-exim4.conf.conf, exiting.
rainbow:/etc/exim4#
</pre>
<P>
For the time being I've set the envelope via mutt, but that just ensures the envelope from is the same as the mail header from. If there is a way to set them to two different values, I've not found it. It works for now, as 'barbie@missbarbell.co.uk' will get a valid lookup, but just not from the same server that the mail came from. In many cases this might not matter, but anyone who has some sort of originator filtering on, will reject the mail. 
<P>
If anyone knows why exim is not accepting the above configuration or knows a better way of setting the envelope from, please let me know.
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

