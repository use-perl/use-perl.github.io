<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of koschei: Benchmarking</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Benchmarking</h1>
<h2><a href="/user/koschei/">koschei</a> on 2002-06-02T10:28:39</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Benchmarking is always fun.<br/><br/>Using ab on localhost, asking for 50_000 requests of the Tux served front page: 27.924 secs. 1790.57 requests per second.<br/><br/>Ditto but for the mod_perl real pages (yes, it's not really fair to compare them, but I'm going to): <i>[twiddles thumbs, waiting for it]</i><br/><br/>Tell you what, I'll post tomorrow.</p>


<hr/>



<h2>Plain httpd benchmarking...</h2>
<h3><a href="/user/Matts/">Matts</a> on 2002-06-02T12:01:04</h3>
I got plain Apache serving up over 2,200 requests/sec about 2 or 3 years ago on a (then state of the art) dual CPU pentium III 500 with SCSI discs. I guess a lot depends on your machine and setup. Make sure you're using mod_mmap if you're doing static stuff on Apache - it makes a massive difference.



<blockquote>

<h2>Re:Plain httpd benchmarking...</h2>
<h3><a href="/user/koschei/">koschei</a> on 2002-06-02T14:45:53</h3>
The machine doesn't have the world's best setup. Nowhere near it. Partly due to it being my experimental machine before it was unceremoniously put into production due to the production server dying (motherboard; managed to salvage the rest but it was good to see it go anyway). Still no new backup, hence Tux being tried on the production =) Don't try this at work, kids.<br> <br>Half the problem is that a lot of the content isn't static. Everything is done using Mason (well, almost everything). I'm not entirely sure whether I should be trying to make it static or not. I suspect I'll move some of the more esoteric dynamic features out. Make things more static, and more appropriate for Tux serving. Some bits, like the Alumni and AFL sections - definite dynamicism there. No choice about that. Need to use <tt>$m-&gt;cache</tt> a bit more, but it's no real worry.<br> <br>Nothing really is much of a worry. The machine copes with what it's meant to do - it's not a high hitter. Tux will probably end up just serving images and the (main) external site - simply because the external site is 97% static. Any of the 'dynamic' part of the static site is mostly there to save writing the damn HTML =)<br> <br>I just like having a machine perform better than it has to =)<br> <br>A simple <tt>wget -Ekr &lt;host&gt;</tt> with a <tt>--exclude-dir</tt> options suffices to create the Tuxable image. I like the idea of Tux better than the usual recommendation - having a proxy Apache, simply because it's so gosh darn simple to set up and I don't end up with two Apaches to look after.<br> <br>Main problem will be with the guy who nominally looks after the pages. Have to train him =) Or cron it as well.<br> <br>That all said - Tux probably won't be used until I get everything kitted with Apache 2, mod_perl 2 and the new Mason. And perl 5.8.[01] =)<br> <br>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

