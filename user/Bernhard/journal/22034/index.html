<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Bernhard: Parrot YAML ain't machine language</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Parrot YAML ain't machine language</h1>
<h2><a href="/user/Bernhard/">Bernhard</a> on 2004-11-28T15:17:32</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
In the last weeks I have used some off-work hours for looking into Abstract Syntax Tree for Parrot. It looks like this is one of the less civilised areas of Parrot, as documentation is somewhat scarce. 
</p>
<p>
Leo TÃÂ¶tsch added support for AST when coding for the infamous Piethon bet. So far one can take a Python program and turn it into PAST, Parro abstract syntax tree As Simple Text.

<pre>
bernhard@linux:~/devel/Parrot/parrot/languages/python> cat hello_10.py
print 10;
bernhard@linux:~/devel/Parrot/parrot/languages/python> ./ast2past.py hello_10.py > hello_10.past
bernhard@linux:~/devel/Parrot/parrot/languages/python> more hello_10.past

# generated by ast2past.py on Sun Nov 28 16:06:29 2004

Parrot_AST(
  version(Const('0.1'))
 _options(
 ) # _options
 Src_File("hello_10.py")
 Py_Module(
  _()
  Stmts(
   Py_Print(
    Const(10)
   ) # Py_Print
   Py_Print_nl()
   Void(
    Const(None)
   ) # Void
  ) # Stmts
 ) # Py_Module
 # end
) # Parrot_AST
bernhard@linux:~/devel/Parrot/parrot/languages/python> ../../parrot hello_10.past
10
</pre>

I have been trying to make that functionality available as a Parrot registered compiler. After making some educated guesses, it looks like it might be working.
<pre>
bernhard@linux:~/devel/Parrot/parrot> cat eval_9.imc
.sub main @MAIN
     .local pmc past_compiler
     past_compiler = compreg "PAST"
     .local string past_source
     past_source = 'Parrot_AST( Py_Module( Stmts( Py_Print( Const(9) ) ) ) )'
     .local pmc past_compiled_sub
     past_compiled_sub = compile past_compiler, past_source
     print "before\n"
     past_compiled_sub()
     print "after\n"
     end
.end

bernhard@linux:~/devel/Parrot/parrot> ./parrot eval_9.imc
before
9after
bernhard@linux:~/devel/Parrot/parrot>
</pre>
<p>
I still need to check wether the python tests are still working. If so I could add and some AST compiler tests.
</p>
<p>
The idea of Abstract Syntax Trees is mostly that the representation, that is the programming language, doesn't matter much. So it should't be hard to add support for any other tree format. For example one could use YAML. This might bring future support for <b>Parrot YAML</b>, which is an acronym for "Parrot YAML Ain't Machine Language".
</p>

 </p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

