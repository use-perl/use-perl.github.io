<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of pdcawley: Refactoring, again</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Refactoring, again</h1>
<h2><a href="/user/pdcawley/">pdcawley</a> on 2002-01-23T12:03:36</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>So, on Monday I was down the pub with <a href="/user/ziggy/">Adam</a> and <a href="/user/davorg/">Dave</a> and, as often happens when you're in the company of hackers you haven't seen for a longest time, stuff gets talked about. Dave has already mentioned some of the stuff we talked about in his journal, and now I'm going to talk about something else.<br/><br/>We also got talking about Refactoring; specifically refactoring in Perl, and Adam brought up his theory that if we want Perl co keep on being a popular language, we need to be able to provide the cool tools that people can get elsewhere. Which led to a short riff on cool tools we have admired (<a href="http://www.cs.rice.edu/CS/PLT/packages/drscheme/">DrScheme</a>, which is a kick ass scheme environment, written in scheme (of course) and with some really cool code analysis features; the SmallTalk class browser; eclipse; oobr.el...) for programming in the large.<br/><br/>Programming in the large is what I do <tt>(find -name '*.pm' | xargs cat) | wc -l</tt> tells me that the project I'm working on at the moment contains 73K lines of code. And it can be really hard to work out what's happening where in such an environment.<br/><br/>I could really use some of the functionality that, say, java programmers using Eclipse take for granted: Intelligent, class tree aware auto completion; useful and useable class browsers that let you jump straight to the method's definition, or to its superclass, or wherever. <br/><br/>I also want more advanced magic. A refactoring engine that will let me select a bunch of code from within an existing method and turn it into a seperate method, prompting me for method arguments and return values; that lets me rename a method, and goes through the sourcecode showing me the places where that method is called from and asks if I want to change those too; something that lets me change the name of a variable, reliably, with no false positives.<br/><br/>I'm currently working on the 'advanced magic', I have a refactoring engine that can turn a selected piece of code into a method call, and which automatically writes the method too. It's not yet desperately reliable. It's not proveable in any sense and I need to add pre and post conditions to help me guard against bad cases, but for a rigged demo it's pretty damned impressive, though I say so myself as shouldn't.<br/><br/>And it dawned on us on Monday night that the tools and techniques I'm developing to get this deep magic to happen will be remarkably useful for doing the 'easier' stuff too. In fact, I have the horrible feeling that in order to get the refactoring engine to 'work' I'm going to have to write an entire IDE. Unless someone can show me how to get EPL, the emacs perl lingo working reliably.<br/><br/>So, I'm inspired again and busily trying to get my head 'round the internals of the perl debugger, the B::* modules and all that other deep voodoo that lets us inspect the state of our modules.<br/><br/>Who knows, I may even release something to CPAN soonish.<br/><br/>Or maybe I'll tidy up Acme's::Abbreviations first, it needs some tests. And documentation...
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

