<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chorny: Upgrade you Makefile.PL with eumm-upgrade</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Upgrade you Makefile.PL with eumm-upgrade</h1>
<h2><a href="/user/chorny/">chorny</a> on 2009-12-17T23:30:45</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>
I decided to celebrate Perl birthday with several new tools.
First one is 'eumm-upgrade'.
</p>

<p>
It can be used to allow using new features of
ExtUtils::MakeMaker without losing compatibility with older versions.
BUILD_REQUIRES is the main new feature (I wrote it). It is important for ActivePerl ppm files, for
META.yml and for OS packages.
</p>
    
<p>
eumm-upgrade adds compatibility code to Makefile.PL and tries to automatically detect
some properties like license, minimum Perl version required and
repository used.
</p>

<p>
You can install <a href="http://search.cpan.org/perldoc?App::EUMM::Upgrade">App::EUMM::Upgrade</a> from CPAN. Or just download <a href="http://github.com/chorny/EUMM-upgrade/raw/master/eumm-upgrade.pl">
version 0.21 from Github</a> directly and install from CPAN these modules: <i>File::Slurp Text::FindIndent Github::Fork::Parent ExtUtils::MakeMaker</i>.
</p>

<p>
To use, run eumm-upgrade.pl in directory with Makefile.PL. Old file will be copied to Makefile.PL.bak.
If you use Github repository, Internet connection is required.
</p>
<p>
You need to check resulting Makefile.PL manually as transformation is done
with regular expressions.
</p>
</p>


<hr/>



<h2>Can it do this?</h2>
<h3><a href="/user/bart/">bart</a> on 2009-12-18T10:52:31</h3>
<p>One major problem we have had  in the past is with <a href="http://search.cpan.org/perldoc?Scalar::Util" title="cpan.org">Scalar::Util</a cpan.org>, which has 2 modes: XS mode, and PP mode. The latter did not include the functionality to create weak references, and it was the version that PPM installed. Often, that was precisely the functionality we needed the module for... Yet, the version number of <a href="http://search.cpan.org/perldoc?Scalar::Util" title="cpan.org">Scalar::Util</a cpan.org> was the same for both... Just requiring a high enough version number for the module did not do any good.</p><p>Can your extension detect that? "We need <a href="http://search.cpan.org/perldoc?Scalar::Util" title="cpan.org">Scalar::Util</a cpan.org> so and so and it has to include <code>weaken</code>"?</p>



<blockquote>

<h2>Re:Can it do this?</h2>
<h3><a href="/user/chorny/">chorny</a> on 2009-12-18T15:12:19</h3>
You have two solutions for this:<br>
1. (best) Add <a href="http://search.cpan.org/perldoc?Task::Weaken" title="cpan.org">Task::Weaken</a cpan.org> to BUILD_REQUIRES (or to PREREQ_PM if you don't use eumm-upgrade)
<br>
2. (new solution, may be better with ppm4) Depend on List::Util::XS





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

