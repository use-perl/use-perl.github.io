<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Phred: Compiling Perl on x86_64</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Compiling Perl on x86_64</h1>
<h2><a href="/user/Phred/">Phred</a> on 2006-11-12T10:54:44</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Been playing with an opteron box (hp dl145g2) the past few days.  I built Perl 5.8.8 on it today from source.  You can't just go flying through the 'sh Configure' like you can with x86.  You have to specify /usr/lib64 as an additional library path (important!), and I added the optimization flags '-march=opteron -mcpu=opteron -mtune=opteron -fpic -pipe -fomit-frame-pointer'.  Most of those are just for fun, but -fpic seems to be important, as Dynaloader broke and whined about needing it when building mod_perl2.</p>

<p>So far quite a bit of fun - damn fast cpu - but Centos 4.4 doesn't have the correct sata driver fix in the kernel (you need at least 2.6.10), and my own kernel builds have been failing.  I've given up on Centos (it was fun while it lasted) and gone back to Gentoo.  A longer install initially, but at least I know that it won't leave me stranded in a dead end trying to get everything working.  Ah the joys of Linux - at least my macbook hasn't been giving me any grief :)</p></p>


<hr/>



<h2>vendor support</h2>
<h3><a href="/user/nicholas/">nicholas</a> on 2006-11-12T16:50:25</h3>
<blockquote><div>You can't just go flying through the 'sh Configure' like you can with x86.</div></blockquote>
<p>It's notable (and frustrating) that none of the Linux vendors who sell and support x86_64, and ship Perl on it, have sent any patches upstream for Configure, so that we can incorporate whatever change they feel is the most appropriate to solve these problems. They're the experts on Linux on x86_64, not us.</p>



<h2>indeed</h2>
<h3><a href="/user/jhi/">jhi</a> on 2006-11-12T18:36:23</h3>
Nicholas++.<br><br>I have always wondered how we (perl maintainers) most of the time needed/need to go and hunt down the people at various UNIX/Linux people and hold them upside down and shake until they submit their changes back to us.  It would be so much easier for *them* to feed the changes back so that they don't need to maintain them.<br><br>There are some notable exceptions: e.g. OpenBSD, Solaris, Mac OS X, where the people have been very good, proactive and communicated back (and forth) with the perl maintainers.  For Linux distributions, it has varied a lot depending on who has been there.<br><br>I actually assume the same goes for any other open source project in general -- one would think it would be in everyone's interest to submit patches back to the original owner.



<h2>oh, and...</h2>
<h3><a href="/user/jhi/">jhi</a> on 2006-11-12T18:38:44</h3>
Once you have things working with x86_64, please do send a note to perl5-porters@perl.org of the changes you needed.<br>



<blockquote>

<h2>Re:oh, and...</h2>
<h3><a href="/user/Phred/">Phred</a> on 2006-11-13T03:59:42</h3>
Will do Jarkko, thanks for the feedback.  I didn't have to do too much different, but I've cut my teeth on a few x86_64 headaches before, so some of it may seem obvious to me.  I remember it was a lot harder the first time I used 64bit.



<blockquote>

<h2>Re:oh, and...</h2>
<h3><a href="/user/jhi/">jhi</a> on 2006-11-13T05:10:31</h3>
Well, *64-bit* as such has of course worked with Perl for, oh, more than six years now<nobr> <wbr></nobr>:-)<br>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

