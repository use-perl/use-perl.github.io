<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of ferreira: WWW::CPAN-&amp;gt;query()</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>WWW::CPAN-&amp;gt;query()</h1>
<h2><a href="/user/ferreira/">ferreira</a> on 2008-01-14T22:51:06</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p><a href="http://search.cpan.org/perldoc?WWW::CPAN">WWW::CPAN</a> is a work in progress (slow progress, to be honest). At 0.004 release, its API got one more method, <tt>query()</tt>. The whole API is:
</p>
<ul>
<li><tt>new</tt> - good old constructor</li>
<li><tt>fetch_distmeta</tt> - grab META.yml (META.json) from CPAN distributions</li>
<li><tt>query</tt> - do simple queries and get the result as Perl data
</ul>

<p>
Ain't that promising? Everyone will use it when 0.999 release arrives. (Yes, updates are by +0.001 increments.)
</p></p>


<hr/>



<h2>API</h2>
<h3><a href="/user/izut/">izut</a> on 2008-01-15T06:51:25</h3>
Hi Adriano,<br><br>I was reading WWW::CPAN API, and I have one suggestion to the API: change the method name fetch_distmeta() to get_meta().<br><br>This reflects the fact that you're dealing with CPAN, and the word 'meta' is used by modules on CPAN, so you can avoid the word 'dist' there - CPAN deals with software distribution. And fetch IMHO seems to be too related with the medium (and it is longer than get).<br><br>For example:<br><br><code><br>my $cpan = WWW::CPAN-&gt;new;<br>my $meta = $cpan-&gt;get_meta({ dist =&gt; 'WWW::CPAN' });<br></code><br><br>Is more clear and less polluted than:<br><br><code><br>my $cpan = WWW::CPAN-&gt;new;<br>my $meta = $cpan-&gt;fetch_distmeta({ dist =&gt; "WWW::CPAN" });<br></code><br><br>Other possibility would have a WWW::CPAN::Dist class, which is a stub for actually retrieving data from CPAN, like:<br><br><code><br>my $cpan = WWW::CPAN-&gt;new;<br><br>for my $d (qw( WWW::CPAN )) {<br>
&nbsp; &nbsp; &nbsp; &nbsp; my $meta = $cpan-&gt;dist('WWW::CPAN')-&gt;get_meta;<nobr> <wbr></nobr>...<br>}<br></code><br><br>What do you think?



<blockquote>

<h2>Re:API</h2>
<h3><a href="/user/ferreira/">ferreira</a> on 2008-01-15T11:14:41</h3>
Those sound like very elegant ideas and I will think harder about them in the next days. The reason I went with "fetch_distmeta" was to anticipate the occurrence of other meta data beyond CPAN distributions, like authors. And "fetch" was chosen instead of "get" because the latter reminded me only simple accessor rather than a real action to retrieve some data. But I am thinking about it. Thanks for your feedback, Igor.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

