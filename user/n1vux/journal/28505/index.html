<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of n1vux: Fun with Math::BigFloat and #perl</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Fun with Math::BigFloat and #perl</h1>
<h2><a href="/user/n1vux/">n1vux</a> on 2006-01-29T04:51:52</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>I'm not usually an irc-nik, but I had fun tonight thanks to trying #perl on freenode.  Pete_I posted a query for help with a "borked" program to compute Pi, and was ignored by the folks busy debating VI vs Emacs. (Do they do that daily or only on weekends?) <br/><br/><P>Hoping to be helpful, and out of curiosity -- I have always loved math, or at least since 2nd grade -- I clicked on his paste link.  It referenced a website by someone I vaguely knew and certainly knew of 20 years ago when our research areas overlapped and have seen in the math literature since then, David H. Bailey. I remember noting his breakthrough on direct computation of digits of pi (in HEX), and his website to search for your name (in ascii) in Pi,  but I had <b>not</b> yet played with his new algorithm. I had played with searching for strings of DIGITS in a pre-computed Pi of a mere 10_000 decimal digits with Perl last year. Dave's 5-bit ascii search in Pi searches 4_000_000_000 bits, 5 orders longer.<br/><br/><P> So I asked Pete_I <b>what</b> was wrong, but the only reply was a punch-line <i>just the facts ma'am</i> from a sniper. So after a short break, I asked him by direct message. It seemed his coding of the algorithm was losing precision after 10-15 decimal places, even though it was using Math::BigFloat.
<P>After several false starts -- and reading the academic paper three links into DBH's pages -- I found that, unless we used the modular arithmetic hacks DBH used to avoid using arbitrary precision packages, we needed to increase the default precision and use BigFloat for all numeric variables, not just <code>$pi</code>. In the process, I refactored the code to compute the sequence of the series first and then evaluate the polynomial by the classical add-and-divide technique.<br/><br/><P>My final code differs from Pete_I's code primarily in reading in, printing, and subtracting from the comparison value. (And commenting out Acme::Comment ;-)
<P>
<UL><LI><A HREF="http://www.perlmonks.org/?node_id=526243">Pete_I's node "Pi Generation"</A>
<LI><A HREF="http://crd.lbl.gov/user/dhbailey/">DBH Home with short description of the new formual for Pi</A>,
<LI><A HREF="http://crd.lbl.gov/user/dhbailey/pi/">DBH's pi pages</A>
<LI><A HREF="http://pi.nersc.gov/">DBH's Search for your name in Pi page</A>
</UL></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

