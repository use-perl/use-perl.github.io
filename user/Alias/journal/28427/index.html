<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Alias: I hereby offer a reward of a vertical metre of beer...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>I hereby offer a reward of a vertical metre of beer...</h1>
<h2><a href="/user/Alias/">Alias</a> on 2006-01-21T22:37:52</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>If you are going to offer a reward for something, I figure why screw around. Make it hard, and make it worth it.<br/><br/>So I'm offering a vertical metre of beer as a reward.<br/><br/>I define this as "A metre high pile of slabs/cartons/crates/24-packs/whatever of your favourite non-rediculously-priced beer"<br/><br/>I've offered it once before. The same reward was posted to anyone that could crack <a href="http://search.cpan.org/perldoc?Acme::BadExample">Acme::BadExample</a> and make a released version of perl load it normally, without the use of source filters or needing to patch the perl binary.<br/><br/>After submitting a rejected entry that loaded it, but needed a patch to bleadperl, Jos Boumans eventually won it almost a year later when Perl 5.9.2 was released (negating the need for the patch) and the same entry became a winner :)<br/><br/>So I'm offering a new reward to take it's place. This time around you don't even need to write any code to win it.<br/><br/>A metre of beer, as well as my unending respect, is offered for the following.<br/><br/>--------------------------------------------------------<br/><br/>1. An installation of Perl for Windows.<br/><br/>2. Said Perl must be current or relative new. 5.8.7 or higher.<br/><br/>3. Said installation MUST be in the form of an .msi or equivalent installer, to be installed directly on a fresh Windows intall without additional prerequisites.<br/><br/>4. The installer MUST also install a (legal) compiler (preferably gcc), preconfigured to work normally when installing XS modules from CPAN.<br/><br/>5. The installer should be able to be freely redistributed under normal perl terms and used on a variety of NT-based Windows operating systems equal to or newer than Windows 2000.<br/><br/>6. Once installed, Perl MUST be able to install modules direct from CPAN using the CPAN shell. (The installer doesn't need to preconfigured CPAN.pm) This also includes XS-based modules.<br/><br/><b>Clarification:</b>
6b. CPAN MUST work in an Firewall/NAT/ADSL-type environments WITH passive-level FTP, but without full bidirection FTP, due to the sheer volume of Windows hosts in this situation. A solution which only works on public IPs is not enough. See below for details.<br/><br/>7. A build script or some form of build instructions should be provided, such that any other presumed-competant sysadmin should be able to replicate the process for newer Perl or Windows releases.<br/><br/>8. There is NOT an expectation that everything be your own work, you may (legally) use any other project as a base or mercilessly (legally) steal code, as long as the above conditions are met.<br/><br/>9. The winner is defined as the first person to post a working URL to the installer in a bottom-level comment below, and emails me to say they completed it. The winner may be an individual, a syndicate or even an entire PerlMongers group.<br/><br/>--------------------------------------------------------<br/><br/>That's it. I just want a Windows Perl installer that works and can install XS modules from CPAN normally, as we might expect from a Linux install.<br/><br/>I don't need or want a full blown ActiveState replacement with a ton of modules precompiled and bundled in, in fact I'd <i>prefer</i> it it JUST had the default Perl install only.<br/><br/>And that's it... you don't need to code, you just need to know or work out how to build Perl on Windows, set up a compiler and then from that build an installer.<br/><br/>I want to start bulk testing modules on Win32. And I need a stock Perl install that I can just run an installer to get, and that will work. It doesn't seem that hard, but I've watched it now defeat a number of good sysadmins and developers.<br/><br/>If anyone has comments that might give clues to the contestants, I'd love to hear them.</p>


<hr/>



<h2>most of this seems to be in indigo perl</h2>
<h3><a href="/user/uri/">uri</a> on 2006-01-22T18:45:26</h3>
indigo perl seems to have most of what you want. it is a single file install, can load modules from cpan (via a gui or console so i imagine it can be scripted) and can compile source modules (i assume xs) but it needs devstudio. the owner is a good guy (a friend i have met at yapc's) and may be able to help you package gcc in it so you can get what you want.
<p>
<a href="http://www.indigostar.com/indigoperl.htm#GUI%20Package%20Manager" title="indigostar.com">http://www.indigostar.com/indigoperl.htm#GUI%20Package%20Manager</a indigostar.com>
</p><p>
uri
</p><p>
ps. did i say how much i hate web interfaces for text stuff like replies to blogs?</p>



<blockquote>

<h2>Re:most of this seems to be in indigo perl</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-22T20:08:44</h3>
Interesting. I've emailed them.<br><br>For those playing along at home, this does B constitute a winning response, as it fails points 3, 4, 5 and 7.<br>



<blockquote>

<h2>Re:most of this seems to be in indigo perl</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-22T20:10:18</h3>
<b>eeep!</b><br><br>That will teach me to use POD in a HTML entry. To repeat, it does B&lt;not&gt; constitute a winner response.





</blockquote>

</blockquote>


<h2>PXPerl</h2>
<h3><a href="/user/bart/">bart</a> on 2006-01-22T21:57:50</h3>
I think PXPerl (<a href="http://pxperl.com/" title="pxperl.com">http://pxperl.com/</a pxperl.com>) comes very close. CPAN.pm even comes preconfigured, it just works out of the box. I've tried it with the MinGW compiler, and modules like DBI and DBD::SQLite, as well as Data::Dumper::Streamer, all compile and test alright. That is: those XS modules that are standalone. The next step is modules that require external libraries...<nobr> <wbr></nobr>:-/<br><br>If this, in your opinion, a winner, then I'd prefer the price to go to the person that is responsible PXPerl &mdash; and that isn't me.<br>



<blockquote>

<h2>Re:PXPerl</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-22T22:05:31</h3>
I've been watching PXPerl for a while, and it's bloody close.<br><br>But unfortunately the original author has gone AWOL and not been heard from in 2 months.<br><br>It currently fails points 4 and 7.<br><br>If someone can fix that so that the compiler stuff all installs as well, the reward is yours to allocate as you see fit. The PXPerl author certainly isn't around to claim the prize at the moment...



<blockquote>

<h2>Re:PXPerl</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2006-01-25T13:39:30</h3>
The PXPerl website explains what is happening. The author is a student and is rather busy at the moment. I would rather see someone step in to help kick PXPerl over the top. It is *really* close.





</blockquote>

</blockquote>


<h2>Earlier Perls</h2>
<h3><a href="/user/barbie/">barbie</a> on 2006-01-23T13:36:00</h3>
<p>For me I'd like to see point 2 be Perl 5.6.1 or higher. There are still a lot of Perl apps out there running 5.6.1 for various reasons. I still get emails from people who find my CPAN testers reports asking about installing modules on Windows for 5.6.1.</p>



<blockquote>

<h2>Re:Earlier Perls</h2>
<h3><a href="/user/stennie/">stennie</a> on 2006-01-24T18:40:34</h3>
fwiw, here's an installer to test based on perl 5.6.1:<br>
&nbsp; <a href="http://stennie.org/camelpack/setup56.exe" title="stennie.org">http://stennie.org/camelpack/setup56.exe</a stennie.org><br><br>You should also be able to install just gcc and nmake to enable compiling with an existing activeperl install.<br><br>Cheers,<br>Stephen<br>



<blockquote>

<h2>Re:Earlier Perls</h2>
<h3><a href="/user/barbie/">barbie</a> on 2006-01-25T11:30:37</h3>
<p>Excellent work. Wish I could be there at the presentation. Still, I'm sure Mike Bissett will help out with the Birmingham.pm congratulations<nobr> <wbr></nobr>;)</p>





</blockquote>

</blockquote>


<h2>A Windows installer installer for perl + gcc ;)</h2>
<h3><a href="/user/stennie/">stennie</a> on 2006-01-23T15:14:21</h3>
Here's my attempt at a straightforward installer which I believe meets your requirements without inventing a whole new distribution of perl or gcc:<br>
&nbsp; <a href="http://stennie.org/camelpack/" title="stennie.org">http://stennie.org/camelpack/</a stennie.org><br><br>I picked one combination (and listed some alternatives considered) but the approach should be easily adaptable and maintainable.<br><br>Cheers,<br>Stephen<br>



<blockquote>

<h2>Re:A Windows installer installer for perl + gcc ;)</h2>
<h3><a href="/user/fireartist/">fireartist</a> on 2006-01-23T17:22:18</h3>
I managed to get it to compile after adding the ISX Download DLL files to the same directory as the camelpack.iss file.<br><br>During installation, I only checked the mingw installation, to save some time.<br>Installation failed, it couldn't find the file it thought it had downloaded to the tmp directory.<br><br>I tried to uninstall, that failed with<br>'an attempt was made to expand the "app" constant but Setup didn't create the "app" dir'<br>so the program (listed as "2006.1" in add/remove programs) is still there.<br><br>Exactly how did you get inno/isx to install cleanly and see each other?<br><br>And did you manage to get it to uninstall cleanly?



<blockquote>

<h2>Re:A Windows installer installer for perl + gcc ;)</h2>
<h3><a href="/user/stennie/">stennie</a> on 2006-01-23T17:57:33</h3>
Hey fireartist<nobr> <wbr></nobr>.. thx for your feedback, I'll test this out.  Looks like I may have messed up the uninstall options on the uploaded version.  There's no actual app to remove at the moment (it's calling other installers, which have their own uninstallers)<nobr> <wbr></nobr>.. so there shouldn't be an add/remove entry.<br><br>Regarding inno/isx, I installed:<br>
&nbsp; - Innosetup<br>
&nbsp; - IStool<br>
&nbsp; - IStool download DLL<nobr> <wbr></nobr>.. then did any compiling/editing via ISTool.  fwiw, ISTool seemed to have the download DLL properly registered without copying to the project directory.<br><br>Cheers,<br>Stephen



<blockquote>

<h2>Re:A Windows installer installer for perl + gcc ;)</h2>
<h3><a href="/user/stennie/">stennie</a> on 2006-01-23T22:43:48</h3>
FYI, have uploaded a corrected version with the "uninstall" options removed.
<p>
If you need to remove a bogus uninstall entry, the path in regedit to delete is:
</p><p> <small>
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\{2C93664<nobr>8<wbr></nobr> -0116-46EA-9398-49258B6325C3}</small>

</p><p>Cheers,
<br>Stephen</p>





</blockquote>

</blockquote>


<h2>Re:A Windows installer installer for perl + gcc ;)</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-24T05:27:53</h3>
Since my Microsoft Action Pack just arrived, I'm setting up a fresh installation of XP inside a new, clean, virtual image. I should have a confirmation of rejection in a few hours.



<blockquote>

<h2>Re:A Windows installer installer for perl + gcc ;)</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-24T05:29:55</h3>
God I wish you could edit comments...<br><br>"confirmation OR rejection"





</blockquote>


<h2>Rejected, just.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-24T13:32:49</h3>
OK, having had time to install it, here's an official report card.<br><br>1. Pass<br><br>2. Pass<br><br>3. Pass (with comment)<br><br>While I'm a bit iffy about not having the other installers embedded, it did work just fine, and since the goal is to install from CPAN, requiring a network connection for the installation isn't unreasonable. So Pass.<br><br>4. Pass<br><br>5. Pass<br><br>6. Fail (with comment)<br><br>Running the installation inside the image worked, but the CPAN.pm first-time configuration process failed utterly. After 2 hours of debugging and 4 new RT bugs for CPAN.pm my conclusion is that the version of CPAN.pm you installed cannot get the MIRRORED.BY file, and thus cannot be configured, unless the installation is on a host with a public IP or the user knows their own FTP Proxy. CPAN.pm first time setup would not appear to support or be set for even passive FTP, or provide any option for dealing with a lack of full two-way FTP connection.<br><br>Since this rules out pretty much everyone inside a NAT or on a broadband router,  a massive number of Windows hosts would not be able to install from CPAN. Since the rules of the competition explicitly say that you are responsible for the entirity with no credit to anyone who's source work you used, I can't see how I could assign blame to ActiveState and mark it a pass. So Fail, with the note that CPAN should be able to be configured inside a NAT or some other environment WITH passive FTP access. For situations without FTP access at all, or auth proxies and such, I can't see how I could blame you. But limited passive-only FTP access is so common I can't see how I could allow it to be a pass.<br><br>In short, FAILSFORME.<br><br>7. Pass<br><br>8. Pass (and excellent use of the rule to suck in ActivePerl etc)<br><br>9. N/A<br><br>----------------------<br>Total: FAIL 7/8 passed<br>----------------------<br><br>If you can make CPAN.pm work after installation with only passive FTP access, let me know so I can retest.<br><br>



<blockquote>

<h2>Re:Rejected, just.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-24T16:36:41</h3>
After talking with fireartist regarding vanillaPerl, it would appear that with the new Windows firewall + other reasons there's no way we'd ever want FTP to _not_ use passive.<br><br>So the recommendation is to set FTP_PASSIVE=1 at the system level in.<br><br>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment<br><br>



<h2>Re:Rejected, just.</h2>
<h3><a href="/user/stennie/">stennie</a> on 2006-01-24T17:58:47</h3>
OK, have updated the installer to set FTP_PASSIVE by default; please retest.<br><br>Cheers,<br>Stephen





</blockquote>

</blockquote>


<h2>Re: I hereby offer a reward of a vertical metre of</h2>
<h3><a href="/user/fireartist/">fireartist</a> on 2006-01-24T12:43:56</h3>
<p>Just as an alternative to stennie's above, here's one that uses a built-from-source perl, rather than ActiveState's<br>
(I don't like that I can't distribute PAR-built exe's built using AS's perl unless I get written permission)
<p>You'll need this zip file: <a href="http://www.fireartist.com/tmp/vanillaPerl5.8.7.zip" title="fireartist.com">http://www.fireartist.com/tmp/vanillaPerl5.8.7.zip</a fireartist.com> (41.5 KB) </p>
<p>Unzip the file in <code>c:\</code> it'll create a folder named <code>c:\vanillaPerl5.8.7</code> <br>
Just follow the instructions in <code>c:\vanillaPerl5.8.7\build\installer.txt</code> </p>
<p>This is a very basic installation including perl5.8.7, gcc3.4.5, dmake and some programs from unixutils.<br>
  There's an option to not install the start-menu icons - these are: a link to the <code>cpan</code> binary; a link to search.cpan.org and a link to the uninstaller.<br>
  At the end of the installation process you'll be shown which paths you need to add to your PATH environment.</p>
<p>This is suitable for automated testing, etc.</p>
<p>You can get the full ready-to-use installation here: <a href="http://www.fireartist.com/tmp/vanillaPerl5.8.7.exe" title="fireartist.com">http://www.fireartist.com/tmp/vanillaPerl5.8.7.exe</a fireartist.com> (15.3 MB) <br>
  But please only download this if you need to, I'll be monitoring my bandwidth usage and will have to remove the file if I get near my monthly limit. </p>
<p>I'll shortly be updating the instructions to support automatically editing the PATH environment on both install and uninstall.</p>
<p>I've also lately been working on a script that will download and install pre-compiled modules from kobes cpan mirror - this is useful for modules that are still hard to install, such as <code>DBD-mysql</code>, <code>DBD-sqlite</code> and <code>FCGI</code>. Hopefully this can be incorporated.</p>
<p> <strong>Tips</strong> </p>
<ul>
  <li>You can install modules by just entering <code>cpan</code> at a command prompt.</li>
  <li>During cpan setup, you should be able to accept to defaults for everything (except mirror location), however if you accept the default folder location of<nobr> <wbr></nobr><code>.cpan</code> it will be placed at <code>c:\.cpan</code> - I recommend you be explicit, for example <code>c:\vanillaPerl5.8.7\perl\.cpan</code> </li>
  <li>The cpan setup should automatically find the unixutils programs such as <code>gzip.exe</code>, <code>tar.exe</code> and <code>wget.exe</code> </li>
</ul>
<p>A perl-level issue to be aware of is: you can't use <code>cpan</code> to upgrade a core module such as <code>CPAN</code> or <code>File::Spec</code> because MSWindows won't let a<nobr> <wbr></nobr>.dll file be overwritten while it's in use. (I know there's people are looking at this issue). </p>
<p>I've tried building perl5.6.1, but it failed. I expect if an older version of mingw were used, it should work ok. </p>



<blockquote>

<h2>Re: I hereby offer a reward of a vertical metre of</h2>
<h3><a href="/user/fireartist/">fireartist</a> on 2006-01-24T14:53:35</h3>
I've updated both the files - it now sets the PATH during install and uninstall.



<blockquote>

<h2>Rejected.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2006-01-24T17:24:51</h3>
For the benefit of the other contestants, at time of writing, vanillaPerl is a FAIL. I'm in discussion with the author, so I'll just summarise.<br><br>- Doesn't set FTP_PASSIVE=1<br>- gzip.exe crashes<br>- Other minor CPAN.pm issues that might be fixed by the above being corrected.<br><br>So at this time the contest is still open, with no winner, but two contestants closing in on the prize!<br>





</blockquote>


<h2>Re: I hereby offer a reward of a vertical metre of</h2>
<h3><a href="/user/demerphq/">demerphq</a> on 2006-01-25T17:38:16</h3>
<blockquote>
<div>A perl-level issue to be aware of is: you can't use cpan to upgrade a core module such as CPAN or File::Spec because MSWindows won't let a<nobr> <wbr></nobr>.dll file be overwritten while it's in use. (I know there's people are looking at this issue).</div>
</blockquote>
<p>
Its not a perl level issue at all. On win32 you can't delete open files. Period. Any installer will end up confronting this issue. Its the reason for the dreaded "you must reboot your machine" messages that are so well known in the Windows world.
</p>
<p>
Some install techniques on windows are more suceptable to this issue than others, with Module::Build and CPAN particularly so as they use the things they are installing to do the install. EU::MM modules are less so as the install process is actually done by nmake.exe which means that the installer is less likely to have open the same files as are being installed. So as an example often with a EU::MM install if it fails you can exit out of CPAN and go to the build directory and run 'nmake install' and it will work fine as perl is no longer running and keeping those files open.
</p>
<p>
So IMO this shouldn't be characterized as a bug. Its a general win32 annoyance that is difficult to work around no matter what you do.
</p>



<blockquote>

<h2>Re: I hereby offer a reward of a vertical metre of</h2>
<h3><a href="/user/fireartist/">fireartist</a> on 2006-01-26T08:24:37</h3>
Thanks for the clarification ++<br><br>Maybe CPAN / M::B could get round it, if libwin32 is installed, by adding a registry entry in the relevant 'run once' key, and asking the user to reboot.<br><br>I'd personally find it quite amusing seeing cpan say "installation finished, please reboot to continue"!<br><br>I suppose a problem would be if it happens when installing a prerequisite. Would it be sufficient for cpan to say, "please reboot, then run 'install Foo' again", rather than try to remember the state it was in?





</blockquote>

</blockquote>


<h2>niPerl</h2>
<h3><a href="/user/bart/">bart</a> on 2006-01-26T15:25:46</h3>
BTW While we're looking at alternative Perl distributions for Win32, do not overlook <a href="http://www.numeninest.com/Perl/" title="numeninest.com">niPerl</a numeninest.com>. There's some interesting work that's been done, there, including the alternative GUI builder tool.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

