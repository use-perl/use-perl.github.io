<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Alias: CPANDB should now be synchronised and up to date</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>CPANDB should now be synchronised and up to date</h1>
<h2><a href="/user/Alias/">Alias</a> on 2009-07-06T06:32:16</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><b>Update:</b><br/><br/><i>The CPANDB now also contains the data for CPAN Ratings</i><br/><br/>In my previous announcements for <a href="http://search.cpan.org/perldoc?CPANDB">CPANDB</a>, I mentioned that while it was generating the database the correct way, the data was going to be a bit out of sync because data was coming from different places.<br/><br/>This should now be resolved.<br/><br/>The server syncs a minicpan to <a href="http://cpan.cpantesters.org/">http://cpan.cpantesters.org/</a>, then a META.yml database is updated from the minicpan, a <a href="http://search.cpan.org/perldoc?CPAN::SQLite">CPAN::SQLite</a> index is built from the same minicpan, and then both of them are joined together with the <a href="http://search.cpan.org/perldoc?ORDB::CPANUploads">ORDB::CPANUploads</a> database to product the completed tables.<br/><br/>The final step is the application of the graph algorithms to produce the weight and volatility scores for each distribution, which are now being added to the database as well.<br/><br/>Now that cpandb is ready for the big time, I'll start to try and merge in the three main outstanding data sets (CPAN Ratings, rt.cpan.org and CPAN Testers) and then rewrite the CPAN Top 100 to turn it into a fully operational death star... I mean website.<br/><br/>You can use the <a href="http://search.cpan.org/perldoc?CPANDB">CPANDB</a> module to fetch and ORM-inflate the database, or to download the database directly, use the following URL.<br/><br/><a href="http://svn.ali.as/db/cpandb.gz">http://svn.ali.as/db/cpandb.gz</a><br/><br/>The current schema for the database now has the slightly expanded distribution table.
<pre>
CREATE TABLE distribution (
	distribution TEXT NOT NULL PRIMARY KEY,
	version TEXT NULL,
	author TEXT NOT NULL,
	release TEXT NOT NULL,
	uploaded TEXT NOT NULL,
	weight INTEGER NOT NULL,
	volatility INTEGER NOT NULL,
	FOREIGN KEY ( author ) REFERENCES author ( author )
)
</pre>
</p>


<hr/>



<h2>are you still using cpants.db?</h2>
<h3><a href="/user/domm/">domm</a> on 2009-07-06T11:00:53</h3>
I sort of missed if you're doing the indexing by yourself by now, or of you're still pulling in the data generated by cpants...



<blockquote>

<h2>Re:are you still using cpants.db?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2009-07-06T12:25:15</h3>
<p>I'm now doing it all from scratch myself.</p><p>I started from the CPAN Index, so while it's superficially like the CPANTS graph, it follows permissions properly, and correctly handles changes of authors.</p>



<h2>Re:are you still using cpants.db?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2009-07-06T12:30:27</h3>
<p>See CPANDB::Generator for the methodology used to generate the database.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

