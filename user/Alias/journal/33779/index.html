<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Alias: Shut up about my Perl formatting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Shut up about my Perl formatting</h1>
<h2><a href="/user/Alias/">Alias</a> on 2007-07-11T14:55:30</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Inspired by Ovid, would people please shut about about the way I lay out Perl code?<br/><br/>Yes dammit, I use tabs for indenting. I've copped repeated grief about this.<br/><br/>I use 8 space tabs, because I have slight "figure-ground" problem, I find it a little harder than you do to pick out features from a background. So I don't see indents properly at 2 spaces, and I find 4 spaces a little annoying as well, whereas 8 is comfortable for me.<br/><br/>But I don't impose my indenting on you, I use tabs so you can see them any way you want, at any depth you want.<br/><br/>And no, no I don't use them anywhere other than left-hand indenting, because obviously it breaks. Tabs that aren't at the left of the screen are BAD, so I don't use them<br/><br/>My code looks like how I prefer it, and it ALSO looks whatever depth YOU want it to be. So when you have your editor set up to arbitrarily take my tabs and "clean it up" replacing the tabs with spaces, it's breaking my layout by making it conform with YOUR layout, and nobody elses.<br/><br/>On a related note, to gripe in the other direction, can I just say something about contributing to other people's code.<br/><br/>The maintainer of a CPAN module is the one that decides the structure and layout and rules. If you are contributing to somebody else's project, please try to follow their layout. If they use space indenting and 2 space, do the same.<br/><br/>If they use Perl::Critic and scatter # no critic entries through the code, try to follow the same if you can.<br/><br/>Now, god knows I totally appreciate people contributing to my modules.<br/><br/>But if you do PLEASE don't use Perl 5.8 expressions when the module is clearly labelled with "use 5.005 or use 5.006", "upgrade" my code to conform with Perl::Critic (apparending the rule set to the bottom of my POD) or run my code through a Perl pretty-printer with Perl Best Practices recommended settings.<br/><br/>Because I'm probably going to have to revert your changes, or waste a bunch of time going through and "fixing" all the changes you made.<br/><br/></rant></p>


<hr/>



<h2>spaces and tabs</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2007-07-11T15:35:14</h3>
<p>I understand your frustration.  However, I'll suggest that you use 8-space indentation with *spaces* not *tabs*.  That way, regardless of my editor settings for tab width, I'll see that your style is 8-space indentation and (as a good contributor) can follow that easily.  Whereas if my tab-width is set to 4 or 2, then I'll never know that you want 8 spaces and you're more likely to get something inconsistent back (particularly if I'm trying to line things up across multiple lines at something that *isn't* a 8-space tab multiple.)</p>

<p>And if someone should happen to insert tabs (at width 8) in matching your code style, it will be trivial to convert those back to spaces and everything will still line up.  It won't be as easy to go the other way, I suspect.</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/pudge/">pudge</a> on 2007-07-11T19:31:43</h3>
<p><div class="quote">I understand your frustration.  However, I'll suggest that you use 8-space indentation with *spaces* not *tabs*.  That way, regardless of my editor settings for tab width, I'll see that your style is 8-space indentation and (as a good contributor) can follow that easily.  Whereas if my tab-width is set to 4 or 2, then I'll never know that you want 8 spaces and you're more likely to get something inconsistent back (particularly if I'm trying to line things up across multiple lines at something that *isn't* a 8-space tab multiple.)</div> But this is not a problem if you follow the simple rule that you use tabs only for the lefthand indenting.  If you need to line things up over multiple lines somehow such that this would break, then do not use tabs, use spaces.



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2007-07-12T13:09:00</h3>
<p>Yes, in an ideal world I would and so would everyone else.  Unfortunately, it's not an ideal world and when multiple people contribute to something, it's possible that someone won't follow that guideline.</p>

<p>My point was that using only spaces will (a) be more apparent to contributors that 8-space indentation is desired and (b) be more robust to fix when someone intentionally or inadvertently mixes tabs and spaces.</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/pudge/">pudge</a> on 2007-07-12T15:29:06</h3>
<p><div class="quote">Yes, in an ideal world I would and so would everyone else.  Unfortunately, it's not an ideal world and when multiple people contribute to something, it's possible that someone won't follow that guideline.</div> How is that different from any other guidelines?<p><div class="quote">My point was that using only spaces will (a) be more apparent to contributors that 8-space indentation is desired</div> But I am saying it is NOT desired.  TABBED indentation is desired, NOT 8-space indentation.<p><div class="quote">and (b) be more robust to fix when someone intentionally or inadvertently mixes tabs and spaces.</div> I've never had any problem converting tabs to spaces, it's pretty simple.<br><br>



<h2>Re:spaces and tabs</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-07-14T08:10:57</h3>
<p><blockquote> <div><p>be more apparent to contributors that 8-space indentation is desired</p></div> </blockquote>

<p>Why should they care? No one needs to know. As long as everyone sticks to the rule that tabs are for indentation and <em>only</em> tabs are for indentation, tab width is <em>completely irrelevant</em>. Which is the whole point of using tabs at all.</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2007-07-14T12:02:16</h3>
<p>First, to clarify -- I mean that 8-<i>character</i> wide indentation is desired (by Alias in this case).</p> <p><blockquote> <div><i>As long as everyone sticks to the rule</i></div> </blockquote>

<p>But they don't (or Alias wouldn't be so annoyed).</p>

<p>My point about using spaces over tabs is that it will be more immediately obvious to anyone opening a file what the author's desired indention width is.</p>

<p>You may not like it -- you may think <i>"what an idiot, using 8-space indentation instead of tabs!"</i> but at least you'll <b>notice</b>.  Or, if you should happen to use tabs at width 8, you might not notice and you might send in patches with tabs, but they'll line up fine and just have to be converted to 8 spaces again.</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-07-14T15:55:43</h3>
<p>If they don&#8217;t stick to tabs-for-indentation-only, what makes you think they&#8217;ll stick to any <em>other</em> rule? And how are violations of this rule much harder to fix than violations of other rules?</p>

<p>If a contributor used the same formatting conventions as in the rest of the code, then it&#8217;s easy to fix their patch &#8211; mostly, down-convert everything to spaces first, then up-convert space runs at the start of the line**, then check whether that introduced any non-indentation tabs, which is easy if you break all the alignments by setting the tab width to something weird, eg. 5.</p>

<p>If they don&#8217;t follow the desired formatting conventions, then you have to re-layout their entire code anyway.</p>

<br>

<p>** Vim-speak: <code>s!^\v(( {8})+)!\=repeat("\t",strlen(submatch(1))/8)!</code> </p>



<h2>Re:spaces and tabs</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-07-15T04:34:33</h3>
&gt; My point about using spaces over tabs is that it will be more immediately obvious to anyone opening a file what the author's desired indention width is.<br><br>Only if every author does it!<br><br>If you use 8-spaces, and I use 8-character tabs, and I open up your code, I probably won't notice and just use tabs anyway.<br><br>So know you'll still have spaces and tabs mixed...<br><br>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2007-07-15T23:34:06</h3>
<p>And then when I get the patch or sync from subversion, I can <code>s/\t/<nobr> <wbr></nobr>/g</code> and I'm done.</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2007-07-15T23:35:22</h3>
<p>That should have been 8 spaces, but the HTML rendering compressed it, of course.</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-07-16T04:34:04</h3>
<p>(Here&#8217;s an <code>&amp;nbsp;</code> just for you.<nobr> <wbr></nobr><tt>;-)</tt> )</p>



<blockquote>

<h2>Re:spaces and tabs</h2>
<h3><a href="/user/dagolden/">dagolden</a> on 2007-07-16T11:17:57</h3>
<p>Thanks.  I'm spoiled by &lt;code&gt; on Perlmonks where it DWIW whereas here it just changes the font. &lt;ecode&gt; works here, but forces a new block instead of doing it inline.</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:spaces and tabs</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-07-12T05:26:15</h3>
<p>Use tabs only at the very left of the line, and only to bring the line into proper indentation depth. If you need to move something further to the right (past its indentation depth) to line it up with something on the previous line, use spaces. In short:</p>

<p>Tabs are for indentation. Spaces are for alignment.</p>

<p>Use this simple rule and it won&#8217;t matter whose tabs are set at how many columns; there will be no inconsistencies, regardless.</p>

<p>(This rule does break if you try to line things up verrtically across indentation levels. But that is terrible style when it&#8217;s code and just silly when it&#8217;s a &#8220;floating&#8221; comment block. If you don&#8217;t try ill-conceived things, the rule never breaks.)</p>





</blockquote>


<h2>Agree with principle</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2007-07-11T16:01:22</h3>
<p>I agree with the principle.  The code owner decides the formatting.  Of course, the contributors are free people also and can decide if they like the terms or not.  I've got no problem matching somebody else's formatting in order to contribute, nor most of their code style.  However, I'm personally not willing to expend extra effort to maintain compatibility with old perls, so I'd be liable to send in a contribution and say "Here's some work; hope you can use it" and respond to "Can you make it work with perl 5.005?" with "I'm sorry; I don't have time.  I hope you or somebody else can make use of what I sent you and adapt it or adopt it in some way."</p>



<h2>My god man!</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2007-07-11T18:19:54</h3>
Just use perltidy!



<blockquote>

<h2>Re:My god man!</h2>
<h3><a href="/user/Phred/">Phred</a> on 2007-07-11T18:36:25</h3>
<p>The problem with that approach is that if you check in a tidied file it wallops the diff.  Yes you can argue that you should retidy it to group development standards, etc. but those are largely manual processes that get developers grumpy.</p>
<p>Subversion has great pre-commit hooks, but the core problem is that you can't actually have it tidy the file and then check it in.  And then you have to have your editor retidy to your specs.</p>
<p>But hey, this can be done with wrappers around the svn binary right?  Someone has to have done this...</p>





</blockquote>


<h2>YES</h2>
<h3><a href="/user/pudge/">pudge</a> on 2007-07-11T19:30:33</h3>
I agree totally.<br><br>I also use 8-space tabs, and only for most lefthand indenting.  It is not a problem!



<blockquote>

<h2>Re:YES</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-07-12T00:27:02</h3>
When Perl Best Practices came out I was annoyed that it did not recommend tabs.<br><br>I had a chance to chat to Damian at some point and I asked him why go for spaces and not tabs.<br><br>He said that tabs WERE a better choice, but by encouraging tabs it emerged that it was just too tempting for developers in general to then use the tabs after the beginning of the line, which (obviously) breaks things.<br><br>So on the balance of the two factors (what is strictly better, and bad behaviours that it encourages) the spaces option was chosen.<br><br>So, as far as I'm concerned, the Perl Best Practice is "If you have discipline, use tabs"<nobr> <wbr></nobr>:)



<blockquote>

<h2>Re:YES</h2>
<h3><a href="/user/pudge/">pudge</a> on 2007-07-12T02:01:01</h3>
Indeed, and indeed.  I learned some of my tabbing practice from a codebase where tabs were used after indentation, such as to line up (in C) variable declarations' types and names.  Took me a little while, many years ago, to get out of that (and unfortunately we still have a bunch of that lying around).<br><br>



<h2>Re:YES</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2007-07-12T05:38:44</h3>
<p>Hmm; I'm almost persuaded.  I may start using tabs.</p>





</blockquote>


<h2>New pragma: use tabs = '4 spaces';</h2>
<h3><a href="/user/Ron Savage/">Ron Savage</a> on 2007-07-13T06:08:38</h3>
Heh, heh, heh.





</blockquote>


<h2>The real solution to the tabs-versus-spaces issue</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-07-12T05:36:35</h3>
<p> <a href="http://nickgravgaard.com/elastictabstops/" title="nickgravgaard.com">&#8230; is have tabstops expand or shrink to fit their contents</a nickgravgaard.com>. In fact this would also make proportional fonts palatable for coding. Now if only editors actually supported all that&#8230;<nobr> <wbr></nobr><tt>:-)</tt> </p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

