<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Alias: A Short Talk: You, and your APIs,  can NEVER go home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>A Short Talk: You, and your APIs,  can NEVER go home</h1>
<h2><a href="/user/Alias/">Alias</a> on 2005-10-08T13:38:18</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Maybe it's because of Serenity. Maybe not. But since my hope is that you have journals here to talk about Perl, rather than blogs over $there to talk about your cat, and you read the journals to learn a few things, I'd like to share a little learning today, on the subject of leaving home.<br/><br/>When you leave home, you can never go back.<br/><br/>I don't mean to visit, I mean to stay. Once you've left the protected confines of the family nest where you grew and changed, you should never go home other than to visit. It just doesn't feel right, and it can cause a lot of frustration, and sometimes pain. You just don't fit any more.<br/><br/>And this is exactly the way it is with your APIs.<br/><br/>Any piece of software, particularly those you put on CPAN, are actually two products. The most important of these is the API. This represents what is really a contract between you and your users.<br/><br/>"Take these step, and $this will happen"<br/><br/>This is written not in code, but in the POD. The code is really secondary, an implementation detail you get lumped with when you buy the API.<br/><br/>In the rush towards the fun of getting your cool idea used by other people on CPAN, people often miss the distinction and rush code out unfinished.<br/><br/>Implementations are allowed to be crap. You can test it badly, implement it inefficiently, leave security holes, anything you like. You can patch your code up later and nobody gets hurt.<br/><br/>The absolute opposite is true for APIs. Once they leave, they can never come home, and you don't get to change them.<br/><br/>This isn't an absolute of course.<br/><br/>Just like leaving home, you can change your mind. Change your API within a day of putting it on CPAN and it's nothing, change it in a month and the early adopters will be happy with it. Change it in three and people won't mind.<br/><br/>Change your CPAN API after a year, and if you've built up any sort of a userbase, you are causing the very people you posted the code to help pain. One of the worst things you can do is deliver an API that is sorta right and does the job, kinda but really should be completely different. Then get distracted on other projects for a year, and come back to "fix" the API. Too late.<br/><br/>Because by now people that used your module for real code have moved on to other things. They solved their problem with your nice mostly stable module, and they can't remember how exactly they wrote it any more. Remember Damian's violent psychopath? It's you in 6 months. And it's your users when you change the API 6 months after they used it.<br/><br/>That isn't to say you can't do anything. You can always add, and do other things that doesn't change your contract with the current users.<br/><br/>As we've found with Test::More in the last few days, sometime you've delivered APIs you didn't even know were APIs. Despite stating in the document that it might change, after staying the same for 4 years about a third of CPAN and most of the testing infrastructure came to rely on a particular error message from Test::More. In a nutshell, it was being used to confirm that when a testing module returned an expected test failure , it failed at exactly the line the author wanted to trigger it from.<br/><br/>And when it changed, it hurt like the dickens, although in this case it was more like a poison and was taking time to gradually build up the pain.<br/><br/>After 7 or 8 less then impressive plans to fix the problem (by various people me included), Schwern finally came up with a brilliant and cunning out-of-left-of-field plan to fix it properly. Of course he's had to annex the small country next door, but it does solve the problem properly, thoroughly and elegantly. Schwern++<br/><br/>So be mindful. Do what you want with the code, but don't let your APIs escape onto the CPAN until you are comfortable they are stable. And if the API is going to shaped by the implementation, as it was for PPI, then maybe you have to wait 3 years until you get to push it over the wall. So be it. It's best for everyone this way.<br/><br/>It's fine to talk about history, but if you want a much much bigger example, what I hope you might find interesting is to watch the process for a real system? How about it? :)<br/><br/>In the next few days, Sachmet and I are going to be announcing a new, huge project. Something that it would be nice to see as one of next year's Big Things in the Perl community. And it's going to take quite a number of people to get it done, from coders to expert sysadmins to normal people that just want to lend a hand.<br/><br/>To be honest, if it comes off anything close to it's potential I will be majorly impressed. It should make PPI look like a cute little toy in comparison.<br/><br/>But it needs to be specified first. Something this big you absolutely need to have all the APIs solid (or at the very least sketched out) before you start.<br/><br/>In this case, that means 2 to 3 file formats, a couple of communications protocols, and about 10 Perl module interfaces. They all need to be speced out properly, because once they escape from the nest, once we start to get people using them, there's 2 or 3 that would be inordinately painful to change them.<br/><br/>So far I've spent about 13 hours working to complete a rough first draft of the overall system. Im cajoling the other members of the Perl testing community into reviewing it right now. So stay tuned, I can't wait. This is going to be one VERY fun project. :)
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

