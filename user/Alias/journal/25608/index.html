<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of Alias: Day 1312: PPI going twice...  | The Test::Inline 2 roadmap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Day 1312: PPI going twice...  | The Test::Inline 2 roadmap</h1>
<h2><a href="/user/Alias/">Alias</a> on 2005-07-09T19:04:12</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Autrijus likes the fact I've moved to a "chronicles" style for my posts.<br/><br/>While it works really well when your entire life is consumed by a single project which a lot of people find interesting, like Pugs(<a href="http://use.perl.org/user/autrijus/journal/">autrijus</a>), JSAN(<a href="http://use.perl.org/user/cwest/journal/">cwest</a>) or PPI(<a href="http://use.perl.org/user/Alias/journal/">yours truly</a>), I don't think it's going to survive well over the long term.<br/><br/>I mean, "Day 1312" is getting just a <b>little</b> crazy don't you think? What do I look like, a daytime soap opera? Wait! I could be the handsome but evil doctor! And people could be afflicted with tiny clusters of tumors! :) But I digress...<br/><br/>I think it makes it harder to talk about other things easily without breaking the pattern. Unless I move to a sort of piped multiple header, or do several journal entries a day (one is more than enough for me).<br/><br/>Today, firstly, I got no changes or bug reports for <a href="http://search.cpan.org/perldoc?PPI">PPI</a>. I'm taking this as a good thing. I've written to Ovid (my grant dom, er, I mean manager) telling him he can get off my back now and sod off.<br/><br/>It all looks good for the big day tomorrow.<br/><br/>But I also just realised I'll be releasing it on Day 1313 since the first code went into CVS.<br/><br/>Fortunately, I've never really been supersticious, so I hereby dare the universe the do anything to stop the release.<br/><br/>The other thing I wanted to comment on quickly was <a href="http://search.cpan.org/perldoc?Test::Inline">Test::Inline 2</a>, which has been out now for a while. While it works really well, the more I use it the more I feel the API and console interface came out a bit malformed.<br/><br/>So I'm going to bite the bullet and make some back-compatibility-breaking changes now before it has any more time to get heavy adoption.<br/><br/>I'm adding another Handler class, Test::Inline::Content, for the generation of the test script content. This will mean we can write extentions to make things like Template Toolkit support for script templates relatively sane and easy to do. It's currently way too much work to do some tasks in the script content tweaking department that seem like they should be simple to do.<br/><br/>I'm also rearranging the other handler classes slightly, but the APIs themselves remain unchanged so it should mean changing a few lines of code for anyone working against the API directly and everything will be fine.<br/><br/>I'm also going to change the interface to inline2test to work from a config file instead of only having the ugly and growing list of --options.<br/><br/>Since inline2test isn't really documented now, I'm going to pretend I don't have an obligation to maintain compatibility here (which is a lie) but the config files should make things much more flexible, and mean that people that currently have to custom code something against the API can get the same job done with the config file alone.<br/><br/>I'll be doing the next couple of releases as 2.099_xx devel releases, so people who are affected will have a chance to play before the 2.100 changeover.<br/><br/>Oh, and finally, can anyone tell me how the hell I install a data file in a CPAN module with naming it .pm and pretending it's a module? I want to get JSAN::Indexer working soon, but I have no idea where data files for CPAN modules are supposed to live.</p>


<hr/>



<h2>Re: installing data files with modules</h2>
<h3><a href="/user/rhesa/">rhesa</a> on 2005-07-09T22:12:38</h3>
I'd like to know if there's an official way to do this too. In the mean time, here's what I did.<br> <br>I package the files like this:<blockquote> <div> <tt> lib/My/Module.pm<br>&nbsp; &nbsp; &nbsp; &nbsp;/Module/my_data_file</tt> </div> </blockquote>cpan installs that just fine, and I can get at it from my module by mucking around with my entry in %INC. The last bit is ugly though, and I'd like to know how to improve it.<br> <br>Here's the code I use to find my data file:<blockquote> <div> <tt>&nbsp; &nbsp; my $datafile_path = $INC{'My/Module.pm'};<br>&nbsp; &nbsp; $datafile_path =~ s!\.pm$!!;<br>&nbsp; &nbsp; $datafile_path<nobr> <wbr></nobr>.= '/my_data_file';</tt> </div> </blockquote>It looks and feels like a hack, but it worked for me.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

