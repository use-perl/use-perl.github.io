<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chrisv: err debian upgrade</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>err debian upgrade</h1>
<h2><a href="/user/chrisv/">chrisv</a> on 2009-02-07T09:55:39</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Upgraded 2 Debian Etch servers today (with an "<kbd>apt-get update</kbd>" and subsequent "<kbd>apt-get upgrade</kbd>") one of which hosts the <URL:http://vlaanderen.pm.org> site. There was an upgrade for the kernel included (2.6.18-6-686) but after reboot Apache2+mod_perl wouldn't come up again, complaining about Errno.pm.
</p>
<p>
I tried an apt-get remove perl (which yielded the debian packages below), but to no avail.
</p>
<p>
<code>
apache-common build-essential defoma dpkg-dev fontconfig-config libalgorithm-c3-perl libapache-mod-perl
 libapache2-mod-perl2 libapache2-request-perl libappconfig-perl libarchive-tar-perl libbit-vector-perl
 libcache-cache-perl libcache-fastmmap-perl libcarp-assert-more-perl libcarp-assert-perl libcarp-clan-perl
 libcatalyst-engine-apache-perl libcatalyst-modules-extra-perl libcatalyst-modules-perl libcatalyst-perl
 libcatalyst-view-tt-perl libcgi-simple-perl libclass-accessor-chained-perl libclass-accessor-perl libclass-c3-perl
 libclass-container-perl libclass-data-accessor-perl libclass-data-inheritable-perl libclass-dbi-perl
 libclass-factory-util-perl libclass-inspector-perl libclass-singleton-perl libclass-throwable-perl
 libclass-trigger-perl libclone-perl libcompress-zlib-perl libconfig-any-perl libdata-dump-perl libdata-page-perl
 libdata-visitor-perl libdate-calc-perl libdatetime-format-strptime-perl libdatetime-locale-perl libdatetime-perl
 libdatetime-timezone-perl libdbd-mysql-perl libdbi-perl libdbix-class-perl libdbix-class-schema-loader-perl
 libdbix-contextualfetch-perl libdevel-stacktrace-perl libdevel-symdump-perl libdigest-hmac-perl libdigest-sha1-perl
 libemail-valid-loose-perl libemail-valid-perl liberror-perl libexception-class-perl libexporter-lite-perl
 libextutils-autoinstall-perl libextutils-cbuilder-perl libextutils-parsexs-perl libfile-copy-recursive-perl
 libfile-modified-perl libfile-slurp-perl libfontconfig1 libformvalidator-simple-perl libgd-gd2-perl
 libgd-securityimage-perl libgd2-xpm libhtml-fillinform-perl libhtml-mason-perl libhtml-parser-perl
 libhtml-prototype-perl libhtml-scrubber-perl libhtml-tagset-perl libhtml-tree-perl libhtml-widget-perl
 libhttp-body-perl libhttp-request-ascgi-perl libhttp-server-simple-perl libima-dbi-perl libio-stringy-perl
 libio-zlib-perl libipc-sharelite-perl libjson-perl liblingua-en-inflect-number-perl liblingua-en-inflect-perl
 liblist-moreutils-perl liblocale-maketext-lexicon-perl liblocale-maketext-simple-perl liblog-log4perl-perl
 libmailtools-perl libmime-types-perl libmodule-build-perl libmodule-find-perl libmodule-install-perl
 libmodule-pluggable-fast-perl libmodule-pluggable-perl libmodule-scandeps-perl libnet-daemon-perl libnet-dns-perl
 libnet-domain-tld-perl libnet-ip-perl libobject-signature-perl libossp-uuid-perl libpar-dist-perl
 libparams-validate-perl libpath-class-perl libplrpc-perl librpc-xml-perl libset-object-perl
 libsql-abstract-limit-perl libsql-abstract-perl libsub-uplevel-perl libtemplate-perl libtemplate-plugin-class-perl
 libtemplate-timer-perl libtest-exception-perl libtest-longstring-perl libtest-mockobject-perl libtest-use-ok-perl
 libtest-www-mechanize-perl libtext-simpletable-perl libtie-ixhash-perl libtimedate-perl libtree-simple-perl
 libtree-simple-visitorfactory-perl libuniversal-can-perl libuniversal-exports-perl libuniversal-isa-perl
 libuniversal-moniker-perl libuniversal-require-perl liburi-perl libversion-perl libwww-mechanize-perl libwww-perl
 libxml-parser-perl libyaml-perl mysql-client-5.0 mysql-server mysql-server-5.0 perl perl-modules perltidy ttf-dejavu
</code>
</p>
<p>
After some googling, I found the following thread on Google Groups:
</p>
<p>
<URL:http://groups.google.ca/group/linux.debian.user/browse_thread/thread/30d00213e0d936bb>
</p>
<p>
which talks about a "buggy" arch-check in <kbd>/usr/local/share/perl/5.8.8/Errno.pm</kbd>:
</p>
<p>
<code>
11  "$Config{'archname'}-$Config{'osvers'}" eq<BR>
12  "i486-linux-gnu-thread-multi-2.6.24.4" or<BR>
13         die "Errno architecture (i486-linux-gnu-thread-multi-2.6.24.4) does not match executable architecture ($Config{'archname'}-$Config{'osvers'})";
</code>
</p>
<p>
So I commented these lines out and perl worked fine again (after having reinstalled Perl and accompanying debian packages of course), so apparently this "bug" hasn't been fixed yet in the current perl-base package.
</p>
<p>
Also, mod_perl2 had been disabled from the Apache modules-loading after the upgrade of the Apache2 server, so I had to create a new (symbolic) link:
</p>
<p>
<code>
ln -s /etc/apache2/mods-enabled/perl.load /etc/apache2/mods-available/perl.load
</code>
</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

