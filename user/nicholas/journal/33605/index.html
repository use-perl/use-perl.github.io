<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of nicholas: strange vmware hang stumper</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>strange vmware hang stumper</h1>
<h2><a href="/user/nicholas/">nicholas</a> on 2007-06-26T16:01:06</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Dear lazyweb...</p>
<p>As the denizens of <code>#london.pm</code> will know, I'm having a bit of an issue with vmware. Specifically, I have an Unbuntu machine running vmware, hosting a CentOS image. The network is configured as bridging, with the Ubuntu machine having <code>eth0</code> as 10.100.2.228, the CentOS virtual machine 10.100.2.202.
Everything works fine if you connect to the virtual machine from any other (physical) machine. But if you connect between the physical host and virtual machine, TCP connections are established, data can flow from virtual to physical, ACKs and FINs and flow back, but no data flows from physical to virtual. Well, it does get inside the virtual machine (I can see it with <code>tcpdump</code>) but it isn't getting up the TCP stack. (strace on a process in the virtual machine shows it hanging on <code>read</code>)</p>
<p>W.T.F.? I've run out hammers to hit this one with.</p>
<p>And what terms should I be searching online to find something about this? I just can't seem to get anything remotely relevant.</p></p>


<hr/>



<h2>NAT ?</h2>
<h3><a href="/user/essuu/">essuu</a> on 2007-06-26T17:23:41</h3>
Is there any address translation going on ?<br><br>I've seen very similar problems with NAT'd firewalls that won't let you connect to a NAT'd external address from inside the firewall.<br><br>Simon.



<blockquote>

<h2>Re:NAT ?</h2>
<h3><a href="/user/nicholas/">nicholas</a> on 2007-06-26T19:30:40</h3>
<p>No NAT that I'm aware of on the<nobr> <wbr></nobr>/24. Both the host machine and the virtual
machine think that that they're directly connected to the Ethernet cable with
real single IP addresses. (And something I don't understand is how both only
see one IP address bound to the card, both believe themselves to have different
MACs, and the card isn't in promiscuous mode. I guess hardware is clever.)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

