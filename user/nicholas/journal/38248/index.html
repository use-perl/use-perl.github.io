<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of nicholas: Today's mini WTF?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Today's mini WTF?</h1>
<h2><a href="/user/nicholas/">nicholas</a> on 2009-01-09T11:22:16</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><pre>use Time::Local();
my $time = timelocal(localtime());
</pre>

<p>Now that I've discovered this "idiom" lurking in the code base, I'm purging it.</p></p>


<hr/>



<h2>Time::localtime here</h2>
<h3><a href="/user/runrig/">runrig</a> on 2009-01-09T16:48:25</h3>
I keep finding:<blockquote><div><p> <tt>use Time::localtime;<br> <br>sub getCurrentTime {<br>&nbsp; &nbsp; return \ctime();<br>}<br># and then, e.g.:<br>my $time = ${&amp;getCurrentTime};</tt></p></div> </blockquote>



<h2>DST?</h2>
<h3><a href="/user/srezic/">srezic</a> on 2009-01-09T20:07:47</h3>
<p>Maybe it's intended. Check:</p><p>
&nbsp; &nbsp; &nbsp; &nbsp; $perl -MTime::Local -e 'warn timelocal(localtime(1224984600))'<br>
&nbsp; &nbsp; &nbsp; &nbsp; 1224981000 at -e line 1.</p>



<blockquote>

<h2>Re:DST?</h2>
<h3><a href="/user/nicholas/">nicholas</a> on 2009-01-09T21:30:08</h3>
<p>Good point. I had assumed that it was an expensive no-op for all input values. However, the code in question has no special comments about detecting the 3600 seconds of the year when the wallclock time repeats. It usually seems to be about writing cookies that will expire in about 900 seconds, and I think it's just the long gone authors of the code again demonstrating that they weren't very good and didn't really understand what they were doing. (Which is partly why we now have 25% less code than 6 months ago - I've found a lot of dead stuff and duplication to remove.)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

