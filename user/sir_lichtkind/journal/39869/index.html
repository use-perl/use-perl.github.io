<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of sir_lichtkind: Never get clean?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Never get clean?</h1>
<h2><a href="/user/sir_lichtkind/">sir_lichtkind</a> on 2009-11-10T00:09:31</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>subtitle: fun with Wx::AuiNotebook<br><br><br/><br/>In the German <a href="http://www.clean-code-developer.de">clean dev site</a> they teach you how to write good code. One of the first rules is Kiss of course. Maybe thatswhy I never will be a superhacker, but sometimes its too temping to me to spit out something thats more complicated. But for a good reason.<br><br><br/><br/>As we are approaching the release of Kephra 0.4.2 i do polish and therefore want to reduce flicker were I can. If you know browser with tabs in a tabbar you have the idea of Wx::Notebook. I switched from Wx::Notebook to Wx::AuiNotebook, because the second looks more pro and the tabs can be moved my mouse. they can't be moved by keyboard, but thats not too hard to implement. The hardest part is to hack the Accelerator table with Wx::AcceleratorEntry or just disturb the expected object hierarchy so that the keyevent will not delegated to the notebook. this sounds first hilarious but it will later become clear, why thats necessary. if you get the key event,
just store the label and panelobject. remove the page and insert it on a new position. if you do this you have a new order of docs, so you need an translation-array to keep track of those changes.
<br><br>
but
<br><br>
If you drag the tabs per mouse events are fired. one when starting, many during and one after you finished draging. With the begin and end event you can catch the visual position of the tab but the mean thing is that the index of the moved tab will not change. So I had 2 choices. a) build another translator between visual position and doc number or b) just remove and reinsert the tab so that the indices are again in sync with the visual order. Of course I took a) because I dont like the flicker, even if that solution is not Kiss. But maybe i kiss a nice girl instead.
<br><br>
Now you know why I need to hack the accelerator table. because naturally the notebook grabs the key event for the expected key kombination to make tab switches with. and will be switched in the tab index order and not the visual order, wich is annoying. also the key combination for tab move will be blocked, because for comfort you need something similar (I choose the tab switch keys + shift). So I really needed to hack it this way.
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

