<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of TorgoX: Returning to the trees</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Returning to the trees</h1>
<h2><a href="/user/TorgoX/">TorgoX</a> on 2001-11-08T07:43:42</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Dear Log,

<p>I get lots of mail about all the modules and articles that <a href="http://www.spinn.net/user/sburke/">I</a> have written.
The most recent ones were:  1) someone thanking me for
<a href="http://search.cpan.org/search?dist=Sort-Naturally">Sort::Naturally</a> and
adding that of course people want things sorted like Sort::Naturally sorts! [my muttering:
sometimes they want it sorted really fast tho, so you're screwed, because Sort::Naturally is
always going to be much slower than even
<a href="http://search.cpan.org/search?mode=dist&query=Sort-ArbBiLex">Sort::ArbBiLex</a> -- but
thanks anyway];
2) someone asking if I could write a
<a href="http://cellphones.about.com/library/bl_rf_change_rtttl.htm">RTTTL</a>-to-<a href="http://www.speech.cs.cmu.edu/user/sburke/midi-perl/">MIDI</a>
converter and maybe put it in the MIDI-Perl dist (unlikely, but you never know), and 3)
a request for advice from someone a bit new to recursive stuff and maybe to markup
language processing, but who has to do some fairly complex stuff that I can only imagine
doing with a traverser (a <a href="http://foldoc.doc.ic.ac.uk/foldoc/foldoc.cgi?tree">tree</a>-<a href="http://foldoc.doc.ic.ac.uk/foldoc/foldoc.cgi?recursion">recursor</a>) --
but he's not at home with traversers.

<p>Explaining traversers isn't so easy.  I tried valiantly in a long response, of which the following is the last bit.

<blockquote>

<p>...The trick is to imagine _whammo_traverser calling itself on root and that INSTANCE of _whammo_traverser calling itself on a child of root, and that INSTANCE calling itself on a grandchild of root.  Each instance of the routine being called on a node has its own copy of all sorts of variables and things -- notably its own @_, its own $this (copied from $_[0], with a "my"), and its own placeholder in its "foreach my $child ($this-&gt;content_list)" expression.  So, where "you" are is $this (or $child) -- for appropriate values of "you".  And when you call another instance of yourself, all the "my $this" variables are yours and yours alone -- the other instances have their own copies.  (Otherwise you couldn't ever do a recursive routine, if attempts at recursion left different instances stomping on eachother's variables.)
<p>The way to make this fit in your head is to think about only one instance at a time: put yourself in the shoes of a given instance of the sub and just limit yourself to figuring out what to do with the one node in front of you, and whether/how to call yourself on the child nodes, and maybe whether anything needs to be done with the current node once the calls on the children return.  The traverser is just a matter of saying "what do I do when I have an 'a' element/node in $this, what do I do when I have a 'td' element/node in $this, etc, and what do I do otherwise?".
<p>Getting the hang of recursion and traversal is one of the hardest things I've done (or had happen to me).  Like op-art and base-N number systems, some people pick it up easy, some people never really get it all the way, and some people take a while to get it (for many and vague meanings of "get it").
<br>I wrangled with recursion/traversal all while writing Tree::DAG_Node, to which HTML::Element is sort of an evil twin.  (And then a year or two after the idea was solid in my head, I went and learned about efficiency tricks, and how to implement a recursive algorithm without a recursive routine.  My general verdict on that is: don't try.)

</blockquote></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

