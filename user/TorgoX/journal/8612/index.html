<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of TorgoX: Corpus Colossus</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Corpus Colossus</h1>
<h2><a href="/user/TorgoX/">TorgoX</a> on 2002-10-25T21:04:26</h2>
</div> <!-- /span4 -->


<div class="span8">
<p>Dear Log,
<p>I needed a corpus of HTML files for testing the HTML::Formatter classes (which I'm tidying up).  So I logged into a friend's .edu account, and with a few little Unix commands (including a one-liner involving the king of them all, Perl), I made a tar file of all the reasonably-sized ~user/public_html/index.html files on the system.  All 2,908 of them.  Excellent!
</p>


<hr/>



<h2>Content Supermodels</h2>
<h3><a href="/user/TorgoX/">TorgoX</a> on 2002-10-25T21:19:15</h3>
Dear Log,
<blockquote><div>On the mp3-trola:  Grieg, "Cradle Song"</div></blockquote>
<p>So I'm trying my hand at writing an HTML::FormatRTF to go along with HTML::FormatPS and HTML::FormatText in the HTML-Format(ter?) dist.  While writing pod2rtf was pretty straightforward, this is proving pretty tricky -- because the block-level content-models for HTML are so much trickier than the block-level content-models for Pod.  If I could wave a magic wand and make all the HTML input be XHTML Strict, that'd be really handy.  But for the moment, there's the problems like "&lt;blockquote&gt;foo&lt;p&gt;bar&lt;/blockquote&gt;" parsing as:

</p><ul>
<li>blockquote
  <ul>
  <li>"foo"</li>
  <li>p</li>
     
     <li>"bar"</li>
     </ul></li>
  </ul>


whereas what I'd really want is this:

<ul>
<li>blockquote
  <ul>
  <li>p (implicit)</li>
     
     <li>"foo"</li>
     </ul></li>
  <li>p
     <ul>
     <li>"bar"</li>
     </ul></li>
  </ul>


The best, but trickiest, way is to make HTML::TreeBuilder optionally parse things the second way.  It's best because it'd be useful to other people.  It's be trickiest because first off it means messing with a pretty complex module; and because my idea is of what I want the parse-trees to look like for this purpose is not going to be The Answer of how you'd want them to look like for all purposes.  For example, it'd be handy for purposes of rendering to RTF if "&lt;li&gt;foo&lt;p&gt;bar" would parse like:
<ul>
  <li>li
     <ul>
     <li>"foo"</li>
     </ul></li>
  <li>p
     <ul>
     <li>"bar"</li>
     </ul></li>
  </ul>

But for rendering to some other formats, you might want it to come out like:
<ul>
  <li>li
     <ul>
     <li>"foo"</li>
     <li>p</li>
        
        <li>"bar"</li>
        </ul></li>
   </ul>
  

So, in conclusion: feh.  The hardest thing in good programming is accepting that some things are best implemented as ad-hoc solutions, not Grand Solutions To Everything.
<p>Late news: For HTML::FormatRTF, I'm giving up on the approach that was meshing so badly with the HTML content-models, and doing something a bit stranger, sort of the way HTML::FormatPS does it.</p>



<blockquote>

<h2>Re:Content Supermodels</h2>
<h3><a href="/user/ziggy/">ziggy</a> on 2002-10-25T21:43:22</h3>
<blockquote><div> <i>
If I could wave a magic wand and make all the HTML input be XHTML Strict, that'd be really handy.
</i> </div></blockquote>
Have you tried:
<blockquote><div> <tt>
<a href="http://tidy.sourceforge.net/" title="sourceforge.net">tidy</a sourceforge.net> -m -asxhtml <i>foo.html</i>
</tt> </div></blockquote>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

