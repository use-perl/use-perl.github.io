<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of potyl: Writing Perl bindings for GObject based libraries</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Writing Perl bindings for GObject based libraries</h1>
<h2><a href="/user/potyl/">potyl</a> on 2009-09-24T18:27:37</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I have in CPAN two modules that provide Perl bindings over two existing C libraries: <a href="http://search.cpan.org/perldoc?Gtk2::Unique">Gtk2::Unique</a> and <a href="http://search.cpan.org/perldoc?Champlain">Champlain</a>. These two modules both wrap C libraries that use Glib's <a href="http://library.gnome.org/devel/gobject/stable/">GObject</a> framework. I don't want to go too much in the details of explaining how GObject works, so I will just keep it brief. What's important to know is that the library provides and object-oriented framework for C that's easy to map to other languages through bindings (Perl, Python, Java, C++, etc). It provides classes, interfaces, a generic type system, memory management for objects, signals and even inheritance. You might not know too much about GObjects but you might be using them indirectly as it is the basis for Gtk2 and the Gnome desktop.
</p>

<p>GObject and Glib have already Perl bindings: <a href="http://search.cpan.org/perldoc?Glib">Glib</a>. The Perl module on it self doesn't look so impressive as other Perl modules in CPAN offer the same functionality, nevertheless the module is capital. What makes it so unique is that it provides all the basis for the GObject framework. All the hard work of providing a mapping between GObjects's data structures, runtime, memory management and type system to Perl is covered by Glib!</p>

<p>Thanks to Glib's bindings, writing Perl bindings for a GObject based library is very easy. Most of the time all that's involved is to provide a map file that describes the C data structures (<i>Objects</i>, <i>Interfaces</i>, ect), to map their C names with Perl package names, to provide the prototypes of the C functions to bind in the XS files and to write the unit tests of course. That's it! Perl's Glib module will take care of the rest as it provides the utilities for compiling and linking the C code for us. It really is that simple.</p> 

<p>The GObject framework is still evolving and gets new features. One that's very promising is introspection. This means that in a near future writing Perl bindings for a GObject based library will be almost if not automatic. And this future might not be so far as some work has been already made in order to give us even easier wrappers: <a href="http://live.gnome.org/GTK2-Perl/Introspection">Introspection for GTK2-Perl</a>.
</p>
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

