<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of masak: November 6 2009 -- wait, that's not gold...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>November 6 2009 -- wait, that's not gold...</h1>
<h2><a href="/user/masak/">masak</a> on 2009-11-06T22:53:15</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>65 years ago today, the first industrial batch of <a href='http://en.wikipedia.org/wiki/Plutonium#Production_during_the_Manhattan_Project'>plutonium</a> was produced.</p>

<p><quote>Element 94 was first synthesized in 1940 by a team led by Glenn T. Seaborg and Edwin McMillan at the University of California, Berkeley laboratory by bombarding uranium-238 with deuterons. McMillan named the new element after Pluto, and Seaborg suggested the symbol Pu as a joke. [...] The entire plutonium weapon design effort at Los Alamos was soon changed to the more complicated implosion device, code-named "Fat Man." With an implosion weapon, a solid sphere of plutonium is compressed to a high density with explosive lensesÃ¢â¬âa technically more daunting task than the simple gun-type design, but necessary in order to use plutonium for weapons purposes.</quote></p>

<p>"Fat Man", as you may know, was subsequently dropped on Nagasaki, Japan. Perhaps it contains some revealing truth about mankind, that when we finally make reality out of the alchemical dream to change material from one element to another, we use it not to create beauty or riches, but to wipe cities off the face of the Earth.</p>

<p>&#10086;</p>

<p>Okay, switching to the <code>installed-modules</code> branch. (If you're coming in through non-linear time, you might want to read what I did <a href="http://use.perl.org/user/masak/journal/39847">yesterday</a> first.)</p>

<p><code>
$ ./proto<br>
<br>
*** CONFIG FILE TOO OLD ***<br>
<br>
Hello, faithful proto user. Since the August 2009 release, Rakudo installs<br>
and runs outside its source directories. It's time for proto to make projects<br>
install Perl 6 projects in a similar way. Rather than spend a lot of effort<br>
trying to guess how to upgrade our userbase from distributed to merged, we'll<br>
just deprecate the old ways and let you do a bit of the work. Hope it's OK!<br>
<br>
So here's the thing: we're moving to a model where PERL6LIB becomes optional<br>
or needs to point to only one library base directory. You should probably<br>
reinstall the projects you have already, so that they end up in that place.<br>
<br>
Here are your currently installed projects ('legacy' in projects.state):<br>
<br>
november html-template druid perl6-examples uri web svg svg-plot maya form pun io-prompt wtop xml statistics-lite json faz http-daemon yarn ppm epoxy epoxy-resin grampa csv perl6-literate perl6-sqlite mwbot<br>
<br>
When you're ready to go with the new ways, please remove your old<br>
config.proto and reinstall the above projects.
</code></p>

<p>Ok. Bravely going where no man has gone before. Save for mberends++, and probably viklund++, and moritz++...</p>

<p>I remove <code>config.proto</code>.</p>

<p><code>
$ ./proto<br>
<br>
*** CONFIG FILE CREATED ***<br>
<br>
Greetings! I have created a file '/Users/masak/gwork/proto/config.proto'<br>
that you may want to review. Next time you run ./proto<br>
these settings will be used to bootstrap your Perl 6 software ecosystem.<br>
<br>
If you're new to this, or reluctant to do configuration, you probably want<br>
the default settings anyway. The most important ones are:<br>
Perl 6 executable -> /Users/masak/gwork/rakudo/parrot_install/bin/perl6<br>
Perl 6 library    -> /Users/masak/.perl6/lib
</code></p>

<p>Looks good. Proceeding.</p>

<p><code>
$ ./proto <br>
Building proto...done<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/novemberÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/html-templateÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/druidÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/perl6-examplesÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/uriÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/webÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/svgÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/svg-plotÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/mayaÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/formÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/punÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/io-promptÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/wtopÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/xmlÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/statistics-liteÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/jsonÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/fazÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/http-daemonÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/yarnÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/ppmÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/epoxyÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/epoxy-resinÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/grampaÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/csvÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/perl6-literateÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/perl6-sqliteÃÂ», ignoring it<br>
don't know how to parse the line ÃÂ«    state: legacy: /Users/masak/gwork/mwbotÃÂ», ignoring it
</code></p>

<p>Now, that's not very pretty. The error is coming from lib/Ecosystem.pm:126. It's caused by the fake YAML parser not recognizing more than one word after the first colon.</p>

<p>Ah, this is the TODO point recording this piece of data format.</p>

<p><code>
10. Drop the migration plan for existing installations: laziness++ ;)<br>
    Just warn the user as long as the old config.proto has not been<br>
    upgraded, and record as "state: legacy: /path" in projects.state.<br>
    This must be overwritten if the user later re-installs the project.<br>
    [DONE]
</code></p>

<p>Need to talk to mberends++ about how to solve this. My guess is that we need to make the fake YAML parser a bit smarter, but even that might come at a cost.</p></p>


<hr/>



<h2> 30 minutes later: solved</h2>
<h3><a href="/user/masak/">masak</a> on 2009-11-06T23:26:43</h3>
<p>mberends++ and I had a brief meeting on #perl6, and arrived at a solution which didn't involve messing with the parser.</p><p>So, now things work, and are much less noisy.</p>



<h2>Installed-modules branch</h2>
<h3><a href="/user/colomon/">colomon</a> on 2009-11-07T01:59:48</h3>
I too briefly tried the installed-modules branch a few weeks ago.  I quickly ran away screaming.<br/><br/>Still, I'd really like to see it up and running, so if there's anything I can do to help...



<blockquote>

<h2>Re:Installed-modules branch</h2>
<h3><a href="/user/masak/">masak</a> on 2009-11-07T03:27:09</h3>
<p>Well, not running away screaming would be a good start...<nobr> <wbr></nobr>:)</p><p>Don't know if you've found mberends++' excellent <a href="http://github.com/masak/proto/blob/installed-modules/proto#L396" title="github.com">list of TODO points</a github.com> in the proto script in the branch. Essentially, making the branch ready for merge comes down to finishing the points on that list.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

