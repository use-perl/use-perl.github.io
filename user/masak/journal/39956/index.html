<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of masak: November 27 2009 -- straight towards the surface</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>November 27 2009 -- straight towards the surface</h1>
<h2><a href="/user/masak/">masak</a> on 2009-11-27T22:58:59</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>38 years ago today, the <i>Mars 2</i> orbiter <a href='http://en.wikipedia.org/wiki/Mars_2#Lander'>releases a descent module</a> towards the surface of Mars.</p>

<p><quote>The descent module separated from the orbiter on 27 November 1971 about 4.5 hours before reaching Mars. After entering the atmosphere at approximately 6 km/s, the descent system on the module malfunctioned, possibly because the angle of entry was too steep. The descent sequence did not operate as planned and the parachute did not deploy. Mars 2 was the first manmade object to reach the surface of Mars. The landing site is unknown.</quote></p>

<p><i>Mars 3</i>, practically at the coat-tails of its sibling, made a descent a few days later, and landed softly.</p>

<p>&#10086;</p>

<p>Today I wrote a toy script, which might get integrated into the <a href='http://github.com/perl6/book'>Perl 6 book</a> we're writing.</p>

<p>The script shuffles a full deck of cards, draws two hands from it, and compares them. Could easily be extended into a full-fledged poker game. <a href='http://gist.github.com/244255'>Here it is</a>.</p>

<p>Writing it was remarkably fun, and it shook out <a href='http://rt.perl.org/rt3/Ticket/Display.html?id=70888'>a</a> <a href='http://rt.perl.org/rt3//Public/Bug/Display.html?id=70894'>couple</a> rakudobugs.</p>

<p>Look carefully at the use of <code>where</code> clauses in the script. We found out on the channel that <code>where</code> clauses are much more powerful than any of us had realized until now. Here are a few of the more beautiful ones:</p>

<p><code>subset FullHouse of PokerHand where OnePair & ThreeOfAKind;</code></p>

<p><code>subset Flush of PokerHand where -> @cards { [==] @cards>>.suit }</code></p>

<p><code>subset StraightFlush of Flush where Straight;</code></p>

<p>I originally had that last one as <code>Straight where Flush</code>, but I think the <code>Flush</code> computation is faster, so I put that one first, according to some fail-fast principle.</p>

<p>The script also raised the question "how does one get all the values of an enum", and TimToady gave the tentative answer <code>SomeEnum::.keys</code>, but this  <a href='http://rt.perl.org/rt3/Ticket/Display.html?id=70894'>does not work</a> in Rakudo yet.</p>
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

