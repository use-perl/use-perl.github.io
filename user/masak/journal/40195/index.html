<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of masak: E03, the modern, pragmatic, honest version, with corners cut</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>E03, the modern, pragmatic, honest version, with corners cut</h1>
<h2><a href="/user/masak/">masak</a> on 2010-02-19T23:30:15</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I was a bit optimistic with time. So what else is new.</p>

<p>Anyway, various distractions such as $WORK kept interrupting my translation of E03 today, but now I've finally got it all ported to modern Rakudo-Perl 6. <a href='http://gist.github.com/309333'>Here it is</a>. Two biggish things remain:</p>

<ol>
  <li>I haven't tried running the code. I'm pretty sure it won't run on the new Rakudo master yet. But I've written it with alpha (the old development branch) in mind, and it should run there.</li>
  <li>I haven't looked at <a href='http://lastofthecarelessmen.blogspot.com/2010/02/e03-first-stab.html'>SF's E03 translation</a> yet. (Yes, I'm linking to a blog entry which I haven't read yet.) I saw that the title of his post is "first stab", which makes me feel a little better.</li>
</ol>

Here are a few random comments about the code.

<ul>
  <li>The original code in E03 is the strangest example code I've ever read. All due props to Damian, but... quod? A program whose task it is to "locate a particular data file in one or more directories, read the first four lines of each such file, report and update their information, and write them back to disk"? Come again? (My suspicion is that this was the program arrived at by simply cramming in as much of A03 as possible into the same piece of code, but nevermind.)</li>
  <li>A few nice things are still missing from Rakudo. The <code>s{}{}</code> syntax is the last still unimplemented request in an <a href='http://use.perl.org/user/masak/journal/37303'>old blog post</a> of mine. It'd be pretty nice to have. I think we'll have it soon, thanks to ng.</li>
  <li>You can't open files <code>rw</code> in Rakudo. Then again, you can't <code>seek</code> or <code>truncate</code> them either, so I guess opening them <code>rw</code> wouldn't make much sense anyway. Due to this, I had to work around a central part in the program, where filehandles were stored in a hashtable, to be read from in one subroutine and written to in the next one. Had to store the filenames instead, and re-open the files for writing.</li>
  <li>We don't have the <code>:r</code> and <code>:w</code> filetests yet, but <code>:e</code> and (strangely enough) <code>:s</code> are implemented. Someone with tuits should really do <code>:r</code> and <code>:w</code>.</li>
  <li>A fair amount of the updates in E03 are out-of-date. I guess operators and related things are an area where Perl 6 really has evolved a lot in the past few years, or even in the past year. As I speak, the exact semantics for <code>infix&lt;...&gt;</code> is still being discussed on #perl6.</li>
  <li>When I say things have changed around a lot, I should really mention that I say that with a sort of relief of the sort that means "gee, I'm glad we didn't stick to what we thought we wanted back then!". Things have, by and large, improved greatly. I actually hope to write more about that.</li>
</ul>

<p>This exigesis-modernising is kinda fun! Now I'm eager to go read what SF++ has been up to.</p></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

