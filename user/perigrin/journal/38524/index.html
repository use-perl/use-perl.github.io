<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of perigrin: WebKit-- # breaks Catalyst::Controller::REST</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>WebKit-- # breaks Catalyst::Controller::REST</h1>
<h2><a href="/user/perigrin/">perigrin</a> on 2009-02-21T23:17:06</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>WebKit is has a broken Accept header, it puts text/xml and application/xml
first which breaks Catalyst::Action::REST&#8217;s default configuration and makes
the idea of being able to dispatch html/xhtml different from XML difficult at
best.</p>

<p>The reason it turns out is that the webkit developers <a href="https://bugs.webkit.org/show_bug.cgi?id=9572">cargo-culted from
Firefox</a>, and someone in 2007 provided a <a href="https://bugs.webkit.org/show_bug.cgi?id=12296">patch</a>. The
response to the patch is &#8220;buh buh Firefox is doing it!&#8221;. When I tried to
add the comment below I discovered that their bugzilla required me to log in
and didn&#8217;t appear to have an option for OpenID. Because I&#8217;m loath to create
<em>yet another</em> account to file a single comment on a bug I&#8217;ve included the text
here:</p>

<blockquote>
  <p>Firefox (3.1 beta 2 at least) is no longer sending this Accept headers.</p>
  
  <p>Currently writing a REST-ful interface that renders XML different from
  XHTML/HTML at the same URI is difficult (requires us to browser sniff and do
  we really want to go back to that?) because Webkit based browsers will all
  send then wrong Accept headers first. I actually ran into this while writing
  an app that targets Android/iPhone and I had to disable my XML rendering code
  (luckily it was a stub and not a required feature).</p>
  
  <p>Last the logic &#8220;Firefox does this&#8221; is a fallacy that I thought most people
  were taught better by their mothers at an early age &#8230; if Firefox were to
  jump off a bridge should WebKit too?</p>
</blockquote>
</p>


<hr/>



<h2>it would solve a lot of pain</h2>
<h3><a href="/user/rjw1/">rjw1</a> on 2009-02-21T23:49:21</h3>
and we could all go back to using lynx. just like god intended



<h2>Catalyst::Request::REST::ForBrowsers</h2>
<h3><a href="/user/autarch/">autarch</a> on 2009-02-22T03:26:10</h3>
<p>You should take a look at this plugin. If it doesn't handle WebKit properly, patches would be welcome.</p><p>I've found it very handy when trying to write a RESTful app where the browser-side and API-side have the same URIs.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

