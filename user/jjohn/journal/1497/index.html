<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jjohn: Code Comments: To be Read or Scanned?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Code Comments: To be Read or Scanned?</h1>
<h2><a href="/user/jjohn/">jjohn</a> on 2001-12-05T14:32:19</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Slashdot is running a story about the <a href="http://www.softwaremarketsolution.com/">interview</a> with <a href="http://joel.editthispage.com">Joel Spolsky</a>. Avid readers of this journal (me) will remember that I just finished reading Spolsky's book on UI Design. Always one to share his mind, Spolsky's comments have stirred up a tempest in the Slashdot teapot. Much of his comments seemed geared to explaining why Microsoft's competitors failed. He cites Microsoft's coding policy of "never rewrite," which sounds a little hyperbolic to me. What the readers of Slashdot failed to see, apparently, is that the site that interviewed him is a "resource for software marketing, software sales, and software product marketing." Is this the place to get cogent coding tips? No. 

<P>However, my attention was drawn to this slashdot <a href="http://slashdot.org/comments.pl?sid=24483&cid=2657658">comment</a> from one "StaticEngine" who is arguing vehemently for better comments in code. For instance:

<blockquote>
Any programmer should be able to look at code by another programmer and pick up on it very quickly, without shaking their head and saying "What the hell were they thinking?" 
</blockquote> 

A bit later:

<blockquote>
The best comment I heard was from a friend about a former coworkers code: "It's English with some C++ thrown inbetween the comments." 
</blockquote> 

<P>This all sounds reasonable, right? Who could be against better, more copious comments? Aren't comments the key to understanding someone else's code?
<P>Let me take this point to absurdity, why bother with the code at all? Why not write a paper about the code that explains what's going on. The assumption is that English is easier to understand than a programming language. So once you understand the theory of the code, then modifying it should be easy, right?
<P>There are two reasons why liberal comments aren't effective. The first, oddly enough, comes from Spolsky's book. Users (or programmers here) don't <b>read</b>, they 
<b>scan</b>. Writing comments to be easily scanned is tricky. After all, scanning works best when the reader has some idea what to look for and the assumption with code comments is that the reader has no clue at all what's going on.
If coders are scanning rather than reading, keeping comments small and to the point will be more effective than embedding <a href="http://www.amazon.com/exec/obidos/ASIN/0553213113">Moby Dick</a> (or even <a href="http://www.amazon.com/exec/obidos/ASIN/0201485419">The Art of Programming</a>) into your module (although quotes from Futurama and LoTR are acceptable).

<P>The second point is probably going to sound elitist, but what the hell: if you can't cook, stay out of the kitchen. Understanding a programming language is the primary job of a programmer. If there's a feature of the language (and not a compiler quirk) you don't understand, get a book and learn. Of course, I still recommend coding in common idioms and avoiding fancy tricks, but code is the definitive guide to understanding the program. You debug code, not comments.
I haven't seen a "comment debugger" yet. Comments can lead maintainers to not reading code. This is a sin. You always have to read the code. That last point is so important, I'll say it again:
<P><b>You always have to read the code</b>.
<P>So comments are fine if used and <b>maintained</b> along with the code. Otherwise, just delete old, inaccurate comments or stick them in your revision control system's log. You are using version control, right?
<P>I suspect there are folks on this system that will disagree with this notion, so flame away! 
</p>


<hr/>



<h2>You Suck!</h2>
<h3><a href="/user/pudge/">pudge</a> on 2001-12-05T14:49:08</h3>
... but I basically agree.  I only write long comments (that is, sentences instead of short phrases) when it is to discuss why the code is doing what it is doing, rather than discussing what it is doing; or, if what it is doing is really really weird, and I want to explain it to myself (or someone else) later on.  The latter case is quite rare, and I cannot recall an example of it offhand.  The former case happens once or twice a month, maybe.
<br>
<br>Most of my comments are just quick labels saying what something is for quick reference.  And I think it works well.  If someone doesn't understand an idiom I use, I ask them to come to me and I will explain it, quite happily.  I won't explain it in the code.  It just bloats it, and doesn't really help anyone.
<br>
<br>And while you state it, perhaps you don't emphasize the point enough: code needs to be well-written.  Common idioms, consistent style, reasonable whitespace and parentheses<nobr> <wbr></nobr>... all these things are extremely important, and contribute well to quickly scanning code.  The brain is good with things like that.



<blockquote>

<h2>Re:You Suck!</h2>
<h3><a href="/user/jjohn/">jjohn</a> on 2001-12-05T17:22:58</h3>
<p>Oh yeah? I've blown sweeter notes out of my ass-aphone!
</p><p>I'm in agreement with your clarifications, Pudge-daddy. Once again, you have crystalized my thoughts eloquently.</p>





</blockquote>


<h2>Comments on...uh, comments</h2>
<h3><a href="/user/chaoticset/">chaoticset</a> on 2001-12-05T16:29:39</h3>
I've kind of fallen into an odd trap.  I comment the hell out of the space *just before* something, and then I put little comments in when I figure it's not clear what's where and where's what.
<p>
That is, I explain what's supposed to be going on (mainly to myself so I'll remember later) and then, if the code is particularly long or arduous or uses lots of functions I don't understand, I comment specific lines.  I try to avoid that, though.
</p><p>
Of course, this is code for *me*, at this point.  When I get it cleaned up, I'll likely rip most of the comments out, leave the little pointers, and give an overview at the beginning.  (Hell, I may get ambitious and put POD in there, too.  You never know.)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

