<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of jjohn: Creative uses for symlinks in Apache::MP3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Creative uses for symlinks in Apache::MP3</h1>
<h2><a href="/user/jjohn/">jjohn</a> on 2003-09-23T11:00:02</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Lincoln Stein's remarkably useful module <A href="http://search.cpan.org/author/LDS/Apache-MP3-3.04/MP3.pm">Apache::MP3</a>is respects symbolic links.  That is, if you symlink an MP3 file Apache::MP3
will server it like any other MP3 file (as long as you Apache is allowed to 
FollowSymlinks in that directory).  This small detail allows for some darn 
useful tricks to help you organize and expand your MP3 collection.
<p><b>Problem 1:  Collecting stray singles under one artist's folder.</b>
<p>If you're like me, you have several single MP3's that "fell off the back of
an internet truck."  You probably have ripped your own CDs too.  While
you could simply move the singles into the artist folder (easy to do), you 
can also put a symlink to single there.  A more compelling example for this 
case is the compliation CD.  You don't want to move the MP3 files from the 
collection into the associated artist folder and you don't want to copy the 
MP3 (wastes disk disk).  Instead, consider making a symlink. 
<p><b>Problem 2:  Creating permanent playlists.</b>
<p>Create your own radio station!  Tired of not fitting into your local radio's 
format?  Make your own!  Create a folder called <i>The 80s</i>.  Next, find 
all the <b>good</b> 80s singles in your collection and create symlinks to 
them.  Heck, you can even record (or programatically generate) your own 
fake ads and put those in mix too!  Image the possiblities of Markov chains, 
speech synthesis and some simple mixing.  That's fake advertisement and that 
will make you pretend reach for your imaginary wallet.  Throw in some RSS 
feeds and you got news too. 
<p><b>Problem 3:  Spanning an MP3 collection across two disks.</b> 
<p>Your MP3 collection has gotten too large so you need a add a second disk.
Perhaps you need to press another machine into the fray.  In either case, 
you can symlink to the mount point of the disk from the MP3 directory.  
Perhaps you can call the symlink "more".  If that leaves you unsatisfied, 
you can write a simple shell script that creates symlinks to the individual 
directories on the other disk.  One wrinkle is that you will have to handle merging artist
folders.  For instance, let's say in you original MP3 collection, you've ripped
a few Prince albums.  On the new disk, you've ripped his <i>Sign O The 
Times</i> epic.  Now, you want the script to symlink the album under your 
original Prince folder.  This I leave as a not-too-difficult excerise for the 
reader.
<P><b>UPDATE</b>: Corrected factual error about symlinks versus hard links.  I must lay of the crack.</p>


<hr/>



<h2>good 80s singles</h2>
<h3><a href="/user/rafael/">rafael</a> on 2003-09-23T11:35:48</h3>
Does this exist ?<nobr> <wbr></nobr><tt>:-p</tt>



<h2>link it again, Sam</h2>
<h3><a href="/user/jmm/">jmm</a> on 2003-09-23T13:32:00</h3>
<i>That's because symlinks, on most systems, don't work across device boundries. You can create hard links though.</i> <p>
Um, that's backwards for Unix derived systems, which as a class by themselves satisfies the term <i>most systems</i>. (Unix, Linux, BSD, OS X,<nobr> <wbr></nobr>...)</p><p>
Hard links only work within a single file system (because they are an alternate name for the same i-node, and an i-node is a name that is unique only if you already know what file system it is contained in) while symlinks map one name into another name (which means that they <b>can</b> cross file system boundaries).</p>



<blockquote>

<h2>Re:link it again, Sam</h2>
<h3><a href="/user/jjohn/">jjohn</a> on 2003-09-23T17:54:36</h3>
Yes.  You are right.  I'm wrong.  I'll will fix.





</blockquote>


<h2>Multiple categories</h2>
<h3><a href="/user/petdance/">petdance</a> on 2003-09-23T19:13:45</h3>
How about songs that belong to multiple artists?  The stellar "Disorder" by Slayer and Ice-T should have symlinks to it from both artists' directories.  (The entire album is team-ups like that)
<p>
Maybe you have a directory of guest appearances, where the Eric Clapton guest appearances points at "While My Guitar Gently Weeps" by the Beatles, and the entire <cite>The Pros And Cons Of Hitchhiking</cite> by Roger Waters.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

