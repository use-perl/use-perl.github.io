<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Design Minutes for 31 December 2008</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Design Minutes for 31 December 2008</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2009-01-10T22:27:32</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 design team met by phone on 31 December 2008.  Larry, Patrick,
Allison, Jerry, Jesse, Will, and chromatic attended.</p>

<p><strong>Patrick:</strong></p>

<ul>
<li>lots of Rakudo work since the last report</li>
<li>now passing 765 more tests than two weeks ago</li>
<li>many little things</li>
<li>some workarounds to get Perl 6 constructs to work</li>
<li>Unicode for example</li>
<li>temporarily in place until we get the full grammar</li>
<li>loops handle exceptions correctly</li>
<li>refactoring and revisiting subroutine parameters and variable handling</li>
<li>some of the existing code is starting to break</li>
<li>the refactor is going extremely well</li>
<li>things are much cleaner</li>
<li>re-reading the Synopses, now I also understand Perl 6's metamodel</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>you'll have to explain that to me</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>I'd like to get one for Parrot too</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>don't want to merge in my branch until we can do so without regression</li>
<li>classes don't quite work now</li>
<li>that'd be a serious regression</li>
<li>working on that now</li>
<li>but the branch has fixed several funny bugs</li>
<li>probably can close a dozen RT tickets after the merge</li>
<li>next up are the Hague grant refactors</li>
<li>added the goal matching syntax from S05</li>
<li>really understood now why Larry put that in</li>
<li>also need to sit down and write reports</li>
<li>don't want to pause my momentum to do that</li>
<li>in the next three weeks, I'll write a set of documents to describe PCT</li>
<li>"Here's how to start using it."</li>
</ul>

<p><strong>Jesse:</strong></p>

<ul>
<li>what could help you be or feel more productive</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>800 passing tests in the past few weeks help</li>
<li>things around the house here help</li>
<li>running into very few blockers</li>
<li>begrudging sleep too</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>the holiday gave me a lot of time to think about Larry's comments on my first draft</li>
<li>wrote that down and committed</li>
<li>lots of positive changes shaping up pretty well in my mind</li>
<li>need some more reviews</li>
<li>had a good conversation on #pugs which led to bugfixes and explanations</li>
<li>will write documents to help new and inexperienced eyes on the documents</li>
<li>all options have a long description name</li>
<li>common options have short, single-letter names to allow clustering</li>
<li>the metasyntax to pass options to subsystems makes more sense now</li>
<li>devoting myself to S19 entirely</li>
<li>occasional Parrot builds to make sure nothing's broken</li>
<li>small bugfixes when I find the time or need a break</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>finished and merged in the IO branch</li>
<li>did another branch to make the core IO types subclassable</li>
<li>otherwise helping other people meet their milestones</li>
<li>working on calling conventions</li>
<li>reviewing Reini's install stuff</li>
<li>getting the GC stuff moving</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>working on the deprecation removal milestone</li>
<li>trying to rip out as many of those as possible</li>
<li>poking Allison and others for feedback</li>
<li>I can be more efficient at annoying you if that's helpful</li>
<li>trying to get Partcl to run faster</li>
<li>no matter what I do, it seems to get slower and slower</li>
<li>the spectest takes four times longer in the past ten days</li>
<li>getting out of memory errors</li>
<li>if I fix the memory leak, that time might improve</li>
<li>generating a lot of PMCs</li>
<li>lots of memory pressure going on</li>
<li>hopefully I can pass along lessons learned to other language developers</li>
<li>none of them seem to be having the problems I've had</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>helping remove deprecated features</li>
<li>working on some bug fixes</li>
<li>made PGE about a third faster last week</li>
<li>did some profiling</li>
<li>will be working on the incremental GC</li>
<li>don't expect many speedups</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>returned from visiting relatives in Southern California</li>
<li>most of my time spent being an oracle to interpret the specs</li>
<li>elaborated on the meaning of the <code>Whatever</code> and hyper-<code>Whatever</code> terms</li>
<li>you might distinguish them by their signature</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I no longer have a question about them</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>Daniel Ruoso found out you can't pass a Capture as a parameter and bind it to a regular variable</li>
<li>it binds as an item</li>
<li>so now you assume the backslash on the argument</li>
<li>otherwise hacked in a few specified things that weren't in the grammar</li>
<li>fixed a few misparses</li>
<li>mostly just keeping everyone on track on IRC</li>
<li>don't have to travel until April</li>
<li>planning two major projects</li>
<li>will do a real DFA to replace the faked-up one with tries</li>
<li>want to cut down memory use and execution time</li>
<li>also want to move all operators out of the standard grammar into the prelude</li>
<li>need to teach the grammar about lexical scopes</li>
<li>then take a snapshot of a lexical scope</li>
<li>then dump a snapshot of a lexical scope of the prelude so it can start up in that scope</li>
<li>then move operator definition parsing into the prelude</li>
</ul>

<p><strong>Jesse:</strong></p>

<ul>
<li>had very nice lunch and coffee with Chip</li>
<li>hearing some ideas about Perl 5 on other runtimes</li>
<li>nothing fully baked yet</li>
<li>some prodding at PPI with the idea of transforming Perl 5 code into something that Parrot can run</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>the way to handle this is multimethods of the operator that do signature matching?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>the two <code>Whatever</code>s are different types</li>
<li>you get <code>Code</code> objects when you derive from them</li>
<li>a normal <code>Whatever</code> produces a Code object with a single argument</li>
<li>a hyper <code>Whatever</code> produces a Code object with a slurpy argument</li>
<li>if  you ran a for argument with a slurpy, it'd slurp up all of the arguments</li>
<li>if we had a regular way to apply a signature to a set of arguments and report how far it gets, the for loop and this subscripting mechanism could use it</li>
<li>at some level, it would do a multi dispatch</li>
<li>if you have to introspect the arity of a <code>Signature</code>, you're doing something wrong</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Rakudo builds closures for all subscripts</li>
<li>it can evaluate any <code>Whatever</code>s there then and DTRT</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>pre-thunked closures</li>
<li>but you want to optimize that</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>we don't want to do subscripting that much anyway</li>
<li>if I assign <code>Whatever</code> to a scalar and use that within a subscript, does it work as a term?</li>
<li>played with having the parser detect a <code>Whatever</code></li>
<li>it set a flag saying "You have to thunk this."</li>
<li>that doesn't help if it's buried</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>you may have to put a <code>|</code> in front of a variable to get it to pay attention to slice context</li>
<li>like interpolating an argument list with a scalar variable still a scalar</li>
<li>unless you explicitly expand that scalar into thunks, it probably shouldn't</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>that way lies Tcl's madness</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>we're trying to put navigational points through Perl 6's madness</li>
<li>I need to review the spec</li>
<li>I'm happy with how slicing works out in Rakduo right now</li>
<li>ranges of strings are weird</li>
<li>they don't act intuitively at all</li>
<li>they're weird to define in terms of autoincrement and autodecrement string magic</li>
<li>should we try to define ranges on strings not in terms of that on <code>.HOW</code>?</li>
<li>or ranges on single-character strings?</li>
<li>maybe it's really a <code>Buf</code></li>
<li>inside a regular expression, someone wants to match a byte by doing <code>\x0..\xFF</code></li>
<li>that cycles if you treat it as a range</li>
<li>unless you do it as a <code>Buf</code></li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>the character class should not pay attention to magical increment</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>should it be codepoints?</li>
<li><code>a.._</code> in a character class is different from a range?</li>
<li>it's different and weird and hard to explain</li>
<li>people are having trouble in #perl6 understanding what should and shouldn't happen</li>
<li>maybe it's trying to be too magical for its own good</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>maybe one could take a picture of a range that's numeric</li>
<li>specify them numerically, even in hex</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>maybe a range adverb indicating which kind of range you expect</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>maybe</li>
<li>if it's ambiguous, it requires...</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>it just doesn't seem obvious</li>
<li>ranges ought to be obvious</li>
<li>it works great in the numeric range</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>to use magical autoincrement, you could say <code>a, b, c ...</code> which creates a closure</li>
<li>it doesn't tell you where to quit</li>
<li>but presumably it's lazy</li>
<li>it's a thought</li>
<li>not sure it's a good thought</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>ran across a couple of things in S19 development</li>
<li>Unicode</li>
<li>I'm no expert, being an American</li>
<li>there's the encoding of a file you're reading to execute</li>
<li>or something typed on the command line to execute via <code>-e</code></li>
<li>then there's setting your standard filehandles for a specific encoding/charset</li>
<li>I'm not sure how to address those</li>
<li>am I instructing the parser with <code>-e</code> to be Unicode-aware?</li>
<li>is this something overall to Perl 6 programs?</li>
<li>the same goes for filehandles</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>the encoding specifies how the bytes translate into codepoints</li>
<li>the charset maps those to glyphs or graphemes</li>
<li>if I use ASCII, my charset only goes up to codepoints 127</li>
<li>I use a fixed 8-bit encoding</li>
<li>if I use Unicode, my codepoints go up high</li>
<li>I have a range of charsets to use</li>
<li>people tend to specify an encoding</li>
<li>it's ASCII, ISO-8859-1 (Latin-1), or UTF-8</li>
<li>most people mean UTF-8 when they say Unicode now</li>
<li>that's what web sites tend to use</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>Windows uses UCS-2</li>
<li>whether it's long or not, every character takes up that amount of space</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>Perl 6 doesn't really care about the encoding</li>
<li>we just have to know what it is</li>
<li>as soon as things get into the language, everything has "Unicode semantics", whatever that means</li>
<li>we have to know how to get into that semantics</li>
<li>without metadata, we guess or throw up our hands in despair</li>
<li>it comes down to metadata</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>could that fit in a file, directly after a shebang?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>that's probably the least of our worries</li>
<li>the filename, the command line, the places where POSIX ought to be shot</li>
<li>the problem basically is that POSIX doesn't give you the metadata</li>
<li>very weakly, they pretend like locales are sufficient for that purpose</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>for my working draft, should I just say that Perl 6 is a POSIX girl living in a POSIX world?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>assume that you're in a UTF-8 world</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>as far as setting filehandle encodings, that's just pass to Perl 6, the program, and not a specific subcomponent?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>if it needs specification in the program, it's specified to <code>open</code> or as a pragma</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>suppose I'm outputting a text file from the command line</li>
<li>I want to tell Parrot that I want a UTF-8 or ASCII encoding</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>I don't think you'll go wrong in the future if you assume everything goes into UTF-8, or some BOM-marked UTF-16 or -32</li>
<li>let the other people define themselves as departures from that default</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I agree</li>
<li>UTF-8 is well known and capable enough for most things</li>
<li>do everything as deltas from that</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>this is our chance to do everything right</li>
<li>let's not choose the wrong default</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>I'd like to allow intermixed options and values on the command line</li>
<li>we can't say <code>perl foo.pl -w</code></li>
</ul>

<p><strong>Jesse:</strong></p>

<ul>
<li>how do you differentiate running <em>foo.pl</em> and handing it the <code>-w</code> flag?</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>also not clear on negating an option</li>
<li>if the option is <code>:name</code>, you can negate it with <code>:!name</code></li>
<li>that's the history character in certain shells</li>
<li><code>:/name</code> is a workaround</li>
<li>Larry suggested <code>:0name</code></li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Rakudo doesn't implement that yet</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>do we need more than one?</li>
<li>should we get rid of them?</li>
<li>short arguments are always single character</li>
</ul>

<p><strong>Jesse:</strong></p>

<ul>
<li>how about prefixing long options with <code>no-</code></li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>not very Perlish</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>you might as well use <code>\!</code></li>
<li>at least it's not ambiguous with the rest of the options</li>
</ul>

<p><strong>Jesse:</strong></p>

<ul>
<li>once you're into long words, you're into readability</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li><code>:no-name</code> looks different to me</li>
<li>it's actual Perl 6 syntax</li>
<li>that should set the value of something called <code>no-name</code></li>
<li>rather than negating the value</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>do what I do</li>
<li>change your history operator</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>Perl 6 is rewriting history now?</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>at some point, if you really want negation, <code>:name=false</code></li>
<li>you're there</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>shells do not pay attention to history characters without alphanumerics after them</li>
<li>maybe you can swap the bang and the colon</li>
<li>I wouldn't be surprised if someone didn't invent a shell which did that though</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>this will be the default argument processor for all user-defined programs</li>
<li>I want it to work for them too</li>
<li>I'm replacing Getopt::Long here</li>
<li>I can't do <code>+name=value</code></li>
<li>should evaluate to <code>name = value but false</code></li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>I hesitate to propogate the brain damage of the plus and minus to colons</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I'd prefer not to see it at all</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>bang-dash, bang-double-dash, or bang-colon?</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>as long as I've been doing Unix command lines, those pluses bug me</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>using them for beginning and ending sort fields, I can never remember which comes first</li>
<li>same with <code>@+</code> and <code>@-</code> in Perl 5, and it's <em>my</em> language, darnit!</li>
<li>I'm pretty okay with the slash</li>
<li>we're using them in the sense of HTML tags: the end of a metamarker</li>
<li><code>:/</code> means the opposite of the beginning of something</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>it seems that zero will work</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>it will, but it disappears against the word</li>
<li>it's not very visually distinctive</li>
</ul></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

