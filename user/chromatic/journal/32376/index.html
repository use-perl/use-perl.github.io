<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Design Team Minutes for 07 February 2007</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Design Team Minutes for 07 February 2007</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2007-02-12T07:53:54</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 Design team met via phone on 07 February 2007. Larry, Damian, Allison, Jesse, Nicholas, and chromatic attended. These are the notes.</p>

<p><strong>Larry:</strong></p>
<ul>
<li>working on one thing</li>
<li>a standard grammar for Perl 6, written in Perl 6</li>
<li>not in a subset of Perl 6</li>
<li>but what I want the eventual grammar to look like</li>
<li>the real thing</li>
<li>give people who are trying to bootstrap a target to aim for</li>
<li>I have almost 1500 lines</li>
<li>it's a good majority of the syntax we have already</li>
<li>still a few things that I need to whack into it and think through</li>
<li>efficient dispatch of created-on-the-fly sublanguage parsers</li>
<li>every different quote modifier basically creates a different language</li>
<li>we don't want that leaking up into the higher layers such that switching to a different quote type means that you have to recalculate the entire grammar</li>
<li>that would be slow!</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>did you benchmark that?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>it doesn't even parse yet</li>
<li>hopefully we can get it there in the next week or two</li>
<li>then we can think about running it</li>
<li>have not thought about leaving anything out for the sake of the bootstrap version</li>
<li>intended to be full Perl 6</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>it has features that don't exist in an implementation?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>a couple of things</li>
<li>none of the rule engines do longest token multi-dispatch to rules</li>
<li>I am attempting to order the rules such that ordered dispatch will probably parse</li>
<li>it's a subset of programs that will parse correctly</li>
<li>we can get a long way with that</li>
<li>that little sop helps to bootstrap</li>
<li>it's also pure to the extent possible</li>
<li>no action statements</li>
<li>null actions on matches</li>
<li>there's a comment on each to mark that stub</li>
<li>it's useful to verify that something parses as Perl 6</li>
<li>or you can pre-parse it and insert actions into it</li>
<li>hope that will allow all of the different engine parsers to work from the same syntax</li>
<li>it's a lot of fun</li>
<li>also a lot of hard thinking</li>
<li>trying to get heredocs the way they ought to be is an interesting challenge</li>
<li>one-pass parsing with whitespace dwimmery is tricky</li>
<li>also did a little work on the syntax highlighting for Vim for Perl 6</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>excellent work!</li>
<li>it's a huge project in itself</li>
<li>I'm re-evaluating the last few diffs to the Synopses</li>
<li>so that's where they've come from!</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>most of my changes in the last month or so have been toward that end</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>back from our first major holiday in the past four years</li>
<li>dealing with some work in Australia</li>
<li>plan to re-read the entire Synopses in prose form then</li>
<li>expect some feedback on them at some point</li>
<li>otherwise gearing up for the year ahead</li>
<li>sending out feelers for work contracts</li>
<li>confirmed to go to YAPC::Europe and YAPC::NA</li>
<li>need to gather some work around those events</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>did some work on a PBC to C mechanism for Parrot</li>
<li>you can take <em>perl6.pbc</em> and make it into an executable that depends on libparrot</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>what's the size?</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>it's a couple of kilobytes larger than the bytecode... about 3k, so far</li>
<li>it's a small program</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>how big is <em>perl6.pbc</em>?</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>it's a bit over 300kb, not bad</li>
<li>that's not the whole thing, but it's pretty good and it could get smaller</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>how big is <em>libparrot.so</em>?</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>with debugging symbols and no optimizations, 1.2 megabytes</li>
<li>the whole thing could be perhaps 2 megabytes right now, easily</li>
<li>I can imagine better optimizations too</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>can you compress it?</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>the bytecode?  it should compress pretty well</li>
<li>it's a static array right now, so it's in the data segment and should be shareable</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>I know a bit about zlib</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>I can send you the code</li>
<li>will try rewriting it in Parrot</li>
<li>I'm crazy that way</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>tracked down the last -DMAD failure in blead</li>
<li>asked Larry about it</li>
<li>sort of stuck on that</li>
<li>trying to get 5.8.9 shipped</li>
<li>be nice to get that fixed; we should be able to smoke it and identify any regressions</li>
<li>because MAD keeps all the whitespace, it crams whitespace and comment lines together</li>
<li>if you do #line 1 and then # perl -options, it triggers the options</li>
<li>but MAD doesn't</li>
<li>there are a couple of regressions related to that</li>
<li>wonder if I can fix that</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>I need to dig into it and see</li>
<li>that sounds like a good theory</li>
<li>it tries to attach the whitespace to the end of the line of the previous thing, then attach subsequent whitespace to the following thing</li>
<li>maybe it doesn't always do that</li>
<li>line-ending comments attach to the previous thing</li>
<li>block comments attach to the next thing</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>maybe I should dump the XML from the program</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>did you send a test case?</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>yes, a four liner</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>ran into Sam Vilain at Kiwi FOO</li>
<li>spent a couple of days hacking in Auckland after that</li>
<li>hacked up two prototype metamodels</li>
<li>the first was horribly convoluted</li>
<li>we started over and that one turned out simple and easy</li>
<li>quite happy with that</li>
<li>almost have the Objects PDD first draft ready to check in</li>
<li>worked on it for several weeks</li>
<li>that was the last bit I needed to make it usable</li>
<li>also have submitted Artistic 2.0 to OSI for approval</li>
<li>they wanted some formal documentation for that</li>
<li>the process seems to be fairly simple</li>
<li>just takes a little time</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>any feedback on the trademark of Perl?</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>it's finished!</li>
<li>we're the official proud registers of a Perl trademark on the onion logo</li>
<li>we're registering in Europe, Japan, and Canada now</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>Damian, is there anything left to do on POD 6?</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>finishing the documentation of the parser I wrote in Perl 5</li>
<li>it's on my list</li>
<li>it should be higher in priority</li>
<li>now it will be</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>Larry, does your Perl 6 grammar also have a POD parser?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>it does not yet parse the internals of POD</li>
<li>it only parses the begin to end into POD blocks</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>it treats them as comments?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>it does</li>
<li>the matching start and end also means I can ignore the nesting aspects</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>does it handle the abbreviated forms?</li>
<li><code>=for</code> and <code>=keyword</code>?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>those guys are standalone</li>
<li>it ignores those, I think</li>
<li>I'm waiting to see what your POD parser looks like in Perl 5</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>mine's deliberately not grammar-based</li>
<li>most of the complications deal with unclosed nested constructs without falling over</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>if you have a Perl 6 program with misnested POD, what does Perl 6 do?</li>
<li>will it realize a nesting problem?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>that's subject to the definition of POD</li>
<li>right now it handles it fine</li>
<li>the grammar looks for the corresponding end identifier</li>
<li>it just needs the outer one to match</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>mine closes on the outer match and signals a misnesting error</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>if you want to thread something through, use similarly named chunks</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>I'm trying to extract the entire structure of the POD</li>
<li>all Larry needs to do is find the end point</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>I do have a comment saying that we can't do the <code>$=</code> trick yet</li>
</ul>
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

