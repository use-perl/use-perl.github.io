<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: chromatic's Second Law of Backwards Compatibility</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>chromatic's Second Law of Backwards Compatibility</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2007-07-04T21:15:01</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>Anyone who says "Sure, it's obviously broken and we have A Better Way, but we can't fix it now because we have a dozen users" deserves a swift kick in the head.</p>

<p>When I get my time machine, the second thing I will do is to apply this principle to Unix development circa 1975, only a few Moore's Law doublings after the invention of the C programming language.  I mean, seriously--predeclarations, type punning, null-terminated strings?</p>

<p><em>The amount of time wasted by stupid choices in a successful technology increases by an order of magnitude every eighteen months.</em></p>

<p>I can't prove it, but I do have a heavy set of boots lined up to make my point.</p></p>


<hr/>



<h2>Message in a (Klein) bottle...</h2>
<h3><a href="/user/renodino/">renodino</a> on 2007-07-05T05:05:44</h3>
<p><blockquote><div>When I get my time machine, the second thing I will do is to apply this principle to Unix development circa 1975,...</div></blockquote> <p>

Please, <i>please</i>, when you get there, will you give them a heart to heart talk about <b>signals</b> ? Take away their mushrooms and bongs, and explain, slowly, but carefully, that asynchonry just ain't that simple ?</p>



<blockquote>

<h2>Re:Message in a (Klein) bottle...</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-07-05T08:58:42</h3>
<p>Okay, that's on my list, but lower than the decision to keep x86 and BIOS around for so long.</p>





</blockquote>


<h2>I have another law</h2>
<h3><a href="/user/slanning/">slanning</a> on 2007-07-05T10:20:47</h3>
<cite>Those who don't take reality into account make up laws instead and then kick people in the head for not following them</cite>



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-07-05T19:19:10</h3>
<p>I'll put you on the "pro" side of literal tabs in Makefiles then, and five years of completely broken <code>Scalar::Util</code> in ActivePerl.</p>



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/jand/">jand</a> on 2007-07-05T21:46:15</h3>
How is Scalar::Util broken in ActivePerl it is (at least supposed to be) the same as in core Perl.



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-07-05T23:29:26</h3>
<p>As I understand it, it doesn't include (all of?) the XS components of the module, making <code>reftype()</code> unavailable for the ActivePerl 5.8.x releases.</p>

<p>The explanation I heard (and I don't remember where, though I'm pretty sure it wasn't from you) is that one goal of the ActivePerl releases for 5.8.x was to maintain binary compatibility back to 5.8.0, and thus there would be no <code>reftype()</code> available for <code>Scalar::Util</code>.</p>

<p>When I last looked at which of my distributions failed in the AS build and test farm, most of the failures looked related to that.</p>

<p>Again, I don't remember exactly who told me this and can't find a link to verify it, so I welcome corrections and clarifications!</p>



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-07-06T02:18:35</h3>
You might have heard it from me, although I'm not sure it was (only) reftype()... might also have been weaken().<br><br>ActivePerl on Windows maintains binary compatibility, and it does so for business reasons.<br><br>As a result Scalar::Util, and hence all interesting packages (as in like 40% of all CPAN modules) are broken on ActivePerl, and can't be fixed for business reasons.<br><br>This is why I never got to demo PPI on my own laptop at the Perl Conference the year I want, which triggered off a year-long attempt to get them to fix it, at the end of which (when they said they intentionally wouldn't be fixing it for business reasons flat out) I gave up on ActivePerl and started the process that resulted in Strawberry Perl as a replacement for it.<br><br>But yes, I agree to some extent with chromatic on this one.<br><br>That said, I think you sometimes go too far in the other direction as well. It can be very tempting to say, "Screw the entire userbase, we're changing the way this works".<br><br>When the userbase is 12, who cares, when it's 12,000 or 12,000,000 that's an entirely different matter.<br>



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-07-06T04:50:11</h3>
<p>If you&#8217;re building something important, 12,000 is still not very big.</p>

<p>Of course it&#8217;s hard to assess ahead of time whether 12,000 is small or big in one&#8217;s particular case&#8230;</p>



<h2>Re:I have another law</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-07-06T06:22:01</h3>
<p><blockquote> <div><em>When the userbase is 12, who cares, when it's 12,000 or 12,000,000 that's an entirely different matter.</em></div> </blockquote>

<p>My objection is when the <em>best</em> (and sometimes <em>only</em>) argument is "We can't change because people are already using it!"  That argument was rubbish back when <code>make</code> had 12 users, and it's rubbish now when the proposed change improves the lives of many times <em>more</em> users.</p>

<p>In ten years, see if fervent adherence to backwards compatibility killed Perl 5 in 2002.</p>



<h2>Re:I have another law</h2>
<h3><a href="/user/jand/">jand</a> on 2007-07-06T22:40:43</h3>
12,000 is the number of downloads of ActivePerl for Windows every 2-3 days (downloads for other platforms are significantly lower).  Which is why breaking backwards compatibility in the PPM repository is a big deal.<br><br>Of course all of these issues are really just pointing out faults in the original setup of the PPM and build farm infrastructure.  Unfortunately it is a lot of work to get it cleaned up.  We are currently testing adding additional repositories that are built with 5.8.8.  We have already changed the default repository URL in ActivePerl 819 and later to be version specific, so we can redirect them to more up-to-date repositories once they are operational.<br>





</blockquote>


<h2>Re:I have another law</h2>
<h3><a href="/user/slanning/">slanning</a> on 2007-07-06T08:53:13</h3>
<p><div class="quote">The explanation I heard [...] is that one goal of the ActivePerl releases for 5.8.x was to maintain binary compatibility back to 5.8.0, and thus there would be no reftype() available for Scalar::Util.</div>  <p>I think it's reasonable to try to maintain binary backwards compatibility, but the problem seems to come from them breaking compatibility with Perl!</p>
<p>Is the problem instead that we pretend that ActivePerl is Perl?</p>
<p>P.S. Why is `make` considered broken, anyway, instead of the editors that can't highlight/insert tabs? Maybe they just aren't appropriate for editing Makfiles.</p>



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-07-06T23:41:37</h3>
<p>Invisible characters were much more difficult to see 30 years ago, but (so the story goes) a dozen people already used <code>make</code>, so the author both regretted the choice of literal tabs and couldn't fix the program.</p>





</blockquote>


<h2>Re:I have another law</h2>
<h3><a href="/user/jand/">jand</a> on 2007-07-06T21:43:49</h3>
You are mixing 2 different issues:<br><br>ActivePerl contains the same or a later version of Scalar::Utils as the corresponding core release. ActivePerl should always contain a superset of the functionality of the corresponding core release; everything else would be a bug.  In the spirit of the Artistic License, ActivePerl is a "Standard Version" of Perl.<br><br>The PPM build farm however does run with very old distributions for backwards compatibility, as the generated modules must work on any released version of ActivePerl.<br><br>I did a quick check, and even ActivePerl 5.8.0.806 contains Scalar::Util::reftype(), so I'm wondering why this isn't available on the build farm (the machines are supposed to be using build 806).<br><br>Just for reference, ActivePerl 5.8.0.806 contains Scalar::Utils version 1.07 and ActivePerl 5.8.8.820 contains Scalar::Utils 1.18.<br>



<blockquote>

<h2>Re:I have another law</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-07-07T00:52:04</h3>
<p>It may have been <code>refaddr()</code> instead; that's the conclusion I reach after looking at the <a href="http://ppm.activestate.com/BuildStatus/5.8-linux/linux-5.8/Test-MockObject-1.07.txt" title="activestate.com">PPM build farm failure for Test::MockObject on Linux</a activestate.com>.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

