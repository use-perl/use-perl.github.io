<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Design Minutes for 29 August 2009</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Design Minutes for 29 August 2009</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2009-09-04T08:13:04</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 design team met by phone on 26 August 2009.  Larry, Allison,
Patrick, Jerry, Will, and Nicholas attended.</p>

<p><strong>Larry:</strong></p>

<ul>
<li>mostly this last week on an awful lot of question answering online</li>
<li>spent far too long trying to figure out how to start monitoring Twitter</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>when you've figured it out, can you let me know?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>even went all the way back to the twitter webpage, with a Firefox extension to auto-reload every 5 minutes. You're hosed if you're typing at the point when it reloads, as it throws it away</li>
<li>downloaded Adobe AIR, because a lot of the clients want that, but it wanted to download Flash, so I said "Forget about that"</li>
<li>[Twitter] is probably another big timesink. Well timed given the headline this week about people multitasking</li>
<li>spec work: a lot of clarifications</li>
<li>disallowed alphanums as quote delimiters, or at least mention it in a better place</li>
<li>thinking a lot about the notion of type with implicit coercions</li>
<li>talked about it a bit on #perl6</li>
<li>put a typename in a declaration, and follow it with <code>()</code> or a type in <code>()</code></li>
<li>the named type defaults as <code>Any</code>. Externally it advertises that it takes an Any type, but it coerces it internally the named type</li>
<li>probably removes need to write a lot of functions and packages in the <code>Any</code> package, as it will automatically put things in the right place</li>
<li>also won't need to write explicit coercing multis in the <code>Any</code> cases</li>
<li>thinking about changing the syntax of declarations of context vars</li>
<li>currently a trait, think it should be a separate decelerator</li>
<li>unfortunately "context" looks far too much like "constant", so too much visual confusion</li>
<li>didn't manage to get any hacking on <code>viv</code>, but hopefully soon, and will finish the bootstrap</li>
<li>encouraged by seeing the microcosm of that bootstrap -- the grammar engine that Damian put on top of 5.10 regexps</li>
<li>in the standard grammar, fixed some error messages to be more specific on [something], maps with missing commas and malformed comments</li>
<li>it catches alphanums used as delimiters, to go with the spec</li>
<li>now correctly parses Pod style inline comments, with <code>#=[]</code> and indented Pod, to go along with new Pod spec</li>
<li>made comments into a syntax category, so it will be trivial for a user to add their own comment syntax</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>had visitors, but they're gone, no more trips planned and the kids are back at school</li>
<li>working on grants: worked with Jonathan to get his Hague grant finished, and on his new one. Sent that to TPF</li>
<li>working on my grant</li>
<li>working on a couple of Vienna grant days</li>
<li>also a variety of planning</li>
<li>made minor bug fixes: added code to Rakudo's config script, so that if someone attempts to build Rakudo with a Parrot that is installed without the dev components, gives a nicer error message suggesting that you need to use <code>install-dev</code></li>
<li>trying to make it friendlier for people trying to build it, to figure out what's going wrong</li>
<li>last week's Rakudo release went just fine. No major problems to talk about</li>
<li>the "PDX" release. Actually, from the US perspective it went off on Wednesday, a day early</li>
<li>looking at a few things in Parrot HEAD that have caused Rakudo problems building, but nothing spectacular</li>
<li>made a patch to Parrot that
causes it to no longer compare strings when doing <code>isa</code> checks</li>
<li>resulted in about a 4.5% overall speedup for Rakudo (and
should affect other PCT-based languages similarly)</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>yesterday was the Parrot Foundation annual meeting</li>
<li>all existing directors voted in by the membership for another year, and added an additional director: Patrick, so welcome to the board</li>
<li>my summer has been full of wonderful distractions</li>
<li>hopefully it will start raining soon, and I'll have more time</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>trying to keep Partcl up to date with Parrot, but first commit after 1.5 was released caused a huge leak that killed my spectest</li>
<li>I'm stuck at 1.5 release</li>
<li>[the Parrot commit] was fixed, but that caused Parrot to segfault all the time for Partcl</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>maybe we should revert that</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>all Parrot's tests pass with that</li>
<li>forward is probably the best the way out</li>
<li>There was a discussion on IRC: "Why aren't Parrot's tests failing, if the languages' are?"</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Parrot's aren't very complete</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>glad that we're tracking Parrot quite regularly, as Parrot could have got out with a release [with problems for Partcl], but it doesn't, because we're tracking HEAD</li>
<li>wrote code, added functionality, but for Partcl, not Parrot, unfortunately</li>
<li>I'm pitching Partcl as easier to hack on than Radukdo</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>grrrrrrrrrr</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>I could give you some patches, but IIRC last time I broke the spec test</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>you're more that welcome to pitch Partcl as easier to hack on</li>
<li>I'll fight that by making Radudo easier to hack on</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>hitting segvs and PGE issues that seem to be hitting infinite loops, but need to get HEAD working so that i can diagnose these and open tickets</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>working on PCC branch, now at about 500 failing tests</li>
<li>went up to 2700 failing when the PIR tests started printing out a plan</li>
<li>down 2500 with one change to get MMD working with the new argument passing scheme that was pretty good</li>
<li>part of the week taken up with Parrot Foundation work</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Rakudo wants features soon please</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>been reviewing Vasily's branch</li>
<li>it's not "do we merge it all, or do nothing?" but "do we merge as-is, or do we work to refine it to give backwards compatibility"</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>there's an intermediate level, even within that</li>
<li>backwards compatibility versus delay -- Rakudo would prefer no delay</li>
<li>within the Rakudo camp, we're really beginning to struggle with Parrot and features landing, because we're working to our deadline</li>
<li>I chatted with Jonathan - calling conventions are not needed for September, because Jonathan is on holiday, but if they don't land by the start of October, it's a real pain for Rakudo Star</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>it's really down to the pace of development -- I can go as fast as I can</li>
<li>go, but [not faster]</li>
<li>I can't tell you how long it will take to get 500 failing tests resolved</li>
<li>might be 2 hours -- I fixed 2500 in an hour, with one line of code</li>
<li>it could be scary edge cases, say the last 5 tests take two months</li>
<li>I will work as fast as I can</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>will be great (Thanks)</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>I do have strong opinion on our deprecation policy</li>
<li>we picked this to avoid problems Parrot was having before 1.0</li>
<li>back then there was no way even Rakudo could safely develop on it because we kept yanking carpet out from under it</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>it still happens :-(</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>It does, but [a lot less]</li>
<li>[with the policy], change this macro one way, people using it can still use it</li>
<li>we can't predict everything</li>
<li>we will never have no bugs</li>
<li>if [making these type of changes] is really simple and you can do it, it's insane not to</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>can we resolve the problems in trunk, or should Rakudo build against a branch?</li>
<li>branches can't be long lived</li>
<li>otherwise there's a really big problem when they are merged merged</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>We need our developers to think of deprecation cycles</li>
<li>if function is on the API list (thanks Jeff, for compiling that)</li>
<li>if your changes change an argument to a function on the API list, you can't change it on a deprecation cycle</li>
<li>you can create a <em>new</em> function that takes alternate arguments, say <code>PMC *</code> instead of <code>void *</code></li>
<li>think of this as you go, and there's no problem</li>
<li>merge and we go on</li>
<li>you need a degree of forethought as you go</li>
<li>[the branch] looks like all it needs are a few function and macro changes, which is impressive, given how exotic it is</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I trust Rakudo's ability to adapt to Parrot better than than Rakudo waiting for a feature to be definitely safe</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>on the other side, when we're approaching a production release, say 2.0, if you've got some dramatic changes, the earlier you can merge them in after the previous production release, the more time you have to test trunk</li>
<li>there's tension between merge in as soon as possible and delay until everything is stable</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>would be okay with me if things broke in early months (August, September)</li>
<li>bigger changes in October, November -- there's not as much time to react</li>
<li>that argues in favour of going into trunk and fixing breakages there with HLL languages that can find them rather than holding a branch, trying to get it there [perfection], and then having little time [in trunk, before a release]</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>it's about balancing, weighing the good and bad</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>for Rakudo, we desire advancement and features more than stability</li>
<li>this may not be Parrot's priority and that's fine</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>the phase you're in is roughly where Parrot was around this time last year -- rapid development towards a point where you can then get to settle down</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>rapid development, but a lot of blockers outside our court</li>
<li>if they were in ours, it would be comfortable, but they are in Parrot's</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Aside from calling conventions, and GC-able contexts, what else does Rakudo need?</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Really just those two, but calling conventions are bigger, much bigger</li>
<li>we expect to have to redo parameter parsing and arguments </li>
<li>need to do that and happy to do that, because we know we will get big performance wins</li>
<li>not much else I can think of in Parrot is a huge advantage to us</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>if we get to a point in the PCC branch where 20 nasty edge cases are all that fail, I'll let you know, as you can try a branch of Rakudo to target it</li>
<li>hopefully we won't get there. Hopefully the last 500 failures go</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>we have some really really good troubleshooters in Parrot right now, at the C level. When something in Rakudo breaks, they fix it <em>fast</em></li>
<li>I really have a lot of faith that bugs would be found and fixed quickly</li>
</ul></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

