<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: PPI::Tiny 0.01 Released!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>PPI::Tiny 0.01 Released!</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2007-01-31T04:08:49</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I admire <a href="http://search.cpan.org/perldoc?PPI">PPI</a>.  It addresses a nearly intractable problem and solves it for almost every case admirably.</p>

<p>However, it's a really big distribution.  It contains lots of modules, uses lots of memory, and can be slow.  It does a lot.</p>

<p>Sometimes you don't need all of that overhead if you just want to parse a Perl document.</p>

<p>I've written a pure-Perl replacement that implements the barest minimum useful features in the hopes that it will be much more useful to people who want to parse Perl but can't afford the kilobytes of disk space it takes to do the job correctly.  Until the CPAN mirrors sync, download <a href="http://wgz.org/chromatic/perl/PPI-Tiny.tar.gz">PPI::Tiny</a> from my own site.</p>

<p>Be sure to read the documentation carefully; I think I've listed every spot where it doesn't behave exactly like its heavyweight older brother accurately, but  I might have missed a few.  (In reality, there are only three or four, I believe.  I might add those later.)</p>

<p>Enjoy!</p></p>


<hr/>



<h2>Classic.</h2>
<h3><a href="/user/Matts/">Matts</a> on 2007-01-31T08:21:27</h3>
I think you get to be an honorary Brit now.



<h2>That thing...</h2>
<h3><a href="/user/Adrian/">Adrian</a> on 2007-01-31T09:14:02</h3>
... that's like bronzy or steely... what's the word....



<blockquote>

<h2>Re:That thing...</h2>
<h3><a href="/user/educated_foo/">educated_foo</a> on 2007-01-31T12:59:23</h3>
Humorless, perspectiveless pedant?



<blockquote>

<h2>Re:That thing...</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-02-07T09:49:46</h3>
You misspelt "childish".





</blockquote>

</blockquote>


<h2>now I get it...</h2>
<h3><a href="/user/domm/">domm</a> on 2007-01-31T10:01:46</h3>
<p>After reading <a href="http://use.perl.org/article.pl?sid=07/01/29/1318231" title="perl.org">this discussion</a perl.org> I finally got the point...</p>

<p>:-)</p>



<h2>What use cases does this implement?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-01-31T10:04:17</h3>
All the other Tiny modules outline the cases that they CAN be used for.<br><br>For example, YAML::Tiny is intended to handle META.yml and typical simple config files.<br><br>Second, you fail the criteria for<nobr> <wbr></nobr>::Tiny suffixes in that aren't backwards compatible. You fail again because you have dependencies.<br><br>Thirdly, why don't you take patches to add features?<br><br>Fourthly, it's not about the kilobytes of disk, it's about the multimegabytes of ram. People can and have used simple regex miniparser instead of the full PPI module, and correctly so.<br><br>Finally, I do get your point. I haven't actually tried XML::Tiny myself, only helped make sure he meets the criteria I set for<nobr> <wbr></nobr>::Tiny modules. But I see patches coming in for XML::Tiny to add missing features, so who knows how complete it will get.<br><br>



<blockquote>

<h2>Re:What use cases does this implement?</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-01-31T10:16:03</h3>
<p><blockquote><div><nobr> <wbr></nobr><em>... the criteria I set for<nobr> <wbr></nobr>::Tiny modules.</em></div> </blockquote>  <p>I consider the other half of the distribution name more important, actually.</p>



<blockquote>

<h2>Re:What use cases does this implement?</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-01-31T12:09:45</h3>
Fortunately, perfectly suitable modules already exist for people that care about the other half.





</blockquote>

</blockquote>


<h2>How unexpected.</h2>
<h3><a href="/user/jk2addict/">jk2addict</a> on 2007-01-31T13:52:23</h3>
After both threads, I feel like I'm in 3rd grade again.<br><br>If you don't like *::Tiny, don't use them. If you think they suck, submit a patch. If *::Tiny does what you need, without installed 42 other modules, (most of which in the XML namespace have various levels of compile headaches and lib versioning issues) then awesome.<br><br>Really, what's the big deal again? It feels like quibbling about calling a non-pedigree cat a feline just because it's not a purebred.



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-01-31T19:12:29</h3>
<p><blockquote> <div><em>Really, what's the big deal again?</em></div> </blockquote>  <p>CPAN names are rare.  They're first-come, first-served.  Thus it seems rude to me to claim a namespace for a distribution that doesn't actually do what the name claims.</p>

<p>There's tremendous potential for confusion among the vast majority of CPAN users who've never read use Perl.  That seems, to me, highly unfair.</p>

<p>I'm also much less of a fan of bandying about strong assertions such as "Oh yeah, well no <em>real</em> user ever really uses this feature or that feature" without some sort of verifiable statistic.</p>

<p>If it takes uploading <code>DBI::Tiny</code> (a templating system), <code>CGI::Tiny</code> (a configuration file format parser), <code>Net::Tiny</code> (a program to build and install distributions), and (just for you) Handel::Tiny (an interpreter for ColorForth) to demonstrate to everyone's satisfaction that names matter, that the proliferation of slightly incompatible variants on similar themes may be confusing, and that there's a disturbing trend toward forking rather than fixing, then there's something wrong.</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/jk2addict/">jk2addict</a> on 2007-01-31T19:34:30</h3>
<p>I don't necessarily disagree with your overall naming issues. But if DBI and XML namespaces are so precious, they should be locked down, and registered to the appropriate set of users. But since we don't register namespaces any more on CPAN, game on as it seems.
</p> <p><blockquote><div>If it takes uploading DBI::Tiny (a templating system), CGI::Tiny (a configuration file format parser), Net::Tiny (a program to build and install distributions), and (just for you) Handel::Tiny (an interpreter for ColorForth) to demonstrate to everyone's satisfaction that names matter, that the proliferation of slightly incompatible variants on similar themes may be confusing</div></blockquote>  <p>
And there is the part I have real issue about. Why on earth would you upload a CGI::Tiny that doesn't have anything to do with CGI, or a DBI::Tiny that has nothing to do with DBI? That in itself, would be silly. XML::Tiny does have something to do with XML. It DOES try to work with XML, regardless of the quality of that action. XML::Tiny is not a network server, or a dbi layer, or an email pop checker in a costume. It is dealing with xml snippets and files. It is on topic.
</p>
<p>
Uploading a DBI::Tiny that is a templating system and not something that does DBI-like database work would be a bad, wrong, horrible thing; not because of the name, but because that it is not database related. Since XML::Tiny is about working with xml and xml snippets, spec compliance aside, imho the name is fine, and on topic.
</p>
<p>
Again, if we don't want people to do it, let's go back to registering namespaces on CPAN. If someone wants to make a DBI::Tiny, and it actual does a subset of the things DBI does, then I'm fine with it. If someone makes a DBI::Tiny that is really a mini image resizer, then we have problemns. I don't think we're there yet.
</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-01-31T22:34:34</h3>
<p><blockquote> <div><em>XML::Tiny does have something to do with XML.</em></div> </blockquote>  <p>Perhaps it does in the sense that what it parses bears a superficial resemblance to XML, in the same way that what <code>PPI::Tiny</code> parses bears a very superficial resemblance to what <code>PPI</code> parses.</p>

<p>XML has a widely-distributed, well-understood, and well-implemented specification.  It's easy to test a parser for compliance with the specification.  If it fails, it's not an XML parser.</p>

<p>That was the point of specifying XML.</p>

<p> <code>XML::Tiny</code> <em>deliberately</em> does not implement the specification, yet it's in the <code>XML::</code> namespace deliberately anyway.</p>

<p>I'm not worried about Matt or Robin or Michele or Sean finding the module and having trouble with it.  They're very smart and experienced and can probably file a dozen tickets in RT just by reading the code once.</p>

<p>I worry a lot about non-experts who like the name, like the lack of dependencies and the ease of installation, and who'll unfortunately spend a lot of time debugging all of the code in their applications because their particular set of minimal XML is far different from David's set of minimal XML.</p>

<p>I agree with the goals--especially that you shouldn't have to be an XML expert to install and use the module--but I fear that you <em>do</em> have to be an XML expert to understand where the module just doesn't work.  That seems to work against its goals.</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-02-01T03:03:46</h3>
&gt; PPI::Tiny parses bears a very superficial resemblance to what PPI parses.<br><br>Hardly. It bears more of a resemblence to String.pm<br><br>NONE of the Tiny modules are in compliance with the standards they implement, and all of them make quite clear that they are for a very specific use case, and you should move to a real module as soon as it doesn't meet your needs.<br><br>And the argument of implementing something DIFFERENT, as opposed to implementing something incompletely, is a complete straw man argument.



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/vek/">vek</a> on 2007-02-01T07:15:32</h3>
<i>NONE of the Tiny modules are in compliance with the standards they implement, and all of them make quite clear that they are for a very specific use case, and you should move to a real module as soon as it doesn't meet your needs.</i><br><br>In hindsight the bloke probably shouldn't have claimed that he "decided to do XML right" in his original post though<nobr> <wbr></nobr>;-)



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-02-01T07:39:37</h3>
I agree.<br><br>I've never had this sort of flamewar on any of the other Tiny modules, and they all have similar properties to this one.<br><br>I think the main problem here was the somewhat antagonistic attitude of the post.<br><br>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/vek/">vek</a> on 2007-02-01T16:56:00</h3>
<i>I think the main problem here was the somewhat antagonistic attitude of the post.</i><br><br>Exactly.





</blockquote>

</blockquote>


<h2>Re:How unexpected.</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-02-01T07:23:58</h3>
<p><blockquote> <div><em>It bears more of a resemblence to String.pm.</em></div> </blockquote>  <p>Without a specification, I can't see how anyone can decide what is and isn't PPI.  I chose the example pretty carefully.</p>

<p> <code>YAML::Tiny</code> doesn't parse YAML.  That is, I can give it a valid YAML document--perfectly valid, according to the YAML specification--and the module will fail to parse it appropriately.  The documentation makes it very clear that you aren't interested in parsing YAML.  That's fine, but it makes me wonder why YAML is in the name of the distribution.</p>

<p> <code>XML::Tiny</code> doesn't parse XML.  I can give it a valid XML document--perfectly valid, according to the XML specifications--and the module will fail to parse it appropriately.  Again, that's fine, but again I wonder why call it "XML"?</p>

<p>I make no judgment on the utility of these distributions or the motives of the people creating them.  I'm sure they're useful within their proper contexts.  Yet their names I fear will be confusing when reading code that uses them or when performing a CPAN search.  I think they promise things that aren't true.</p>

<p>This is a problem, I fear, just waiting to bite non-experts--the kind of people who have trouble installing distributions with XS components or several dependencies.</p>

<p>That's one of the target audiences of the<nobr> <wbr></nobr><code>::Tiny</code> modules, isn't it?</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-02-01T07:48:02</h3>
Yes, PPI is a suitable grey case, because it's an incomplete but suitably useful implementation of a language which itself does not have a specification. In fact, as I've pointed out in talks, at the deeper levels of understanding "There is no Perl".<br><br>&gt; YAML::Tiny doesn't parse YAML. That is, I can give it a valid YAML document--perfectly valid, according to the YAML specification--and the module will fail to parse it appropriately<br><br>That's not entirely correct.<br><br>If you give it a set of YAML documents, it will parse some of them appropriately and some it will refuse to parse at all.<br><br>YAML::Tiny comes with compatibility tests. In fact, it ONLY comes with compatibility tests.<br><br>For every single test document, if YAML.pm and/or YAML::Syck are installed, it will load the same test document using YAML::Tiny, YAML.pm and YAML::Syck and make sure that what YAML::Tiny parses the document into matches what the other two would.<br><br>In fact, in writing YAML::Tiny I've found incompatibilities in BOTH of the others, where they don't parse according to the specification either.<br><br>YAML::Tiny parser SOME YAML documents, just not ALL of them.<br><br>I think the big difference in the XML::Tiny case is, as you say, in the quality of the documentation.<br><br>I've always been careful to say which subset the module is aimed at, and to try to repeatedly point out over and over again that the module is ONLY useful for a subset of cases, and that people should be prepared to move up to "real" modules (and I generally recommend which) when they outgrow the limited cases in which the tiny modules are useful.<br><br>I don't really like the docs for XML::Tiny in that they talk about what the module DOESN'T do, rather than what it DOES do. I hope that will be fixed.



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/Alias/">Alias</a> on 2007-02-01T07:50:44</h3>
What I should also mention here is that I think the argument really comes down to a question of "If you don't implement the full specification of $foo, can you call something a $foo parser".<br><br>In the sense that YAML::Syck does not parse the entire YAML specification, do we call YAML::Syck "not a YAML parser"?<br><br>I think there's a place for non-speck parsers, with suitable caveats, when you don't have the resources to run a full parser.



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-02-02T01:45:31</h3>
<p>It is fine to reject valid documents if they use format features you do not implement. It isn&#x2019;t fine to just bumble on, returning junk to the API client. YAML::Tiny does the former. XML::Tiny does the latter. In fact, it will fail to reject a lot of malformed XML documents as well. And on top of it, it mangles the text content so that you cannot recover the original text unambiguously.</p>

<p>That is not an XML parser, it isn&#x2019;t even a parser for a subset of XML. It is just a parser for stuff that happens to resemble XML.</p>

<p>Done properly, you <em>can</em> write a useful parser for a subset of XML. But you need at least a moderate familiarity with the intricacies of XML to know which parts warrant what kind of treatment, and the author&#x2019;s attitude is apparent from the docs; after I read that screed, I was not surprised to find that instead of assuming there might be more to XML than met his eye he just plunged in and did the first thing he could think of.</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-02-07T10:29:32</h3>
Whether ignoring things like processing instructions and entity declarations instead of dealing with them properly means that the results are "junk" is a matter of opinion.  In my experience - experience in which I only use XML because it's what some other guy has provided - ignoring them has always been just fine.<p><blockquote><div>And on top of it, it mangles the text content so that you cannot recover the original text unambiguously.</div></blockquote>

Aye, and the next release will fix that.  Although to be honest I don't consider it to be a significant problem, as the only times you're liable to find character sequences like &amp;amp;nbsp; in real data (as opposed to deliberately pathological test cases) are in HTML and XML documents talking about the pitfalls of and how to encode such sequences of characters.



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-02-07T11:26:04</h3>
<p>Things like &#8220;<tt>&amp;amp;amp;</tt>&#8221; are very common in XML on the web: that&#8217;s what ends up in the RSS feed when you type an ampersand into a weblog.</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-02-07T15:19:27</h3>
When you get &amp;amp; through, you *know* that it was originally &amp;amp;amp;, because you know that I would have translated &amp;amp;<nobr> <wbr></nobr>:-)

<p>Anyway, the shiny new no_entity_parsing and strict_entity_parsing options (on CPAN in the next few days) should fix that.</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:How unexpected.</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-02-07T10:17:54</h3>
<p><blockquote><div>I don't really like the docs for XML::Tiny in that they talk about what the module DOESN'T do, rather than what it DOES do. I hope that will be fixed.</div></blockquote>

That's certainly a change I'm prepared to make.  I'll also keep a section on what it doesn't do





</blockquote>


<h2>Re:How unexpected.</h2>
<h3><a href="/user/Maddingue/">Maddingue</a> on 2007-02-02T13:20:59</h3>
<p>As one of the main issues for chromatic seems to be the names, maybe the<nobr> <wbr></nobr><code>::Tiny</code> modules should just be renamed with something like <code>Pseudo</code> in their name, for example <code>Parse::PseudoXML</code>, <code>Parse::PseudoYAML</code>, etc. </p>

<p>Even if you loose the cuteness of the "tiny" suffix, you gain more sensible and explicit names.</p>



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-02-02T19:19:32</h3>
<p>I like that much better.  My best other choice was<nobr> <wbr></nobr><code>::Minimal</code>.</p>





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>Re:How unexpected.</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-02-07T09:53:56</h3>
I'd love to see you do this.



<blockquote>

<h2>Re:How unexpected.</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-02-07T20:40:11</h3>
<p>Actually uploading them would be a huge mistake.  Perhaps under <code>Acme::</code>, but not in the near future.</p>





</blockquote>

</blockquote>

</blockquote>


<h2>Test::Spelling::Tiny</h2>
<h3><a href="/user/ChrisDolan/">ChrisDolan</a> on 2007-02-01T17:09:25</h3>
You misspelled your own name in the copyright statement at the end of lib/PPI/Tiny.pm.  Maybe you need a t/developer/spelling.t?<br><br>Or maybe Test::Spelling::Tiny?<nobr> <wbr></nobr>:-)<p><p><blockquote> <div><tt>package Test::Spelling::Tiny;<br>use Test::More;<br>use base 'Exporter';<br>our @EXPORT = qw(spelt_chromatic_ok);<br>sub spelt_chromatic_ok {<br>&nbsp; &nbsp;my ($str, $desc);<br>&nbsp; &nbsp;like $str, qr/chromatic/, $desc;<br>}<br>1;</tt></div> </blockquote>



<blockquote>

<h2>Re:Test::Spelling::Tiny</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-02-07T20:58:06</h3>
<p>Bug reports to RT please!</p>

<p>(Yes, that's a joke and yes, I made a typo when using <code>Module::Starter</code>.)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

