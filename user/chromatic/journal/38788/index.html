<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Design Minutes for 01 April 2009</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Design Minutes for 01 April 2009</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2009-04-11T01:51:52</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 design team met by phone on 01 APril 2009.  Allison, Patrick, Will, and Nicholas attended.</p>

<p><strong>Patrick:</strong></p>

<ul>
<li>"I knew you were going to pick on me first..."</li>
<li>I worked on improving Perl 5 regular expression support in PGE, which enabled the <code>:p5</code> modifier for regular expressions in Rakudo, which got us about 400-500 more passing tests. It's a cheap way of getting passing tests.</li>
<li>There are about 600 left, 1200 in total.</li>
<li>Also been answering questions online.</li>
<li>Today, working on improving Unicode handling in PGE and Rakudo.</li>
<li>The basic assumption is that ICU is available, and that we're doing the conversion there.</li>
<li>This will get another huge chunk of tests passing, that are waiting on that.</li>
<li>I started the PGE refactors, to catch up with Synopsis 5.</li>
<li>Ready for next set, which will bring in things such as protoregexps.</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>Nothing Perl 6ish.</li>
<li>Trying to help clean up docs in Parrot.</li>
<li>Realised today that I was doing it the wrong way, doing it manually, when we have a perfectly good tool to do it.</li>
<li>There's a macport for Parrot 1.0, which I can't take credit for, but it's out there.</li>
<li>I realize now that I need a devel version of it.</li>
<li>Hopefully with that I can get back onto partcl.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Feel free to add the dev tools.</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>It's easier to update an existing package.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Linux loves you to subdivide into lots of little packages. I don't think that other OSes go that far.</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>The trick will be to keep it as 1.0 but marked as updated.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Parrot 1.0 packages are now in Debian, in unstable. Very nice.</li>
<li>Working on other packaging stuff, such as the the rpath problem.</li>
<li>There are a few more little pieces that I'd like to see done before
submitting updated packages to Debian, such as <code>pbc2exe</code> and <code>target=parse</code> for the HLL compiler.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Note that that's getting a major refactor.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>We can't get that into an updated 1.0 release.</li>
<li>The patches for <code>Data::Dumper</code> from Barney, I'll see if I can get them in.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Pycon was very productive.</li>
<li>Python was really really welcoming to the alternate implementation.</li>
<li>Lots of little things on Pynie. Ramping up to getting started.</li>
<li>Getting familiar with the implementation.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Larry's been found; he's at MIT, giving his talk in about 5 minutes'
time. They've pasted a live URL on #perl6, plus video should be available afterwards.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>My question relates to what was said on #parrotsketch.</li>
<li>Does Parrot need ICU?</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Question is, "does it need a deprecation cycle?"</li>
<li>In one sense, it's adding something, so no.</li>
<li>But it's removal of working without a package.</li>
<li>Is it a 2.0 thing?</li>
<li>We should put in a notice for 1.5.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Rakudo could say "if you want to run the spec tests, you need ICU".</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>Seems sane.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>How do we stop false reports from people who don't have ICU?</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>In your configure process, check Parrot config, see if ICU is installed.</li>
<li>If not, disable those tests. If you want to, don't even compile without it.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Disabling the tests is really tough, because they're spread thought the suite.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Then make it a requirement for Rakudo and check very early.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>It would be nice if there was an option to Parrot's Configure to say "Require ICU", else the only time we find out is after we've built Parrot.</li>

<li>There's <code>--with-icu</code> but that's to specify where to find ICU, not to mandate its use.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>For your process, because you already have the automated the pull down the parrot packages, can you add "pull down ICU"?</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>For ICU that's not trivial.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Right now ICU is not required for Linux, because Parrot wouldn't build with ICU present on Linux a month ago (on AMD 64). Right now it's disabled. Once we get that resolved, the packaging will require ICU.</li>
<li>Having dependencies via the packaging system is really easy.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>That still causes issues for people who are running Rakudo from other-than-prepackaged Parrot, which is the vast majority [of Rakudo users] for the foreseeable future.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Adding dependencies [to Parrot] will move people to a packaged Parrot, as pain level of compiling [from source] becomes higher.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Agree, but not workable for Rakudo for 6 months.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Okay, so we don't make it a requirement for 6 months.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>That's okay for parrot, but where does Rakudo go? The options become "You have to live with the latest packaged parrot, which means you have to live without features X Y Z", or you have to build Parrot, and only then can it tell you that you don't have ICU.</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>Just have to configure, and then check that.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Right now, we just configure and make. Changing to "configure, check results, make" -- yes we can do that.</li>
<li>Have an option "I really don't want ICU", go ahead anyway.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>With appropriate warnings of "you will get some test failures"</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Expect ICU support to be good, or mandatory as of 1.5?</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Not mandatory until 2.0. But 1.5 is when it's okay to start breaking things if ICU is not installed.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I wasn't planning to break stuff.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>That's how I think about deprecations.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>Right now, you only get a problem if you try to do something that absolutely has to have ICU, at which point we throw an exception.</li>
<li>That works okay for PGE and PCT, but for Rakudo, we have thousands of tests.</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>Because Perl 6 was designed for Unicode.</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>But also Pugs folks went overboard. I think in some cases they automated generating tests by raiding the Unicode database.</li>
<li>One checkin I'm working on today should get us another 1800.</li>
<li>We could get 10,000 this month.</li>
<li>I look at the graph of spec tests and our green is less than half of the total test suite. I want to fix that.</li>
</ul></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

