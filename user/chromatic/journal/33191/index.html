<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Why Port Bugzilla Away from Perl?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Why Port Bugzilla Away from Perl?</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2007-05-03T19:38:17</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p><a href="http://avatraxiom.livejournal.com/58084.html">The Problems of Perl: The Future of Bugzilla</a>.</p>

<p>I've heard this song before.  The verses are <em>Don't make me install modules!</em>, <em>We're not very good Perl programmers!</em>, and <em>We didn't design the code very well, thus the language sucks!</em>.</p>

<p>You'd almost think we've achieved true AI, the way certain programming languages reach out of our monitors and force us to write unmaintainable code.</p></p>


<hr/>



<h2>I wonder...</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2007-05-03T22:10:45</h3>
Did he even read his own pro and con list for languages? I did and I came out with "Perl" just by reading the pro/con issues of the other languages.



<h2>Irony, anyone ?</h2>
<h3><a href="/user/renodino/">renodino</a> on 2007-05-04T00:07:42</h3>
Maybe Max should talk to his blog host ?
I hear tell they've maintained a few lines of Perl.



<h2>bugzilla and perl</h2>
<h3><a href="/user/rjbs/">rjbs</a> on 2007-05-04T02:27:02</h3>
Having hacking on Bugzilla a fair bit, I find it hard to take seriously the idea that Perl is what's wrong with Bugzilla development.<br><br>Their codebase is a mess because they lack enforced coding standards.  The poster seems to indicate that he thinks this won't be a problem with other languages.  Maybe it's significantly easier to maintain a single style of coding in Python or Ruby, but it's sure not just a given.  I've also worked on my share of horrible Python or Ruby.<br><br>Why not just rewrite parts of the system, as he suggests, but in <em>good Perl</em> rather than some other language that will require bridging.



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2007-05-04T11:48:14</h3>
If they don't enforce coding standards now; then any language they do choose is not going to help. Python has the "whitespace" thing but if you don't have standards you still get a wide array of coding practices. Ruby gives you nothing more than Perl as far as maintaining style.



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/Aristotle/">Aristotle</a> on 2007-05-04T14:15:43</h3>
<p>Yeah, but Perl is line-noisy! And it has regular expressions! And it gives you many ways to do things! It&#8217;s even the language motto, &#8220;TMTOWTDI&#8221;! Whereas Ruby&#8217;s motto is &#8220;optimise for programmer happiness&#8221; or something like that! Asdfghjkl!!1</p>

<p>(Sigh.)</p>





</blockquote>


<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/avatraxiom/">avatraxiom</a> on 2007-05-04T19:58:00</h3>
Actually, nowadays we have pretty strict enforced coding standards:<br/><br/><br/><br/>We did lack them in the past, though, it's true. I'd have less trouble if I hadn't been spending the last three years slowly and painfully refactoring all of Bugzilla.<br/><br/>-Max



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/avatraxiom/">avatraxiom</a> on 2007-05-04T19:58:46</h3>
They're here: <a href="http://www.bugzilla.org/docs/developer.html" title="bugzilla.org">Bugzilla Developer's Guide</a bugzilla.org>.



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-05-04T21:01:03</h3>
<p>That's a good start, but it focuses on design in the small.  That's not a bad thing.  Design in the small is very important.  Design in the large is also very important, and there's no substitute for good taste (which often comes from bad experiences).</p>

<p>I have the strong, armchair impression that design in the large is your biggest issue right now.  Rewriting (or refactoring) is the cure.  Porting to another language may seem like it helps, but in my experience getting rid of accumulated technical debt is more important.</p>

<p>Switching away from Perl may be the right choice for other reasons, but the language itself has sufficient abstraction and power that I'm not aware of any design-in-the-large problems it suffers.  I could give you a long list for C and PHP and to some extent C++ and Java.</p>



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/avatraxiom/">avatraxiom</a> on 2007-05-04T21:23:32</h3>
Yeah. We've actually been working on design in the large for quite some time now--I've been largely spearheading the refactoring effort. It's kind of hard to describe those principles in something like a Developer's Guide, so that's why they're not there. (Except in the sense of the General Guidelines.)<br><br>It's true that Perl is powerful enough to implement the design-in-the-large features we need. There may be other good reasons to switch to another language or framework, though.<br><br>The primary reason I posted the post is to start the process of research. That is, to see really what our best choice is. We're going to do some prototyping in various languages and frameworks, and see if there is a real tangible advantage in any of them.<br><br>-Max



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/vek/">vek</a> on 2007-05-04T22:38:24</h3>
<i>We're going to do some prototyping in various languages...</i><br><br>I think your time would be better spent reading Conway's Perl Best Practices book and getting familiar with running your code through Perl::Critic rather than attempting prototypes in other languages.



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/avatraxiom/">avatraxiom</a> on 2007-05-04T22:54:50</h3>
Noted.<br><br>-Max





</blockquote>


<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-05-05T06:19:14</h3>
<p><blockquote> <div><em>It's true that Perl is powerful enough to implement the design-in-the-large features we need. There may be other good reasons to switch to another language or framework, though.</em></div> </blockquote>

<p>Certainly true.  If you have expertise with a particular language or framework and your switching costs are less than the cost of refactoring in Perl, it's clearly a good change, and rational people will understand that.</p>

<p>I just hate to see important choices like this made on the basis of language advocacy, and your initial post concerned me.  I'm glad to see that my initial impressions were wrong.</p>



<blockquote>

<h2>Re:bugzilla and perl</h2>
<h3><a href="/user/avatraxiom/">avatraxiom</a> on 2007-05-05T06:31:22</h3>
Yeah. That's exactly what I'm trying to evaluate, if the switching costs would be less than the cost of refactoring and then future maintenance.<nobr> <wbr></nobr>:-)<br><br>And thank you, I'm glad we worked that out.<nobr> <wbr></nobr>:-)<br><br>-Max





</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>

</blockquote>


<h2>pkg-config</h2>
<h3><a href="/user/rafael/">rafael</a> on 2007-05-04T08:31:46</h3>
On the other hand, the new BSD pkg-config was rewritten <i>from scratch in an appropriate language, namely Perl</i> (<a href="http://www.onlamp.com/pub/a/bsd/2007/05/03/openbsd-41-puffy-strikes-again.html?page=2" title="onlamp.com">link</a onlamp.com>)...



<blockquote>

<h2>Re:pkg-config</h2>
<h3><a href="/user/avatraxiom/">avatraxiom</a> on 2007-05-04T20:00:00</h3>
What was it written in before? C? I'd highly support a move from C to Perl as an improvement. I'd never suggest moving from Perl to C, except in performance-critical areas (and we have XS for that anyhow).<br/><br/>-Max





</blockquote>


<h2>The difficulty of CPAN dependencies</h2>
<h3><a href="/user/markjugg/">markjugg</a> on 2007-05-04T15:14:26</h3>
The difficulty of deploying Perl projects with CPAN dependencies is a real problem. It's not technically a language problem, but a cultural one.<br><br>(PAR even seems like it could help a fair bit with this).<br><br>Culturally, we tend to say "Oh, and install this slew of modules from CPAN".<br><br>If instead we said "just unpack it and visit install.cgi", then we'd have more users of Perl projects.<br><br>I like that a number of PHP projects work this way. It's not a technical benefit of PHP that this trend exists, it's a different culture.<br><br>
&nbsp; &nbsp; Mark



<blockquote>

<h2>Re:The difficulty of CPAN dependencies</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-05-04T18:37:21</h3>
<p><blockquote> <div><em>I like that a number of PHP projects work this way.</em></div> </blockquote>

<p>I haven't installed a PHP application in several years.  Does this installation approach run automated tests?  (Do these applications <em>have</em> automated tests?  Given the customization possibilities of <em>php.ini</em> let alone self-compiled PHP, there are plenty of things to go wrong.)</p>



<h2>Re:The difficulty of CPAN dependencies</h2>
<h3><a href="/user/grantm/">grantm</a> on 2007-05-04T22:16:55</h3>
<p><blockquote> <div><i>The difficulty of deploying Perl projects with CPAN dependencies is a real problem. It's not technically a language problem, but a cultural one.</i></div> </blockquote>

<p>Perhaps, but in my experience it's a solved problem.  The team I work with develops and maintains a large Perl code base on Debian.  We deploy our code using packages which in turn specify dependencies on packages for CPAN modules.  In the event that we need a module that's not already in Debian or we need a later version, we build our own and put it in our repository.  The dh-make-perl utility means that for the vast majority of CPAN modules, downloading a CPAN tarball and building a<nobr> <wbr></nobr>.deb from it boils down to this one liner:</p> <p><blockquote> <div><tt>dh-make-perl --build --cpan Module::Name</tt></div> </blockquote>  <p>Of course if we were trying to deploy to 'some random hosting company' then things wouldn't be quite so simple but I don't really see how they'd be any easier if we were using another language.  In particular, this has been the major pain point in my recent adventures with Rails.</p>



<h2>Re:The difficulty of CPAN dependencies</h2>
<h3><a href="/user/drhyde/">drhyde</a> on 2007-05-05T19:50:28</h3>
<p>Bingo!  Give that man a gold star!

</p><p>Installing perl applications *sucks* even for those of us familiar with perl and how perl people expect us to work with their code.  For yer average sysadmin, trying to install a typical perl application is a nightmare.  I'm afraid that the perl community's rampant code re-use and insistence both on never re-inventing wheels and also on not bundling other peoples' code hurts us a lot here.

</p><p>Yer average python application, on the other hand (let's pick the only one I use which I know is written in python - rss2email) doesn't worry about bundling what are, to the pythonistas, standard libraries.  And strangely, it Just Works Everywhere.</p>



<blockquote>

<h2>Re:The difficulty of CPAN dependencies</h2>
<h3><a href="/user/jmason/">jmason</a> on 2007-05-08T17:57:16</h3>
I think that's just that one app; the other one I'm familiar with, buildbot, has really grotesque upgrability issues in my experience, *worse* than a perl app's.<nobr> <wbr></nobr>:(<br><br>Here, have a look at the log from the last time I upgraded the SA buildbots:<br><a href="http://wiki.apache.org/spamassassin/BuildBotUpgradeNotes" title="apache.org">http://wiki.apache.org/spamassassin/BuildBotUpgradeNotes</a apache.org><br>





</blockquote>


<h2>Re:The difficulty of CPAN dependencies</h2>
<h3><a href="/user/Lecar_red/">Lecar_red</a> on 2007-05-08T21:21:02</h3>
Not sure but would a bundle distribution help these kind of CPAN dependencies issues? <br> <br><br/><br/><a href="http://search.cpan.org/user/adamk/Module-Install-0.65/lib/Module/Install/Bundle.pm" title="cpan.org">http://search.cpan.org/user/adamk/Module-Install-0.65/lib/Module/Install/Bundle.pm</a cpan.org>





</blockquote>


<h2>In short...</h2>
<h3><a href="/user/alessio/">alessio</a> on 2007-05-04T16:38:19</h3>
To put it in few word, I'd say he doesn't have a clue. Oh, and by the way Best Practical's Request Tracker (RT) is written in Perl, and extendible with Perl. And in my organisation we moved away from Bugzilla to RT some time ago...<br><br>This happened because we needed to run BZ on PostgreSQL and not MySQL, and that alone took years and a few major releases (if it has happened at all) because of the badly-organized *SQL* code. This should say all.



<h2>Ruby is the answer?</h2>
<h3><a href="/user/perrin/">perrin</a> on 2007-05-04T17:17:50</h3>
It's going to be pretty amusing 5 years from now when all the people who were somehow tricked into thinking Ruby would be harder to write bad code in than Perl wake up and smell the pile of nasty Ruby code they've amassed.  I wonder what language they'll jump to next.



<blockquote>

<h2>Haskell! or Erlang!</h2>
<h3><a href="/user/qu1j0t3/">qu1j0t3</a> on 2007-05-09T15:45:27</h3>
n/t





</blockquote>


<h2>Rather than the bashing...</h2>
<h3><a href="/user/speters/">speters</a> on 2007-05-04T18:39:32</h3>
<p>...wouldn't it make sense to send a few patches.  OK, bomb them with patches.  The only way their going to see that <a href="http://groups.google.com/group/comp.lang.perl.misc/msg/b2f911d6d9c5cef2" title="google.com"> #11958</a google.com> applies, is to show them what they've done wrong.</p>



<blockquote>

<h2>Re:Rather than the bashing...</h2>
<h3><a href="/user/speters/">speters</a> on 2007-05-04T18:42:57</h3>
<p>For example, how many problems do you see below in Bugzilla's collectstats.pl.</p>

<code>
sub check_data_dir {
    my $dir = shift;

    if (! -d $dir) {
        mkdir $dir, 0755;
        chmod 0755, $dir;
    }
}
</code>



<blockquote>

<h2>Re:Rather than the bashing...</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2007-05-04T19:46:19</h3>
<p>Do you count each race condition as a separate error, or do you put them all into a single bucket?  The same question applies to permissions.</p>





</blockquote>

</blockquote>


<h2>No examples</h2>
<h3><a href="/user/jdavidb/">jdavidb</a> on 2007-05-08T22:16:51</h3>
<p>I like how he lists all the things that are wrong with Perl, but never provides an example of how that "wrong" thing has caused a specific problem with Bugzilla and its development, other than the "lots of modules" problem.  Indeed, as you say, languages don't reach out and make people write unmaintainable code.  If it's really such a problem, he should've been able to post code clippings illustrating the problems he mentioned.<nobr> <wbr></nobr>:)</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

