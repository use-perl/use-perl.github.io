<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Meeting Notes for 14 February 2007</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Meeting Notes for 14 February 2007</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2007-02-16T21:14:58</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 design team met by phone on 14 February 2007.  Larry, Damian, Allison, Patrick, Nicholas, and chromatic attended.  These are the notes.</p>

<p><strong>Larry:</strong></p>
<ul>
<li>more of the same from last week</li>
<li>trying to think through what the Perl 6 grammar will eventually look like</li>
<li>almost all of the recent Synopses changes came from that</li>
<li>apart from the fact that I can't actually test it, it seems to be shaping up rather nicely</li>
<li>eventually I'll need more feedback and eyeballs on it</li>
<li>completely bonkers or just a little bonkers?</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>I've liked the diffs that I've seen</li>
<li>you'll get quick feedback if I don't</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>some of those things are marginally related</li>
<li>you stare at quote declarators for a while and you see that they're the same as macros</li>
<li>I'm looking at all of the places that I can simplify now</li>
</ul>

<p><strong>Patrick:</strong></p>
<ul>
<li>I went "yay" when I saw that</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>be careful; down that road lies McCarthy, 1958</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>we have a ways to go</li>
<li>we put a bunch of stuff in the basket</li>
<li>now we're seeing what we can take out but still solve the problem at hand</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>working on getting the Perl 6 POD parser shippable</li>
<li>very close to that now</li>
<li>currently augmenting the test suite to cover everything in S26</li>
<li>then I'll ship it and a working POD 6 to XHTML translator</li>
<li>as well as a text translator</li>
<li>and a module to let you write POD 6 in Perl 5 programs</li>
<li>expect that by the middle of next week</li>
<li>taking up my time this week</li>
<li>getting performance pretty reasonable</li>
<li>been watching Larry's Synopsis diffs very happily</li>
<li>very happy with the minor change of making the short form of heredoc</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>if I can't recognize <code>:t</code>, no one else will recognize it</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>it's a very good change</li>
<li>sometimes those little ones are the very important ones</li>
<li>they can be the ones that happen all the time</li>
<li>putting together my various tours for the year</li>
<li>preparing for a talk early next month in Sydney</li>
<li>the Australian copyright collection agency</li>
</ul>

<p><strong>Patrick:</strong></p>
<ul>
<li>spent this past weekend sick</li>
<li>looked over Larry's grammar</li>
<li>find it interesting and intriguing</li>
<li>I can't wait for someone to actually parse it!</li>
<li>oh wait, that's me</li>
<li>I'm optimistic about it</li>
<li>may be able to come up with something quickly</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>trying to keep in mind the bootstrap as I go</li>
</ul>

<p><strong>Patrick:</strong></p>
<ul>
<li>it helps me with some of the other features it'll need</li>
<li>if I see anything that offends me, you'll hear about it quickly</li>
<li>I have to deal with it earlier than other people will</li>
<li>otherwise, just watching the various changes</li>
<li>I like what I've seen so far</li>
<li>hope to get lots of implementation done</li>
<li>I'll be around all day on Bug Day on Saturday</li>
<li>should be able to do the Parrot monthly release on Monday or Tuesday</li>
<li>do have reference working</li>
<li>much more work than I originally anticipated</li>
<li>next thing is compilation units and <code>END</code> blocks</li>
<li>I know how to do them</li>
<li>I just need a day to come up with a good design</li>
<li>it's not an all-at-once thing either</li>
<li>can check it in incrementally without breaking things</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>came up with an interesting approach to running Perl 5 on Parrot</li>
<li>I sent in a code example</li>
<li>curious to see what Larry and Nicholas think</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>what's the story with XS?</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>I'm punting now on that</li>
<li>we do run things through <code>xsubpp</code></li>
<li>we do have some flexibility with redefining macros</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>even 90% is better than a kick in the head</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>this approach is part of what I planned to do with Ponie</li>
<li>you're starting from a different place than I was</li>
<li>there are a lot of complex opcodes...</li>
<li>but it doesn't require modifying the Perl core</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li><code>sort</code></li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>the question keeps coming up</li>
<li>if we have a C to Parrot compiler, in what way doesn't that solve the problems?</li>
<li>apart from that being the problem</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>in the moment, Parrot is written in C</li>
<li>you can link them together</li>
<li>having C running alongside Parrot, the trick is getting them both not to realize that that's what's going on</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>sounds like you may need to try some of the hairier opcodes</li>
<li>if those seem feasable, that says something</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>I can look into that</li>
<li>may try some dynpmcs to solve the SV problems</li>
<li>right now <code>print</code> assumes that it only gets SVs with <code>POK</code></li>
<li>that doesn't help if you pass an array</li>
<li>took about an hour and a half</li>
<li>I wouldn't have done it if I thought it were more complex</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>sounds like it's worth more exploration</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>maybe with input from Nicholas as to which alleys to walk down</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>and get mugged?</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>or at least walk faster</li>
</ul>

<p><strong>Nicholas:</strong></p>
<ul>
<li>even the <code>add</code> op isn't that simple</li>
<li>some magic in there</li>
<li>you even hit polymorphism on <code>SvTYPE</code></li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>was thinking about making the PMC wrapper code do magic that way</li>
<li>makes things easier</li>
<li>may not support ties and overloading yet</li>
<li>although putting that magic in the PMC vtable methods might simplify it...</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>put out an Objects PDD revision</li>
<li>particle's reviewing it</li>
<li>pretty solid conceptual update there</li>
<li>did the refactor of <code>HLLCompiler</code> that Pheme needed</li>
<li>you can delete stages from the tree transformations</li>
<li>just need an extra subroutine to make adds work</li>
<li>Pheme needed one bit to override the OST grammar</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>as I'm doing this grammar, I keep finding that I want to have context variables for rules</li>
<li>the only way I can declare them now is by putting them in the singature as an optional argument that I just don't pass</li>
<li>seems kinda kludgey</li>
<li>should there be a way of declaring variables for a rule or regex or token</li>
<li>or should all the name components of a particular match be contextual?</li>
<li>you're parsing and find a scope declarator</li>
<li>you might parse another declaration which wants to know its scope</li>
<li>you may have to pass that down another few levels though, so a context variable might be nicer</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>have you thought about what kind of syntax you would like for that?</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>the best syntax is no syntax</li>
<li>run up the dynamic stack and look for a match</li>
<li>treat all of the named match variables as potentially contextual, you get that for free</li>
</ul>

<p><strong>Patrick:</strong></p>
<ul>
<li>we ran into something similar in TGE</li>
<li>a node in the match tree doesn't know its own name</li>
<li>"I want to know something that only my parent knows"</li>
<li>sounds like the same question</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>using <code>caller()</code> to find your own identity in Perl 5</li>
</ul>

<p><strong>Patrick:</strong></p>
<ul>
<li>we want to match all of the statement nodes</li>
<li>but none of them know that they are statement nodes</li>
<li>maybe there's a generalized solution</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>it's on the order of attribute-grammarish</li>
<li>things propagating down and up the tree</li>
</ul>

<p><strong>Patrick:</strong></p>
<ul>
<li>not sure that we're looking exactly for contextual variables</li>
<li>but I get the same positive as I did when I saw captures</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>trying to make this look as declarative as possible</li>
<li>even if some things are procedural</li>
<li>context declarations are procedural: run up the stack</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>inherited attributes, maybe</li>
</ul>

<p><strong>Damian:</strong></p>
<ul>
<li>if you're going to use the existing components of a higher-level rule</li>
<li>you start creating difficulties in the sense that you have to design your entire grammar so that names don't clash</li>
</ul>

<p><strong>Allison:</strong></p>
<ul>
<li>I don't think you'd want it on every variable through the system</li>
<li>"this variable is special; it propagates"</li>
<li>you don't want every one propagating through the tree</li>
</ul>

<p><strong>Larry:</strong></p>
<ul>
<li>we're doing that through the rule parameters right now</li>
<li>I'll keep thinking about that</li>
<li>I'm happy to stick with the parameter approach for now</li>
<li>okay, I'm not, but I'm less unhappy with that than installing a kludge</li>
</ul>

<p><strong>c:</strong></p>
<ul>
<li>how much of this information escapes the rule?</li>
<li>reminds me of the implicit environment passed around in Scheme and Lisp</li>
</ul>
</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

