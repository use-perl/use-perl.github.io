<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Cargo Cult Advising</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Cargo Cult Advising</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2006-08-09T01:22:48</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>I swear, I really do, that I'm really not responsible for what happens the next time someone says "Maybe you're suffering from buffering!" without noticing that the code prints to standard output and includes a newline character.</p>

<p>If you <em>don't</em> understand the problem, please refrain from giving a misleading and unhelpful answer -- you aren't helping the person with the problem and you're spreading misinformation that makes it <em>more</em> difficult to give people the right answers.</p>

<p>It's not difficult to understand.  I even wrote <a href="http://www.perl.com/pub/a/2005/03/31/lightning2.html?page=3">Unnecessary Unbuffering</a> to help you understand.</p></p>


<hr/>



<h2>A question then...</h2>
<h3><a href="/user/sigzero/">sigzero</a> on 2006-08-09T02:46:18</h3>
I see some of merlyn's cgi code containing "$| = 1;" but I never understood what it was for.<br><br>At least, that is where I think I saw it...



<blockquote>

<h2>Re:A question then...</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2006-08-09T03:26:11</h3>
<p>Yep, it's part of the standard header in all of his programs, not just his CGI ones.  (If you read more than one of his columns, he copies and pastes that explanation.)</p>

<p>I think it's an unnecessary pessimization in terms of clarity and performance.  Most of the time, buffering isn't a problem.  Only change the default when it is.</p>



<blockquote>

<h2>only when necessary</h2>
<h3><a href="/user/Crag/">Crag</a> on 2006-08-09T13:42:26</h3>
"Most of the time, buffering isn't a problem. Only change the default when it is."
<p>
This seems like an excellent rule of thumb even for a more general context.  Maybe I'll leave "use strict; use warnings;" out of my templates and only put them in code while its tests aren't passing.
</p><p>
(I'm only about 20% serious.)</p>



<blockquote>

<h2>Re:only when necessary</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2006-08-09T17:13:18</h3>
<p>Ah, but my default rule of thumb has an implicit "Assuming the default is good and useful..." preface.  I can see now that my buffering rule of thumb is one of the 20% of cases where that clause should be explicit.</p>





</blockquote>


<h2>Re:A question then...</h2>
<h3><a href="/user/merlyn/">merlyn</a> on 2006-08-12T14:35:46</h3>
It's probably partly legacy, partly defensive.  In the "old days", if you printed trace messages, you never saw them unless you unbuffered output.  And I frequently print trace messages while I'm "debugging" (as I describe in my <a href="http://www.stonehenge.com/merlyn/LinuxMag/col76.html" title="stonehenge.com">debugging web apps</a stonehenge.com> column).
<p>
Nowadays, I tend to use only "warn" for trace messages, so perhaps I should change my default style for non-CGI things.</p>





</blockquote>

</blockquote>


<h2>Ah, but...</h2>
<h3><a href="/user/Adrian/">Adrian</a> on 2006-08-09T07:08:47</h3>
<blockquote> <div><em> If you don't understand the problem, please refrain from giving a misleading and unhelpful answer</em></div> </blockquote>

<p>The problem with this advice is that people have to know that the don't understand the problem...</p>



<h2>It sounds like your message is not getting out</h2>
<h3><a href="/user/grantm/">grantm</a> on 2006-08-09T09:53:25</h3>
Maybe you need to turn off buffering<nobr> <wbr></nobr>:-)



<blockquote>

<h2>Re:It sounds like your message is not getting out</h2>
<h3><a href="/user/runrig/">runrig</a> on 2006-08-10T02:57:59</h3>
I hope you checked for STDOUT and a newline before you said that...I fear the consequences otherwise<nobr> <wbr></nobr>:-)





</blockquote>


<h2>And don't forget that</h2>
<h3><a href="/user/runrig/">runrig</a> on 2006-08-10T20:15:27</h3>
Reading from STDIN flushes STDOUT, whether or not there was a newline. Though I'm told it behaved slightly differently in past versions of ActiveState perl (5.6.something?) on Win32 before it was compiled with USE_PERLIO.





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

