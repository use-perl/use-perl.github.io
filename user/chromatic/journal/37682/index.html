<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Design Minutes for 15 October 2008</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Design Minutes for 15 October 2008</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2008-10-17T05:46:21</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 design team met by phone on 15 October 2008.  Larry, Allison, Will, Jerry, Patrick, Nicholas, and chromatic attended.</p>

<p><strong>Patrick:</strong></p>

<ul>
<li>presented at the Pittsburgh Perl Workshop</li>
<li>talked into being the keynote speaker about Perl 6</li>
<li>gave a more direct talk on contributing to Rakudo and the test suite</li>
<li>I don't think I even presented a single line of PIR at the conference</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>I consider that a great success</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>depends on the line of PIR</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I took the MMD failures out of the regression suite temporarily</li>
<li>didn't want to go into the weekend with test failures</li>
<li>we're still waiting for a fix there, but there's no particular rush</li>
<li>4409 tests passing now, up slightly from last week</li>
<li>up slightly from even yesterday (30 more)</li>
<li>worked with Jerry on getting <code>is export</code> to work in Rakudo</li>
<li>he's done all the work</li>
<li>I just give him guidelines</li>
<li>worked with Stephen Weeks to refactor PGE and PCT to use hierarchical names instead of string names</li>
<li>we merged that</li>
<li>but it broke TGE and Pheme and Tcl and another language</li>
<li>PGE expects to use strings to match the match object classes</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>I'm pretty sure I know exactly which three lines of code to patch</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>I sent in a patch</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I'll fix PCT to look in the right place for those</li>
<li>if you don't hear that I've done it, I haven't beaten you to it</li>
<li>cleaned up a lot of namespace issues in Rakduo</li>
<li>fixed some mis-implementations</li>
<li>trying to get nested namespaces to work so that Perl 6 can use them</li>
<li>a lot of "two steps forward, one step back"</li>
<li>updated the progress graph program</li>
<li>now it shows the total size of the official test suite</li>
<li>the graphs themselves will change a little bit</li>
<li>I'll make an explanation of that</li>
<li>still really want to get to lexical variables or Rakudo's container value model</li>
<li>I'll do that this weekend, when I have uninterrupted time</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>cleaning up MMD problems from after the merge</li>
<li>started a branch for the calling conventions</li>
<li>Andrew Whitworth is working on that</li>
<li>wrote a merging and branching guide based on my good and bad experiences</li>
<li>thinking about things we can do to make merging cleaner</li>
<li>maybe a checklist of people to talk to before you do a merge</li>
<li>Patrick, that TODO test you added for the Complex PMC?</li>
<li>I have it not segfaulting anymore</li>
<li>it's always returning 0 now</li>
<li>it creates a new PMC that hasn't been set to the right values</li>
<li>I think it's a bug in the old proxy code</li>
<li>we probably need to remove that old code and it'll fix it</li>
</ul>

<p><strong>Will:</strong></p>

<ul>
<li>working on Partcl still</li>
<li>have another test file parsing</li>
<li>hoping to use the upcoming Parrot release as a new baseline</li>
<li>the TGE issue is the blocker for that</li>
<li>trying to close all of the easy tickets I can find in Parrot</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>went to PPW last weekend</li>
<li>it was very productive and too short</li>
<li>spoke at Bug Labs about porting Parrot and Rakudo to the Bug</li>
<li>they ported Perl 5 just before the conference</li>
<li>some people were playing with it</li>
<li>it's an ARM processor which runs OpenEmbedded Linux</li>
<li>if it gets ported, we can run on other devices that size</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>that's definitely in our target range of uses</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>spoke to someone about NVIDIA about using their CUDA GPU API for hyperop support</li>
<li>that looks promising</li>
<li>also made the <code>is export</code> trait work</li>
<li>includes tag sets</li>
<li>committed failing tests for <code>import()</code></li>
<li>working on passing those, may have that done by the end of the call</li>
<li>discussed branching and merging philosophy with Allison</li>
<li>put up a Wiki for the Parrot Developers Conference</li>
<li>has questions which need answering</li>
<li>I'll mail the list, requesting answers</li>
<li>that'll give us an idea of logistical questions, including budgeting</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>on specifications, various simplifications</li>
<li>expressions in conditionals are not special with respect to blocks that might appear in argument lists</li>
<li>if you say <code>for map { ... }</code>, it parses the way the user expects</li>
<li>the block that the <code>for</code> expects must occur where an infix is expected</li>
<li>that simplification seems more DWIMmy</li>
<li>I nailed down the operator modifying adverbs</li>
<li>now applied on the basis of precedence</li>
<li>no longer a special mechanism</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>yay</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>there will be a few FAQs from that</li>
<li>by and large it's a win though</li>
<li>going back and forth on the subject of unpacking arrays and hashes</li>
<li>someone noticed that the standard parser didn't actually handle those</li>
<li>I went to add them</li>
<li>discovered that the hash unpacking syntax using curlies was terribly ambiguous, especially inside a pointy block (arrow lambda)</li>
<li>tried to rescue that, but in the long run decided that hashes have to be unpacked with signatures, rather than curly notation</li>
<li>left in the square bracked notation for unpacking lists</li>
<li>it contributes to clarity</li>
<li>decided that enumeration types ought to define a <code>.pick</code> operator</li>
<li>you can do <code>Bool.pick</code> and it'll return true or false</li>
<li>thinking a lot about IRC and on the mailing lists</li>
<li>how do you deal nicely about serialized token lists in the order that the tokens occurred in the original?</li>
<li>how do those bind to signatures usefully?</li>
<li>given that we want match objects to behave like captures</li>
<li>did a lot of hacking on <em>STD.pm</em></li>
<li>somewhat driven by adding options to <code>viv</code></li>
<li>it has several options now</li>
<li>a match option attaches the old match objects to a position</li>
<li>a positional option</li>
<li>the main option is a <code>p6</code> option which attempts to spit out the exact Perl 6 as originally parsed</li>
<li>discovered various places where I was throwing away information</li>
<li>that leads to trying to keep track of tokens and match interstices</li>
<li>also several other people are trying to use the STD output to try to produce other things</li>
<li>they're discovering missing information that I've been hacking in</li>
<li>it threw away all of the information on <code>elsif</code>s and <code>else</code>s</li>
<li>that made it hard</li>
<li>removing cyclic references which prevent analysis of the tree as a DAG</li>
<li>discovered a fundamental bug in the operator precedence parser</li>
<li>reducing if there were any terms left</li>
<li>it should have reduced if there were any operators left</li>
<li>it didn't reduce any unary operators at the end as it should have</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>I fixed some bugs</li>
<li>started looking at the DAG, but couldn't find much documentation</li>
<li>do you have a getting started guide, or do you say "Look at this code and think really hard?"</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>it's the latter right now</li>
<li>but I could at least put a help message on it</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>a list of node types and their attributes should suffice</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>that's the kind of documentation that quickly becomes a lie</li>
<li>right now, it generates classes on the fly as it sees nodes</li>
<li>it could at least tell you what it's doing as it's doing it</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>looked like it could be fun to play with for a weekend</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>in my copious free time</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>right now, I can look up a namespace by an array, by a key, or by a string</li>
<li>I can create a class by a namespace, a key, or a string</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>but not an array?</li>
<li>I thought we fixed that</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>we work around that in P6Object</li>
<li>get look up the namespace by the array</li>
<li>and then we look up the class by the namespace</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>we should be symmetrical about this</li>
<li>your workaround should move into the Class PMC</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>you have to do that for <code>subclass</code>, <code>isa</code></li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li><code>get_class</code></li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>that specifically does not work</li>
<li>that's what Stephen Weeks and I tried</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>submit a ticket</li>
<li>there's no reason they shouldn't take arrays</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>it's not a high priority at all</li>
<li>just a discontinuity that stunned me when I ran into it</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>there's a list of tagsets without commas in <code>is export</code></li>
<li><em>STD.pm</em> allows it</li>
<li>but it seems to open shift-reduce problems with multiple terms in a row</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>two adverbs in a row are always considered one term</li>
<li>just a sequence of adverbs</li>
<li>whenever you parse one adverb, you look for one more</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>they're not adverbs; they're terms</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>it works for terms too</li>
<li>whenever you see a colon pair</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>if I write <code>3 + :a :b</code></li>
<li>the <code>:a :b</code> is a term</li>
<li>what kind of thing is that?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>a list of pairs</li>
<li>or a mapping maybe</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>that's the same as saying <code>3 + 2</code></li>
<li>the <code>:b</code> would not be an adverb on the plus</li>
<li>inside an argument list, <code>:a :b</code> should act like two arguments</li>
<li>not a list of two pairs</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>if it's coming in as a list of named parameters, it doesn't care</li>
<li>if it's in a listy area, it gets interpolated as a list</li>
<li>if you bring them in as a scalar parameter... you can't</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>is it the came as <code>:a, :b</code>?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>in list context, yes</li>
<li>when you're looking for named args, yes</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>if I had a subroutine that took a positional parameter and a named parameter of a, and I call it with <code>:a :b</code></li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>it acts like there's a comma between them</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>is there a way to see them as a single term?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>if you put them in parentheses</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>they solve everything</li>
<li>if I see <code>:a :b</code> in an argument list, I have to translate as though they were separate arguments</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>I guess</li>
<li>that's the way it works currently</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>if we have a term that's a list of colon pairs</li>
<li>we have to do some special unpacking stuff when we turn that into an argument list</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>you call <code>.list</code> on it?</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>this is at compile time</li>
<li>they have to be interpolated into the capture properly</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>now that we've changed how adverbs work, they stack up nicely in any case without any special rule</li>
<li>if we removed the special rule, they'd work with the comma</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>getting rid of the quantifiers with the colon pair in <code>noun</code>?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li><code>1 + :a :b</code> would apply the <code>:b</code> to the <code>+</code></li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>it gets weird when dealing with it inside the argument work</li>
<li>we can make it work, but...</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>the phrase "make it work" means there's something suboptimal</li>
<li>let me think about it a while longer</li>
<li>the way the adverbials parse now would apply them to the same operator</li>
<li>that was the main motivation for stacking them like that, to have multiple of them in the adverbial slot</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I thought part of that was for the filetest operators</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>that's another one</li>
<li>let me think about that one</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>we'll assume commas there for the time being</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>sounds good</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>I changed the tests to use commas</li>
</ul></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

