<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Smalltalkers Still Get it Right</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Smalltalkers Still Get it Right</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2008-08-06T05:43:35</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><blockquote><em>Next time someone considers rewriting an app into (insert currently fashionable language here), ask yourself whether a three year long timeout will serve anyone's interests.</em></blockquote>

<p>&mdash; <a href="http://www.cincomsmalltalk.com/blog/blogView">James Robertson</a>, <a href="http://www.cincomsmalltalk.com/blog/blogView?showComments=true&printTitle=The_Wages_of_Pointless_Rewrites&entry=3394981268">The Wages of Pointless Rewrites</a></p>

<p><em>Three years</em> to migrate a working application from mod_perl to PHP and (reportedly) Erlang?  I could write my own virtual machine from scratch if funded full-time for three years.  (Yes, I'm aware of certain ironies about rewriting a virtual machine over the period of seven years and counting, but I can count our paying customers on zero hands.)</p></p>


<hr/>



<h2>Why does this question come up?</h2>
<h3><a href="/user/cbrandtbuffalo/">cbrandtbuffalo</a> on 2008-08-06T12:31:36</h3>
I was in a discussion over lunch one day at OSCON this year over the same issue. "Would you rewrite something from language x to y?" The issues have little to do with x or y, they are all business based (or should be).<br> <br><br/><br/>What can't you do with x that the business needs that you could do with y? Can you not find developers/support for x? What would it cost to train developers vs. rebuilding? Not to mention the arguments for sticking with tested code versus all the newly bugified code you'll generate over the next 3 years.



<h2>Sometimes</h2>
<h3><a href="/user/djberg96/">djberg96</a> on 2008-08-06T14:14:34</h3>
I'd gladly take a three year timeout to rewrite the steaming pile of garbage known as <a href="http://en.wikipedia.org/wiki/TIRKS" title="wikipedia.org">TIRKS</a wikipedia.org>. It's an ancient, slow, expensive, horribly licensed 3270 app that's a major pain to interface with, but survives largely due to historical reasons.
<p>
However, rumor has it people (internally) have tried and failed to replace it in the past. Also, it's an internal facing app, so perhaps there's more slack there.</p>



<h2>FSVO &quot;Right&quot;</h2>
<h3><a href="/user/dngor/">dngor</a> on 2008-08-06T18:28:39</h3>
<p>
Hi, chromatic.  I work on Delicious, and I've been with the site since before Yahoo! bought it.
</p><p>
Delicious was not merely migrated.  It was redesigned and rewritten from the database up.  Several months of development were spent in design and QA (we were in <a href="http://blog.delicious.com/blog/2007/09/taste-test.html" title="delicious.com">limited beta since September</a delicious.com>).  The additional forethought and care were warranted since a lot of people rely on us every day.
</p><p>
Delicious was originally designed for a relatively small number of people.  It has been extended, patched, optimized, sharded and cached over time to serve five million users and hundreds of millions of bookmarks.  It was always just <a href="http://blog.delicious.com/blog/2006/09/million.html" title="delicious.com">barely ahead of the growth curve</a delicious.com>.  In the end, it was too tightly coupled to its small-scale roots to keep up with our accelerating growth.
</p><p>
The languages we chose are the right tools for their respective jobs.  For example, the back end is mainly C++ (which might actually be fashionable compared to Smalltalk).  There's even a fair amount of Perl to keep the CPUs and language advocates warm.
</p><p>
It's a longer story that that, of course.  We'll be posting more detail to <a href="http://blog.delicious.com/" title="delicious.com">our blog</a delicious.com> soon.
</p>



<blockquote>

<h2>Re:FSVO &quot;Right&quot;</h2>
<h3><a href="/user/jrockway/">jrockway</a> on 2008-08-06T20:49:32</h3>
Why did you throw away everything, though?  You could have fixed the architecture without changing languages.



<blockquote>

<h2>Re:FSVO &quot;Right&quot;</h2>
<h3><a href="/user/dngor/">dngor</a> on 2008-08-07T07:30:57</h3>
<p><div class="quote"><p>Why did you throw away everything, though?  You could have fixed the architecture without changing languages.</p></div><p>
Oh, sure.  Everything is just a Simple Matter Of Programming.<nobr> <wbr></nobr><tt>:)</tt>
</p><p>
PHP on the front end was an administrative requirement.  Switching the front end to PHP did not unduly extend our development time.  I'm free to tell you this because our founder has already said as much in <a href="http://www.reddit.com/r/programming/comments/6v4yw/how_yahoo_dropped_the_delicious_ball_with_a/" title="reddit.com">the surprisingly balanced reddit thread in response to James' article</a reddit.com>.
</p><p>
We considered simply bolting a PHP front end onto the original site, but it was not practical.  The original user interface was tightly coupled to the site's business logic, and we estimated that the effort to extricate them would be on par with redesigning them.  Also, putting new lipstick on the same old pig would not have improved scalability.  We still would have needed to rewrite the back end.
</p><p>
Among other reasons, we chose C++ for the new back end because runtime performance was an overwhelming design goal.  Perhaps a really good Perl implementation of the site could have changed people's minds, but we didn't have one to point at.
</p><p>
Unfortunately I need to be writing this up for our blog rather than in bits and pieces around the web.  Any further answers will have to wait, but questions are certainly welcome.
</p>





</blockquote>


<h2>Re:FSVO &quot;Right&quot;</h2>
<h3><a href="/user/chromatic/">chromatic</a> on 2008-08-06T21:56:30</h3>
<blockquote><div><p> <em>The languages we chose are the right tools for their respective jobs.</em></p></div> </blockquote><p>I don't know your particular constraints, and I'm happy to accept that, but a three year rewrite with an eleven month beta period seems troubled -- unless that was the schedule from the beginning.  I very much look forward to a retrospective.</p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

