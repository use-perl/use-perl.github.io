<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>use.perl.org journal of chromatic: Perl 6 Design Minutes for 01 July 2009</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="/static/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the
bottom of the topbar */
      }
    </style>
    <link href="/static/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script
src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">
  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse"
data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/"><img src="/static/img/slashhead.png"/></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About</a></li>
              <li><a href="/authors/">Authors</a></li>
              <li><a href="/journals/">Journals</a></li>
              <li><a href="/stories/">Stories</a></li>
            </ul>
            <p class="navbar-text">All the Perl that's Practical to Extract and Report</p>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>



<div class="container">

<div class="row">

<div class="span4">
<h1>Perl 6 Design Minutes for 01 July 2009</h1>
<h2><a href="/user/chromatic/">chromatic</a> on 2009-08-06T02:06:09</h2>
</div> <!-- /span4 -->


<div class="span8">
<p><p>The Perl 6 design team met by phone on 01 July 2009.  Larry, Allison, Patrick, Jerry, and chromatic attended.</p>

<p><strong>Larry:</strong></p>

<ul>
<li>Daniel and I are trying to break <code>use</code> and <code>require</code> into primitives</li>
<li>decided on unambiguous authorites as creation dates for the lineage as the least incorrect default</li>
<li>also with provisions for abandoning a lineage or providing a local override</li>
<li>constant declarator currently has <code>our</code> scoping rather than <code>my</code> scoping</li>
<li>constant may end up being a routine declarator like macros are</li>
<li>lots of IRC conversation with Jonathan about how multimethods dispatch in the presence of constraints</li>
<li>clarified that</li>
<li>conjecture about the <code>:D</code> and <code>:U</code> modifiers on types for defined and undefined</li>
<li>clarified that the prefix syntax category is the only way to make a named unary</li>
<li>don't automatically get one with a single-argument function, which Perl 5 does</li>
<li>clarified some longest token whitespace semantics</li>
<li>defined some UTF constrained buffer types</li>
<li>added some Rat native types</li>
<li>lots of refactoring of STD</li>
<li>reordered things</li>
<li>renamed and commented variables for consistency and meaning</li>
<li>especially context vars</li>
<li>playing with the symbol table stuff to bootstrap it with <code>use</code> statements</li>
<li>the core Setting's symbol table is now generated from Perl 6 code</li>
<li>can actually call <code>TOP</code> instead of <code>comp_unit</code></li>
<li>STD now supports the <code>PROCESS</code> namespace</li>
<li>supports a separate <code>SETTING</code> namespace from your core namespace</li>
<li>the <code>Test</code> and <code>Debug</code> packages are now on their own</li>
<li>symbol table YAML files now use <em>.syml</em>, a contraction of <em>sym</em> and <em>yaml</em></li>
<li>symbol file for <em>.pm</em> files include <em>.pm</em>, but symbol files for Settings do not use <em>.setting</em></li>
<li>you can't <code>use</code> a setting file directly</li>
<li>they're supposed to be the surrounding scope, not pulled into the current scope as <code>use</code> does</li>
<li>getting enums and constants to work correctly</li>
<li>STD now initializes all of the <code>CORE</code>, <code>GLOBAL</code>, and <code>UNIT</code> settings</li>
<li>the symbol table now installs <code>&amp;</code> variants of the types</li>
<li>you can refer to them as if they were functions</li>
<li>added a <code>snaptest</code> target to STD testing so that I can test a snapshot of the compiler against the entire <em>t/</em> directory</li>
</ul>

<p><strong>Allison:</strong></p>

<ul>
<li>submitted the PIR book to the printer</li>
<li>they're processing the cover and interior</li>
<li>working on the installation problems</li>
<li>doing an install, deleting the build directory, figuring out what breaks and why</li>
<li>mostly working with Tcl, will also do that with Rakudo</li>
<li>working on Parrot Foundation stuff: non-profit, election membership, etc</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>lots of work on the Parrot VM Workshop and YAPC</li>
<li>released Rakduo #18</li>
<li>talking to Jonathan about doing #19 or #20, just so we have someone else who's done one</li>
<li>VM workshop went very well, writing a summary about that</li>
<li>30 - 40 participants</li>
<li>introduced PIR, PCT, a variety of things</li>
<li>tired by mid-Saturday, left it open for people to work on their own</li>
<li>they accomplished some impressive things</li>
<li>a couple of people wrote their own compilers in a couple of hours</li>
<li>well on their way to achieving their goals</li>
<li>unconference style on the second day</li>
<li>talked about embedded Parrot, installation issues, Parrot profiling, etc</li>
<li>came up with ideas and plans to make installation better</li>
<li>Todd Olson used DTrace for some useful benchmarking and profiling</li>
<li>even at the PIR level</li>
<li>didn't have to add any direct modifications to Parrot himself</li>
<li>he's sent me his scripts and basic information</li>
<li>can use that as yet another profiling toolchain</li>
<li>presented my Perl 6 talks at YAPC</li>
<li>lots of people looking at that</li>
<li>SD Times called and interviewed me (and Allison) to dispel myths about Perl 6</li>
<li>interview came out okay</li>
<li>went to talks, talked to a variety of people</li>
<li>recruited people to write code for and with Perl 6</li>
<li>should be seeing more users and contributors over the next couple of weeks</li>
<li>fixed a few Parrot bugs, some Unicode things</li>
<li>now we can define built-in operators in the Setting in Perl 6, rather than in PIR</li>
<li>now we can write more of the Setting in Perl 6</li>
<li>people are starting to migrate operators from PIR into the Settings</li>
<li>that was part of my first Vienna.pm day</li>
<li>spent yesterday cleaning up tickets as part of that day</li>
<li>Jonathan did the same</li>
<li>we closed 15-20 tickets; the absolute number wasn't quite 20</li>
<li>other people filed tickets while we were closing them</li>
<li>will do another Rakudo day this week</li>
<li>I'll fix up constant handling, rewrite properties on containers, and perhaps implement <code>BEGIN</code> blocks</li>
<li>trying to make arrangements to go to Lisbon</li>
<li>biggest blocker is GC bugs and memory corruption in Parrot</li>
<li>hard to test around those</li>
<li>whenever a Rakudo spectest fails, if it runs with <code>-G</code> I commit</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>at YAPC::NA last week</li>
<li>helped organize PVMW</li>
<li>Patrick did a spectacular job teaching and giving feedback</li>
<li>happy with what came out of that workshop</li>
<li>a lot of people have a better understanding of Parrot and Rakudo now</li>
<li>several people talked to me after the workshop and expressed interest in contributing more to both projects</li>
<li>gave a Parrot Foundation keynote at the conference</li>
<li>my laptop crashed hours before my flight</li>
<li>met with many folks in the hallway track</li>
<li>spoke to a couple of potential PaFo and Rakudo sponsors</li>
<li>spent the rest of my week on PaFo work</li>
<li>will continue for the near future, at least until our elections at our annual meeting</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>fixed a few bugs</li>
<li>will fix a few more</li>
<li>talked to Christoph about writing a good callgrind-compatible profiling core for Parrot, will start on that</li>
<li>led a retrospective about Parrot development</li>
<li>will make some changes, but we have a lot to be proud of</li>
<li>started more discussion about L1 and how Parrot will look in the next 18 months</li>
<li>blocking on interesting bugs I can reproduce and fix</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>on <code>&amp;Type</code> in the symbol table, what will that do?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>intended to prevent symbol table lookup from having to do multiple probes</li>
<li>if someone says <code>&amp;Int</code>, it just finds the type</li>
<li>instead of having to fail to find it, then try again as <code>Int</code></li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>the case where someone says <code>&amp;Int</code>?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>yes, where someone wants the conversion function that gives an <code>Int</code></li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>when might we see light at the end of the tunnel on the captures discussion?</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>we've seen lots of lights</li>
</ul>

<p><strong>c:</strong></p>

<ul>
<li>there are four lights!</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>if you and I and Daniel can agree on something, it's about right</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I'll agree on what you decide</li>
<li>have no strong horse in this race</li>
<li>but I want something consistent that works</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>and does what people expect</li>
<li>which is not necessarily consistent</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>having thought about binding and such, it's a long fight</li>
<li>I'm sure it is for you too</li>
<li>the recent changes, where parens return captures or commas produce them, seem like we've gone from captures being an advanced topic to use when doing funny things with argument passing to captures being something you fundamentally have to understand to do something as simple as <code>my $a = (1, 2, 3);</code></li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>that's always been SMOP's take on captures</li>
<li>I feel the same way about <code>minmax</code> at this point</li>
<li>no one will believe the way it works</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I couldn't believe its definition</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>it's probably not well-formed</li>
<li>there are probably ways to fix it</li>
<li>might remove it, but it's not high on my list of priorities</li>
<li>hate to take it out from under people after they've put days of effort into it</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>the days of effort for me was identifying what it's supposed to do</li>
<li>it's a one-line function in the Setting once I understood it</li>
<li>taking it out will save us one line of code</li>
</ul>

<p><strong>Jerry:</strong></p>

<ul>
<li>is it in S29?</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>it's an operator in S03</li>
<li>there's a <code>.minmax</code> method available on ranges</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>another strike against the operator</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>I was trying to reconcile them in my brain</li>
<li>they seem totally unrelated</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>there's something zippish</li>
<li>a bunch of things have ranges</li>
<li>you want the minimum of all the mins and the maximum of all of the maximums</li>
<li>you don't want to take them all apart and put them all together again</li>
<li>probably just a library function</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>might be worth an operator if you had a <code>reduce</code> form that worked well</li>
<li>anyway, a definitive decision on captures would make me happier</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>has various implications for usability by mere mortals</li>
<li>we want to get it right</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>quantified captures in regexps produce captures instead of arrays</li>
<li>that feels nice to me</li>
</ul>

<p><strong>Larry:</strong></p>

<ul>
<li>that feels nice to me</li>
<li>"The <code>?</code> quantifier gives me an array, but I just want to know if it's there!"</li>
<li>sounds like the capture DWIM</li>
<li>it'll probably return a capture, even if other quantifiers don't</li>
<li>your question "What does <code>+</code> mean?" is very appropriate</li>
<li>what are the failure modes?</li>
<li>how silent or loud are they?</li>
<li>how much of this is coverable in education?</li>
<li>the more of that you have, the more you can't claim that it's a little language to learn to begin with</li>
<li>definitely a design issue in my ballpark</li>
</ul>

<p><strong>Patrick:</strong></p>

<ul>
<li>any clarification will speed Rakudo to getting rid of many things it does wrong currently</li>
</ul></p>





</div> <!-- /span8 -->

</div> <!-- row -->
</div> <!-- /container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

  </body>
</html>

